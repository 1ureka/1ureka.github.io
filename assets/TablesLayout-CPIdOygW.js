import{r as h,u as $,ap as Se,a6 as jt,a0 as wt,j as o,s as w,c as R,d as L,x as Ge,am as St,m as A,F as _,O as B,n as v,aQ as Le,o as Be,g as q,a as V,b as E,aI as Tt,aJ as Rt,a7 as Pt,I as Q,Q as Fe,ai as kt,aR as It,aS as oe,aT as Ae,v as Ke,p as P,z as Bt,P as Je,a8 as Qe,B as ae,t as Me,S as Mt}from"./Toast-DyYNk4-H.js";import{a as Ye}from"./ArrowDropDownRounded-Booj0GW0.js";import{A as $t}from"./AddRounded-DPjuEatA.js";import{u as le}from"./url-DQkdvWoa.js";import{e as Lt,g as Ft,a as At}from"./main-CSCFbbbC.js";import{c as zt}from"./react-CwFxSp_H.js";import{a as Nt,l as ue,M as Te}from"./MenuItem-CaZ61uO_.js";import{D as ge,I as Ot}from"./ExpandMoreRounded-C6udOSym.js";import{g as Ht,l as se,F as Xe,L as X}from"./FilterAltRounded-Dv_v5ln7.js";import{u as Ze}from"./utils-3cWt-LU5.js";import{z as ze}from"./index-mSkvzYyn.js";import{t as Dt}from"./array-l11GhOAf.js";import{t as et,u as tt}from"./tryCatch-Dx5fmaYy.js";import{T as $e}from"./DarkModeRounded-Nq1sIAOR.js";import{C as ee}from"./Checkbox-C2RmcRmD.js";import{u as Ut}from"./ErrorOutlineRounded-zTQCHSuR.js";import{S as ne}from"./Skeleton-B4KrwzUk.js";import{a as Et,K as Wt}from"./KeyboardArrowRight-DvmQWzbf.js";import{T as qt}from"./Toolbar-C8NndNHH.js";import{S as Vt}from"./SortRounded-DZLk78US.js";import"./SQLiteClient-BCwpceSH.js";import"./routes-Dr3OAPvi.js";import"./DataExplorationRounded-DizMA7jc.js";import"./RefreshRounded-CtptDvbj.js";import"./NotificationsRounded-BFj30jCL.js";import"./fuse-_0KYXJjK.js";import"./useMutation-D5ZFqPdF.js";import"./dayjs.min-Ce2n-SoD.js";import"./Badge-DmwQitVd.js";import"./DownloadRounded-CHNfy66g.js";import"./dividerClasses-DJNea_kN.js";import"./SwitchBase-Do9Pz7cl.js";const _t=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]},Gt=e=>{const{alignItems:t,classes:s,dense:n,disabled:r,disableGutters:i,divider:a,selected:c}=e,l=L({root:["root",n&&"dense",!i&&"gutters",a&&"divider",r&&"disabled",t==="flex-start"&&"alignItemsFlexStart",c&&"selected"]},Ht,s);return{...s,...l}},Kt=w(Ge,{shouldForwardProp:e=>St(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:_t})(A(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${se.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${se.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${se.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${se.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),Re=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:i=!1,component:a="div",children:c,dense:p=!1,disableGutters:l=!1,divider:d=!1,focusVisibleClassName:m,selected:y=!1,className:g,...u}=n,b=h.useContext(Se),x=h.useMemo(()=>({dense:p||b.dense||!1,alignItems:r,disableGutters:l}),[r,b.dense,p,l]),f=h.useRef(null);jt(()=>{i&&f.current&&f.current.focus()},[i]);const C={...n,alignItems:r,dense:x.dense,disableGutters:l,divider:d,selected:y},j=Gt(C),M=wt(f,s);return o.jsx(Se.Provider,{value:x,children:o.jsx(Kt,{ref:M,href:u.href||u.to,component:(u.href||u.to)&&a==="div"?"button":a,focusVisibleClassName:R(j.focusVisible,m),ownerState:C,className:R(j.root,g),...u,classes:j,children:c})})}),Jt=e=>{const{classes:t,inset:s,primary:n,secondary:r,dense:i}=e;return L({root:["root",s&&"inset",i&&"dense",n&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},Nt,t)},Qt=w("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${ue.primary}`]:t.primary},{[`& .${ue.secondary}`]:t.secondary},t.root,s.inset&&t.inset,s.primary&&s.secondary&&t.multiline,s.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Le.root}:where(& .${ue.primary})`]:{display:"block"},[`.${Le.root}:where(& .${ue.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),xe=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiListItemText"}),{children:r,className:i,disableTypography:a=!1,inset:c=!1,primary:p,primaryTypographyProps:l,secondary:d,secondaryTypographyProps:m,slots:y={},slotProps:g={},...u}=n,{dense:b}=h.useContext(Se);let x=p??r,f=d;const C={...n,disableTypography:a,inset:c,primary:!!x,secondary:!!f,dense:b},j=Jt(C),M={slots:y,slotProps:{primary:l,secondary:m,...g}},[z,F]=B("root",{className:R(j.root,i),elementType:Qt,externalForwardedProps:{...M,...u},ownerState:C,ref:s}),[G,N]=B("primary",{className:j.primary,elementType:v,externalForwardedProps:M,ownerState:C}),[k,S]=B("secondary",{className:j.secondary,elementType:v,externalForwardedProps:M,ownerState:C});return x!=null&&x.type!==v&&!a&&(x=o.jsx(G,{variant:b?"body2":"body1",component:N!=null&&N.variant?void 0:"span",...N,children:x})),f!=null&&f.type!==v&&!a&&(f=o.jsx(k,{variant:"body2",color:"textSecondary",...S,children:f})),o.jsxs(z,{...F,children:[x,f]})}),Yt=Be(o.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"})),Xt=Be(o.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"})),ot=h.createContext();function Zt(e){return q("MuiTable",e)}V("MuiTable",["root","stickyHeader"]);const eo=e=>{const{classes:t,stickyHeader:s}=e;return L({root:["root",s&&"stickyHeader"]},Zt,t)},to=w("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.stickyHeader&&t.stickyHeader]}})(A(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),Ne="table",st=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTable"}),{className:r,component:i=Ne,padding:a="normal",size:c="medium",stickyHeader:p=!1,...l}=n,d={...n,component:i,padding:a,size:c,stickyHeader:p},m=eo(d),y=h.useMemo(()=>({padding:a,size:c,stickyHeader:p}),[a,c,p]);return o.jsx(ot.Provider,{value:y,children:o.jsx(to,{as:i,role:i===Ne?null:"table",ref:s,className:R(m.root,r),ownerState:d,...l})})}),ie=h.createContext();function oo(e){return q("MuiTableBody",e)}V("MuiTableBody",["root"]);const so=e=>{const{classes:t}=e;return L({root:["root"]},oo,t)},no=w("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),ro={variant:"body"},Oe="tbody",nt=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableBody"}),{className:r,component:i=Oe,...a}=n,c={...n,component:i},p=so(c);return o.jsx(ie.Provider,{value:ro,children:o.jsx(no,{className:R(p.root,r),as:i,ref:s,role:i===Oe?null:"rowgroup",ownerState:c,...a})})});function ao(e){return q("MuiTableCell",e)}const lo=V("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),io=e=>{const{classes:t,variant:s,align:n,padding:r,size:i,stickyHeader:a}=e,c={root:["root",s,a&&"stickyHeader",n!=="inherit"&&`align${E(n)}`,r!=="normal"&&`padding${E(r)}`,`size${E(i)}`]};return L(c,ao,t)},co=w("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${E(s.size)}`],s.padding!=="normal"&&t[`padding${E(s.padding)}`],s.align!=="inherit"&&t[`align${E(s.align)}`],s.stickyHeader&&t.stickyHeader]}})(A(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Tt(_(e.palette.divider,1),.88):Rt(_(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${lo.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),T=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableCell"}),{align:r="inherit",className:i,component:a,padding:c,scope:p,size:l,sortDirection:d,variant:m,...y}=n,g=h.useContext(ot),u=h.useContext(ie),b=u&&u.variant==="head";let x;a?x=a:x=b?"th":"td";let f=p;x==="td"?f=void 0:!f&&b&&(f="col");const C=m||u&&u.variant,j={...n,align:r,component:x,padding:c||(g&&g.padding?g.padding:"normal"),size:l||(g&&g.size?g.size:"medium"),sortDirection:d,stickyHeader:C==="head"&&g&&g.stickyHeader,variant:C},M=io(j);let z=null;return d&&(z=d==="asc"?"ascending":"descending"),o.jsx(co,{as:x,ref:s,className:R(M.root,i),"aria-sort":z,scope:f,ownerState:j,...y})});function po(e){return q("MuiTableContainer",e)}V("MuiTableContainer",["root"]);const uo=e=>{const{classes:t}=e;return L({root:["root"]},po,t)},xo=w("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),mo=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableContainer"}),{className:r,component:i="div",...a}=n,c={...n,component:i},p=uo(c);return o.jsx(xo,{ref:s,as:i,className:R(p.root,r),ownerState:c,...a})});function go(e){return q("MuiTableFooter",e)}V("MuiTableFooter",["root"]);const ho=e=>{const{classes:t}=e;return L({root:["root"]},go,t)},bo=w("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),yo={variant:"footer"},He="tfoot",rt=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableFooter"}),{className:r,component:i=He,...a}=n,c={...n,component:i},p=ho(c);return o.jsx(ie.Provider,{value:yo,children:o.jsx(bo,{as:i,className:R(p.root,r),ref:s,role:i===He?null:"rowgroup",ownerState:c,...a})})});function fo(e){return q("MuiTableHead",e)}V("MuiTableHead",["root"]);const vo=e=>{const{classes:t}=e;return L({root:["root"]},fo,t)},Co=w("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),jo={variant:"head"},De="thead",at=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableHead"}),{className:r,component:i=De,...a}=n,c={...n,component:i},p=vo(c);return o.jsx(ie.Provider,{value:jo,children:o.jsx(Co,{as:i,className:R(p.root,r),ref:s,role:i===De?null:"rowgroup",ownerState:c,...a})})}),wo=h.forwardRef(function(t,s){const{backIconButtonProps:n,count:r,disabled:i=!1,getItemAriaLabel:a,nextIconButtonProps:c,onPageChange:p,page:l,rowsPerPage:d,showFirstButton:m,showLastButton:y,slots:g={},slotProps:u={},...b}=t,x=Pt(),f=H=>{p(H,0)},C=H=>{p(H,l-1)},j=H=>{p(H,l+1)},M=H=>{p(H,Math.max(0,Math.ceil(r/d)-1))},z=g.firstButton??Q,F=g.lastButton??Q,G=g.nextButton??Q,N=g.previousButton??Q,k=g.firstButtonIcon??Yt,S=g.lastButtonIcon??Xt,I=g.nextButtonIcon??Et,ce=g.previousButtonIcon??Wt,de=x?F:z,be=x?G:N,pe=x?N:G,ye=x?z:F,O=x?u.lastButton:u.firstButton,fe=x?u.nextButton:u.previousButton,ve=x?u.previousButton:u.nextButton,Ce=x?u.firstButton:u.lastButton;return o.jsxs("div",{ref:s,...b,children:[m&&o.jsx(de,{onClick:f,disabled:i||l===0,"aria-label":a("first",l),title:a("first",l),...O,children:x?o.jsx(S,{...u.lastButtonIcon}):o.jsx(k,{...u.firstButtonIcon})}),o.jsx(be,{onClick:C,disabled:i||l===0,color:"inherit","aria-label":a("previous",l),title:a("previous",l),...fe??n,children:x?o.jsx(I,{...u.nextButtonIcon}):o.jsx(ce,{...u.previousButtonIcon})}),o.jsx(pe,{onClick:j,disabled:i||(r!==-1?l>=Math.ceil(r/d)-1:!1),color:"inherit","aria-label":a("next",l),title:a("next",l),...ve??c,children:x?o.jsx(ce,{...u.previousButtonIcon}):o.jsx(I,{...u.nextButtonIcon})}),y&&o.jsx(ye,{onClick:M,disabled:i||l>=Math.ceil(r/d)-1,"aria-label":a("last",l),title:a("last",l),...Ce,children:x?o.jsx(k,{...u.firstButtonIcon}):o.jsx(S,{...u.lastButtonIcon})})]})});function So(e){return q("MuiTablePagination",e)}const re=V("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var Ue;const To=w(T,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(A(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),Ro=w(qt,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${re.actions}`]:t.actions,...t.toolbar})})(A(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${re.actions}`]:{flexShrink:0,marginLeft:20}}))),Po=w("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),ko=w("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(A(({theme:e})=>({...e.typography.body2,flexShrink:0}))),Io=w(It,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${re.selectIcon}`]:t.selectIcon,[`& .${re.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${re.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Bo=w(Te,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),Mo=w("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(A(({theme:e})=>({...e.typography.body2,flexShrink:0})));function $o({from:e,to:t,count:s}){return`${e}–${t} of ${s!==-1?s:`more than ${t}`}`}function Lo(e){return`Go to ${e} page`}const Fo=e=>{const{classes:t}=e;return L({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},So,t)},Pe=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTablePagination"}),{ActionsComponent:r=wo,backIconButtonProps:i,colSpan:a,component:c=T,count:p,disabled:l=!1,getItemAriaLabel:d=Lo,labelDisplayedRows:m=$o,labelRowsPerPage:y="Rows per page:",nextIconButtonProps:g,onPageChange:u,onRowsPerPageChange:b,page:x,rowsPerPage:f,rowsPerPageOptions:C=[10,25,50,100],SelectProps:j={},showFirstButton:M=!1,showLastButton:z=!1,slotProps:F={},slots:G={},...N}=n,k=n,S=Fo(k),I=(F==null?void 0:F.select)??j,ce=I.native?"option":Bo;let de;(c===T||c==="td")&&(de=a||1e3);const be=Fe(I.id),pe=Fe(I.labelId),ye=()=>p===-1?(x+1)*f:f===-1?p:Math.min(p,(x+1)*f),O={slots:G,slotProps:F},[fe,ve]=B("root",{ref:s,className:S.root,elementType:To,externalForwardedProps:{...O,component:c,...N},ownerState:k,additionalProps:{colSpan:de}}),[Ce,H]=B("toolbar",{className:S.toolbar,elementType:Ro,externalForwardedProps:O,ownerState:k}),[ut,xt]=B("spacer",{className:S.spacer,elementType:Po,externalForwardedProps:O,ownerState:k}),[mt,gt]=B("selectLabel",{className:S.selectLabel,elementType:ko,externalForwardedProps:O,ownerState:k,additionalProps:{id:pe}}),[ht,bt]=B("select",{className:S.select,elementType:Io,externalForwardedProps:O,ownerState:k}),[yt,ft]=B("menuItem",{className:S.menuItem,elementType:ce,externalForwardedProps:O,ownerState:k}),[vt,Ct]=B("displayedRows",{className:S.displayedRows,elementType:Mo,externalForwardedProps:O,ownerState:k});return o.jsx(fe,{...ve,children:o.jsxs(Ce,{...H,children:[o.jsx(ut,{...xt}),C.length>1&&o.jsx(mt,{...gt,children:y}),C.length>1&&o.jsx(ht,{variant:"standard",...!I.variant&&{input:Ue||(Ue=o.jsx(kt,{}))},value:f,onChange:b,id:be,labelId:pe,...I,classes:{...I.classes,root:R(S.input,S.selectRoot,(I.classes||{}).root),select:R(S.select,(I.classes||{}).select),icon:R(S.selectIcon,(I.classes||{}).icon)},disabled:l,...bt,children:C.map(D=>h.createElement(yt,{...ft,key:D.label?D.label:D,value:D.value?D.value:D},D.label?D.label:D))}),o.jsx(vt,{...Ct,children:m({from:p===0?0:x*f+1,to:ye(),count:p===-1?-1:p,page:x})}),o.jsx(r,{className:S.actions,backIconButtonProps:i,count:p,nextIconButtonProps:g,onPageChange:u,page:x,rowsPerPage:f,showFirstButton:M,showLastButton:z,slotProps:F.actions,slots:G.actions,getItemAriaLabel:d,disabled:l})]})})});function Ao(e){return q("MuiTableRow",e)}const Ee=V("MuiTableRow",["root","selected","hover","head","footer"]),zo=e=>{const{classes:t,selected:s,hover:n,head:r,footer:i}=e;return L({root:["root",s&&"selected",n&&"hover",r&&"head",i&&"footer"]},Ao,t)},No=w("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.head&&t.head,s.footer&&t.footer]}})(A(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Ee.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Ee.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),We="tr",W=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableRow"}),{className:r,component:i=We,hover:a=!1,selected:c=!1,...p}=n,l=h.useContext(ie),d={...n,component:i,hover:a,selected:c,head:l&&l.variant==="head",footer:l&&l.variant==="footer"},m=zo(d);return o.jsx(No,{as:i,ref:s,className:R(m.root,r),role:i===We?null:"row",ownerState:d,...p})}),Oo=Be(o.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function Ho(e){return q("MuiTableSortLabel",e)}const je=V("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),Do=e=>{const{classes:t,direction:s,active:n}=e,r={root:["root",n&&"active",`direction${E(s)}`],icon:["icon",`iconDirection${E(s)}`]};return L(r,Ho,t)},Uo=w(Ge,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.active&&t.active]}})(A(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${je.icon}`]:{opacity:.5}},[`&.${je.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${je.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}}))),Eo=w("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.icon,t[`iconDirection${E(s.direction)}`]]}})(A(({theme:e})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),Wo=h.forwardRef(function(t,s){const n=$({props:t,name:"MuiTableSortLabel"}),{active:r=!1,children:i,className:a,direction:c="asc",hideSortIcon:p=!1,IconComponent:l=Oo,slots:d={},slotProps:m={},...y}=n,g={...n,active:r,direction:c,hideSortIcon:p,IconComponent:l},u=Do(g),b={slots:d,slotProps:m},[x,f]=B("root",{elementType:Uo,externalForwardedProps:b,ownerState:g,className:R(u.root,a),ref:s}),[C,j]=B("icon",{elementType:Eo,externalForwardedProps:b,ownerState:g,className:u.icon});return o.jsxs(x,{disableRipple:!0,component:"span",...f,...y,children:[i,p&&!r?null:o.jsx(C,{as:l,...j})]})}),J={xs:.5,sm:1},we={xs:1,md:1.5},qo={xs:1.5,md:2},ke={"top-left":oe([3,0,0,1]),"top-right":oe([0,3,1,0]),"mid-left":oe([2,0,0,2]),"mid-right":oe([0,2,2,0]),"no-radius":oe([0,0,0,0])},Z=e=>({position:"relative",border:"none",bgcolor:"color-mix(in srgb, var(--mui-palette-divider) 80%, transparent 20%)",...ke[e]}),Y={checkboxCell:ke["mid-left"],checkbox:e=>({color:e?Ae("text-primary","primary-main",30):void 0}),row:(e,t)=>({"& td, & th":{border:0},position:"relative",bgcolor:e?Ae("action-hover","primary-light",80):t%2===0?"color-mix(in srgb, var(--mui-palette-action-hover), transparent)":"action.hover"}),rowCellFull:{py:8,borderRadius:2},rowCell:e=>({py:3,...e?ke["mid-right"]:{}})},Vo=()=>{const e=zt((l,d)=>({selectAll:!1,checked:new Set,unchecked:new Set,toggleRow:m=>{const{selectAll:y,checked:g,unchecked:u}=d();if(y){const b=new Set(u);b.has(m)?b.delete(m):b.add(m),l({unchecked:b})}else{const b=new Set(g);b.has(m)?b.delete(m):b.add(m),l({checked:b})}},toggleAll:()=>{const{selectAll:m,unchecked:y}=d();let g=!0;m&&y.size===0&&(g=!1),l({selectAll:g,checked:new Set,unchecked:new Set})},reset:()=>{l({selectAll:!1,checked:new Set,unchecked:new Set})},getSelectedIds:()=>[...d().checked],getExcludedIds:()=>[...d().unchecked]})),t=l=>e(d=>d.selectAll?!d.unchecked.has(l):d.checked.has(l)),s=l=>e(d=>d.selectAll?d.unchecked.size===0:l<=0?!1:d.checked.size===l),n=l=>e(d=>d.selectAll?d.unchecked.size>0&&d.unchecked.size<l:d.checked.size>0&&d.checked.size<l);return{useRowSelection:l=>({checked:t(l),toggle:()=>e.getState().toggleRow(l)}),useAllSelections:l=>{const d=s(l),m=n(l);return{checked:d,indeterminate:m,toggle:()=>e.getState().toggleAll()}},useSelectedCount:l=>e(d=>{if(!d.selectAll)return Math.min(d.checked.size,l);const m=l-d.unchecked.size;return m<0?0:m}),useSubmit:()=>()=>{const{selectAll:l,getSelectedIds:d,getExcludedIds:m}=e.getState();return l?{selectAll:!0,excludeIds:m()}:{selectAll:!1,includeIds:d()}},useReset:()=>e.getState().reset}},{useRowSelection:_o,useAllSelections:Go,useSelectedCount:Ko,useReset:Jo}=Vo(),lt=()=>{const{data:e,isFetching:t}=Lt({types:["table","view"]}),{searchParams:s}=le(),n=h.useMemo(()=>{if(!e)return null;const r=s.get("table");return e.find(a=>a.name===r)??e[0]},[e,s]);return{options:e,selectedOption:n,isFetching:t}},Qo=()=>{const{updateSearchParams:e}=le(),{options:t,selectedOption:s,isFetching:n}=lt(),r=Jo();return{options:t,selectedOption:s,handleChange:a=>{if(!t)return;const{name:c}=t.find(p=>p.name===a.target.value)??t[0];r(),e({table:c,hiddenColumns:null,orderBy:null,order:null,page:null})},isFetching:n}},it={borderRadius:1,overflow:"hidden","&::before":{borderBottom:0},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:0},"& input":{p:J},"& div[role='combobox']":{p:J}},ct={sx:{width:"18rem"},size:"small",variant:"filled"},Yo=()=>o.jsxs(P,{sx:{position:"relative"},children:[o.jsx(Ke,{...ct,disabled:!0,slotProps:{input:{sx:it}}}),o.jsx(P,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"text.secondary"},children:o.jsx(Bt,{color:"inherit",size:16})})]}),Xo=()=>{const{options:e,selectedOption:t,handleChange:s,isFetching:n}=Qo();return!e||!t||n?o.jsx(Yo,{}):o.jsxs(Ke,{select:!0,value:t.name,onChange:s,...ct,slotProps:{select:{IconComponent:Ye,MenuProps:{slotProps:{paper:{sx:{maxHeight:350}}},elevation:3}},input:{sx:{...it,"& #tables-ias":{color:"text.secondary",m:0}},startAdornment:o.jsx(Ot,{position:"start",id:"tables-ias",children:o.jsx(v,{variant:"caption",color:"inherit",sx:{p:.5,borderRadius:1,bgcolor:"divider",textTransform:"uppercase"},children:t.type})})}},children:[o.jsxs(Te,{dense:!0,onClickCapture:r=>r.stopPropagation(),children:[o.jsx($t,{fontSize:"small",sx:{mr:.5}})," 新增資料表"]}),o.jsx(ge,{}),e.map(({name:r},i)=>o.jsx(Te,{value:r,dense:!0,children:r},i))]})},Zo=e=>{if(e==null)return"";if(typeof e=="string"||typeof e=="number")return e;const{data:t,error:s}=et(()=>String(e));if(s)throw new Error(`無法將資料轉換為有效格式: ${s.message}`);return t},es=e=>{const t={};for(const s in e)t[s]=Zo(e[s]);return t},Ie=async({table:e,page:t=0,limit:s=7,orderBy:n,order:r="asc"})=>{const i=Ft(),a=`SELECT COUNT(*) as total FROM ${e}`,c=await i.exec(a);if(!c||!c.length)throw new Error(`無法獲取 ${e} 表的資料總數，可能是表名錯誤或表不存在`);const p=c[0].total,l=Number(p);if(!Number.isInteger(l)||l<0)throw new Error(`無法解析 ${e} 表的總行數為有效整數`);t<0&&(t=0);const d=t*s,m=Math.ceil(l/s),y=t+1<m?t+1:null;let g=`SELECT * FROM ${e}`;n&&(g+=` ORDER BY ${String(n)} ${r.toUpperCase()}`),g+=` LIMIT ${s} OFFSET ${d}`;const b=(await i.exec(g)).map(es);return{table:e,rows:b,nextPage:y,totalPages:m,totalRows:l}},ts=1*60*1e3,os=e=>{const{data:t,isFetching:s}=At({types:["table","view"]});return{columns:h.useMemo(()=>{if(!t||!e)return null;const r=t.find(i=>i.table===e);return(r==null?void 0:r.columns)??null},[t,e]),isFetching:s}},ss=e=>{const{data:t,isFetching:s}=tt({queryKey:["getTotalRows",e],queryFn:()=>Ie({table:e,limit:1,page:0}),staleTime:ts,enabled:e!==null});return{totalPages:(t==null?void 0:t.totalPages)??null,totalRows:(t==null?void 0:t.totalRows)??null,isFetching:s}},ns=ze.array(ze.number().int()),rs=e=>{const{searchParams:t,updateSearchParams:s}=le(),n=h.useMemo(()=>{const a=t.get("hiddenColumns")??null;if(!a)return[];const{data:c,error:p}=et(()=>JSON.parse(a));if(p)return[];const l=ns.safeParse(c);return l.success?Array.from(new Set(l.data)):[]},[t]),r=h.useCallback(()=>{const a=n.length?[]:[...e];s({hiddenColumns:JSON.stringify(a)},{skipTransition:!0})},[n,s,e]),i=h.useCallback(a=>()=>{const c=Dt(n,a);s({hiddenColumns:JSON.stringify(c)},{skipTransition:!0})},[n,s]);return{hiddenColumns:n,toggleAllColumns:r,createColumnToggler:i}},as=e=>{const{searchParams:t,updateSearchParams:s}=le(),n=h.useMemo(()=>{const a=t.get("orderBy")??null;if(!a)return 0;const c=parseInt(a,10);return!Number.isInteger(c)||c<0||c>=e?0:c},[t,e]),r=h.useMemo(()=>{const a=t.get("order")??null;return a&&["asc","desc"].includes(a)?a:"asc"},[t]),i=h.useCallback(a=>()=>{const c=a,p=n===c&&r==="asc"?"desc":"asc";s({orderBy:c.toString(),order:p},{skipTransition:!0})},[n,r,s]);return{orderByIndex:n,order:r,createOrderToggler:i}},ls=e=>{const{searchParams:t,updateSearchParams:s}=le(),n=h.useMemo(()=>{const i=t.get("page")??null;if(!i)return 0;const a=parseInt(i,10);return!Number.isInteger(a)||a<0||a>=e?0:a},[t,e]),r=h.useCallback((i,a)=>{a<0||a>=e||s({page:a.toString()},{skipTransition:!0})},[s,e]);return{page:n,handlePageChange:r}},he=()=>{const{selectedOption:e,isFetching:t}=lt(),s=h.useMemo(()=>(e==null?void 0:e.name)??null,[e]),{columns:n,isFetching:r}=os(s),{totalPages:i,totalRows:a,isFetching:c}=ss(s),p=h.useMemo(()=>!s||!n||!i||!a?null:{table:s,columns:n,cids:n.map(l=>l.cid),totalPages:i,totalRows:a},[s,n,i,a]);return{isFetching:t||r||c,tableControlParams:p}},te=e=>{const{hiddenColumns:t,toggleAllColumns:s,createColumnToggler:n}=rs(e.cids),r=h.useMemo(()=>e.columns.map(y=>({...y,hidden:t.includes(y.cid)})),[e,t]),i=h.useMemo(()=>r.sort((y,g)=>y.cid-g.cid),[r]),a=h.useMemo(()=>r.filter(u=>!u.hidden).map(({hidden:u,...b})=>{const x=b.pk>=1,f=b.type!=="text"&&!x?"right":"left";return{...b,align:f}}).toSorted((u,b)=>u.pk!==b.pk?b.pk-u.pk:u.type==="text"&&b.type!=="text"?-1:u.type!=="text"&&b.type==="text"?1:u.cid-b.cid),[r]),{orderByIndex:c,order:p,createOrderToggler:l}=as(a.length),{page:d,handlePageChange:m}=ls(e.totalPages);return{selectableColumns:i,tableColumns:a,toggleAllColumns:s,createColumnToggler:n,orderByIndex:c,order:p,createOrderToggler:l,page:d,totalPages:e.totalPages,totalRows:e.totalRows,handlePageChange:m}},qe={edge:"start",tabIndex:-1,disableRipple:!0,size:"small",sx:{py:0}},dt={bgcolor:"FilledInput.disabledBg","&:hover":{bgcolor:"FilledInput.hoverBg"},borderRadius:1,height:1,width:"auto",aspectRatio:1},is=()=>o.jsx($e,{title:o.jsx(v,{variant:"body2",children:"篩選欄位"}),arrow:!0,children:o.jsxs("span",{style:{position:"relative"},children:[o.jsx(Q,{loading:!0,centerRipple:!1,size:"small",sx:dt,children:o.jsx(Xe,{fontSize:"small"})}),o.jsx(P,{sx:{position:"absolute",top:0,bgcolor:"FilledInput.disabledBg",borderRadius:1,height:1,width:"auto",aspectRatio:1}})]})}),cs=()=>{const{isFetching:e,tableControlParams:t}=he();return e||!t?o.jsx(is,{}):o.jsx(ds,{params:t})},ds=({params:e})=>{const{anchorEl:t,handleClose:s,handleOpen:n}=Ze(),{selectableColumns:r,toggleAllColumns:i,createColumnToggler:a}=te(e),c=r.every(l=>!l.hidden),p=r.some(l=>!l.hidden)&&!c;return o.jsxs(o.Fragment,{children:[o.jsx($e,{title:o.jsx(v,{variant:"body2",children:"篩選欄位"}),arrow:!0,children:o.jsx("span",{children:o.jsx(Q,{onClick:n,centerRipple:!1,size:"small",sx:dt,children:o.jsx(Xe,{fontSize:"small"})})})}),o.jsx(Je,{open:!!t,anchorEl:t,onClose:s,elevation:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{maxHeight:350}}},children:o.jsxs(Qe,{dense:!0,children:[o.jsx(X,{children:o.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:"篩選欄位"})}),o.jsx(X,{disablePadding:!0,children:o.jsxs(Re,{role:void 0,onClick:i,dense:!0,children:[o.jsx(ee,{...qe,checked:c,indeterminate:p}),o.jsx(xe,{primary:"顯示所有"})]})}),o.jsx(ge,{sx:{my:.5}}),r.map(({cid:l,hidden:d,name:m,type:y})=>o.jsx(X,{disablePadding:!0,children:o.jsxs(Re,{role:void 0,onClick:a(l),dense:!0,children:[o.jsx(ee,{...qe,checked:!d}),o.jsx(xe,{sx:{display:"flex",width:1,gap:J,justifyContent:"space-between",my:.5},primary:m,secondary:y.toUpperCase()})]})},l))]})})]})},me=e=>({"--temporary-color":e,bgcolor:"color-mix(in srgb, var(--temporary-color) 30%, transparent 70%)","&:hover":{bgcolor:"color-mix(in srgb, var(--temporary-color) 40%, transparent 60%)"},color:"color-mix(in srgb, var(--temporary-color) 40%, var(--mui-palette-text-primary) 60%)",px:1.5}),ps=()=>o.jsxs(o.Fragment,{children:[o.jsx(v,{sx:{color:"text.secondary"},children:"已選取 0 個:"}),o.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:J},children:[o.jsx(ae,{sx:me("var(--mui-palette-primary-main)"),loading:!0,children:"覆蓋欄位"}),o.jsx(ae,{sx:me("var(--mui-palette-error-main)"),loading:!0,children:"刪除紀錄"})]})]}),us=()=>{const{isFetching:e,tableControlParams:t}=he();return e||!t?o.jsx(ps,{}):o.jsx(xs,{params:t})},xs=({params:e})=>{const{totalRows:t}=te(e),s=Ko(t);return o.jsxs(o.Fragment,{children:[o.jsxs(v,{sx:{color:"text.secondary"},children:["已選取 ",s," 個 / ",t," 個:"]}),o.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:J},children:[o.jsx($e,{title:o.jsx(v,{variant:"body2",children:"以指定值覆蓋選取資料的某個欄位"}),arrow:!0,children:o.jsx("span",{children:o.jsx(ae,{sx:me("var(--mui-palette-primary-main)"),disabled:s<=0,children:"覆蓋欄位"})})}),o.jsx(ae,{sx:me("var(--mui-palette-error-main)"),disabled:s<=0,children:"刪除紀錄"})]})]})},ms=e=>({"--temporary-color":e,bgcolor:"color-mix(in srgb, var(--temporary-color) 90%, var(--mui-palette-text-primary) 10%)","&:hover":{bgcolor:"color-mix(in srgb, var(--temporary-color) 80%, var(--mui-palette-text-primary) 20%)"},color:"color-mix(in srgb, var(--temporary-color) 5%, var(--mui-palette-background-paper) 95%)",px:1.5}),gs=["date","json_array","json_object","integer","real","boolean","uuid"],hs=({params:e})=>{const{selectableColumns:t}=te(e),s=h.useMemo(()=>t.filter(({type:n})=>gs.includes(n)),[t]);return o.jsxs(Qe,{dense:!0,children:[o.jsx(X,{children:o.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:"可標準化的欄位"})}),o.jsx(ge,{sx:{my:.5}}),s.map(({cid:n,name:r,type:i})=>o.jsx(X,{disablePadding:!0,children:o.jsx(Re,{role:void 0,dense:!0,children:o.jsx(xe,{sx:{display:"flex",width:1,gap:J,justifyContent:"space-between",my:.5},primary:r,secondary:i.toUpperCase()})})},n)),s.length<=0&&o.jsx(X,{children:o.jsx(xe,{sx:{textAlign:"center"},primary:"無可標準化的欄位"})})]})},bs=()=>{const{anchorEl:e,handleClose:t,handleOpen:s}=Ze(),{isFetching:n,tableControlParams:r}=he();return o.jsxs(o.Fragment,{children:[o.jsx(ae,{sx:ms("var(--mui-palette-primary-main)"),endIcon:o.jsx(Ye,{}),onClick:s,loading:n,children:"標準化"}),r&&o.jsx(Je,{open:!!e,anchorEl:e,onClose:t,elevation:3,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},slotProps:{paper:{sx:{maxHeight:350}}},children:o.jsx(hs,{params:r})})]})},ys=1e3*60*1,K=7,fs=e=>{const t=Ut(),{data:s,isFetched:n}=tt({queryKey:["getRows",e],queryFn:()=>Ie(e),staleTime:ys,enabled:e!==null});if(e!==null&&e.page!==void 0){const r={...e,page:e.page+1};t.prefetchQuery({queryKey:["getRows",r],queryFn:()=>Ie(r)})}return{isFetching:!n,data:s}},vs=e=>{var p;const{tableColumns:t,page:s,order:n,orderByIndex:r}=te(e),{data:i,isFetching:a}=fs({table:e.table,limit:K,page:s,orderBy:((p=t[r])==null?void 0:p.name)??void 0,order:n});return{rows:h.useMemo(()=>!i||a?null:i.rows.map(l=>({id:JSON.stringify(l),values:t.map(d=>({value:l[d.name],align:d.align}))})),[t,i,a]),columns:t,isFetching:a}},Cs=()=>o.jsxs(st,{sx:{borderSpacing:"0 0.3rem",borderCollapse:"separate"},children:[o.jsx(at,{sx:{position:"relative"},children:o.jsxs(W,{children:[o.jsx(T,{padding:"checkbox",sx:Z("top-left"),children:o.jsx(ee,{disabled:!0,size:"small"})}),o.jsx(T,{sx:Z("no-radius"),children:o.jsx(ne,{variant:"rounded",animation:"wave",sx:{maxWidth:"none",width:.5},children:o.jsx(v,{variant:"body2",children:"載入中. . ."})})}),[...Array(4)].map((e,t)=>o.jsx(T,{sx:Z(t===3?"top-right":"no-radius"),children:o.jsx(P,{sx:{display:"flex",justifyContent:"flex-end"},children:o.jsx(ne,{variant:"rounded",animation:"wave",sx:{maxWidth:"none",width:.5},children:o.jsx(v,{variant:"body2",children:"載入中. . ."})})})},t))]})}),o.jsx(nt,{children:[...Array(K)].map((e,t)=>o.jsxs(W,{sx:Y.row(!1,t),children:[o.jsx(T,{padding:"checkbox",sx:Y.checkboxCell,children:o.jsx(ee,{disabled:!0,size:"small"})}),o.jsx(T,{sx:Y.rowCell(!1),children:o.jsx(ne,{variant:"rounded",animation:"wave",sx:{maxWidth:"none",width:.5},children:o.jsx(v,{children:"載入中. . ."})})}),[...Array(4)].map((s,n)=>o.jsx(T,{sx:Y.rowCell(n===3),children:o.jsx(P,{sx:{display:"flex",justifyContent:"flex-end"},children:o.jsx(ne,{variant:"rounded",animation:"wave",sx:{maxWidth:"none",width:.5},children:o.jsx(v,{children:"載入中. . ."})})})},n))]},t))}),o.jsx(rt,{children:o.jsx(W,{children:o.jsx(Pe,{colSpan:6,count:0,rowsPerPage:10,rowsPerPageOptions:[10],page:0,showFirstButton:!0,showLastButton:!0,slotProps:{select:{inputProps:{"aria-label":"rows per page"}}},onPageChange:()=>{},disabled:!0,sx:{border:0}})})})]}),Ve={p:.5,borderRadius:1,bgcolor:"divider"},_e={textTransform:"uppercase",lineHeight:1,color:"text.secondary"},js=({isPk:e,type:t})=>o.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:J,color:"text.secondary"},children:[e&&o.jsx(v,{variant:"caption",sx:{...Ve,..._e},children:"PK"}),o.jsx(P,{sx:Ve,children:o.jsx(v,{variant:"caption",sx:{..._e,...Me},children:t})})]}),ws=e=>{const{checked:t,indeterminate:s,toggle:n}=Go(e.totalRows),r=h.useMemo(()=>!t&&!s,[t,s]);return{toggleCheckedAll:n,checked:t,unchecked:r,indeterminate:s}},Ss=({params:e})=>{const{tableColumns:t,orderByIndex:s,order:n,createOrderToggler:r}=te(e),{toggleCheckedAll:i,checked:a,unchecked:c,indeterminate:p}=ws(e);return o.jsxs(W,{children:[o.jsx(T,{padding:"checkbox",sx:Z("top-left"),children:o.jsx(ee,{color:"default",onChange:i,indeterminate:p,checked:a,size:"small",sx:{color:c?void 0:"color-mix(in srgb, var(--mui-palette-text-primary) 30%, var(--mui-palette-primary-main) 70%)"}})}),t.map((l,d)=>{const{cid:m,name:y,type:g,align:u}=l,b=l.pk>=1,x=s===d,f=x&&n==="desc"?1:-1,C=u==="right"?"flex-end":"flex-start",j=d===t.length-1;return o.jsx(T,{sx:{minWidth:"10rem",...Z(j?"top-right":"no-radius")},children:o.jsxs(P,{sx:{display:"flex",alignItems:"center",justifyContent:C},children:[o.jsx(Wo,{active:x,direction:x?n:"asc",IconComponent:Vt,slotProps:{icon:{sx:{transform:`scaleY(${f})`}}},onClick:r(d),children:o.jsx(v,{variant:"body2",children:y})}),o.jsx(js,{isPk:b,type:g})]})},m)}),t.length===0&&o.jsx(T,{sx:Z("top-right"),colSpan:1})]})},U=Y,pt=({checked:e,...t})=>o.jsx(T,{padding:"checkbox",sx:U.checkboxCell,children:o.jsx(ee,{color:"default",size:"small",sx:U.checkbox(e??!1),checked:e,...t})}),Ts=({id:e,values:t,index:s})=>{const{checked:n,toggle:r}=_o(e);return o.jsxs(W,{sx:U.row(n,s),children:[o.jsx(pt,{checked:n,onChange:r}),t.map(({value:i,align:a},c)=>o.jsx(T,{align:a,sx:U.rowCell(c===t.length-1),children:o.jsx(v,{sx:Me,children:i})},c))]})},Rs=({params:e})=>{const{rows:t,columns:s,isFetching:n}=vs(e),r=s.length+1;return s.length===0?o.jsx(W,{sx:U.row(!1,1),children:o.jsx(T,{sx:U.rowCellFull,colSpan:2,children:o.jsx(v,{sx:{color:"text.secondary",textAlign:"center"},children:"至少要選取一個欄位才能顯示資料"})})}):n||!t?o.jsx(o.Fragment,{children:[...Array(K)].map((i,a)=>o.jsxs(W,{sx:Y.row(!1,a),children:[o.jsx(pt,{checked:!1,disabled:!0}),s.map(({align:c},p)=>o.jsx(T,{sx:U.rowCell(p===s.length-1),children:o.jsx(P,{sx:{display:"flex",justifyContent:c==="right"?"flex-end":"flex-start"},children:o.jsx(ne,{variant:"rounded",animation:"wave",sx:{maxWidth:"none",width:.5},children:o.jsx(v,{sx:Me,children:"載入中. . ."})})})},p))]},a))}):t.length?o.jsx(o.Fragment,{children:t.map((i,a)=>o.jsx(Ts,{...i,index:a},i.id))}):o.jsx(W,{sx:U.row(!1,1),children:o.jsx(T,{sx:U.rowCellFull,colSpan:r,children:o.jsx(v,{sx:{color:"text.secondary",textAlign:"center"},children:"該資料表 / 檢視表目前沒有任何資料"})})})},Ps=({params:e})=>{const{tableColumns:t,totalRows:s,page:n,handlePageChange:r}=te(e);return t.length===0?o.jsx(Pe,{colSpan:2,count:0,rowsPerPage:K,rowsPerPageOptions:[K],page:0,showFirstButton:!0,showLastButton:!0,onPageChange:r,sx:{border:0}}):o.jsx(Pe,{colSpan:t.length+1,count:s??0,rowsPerPage:K,rowsPerPageOptions:[K],page:n,showFirstButton:!0,showLastButton:!0,onPageChange:r,sx:{border:0}})},ks=({params:e})=>o.jsxs(st,{sx:{borderSpacing:"0 0.3rem",borderCollapse:"separate"},children:[o.jsx(at,{sx:{position:"relative"},children:o.jsx(Ss,{params:e})}),o.jsx(nt,{children:o.jsx(Rs,{params:e})}),o.jsx(rt,{children:o.jsx(W,{children:o.jsx(Ps,{params:e})})})]}),Is=()=>{const{isFetching:e,tableControlParams:t}=he();return o.jsx(mo,{sx:{mt:qo},children:e||!t?o.jsx(Cs,{}):o.jsx(ks,{params:t})})},cn=()=>o.jsxs(Mt,{children:[o.jsxs(P,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:we},children:[o.jsxs(P,{sx:{display:"flex",alignItems:"stretch",gap:we},children:[o.jsx(Xo,{}),o.jsx(cs,{})]}),o.jsxs(P,{sx:{display:"flex",alignItems:"center",gap:we},children:[o.jsx(us,{}),o.jsx(ge,{flexItem:!0,orientation:"vertical"}),o.jsx(bs,{})]})]}),o.jsx(Is,{})]});export{cn as default};
