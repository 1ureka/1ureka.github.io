import{w as o,j as e,S as u,o as t,l as p,v as d,B as n,A as g,E as B,r as C}from"./routes-BRvtlvXq.js";import{a as A,A as I,S as F,b as v}from"./ScrollArea-DVFo4K2p.js";import{A as f}from"./AuthIntro-B46bkaTg.js";import{f as R,d as z,g as x,e as h,C as E}from"./post-Nbzi6ct_.js";import{z as l}from"./index-mSkvzYyn.js";import"./RefreshRounded-BM5m51hi.js";import"./ForumRounded-DtKYxlCC.js";import"./SQLiteClient-ClFa2ebI.js";import"./CommentRounded-CFfiDz--.js";import"./Skeleton-Cf8Gl-YI.js";import"./DarkModeRounded-C3T8P242.js";import"./useMutation--o3WIbJj.js";import"./MenuItem-MMlOtQiM.js";import"./with-selector-DQKFazF0.js";const m={email:l.string().trim().email("請輸入有效的電子郵件地址").max(100,"電子郵件地址過長"),username:l.string().trim().min(4,"使用者名稱至少 4 個字元").max(20,"使用者名稱最多 20 個字元").regex(/^[a-zA-Z0-9 ]+$/,"使用者名稱只能包含英文字母與數字"),password:l.string().trim().min(1,"密碼不能為空")},W=l.object(m),b=()=>{const{mutateAsync:i,isPending:j}=R(),a=z({defaultValues:{email:"",username:"",password:""},validators:{onSubmit:W},onSubmit:async({value:r})=>{if(j)return;const{email:s,username:y,password:S}=r,c=await i({email:s,username:y.trim(),password:S});if(c.error)return console.error(c.error);c.authenticated&&(window.location.href=o.forum_home)},onSubmitInvalid:()=>{console.error("請檢查表單是否填寫正確")}}),w=async r=>{if(r.preventDefault(),!a.state.canSubmit)return console.error("請檢查表單是否填寫正確");a.handleSubmit()};return e.jsxs(u,{component:"form",sx:{p:6,flex:1,justifyContent:"center"},onSubmit:w,children:[e.jsx(t,{sx:{display:"grid",placeItems:"center",mb:2},children:e.jsx(p,{variant:"h4",component:"h2",gutterBottom:!0,sx:{textAlign:"center"},children:"加入我們"})}),e.jsx(a.Field,{name:"email",validators:{onChange:m.email},children:r=>e.jsx(d,{required:!0,name:r.name,type:"email",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"電子郵件",error:h(r.state.meta.errors),helperText:x(r.state.meta.errors),value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur})}),e.jsx(a.Field,{name:"username",validators:{onChange:m.username},children:r=>e.jsx(d,{required:!0,name:r.name,type:"text",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"使用者名稱",error:h(r.state.meta.errors),helperText:x(r.state.meta.errors),value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur})}),e.jsx(a.Field,{name:"password",validators:{onChange:m.password},children:r=>e.jsx(d,{required:!0,name:r.name,type:"password",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"密碼",error:h(r.state.meta.errors),helperText:x(r.state.meta.errors),value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur})}),e.jsx(n,{type:"submit",variant:"contained",loading:j,sx:{mt:1.5,width:.8,alignSelf:"center",borderRadius:99,"&:hover":{bgcolor:"primary.light",scale:1.02},"&:active":{scale:.98},transition:"all 0.2s ease"},children:"註冊"})]})},T=()=>e.jsx(E,{maxWidth:"lg",sx:{position:"relative",display:"grid",placeItems:"center",minHeight:"100vh"},children:e.jsxs(g,{sx:{position:"relative",my:10,borderRadius:3,overflow:"hidden",display:"flex",width:1},elevation:6,children:[e.jsx(t,{sx:{flex:1,position:"relative"},children:e.jsxs(u,{sx:{height:1},children:[e.jsx(t,{sx:{mb:2,p:2},children:e.jsx(n,{sx:{textWrap:"nowrap",width:"fit-content"},href:o.forum_home,startIcon:e.jsx(v,{}),children:"返回首頁"})}),e.jsx(b,{}),e.jsx(t,{sx:{mt:3,p:2},children:e.jsxs(p,{variant:"caption",gutterBottom:!0,children:["已經有帳號？",e.jsx(n,{href:o.forum_login,variant:"outlined",size:"small",sx:{ml:1},children:"登入"})]})})]})}),e.jsx(t,{className:"mode-dark",sx:{position:"relative",flex:1,bgcolor:"secondary.main",color:"text.primary"},children:e.jsx(f,{})})]})}),k=()=>e.jsxs(g,{sx:{position:"relative",borderRadius:0,width:1},elevation:0,children:[e.jsxs(u,{children:[e.jsx(t,{sx:{mb:2,p:2},children:e.jsx(n,{sx:{textWrap:"nowrap",width:"fit-content"},href:o.forum_home,startIcon:e.jsx(v,{}),children:"返回首頁"})}),e.jsx(b,{}),e.jsx(t,{sx:{mt:3,p:2},children:e.jsxs(p,{variant:"caption",gutterBottom:!0,children:["已經有帳號？",e.jsx(n,{href:o.forum_login,variant:"outlined",size:"small",sx:{ml:1},children:"登入"})]})})]}),e.jsx(t,{className:"mode-dark",sx:{position:"relative",bgcolor:"secondary.main",color:"text.primary"},children:e.jsx(f,{})})]});function _(){const{isMd:i}=A();return e.jsxs(I,{children:[i&&e.jsx(t,{sx:{position:"fixed",inset:"0 auto 0 0",width:.5,bgcolor:"secondary.main"}}),e.jsx(F,{children:i?e.jsx(T,{}):e.jsx(k,{})})]})}B.createRoot(document.getElementById("root")).render(e.jsx(C.StrictMode,{children:e.jsx(_,{})}));
