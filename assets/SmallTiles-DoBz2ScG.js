import{n as g,j as s,o as l,S as o,x as j,r as w,z as C,l as T,w as y}from"./routes-BRvtlvXq.js";import{O as H}from"./OpenInNewRounded-D3gFmKbO.js";import{a as c,b as t,T as z}from"./TileText-BhWknKyz.js";import{l as W,m as k,t as p,d as R,e as F,s as S,u as M}from"./main-WyEmgTrp.js";import{a as E,b}from"./formatters-C9bWSe0O.js";import{u as O}from"./url-CRkyn8d-.js";import{D as u}from"./ExpandMoreRounded-DEjStDxu.js";import{S as V}from"./Skeleton-Cf8Gl-YI.js";import"./DarkModeRounded-C3T8P242.js";import"./RefreshRounded-BM5m51hi.js";import"./SQLiteClient-ClFa2ebI.js";import"./DataExplorationRounded-CBNK2XNk.js";import"./ArrowDropDownRounded-Acoo6eKJ.js";import"./NotificationsRounded-GyKBo_oY.js";import"./fuse-Bxxm0l84.js";import"./useMutation--o3WIbJj.js";import"./dayjs.min-BcXpWxsR.js";import"./MenuItem-MMlOtQiM.js";import"./Badge-DkXiDsZB.js";import"./DownloadRounded-BLjxSu8L.js";const B=g([s.jsx("path",{d:"M4 7v13h13c.55 0 1 .45 1 1s-.45 1-1 1H4c-1.1 0-2-.9-2-2V7c0-.55.45-1 1-1s1 .45 1 1"},"0"),s.jsx("path",{d:"M6 4v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2m9 7h5v5h-5zm-7 0h5v5H8zm0-7h12v5H8z"},"1")]),D=g(s.jsx("path",{d:"M15.59 3.59c-.38-.38-.89-.59-1.42-.59H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.41zM8 17c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m6 0V4.5l5.5 5.5H15c-.55 0-1-.45-1-1"})),A=g(s.jsx("path",{d:"M10.5 13h-1c-.83 0-1.5-.67-1.5-1.5S8.67 10 9.5 10h1V9c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v1h1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-1v1c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5zm.8-10.74-6 2.25C4.52 4.81 4 5.55 4 6.39v4.7c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91v-4.7c0-.83-.52-1.58-1.3-1.87l-6-2.25c-.45-.18-.95-.18-1.4-.01"})),h={display:"flex",alignItems:"center",gap:k},x=({children:e,...i})=>s.jsx(V,{variant:"rounded",animation:"wave",...i,children:e}),N=()=>{const{data:e,isFetching:i}=R(),{data:r,isFetching:a}=F({types:["table","view"]});return s.jsxs(l,{sx:{display:"flex",gap:S},children:[s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"資料庫大小"}),e===void 0||i?s.jsx(x,{children:s.jsx(t,{sx:{textWrap:"nowrap"},children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:E(e)})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"資料表總數"}),r===void 0||a?s.jsx(x,{children:s.jsx(t,{children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:r.filter(({type:n})=>n==="table").length})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"檢視表總數"}),r===void 0||a?s.jsx(x,{children:s.jsx(t,{children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:r.filter(({type:n})=>n==="view").length})]})]})},L=()=>{const{update:e}=O();return r=>()=>e(y.datahub_tables,a=>({db:a.db??null,table:r}))},U=()=>{const{data:e,isFetching:i}=M({types:["table","view"]}),r=L(),a=e?Object.values(e).reduce((f,d)=>f+d,0):0,n=w.useMemo(()=>{if(!e)return{table:"",count:0};const d=C(e).filter(([m])=>typeof m=="string").reduce((m,[I,v])=>v>m[1]?[I,v]:m);return{table:d[0],count:d[1]}},[e]);return s.jsxs(l,{sx:{display:"flex",gap:S},children:[s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"總紀錄數"}),e===void 0||i?s.jsx(x,{children:s.jsx(t,{sx:{textWrap:"nowrap"},children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:b(a)})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"最多紀錄的資料表"}),e===void 0||i?s.jsx(x,{children:s.jsx(t,{sx:j,children:"載入中"})}):s.jsx(z,{title:s.jsxs(T,{children:[n.table," 有 ",b(n.count)," 筆紀錄"]}),children:s.jsx(t,{sx:j,onClick:r(n.table),children:n.table})})]})]})},cs=()=>s.jsxs(l,{sx:{position:"relative",display:"grid",gap:W,gridTemplateColumns:{xs:"repeat(6, 1fr)",lg:"repeat(3, 1fr)"}},children:[s.jsxs(l,{sx:{gridColumn:{xs:"span 4",lg:"auto"},...h},children:[s.jsx(B,{sx:p}),s.jsx(N,{})]}),s.jsxs(l,{sx:{gridColumn:{xs:"1 / span 4",lg:"auto"},...h},children:[s.jsx(D,{sx:p}),s.jsx(U,{})]}),s.jsxs(l,{sx:{gridRow:{xs:"1",lg:"auto"},gridColumn:{xs:"5 / span 2",lg:"auto"},...h},children:[s.jsx(A,{sx:p}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"潛在問題"}),s.jsxs(t,{sx:{textWrap:"nowrap",color:"warning.main",display:"inline-block",...j},children:["2",s.jsx(H,{fontSize:"small",sx:{verticalAlign:"middle",ml:.5}})]})]})]})]});export{cs as SmallTiles};
