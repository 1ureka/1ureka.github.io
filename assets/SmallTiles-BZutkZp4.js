import{o as g,j as s,p as l,S as o,w as j,r as w,n as C}from"./Toast-6ncYA_Ld.js";import{O as T}from"./OpenInNewRounded-BlaOd_6C.js";import{a as c,b as t,T as y}from"./TileText-egkSQpjp.js";import{l as H,m as z,t as p,d as W,e as k,s as S,u as R}from"./main-BtIibAsk.js";import{a as F,b}from"./formatters-C9bWSe0O.js";import{t as M,r as E}from"./routes-Dr3OAPvi.js";import{u as O}from"./url-BKoQkXLc.js";import{D as u}from"./Divider-vP51gHCL.js";import{S as V}from"./Skeleton-DjBj6yfl.js";import"./DarkModeRounded-BFg7OYNl.js";import"./ErrorOutlineRounded-BWvTI3f4.js";import"./RestartAltRounded-COnKimLj.js";import"./SQLiteClient-CQZ5EZ1X.js";import"./tryCatch-CD0ybv0K.js";import"./DataExplorationRounded-tAuyK-5K.js";import"./RefreshRounded-BcOkXO49.js";import"./ArrowDropDownRounded-a6cIAduy.js";import"./NotificationsRounded-BBOwe-i5.js";import"./fuse-BXhxvJKY.js";import"./useMutation-2Qc-kFMN.js";import"./dayjs.min-CkW5XOTE.js";import"./MenuItem-BLYGv0hx.js";import"./ExpandMoreRounded-BeFfyJ0G.js";import"./Badge-D6o4y19V.js";import"./DownloadRounded-CB3mGnoq.js";const B=g([s.jsx("path",{d:"M4 7v13h13c.55 0 1 .45 1 1s-.45 1-1 1H4c-1.1 0-2-.9-2-2V7c0-.55.45-1 1-1s1 .45 1 1"},"0"),s.jsx("path",{d:"M6 4v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2m9 7h5v5h-5zm-7 0h5v5H8zm0-7h12v5H8z"},"1")]),D=g(s.jsx("path",{d:"M15.59 3.59c-.38-.38-.89-.59-1.42-.59H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.41zM8 17c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m0-4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m6 0V4.5l5.5 5.5H15c-.55 0-1-.45-1-1"})),A=g(s.jsx("path",{d:"M10.5 13h-1c-.83 0-1.5-.67-1.5-1.5S8.67 10 9.5 10h1V9c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v1h1c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-1v1c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5zm.8-10.74-6 2.25C4.52 4.81 4 5.55 4 6.39v4.7c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91v-4.7c0-.83-.52-1.58-1.3-1.87l-6-2.25c-.45-.18-.95-.18-1.4-.01"})),h={display:"flex",alignItems:"center",gap:z},x=({children:e,...n})=>s.jsx(V,{variant:"rounded",animation:"wave",...n,children:e}),N=()=>{const{data:e,isFetching:n}=W(),{data:r,isFetching:a}=k({types:["table","view"]});return s.jsxs(l,{sx:{display:"flex",gap:S},children:[s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"資料庫大小"}),e===void 0||n?s.jsx(x,{children:s.jsx(t,{sx:{textWrap:"nowrap"},children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:F(e)})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"資料表總數"}),r===void 0||a?s.jsx(x,{children:s.jsx(t,{children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:r.filter(({type:i})=>i==="table").length})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"檢視表總數"}),r===void 0||a?s.jsx(x,{children:s.jsx(t,{children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:r.filter(({type:i})=>i==="view").length})]})]})},L=()=>{const{update:e}=O();return r=>()=>e(E.datahub_tables,a=>({db:a.db??null,table:r}))},U=()=>{const{data:e,isFetching:n}=R({types:["table","view"]}),r=L(),a=e?Object.values(e).reduce((f,d)=>f+d,0):0,i=w.useMemo(()=>{if(!e)return{table:"",count:0};const d=M(e).filter(([m])=>typeof m=="string").reduce((m,[I,v])=>v>m[1]?[I,v]:m);return{table:d[0],count:d[1]}},[e]);return s.jsxs(l,{sx:{display:"flex",gap:S},children:[s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"總紀錄數"}),e===void 0||n?s.jsx(x,{children:s.jsx(t,{sx:{textWrap:"nowrap"},children:"載入中"})}):s.jsx(t,{sx:{textWrap:"nowrap"},children:b(a)})]}),s.jsx(u,{flexItem:!0,orientation:"vertical"}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"最多紀錄的資料表"}),e===void 0||n?s.jsx(x,{children:s.jsx(t,{sx:j,children:"載入中"})}):s.jsx(y,{title:s.jsxs(C,{children:[i.table," 有 ",b(i.count)," 筆紀錄"]}),children:s.jsx(t,{sx:j,onClick:r(i.table),children:i.table})})]})]})},hs=()=>s.jsxs(l,{sx:{position:"relative",display:"grid",gap:H,gridTemplateColumns:{xs:"repeat(6, 1fr)",lg:"repeat(3, 1fr)"}},children:[s.jsxs(l,{sx:{gridColumn:{xs:"span 4",lg:"auto"},...h},children:[s.jsx(B,{sx:p}),s.jsx(N,{})]}),s.jsxs(l,{sx:{gridColumn:{xs:"1 / span 4",lg:"auto"},...h},children:[s.jsx(D,{sx:p}),s.jsx(U,{})]}),s.jsxs(l,{sx:{gridRow:{xs:"1",lg:"auto"},gridColumn:{xs:"5 / span 2",lg:"auto"},...h},children:[s.jsx(A,{sx:p}),s.jsxs(o,{sx:{alignItems:"flex-start"},children:[s.jsx(c,{children:"潛在問題"}),s.jsxs(t,{sx:{textWrap:"nowrap",color:"warning.main",display:"inline-block",...j},children:["2",s.jsx(T,{fontSize:"small",sx:{verticalAlign:"middle",ml:.5}})]})]})]})]});export{hs as SmallTiles};
