const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LargeTiles-BBoeaOv1.js","assets/routes-CadzfG2E.js","assets/read-z02N_0vW.js","assets/useQuery-ItHSqdRD.js","assets/forum-J-R9UQLq.js","assets/dayjs.min-CsIQ6MD_.js","assets/TileText-b3BDNp19.js","assets/useMutation-Ctl-1Wtr.js","assets/DarkModeRounded-BeOhhBQh.js","assets/Skeleton-Pg_F8lei.js","assets/Chip-DcZTGwOD.js","assets/style-Ber0AdyF.js","assets/DatasetRounded-Dyd0d1IU.js","assets/with-selector-DbUq2SiO.js","assets/style-77Si7Yrt.css","assets/formatters-CWrkKLZ2.js","assets/SwitchBase-DJebDWRN.js","assets/DataExplorationRounded-C235fV8C.js","assets/NotificationsRounded-DSSC8er_.js","assets/ExpandMoreRounded-EvpBNzDo.js","assets/SmallTiles-CyRiieXD.js","assets/OpenInNewRounded-D66UK4vw.js","assets/Divider-DVObFO2h.js","assets/Sidebar-DyL0Ciog.js","assets/proxy-ByN5GVJ7.js","assets/Collapse-BUSepr5J.js","assets/useThemeProps-DhmB2hbZ.js","assets/FlowChart-D7teaGZM.js","assets/Motion-B4iMsNTi.js"])))=>i.map(i=>d[i]);
var Re=Object.defineProperty;var Pe=(t,s,r)=>s in t?Re(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var D=(t,s,r)=>Pe(t,typeof s!="symbol"?s+"":s,r);import{o as g,j as e,s as E,D as Q,m as Ee,ay as Y,a as Me,g as Le,r as p,u as Be,V as De,c as Te,d as Ae,T as h,n as ce,v as R,R as X,az as He,B as i,q as P,y as ze,w as Oe,C as _e,x as Ve,t as W,p as Fe,aj as le,at as Ke,ac as qe,P as U,A as Ue,z as $e}from"./routes-CadzfG2E.js";import{t as y,d as Qe,g as ee,c as We,s as te,u as de,f as Ne,R as Ze,Q as Ge,b as Je,E as Ye}from"./forum-J-R9UQLq.js";import{D as N}from"./DataExplorationRounded-C235fV8C.js";import{S as z,M as v,I as O,D as Xe}from"./DarkModeRounded-BeOhhBQh.js";import{B as et,N as tt}from"./NotificationsRounded-DSSC8er_.js";import{I as st,S as rt,E as nt}from"./ExpandMoreRounded-EvpBNzDo.js";import{T as M,D as ot,u as at}from"./useMutation-Ctl-1Wtr.js";const it=g(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),ct=E(Q)(Ee(({theme:t})=>({display:"flex",marginLeft:`calc(${t.spacing(1)} * 0.5)`,marginRight:`calc(${t.spacing(1)} * 0.5)`,...t.palette.mode==="light"?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...t.palette.mode==="light"?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}},"&:active":{boxShadow:t.shadows[0],...t.palette.mode==="light"?{backgroundColor:Y(t.palette.grey[200],.12)}:{backgroundColor:Y(t.palette.grey[600],.12)}}}))),lt=E(it)({width:24,height:16});function dt(t){const{slots:s={},slotProps:r={},...n}=t,o=t;return e.jsx("li",{children:e.jsx(ct,{focusRipple:!0,...n,ownerState:o,children:e.jsx(lt,{as:s.CollapsedIcon,ownerState:o,...r.collapsedIcon})})})}function ht(t){return Le("MuiBreadcrumbs",t)}const ut=Me("MuiBreadcrumbs",["root","ol","li","separator"]),pt=t=>{const{classes:s}=t;return Ae({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},ht,s)},xt=E(h,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(t,s)=>[{[`& .${ut.li}`]:s.li},s.root]})({}),mt=E("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(t,s)=>s.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),ft=E("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(t,s)=>s.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function gt(t,s,r,n){return t.reduce((o,l,c)=>(c<t.length-1?o=o.concat(l,e.jsx(ft,{"aria-hidden":!0,className:s,ownerState:n,children:r},`separator-${c}`)):o.push(l),o),[])}const jt=p.forwardRef(function(s,r){const n=Be({props:s,name:"MuiBreadcrumbs"}),{children:o,className:l,component:c="nav",slots:d={},slotProps:x={},expandText:a="Show path",itemsAfterCollapse:m=1,itemsBeforeCollapse:u=1,maxItems:f=8,separator:j="/",...Ce}=n,[Z,Se]=p.useState(!1),w={...n,component:c,expanded:Z,expandText:a,itemsAfterCollapse:m,itemsBeforeCollapse:u,maxItems:f,separator:j},B=pt(w),ke=De({elementType:d.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:w}),G=p.useRef(null),Ie=b=>{const F=()=>{Se(!0);const J=G.current.querySelector("a[href],button,[tabindex]");J&&J.focus()};return u+m>=b.length?b:[...b.slice(0,u),e.jsx(dt,{"aria-label":a,slots:{CollapsedIcon:d.CollapsedIcon},slotProps:{collapsedIcon:ke},onClick:F},"ellipsis"),...b.slice(b.length-m,b.length)]},V=p.Children.toArray(o).filter(b=>p.isValidElement(b)).map((b,F)=>e.jsx("li",{className:B.li,children:b},`child-${F}`));return e.jsx(xt,{ref:r,component:c,color:"textSecondary",className:Te(B.root,l),ownerState:w,...Ce,children:e.jsx(mt,{className:B.ol,ref:G,ownerState:w,children:gt(Z||f&&V.length<=f?V:Ie(V),B.separator,j,w)})})}),bt=ce(),H=ce({cssVariables:{colorSchemeSelector:".mode-%s"},typography:{fontFamily:'Comfortaa, "jf openhuninn"'},colorSchemes:{light:{palette:{primary:{main:"#66cccc",dark:"#45a1a1"},secondary:{main:"#66cccc90",dark:"color-mix(in srgb, #66cccc 50%, var(--mui-palette-text-primary) 50%)"}}},dark:{palette:{primary:{main:"#66cccc",dark:"#2d8686"},secondary:{main:"#66cccc90",dark:"color-mix(in srgb, #66cccc 50%, var(--mui-palette-text-primary) 50%)"},background:{default:"#222",paper:"#222"}}}},breakpoints:{values:{...bt.breakpoints.values,sm:700,ml:1440}},components:{MuiInputBase:{defaultProps:{sx:{"&.Mui-disabled::before":{borderBottomStyle:"solid"}}}}},spacing:"0.5rem"}),he=()=>{const t=R(H.breakpoints.up("lg")),s=R(H.breakpoints.up("md")),r=R(H.breakpoints.up("sm"));return p.useEffect(()=>{t?document.documentElement.style.fontSize="16px":s&&(document.documentElement.style.fontSize="14px")},[t,s,r]),{isLg:t,isMd:s,isSm:r}},se=t=>{let s;const r=new Set,n=(a,m)=>{const u=typeof a=="function"?a(s):a;if(!Object.is(u,s)){const f=s;s=m??(typeof u!="object"||u===null)?u:Object.assign({},s,u),r.forEach(j=>j(s,f))}},o=()=>s,d={setState:n,getState:o,getInitialState:()=>x,subscribe:a=>(r.add(a),()=>r.delete(a))},x=s=t(n,o,d);return d},vt=t=>t?se(t):se,yt=t=>t;function wt(t,s=yt){const r=X.useSyncExternalStore(t.subscribe,()=>s(t.getState()),()=>s(t.getInitialState()));return X.useDebugValue(r),r}const re=t=>{const s=vt(t),r=n=>wt(s,n);return Object.assign(r,s),r},Ct=t=>t?re(t):re,ue=Ct(t=>({client:null,setClient:s=>t({client:s}),resetClient:()=>t({client:null})})),T=500;class St{constructor(s){D(this,"dbPromise",null);D(this,"dbPath");D(this,"storageKey");this.dbPath=s.dbPath,this.storageKey=s.storageKey}async ready(){this.dbPromise=this.dbPromise===null?this.loadDatabase():this.dbPromise,await this.dbPromise}async exec(s,r){const n=Date.now();this.dbPromise=this.dbPromise===null?this.loadDatabase():this.dbPromise;const o=await this.dbPromise;o.run("PRAGMA foreign_keys = ON;");const[{values:l}]=o.exec("PRAGMA foreign_keys;");if(l[0][0]!==1)return console.error("Failed to enable foreign keys"),this.parse([]);const c=await y((async()=>{const x=o.exec(s,r);return await this.saveDatabase(o),x})());if(c.error!==null)return console.error("Failed to execute SQL query",c.error),this.parse([]);const d=Date.now()-n;return d<T&&await new Promise(x=>setTimeout(x,T-d)),this.parse(c.data)}async reset(){const s=Date.now(),{error:r}=await y(Qe(this.storageKey)),n=Date.now()-s;n<T&&await new Promise(o=>setTimeout(o,T-n)),r?console.error("刪除本地資料庫失敗"):console.log("刪除本地資料庫成功"),this.dbPromise=this.loadDatabase()}async getDatabaseSize(){await this.ready();const{data:s,error:r}=await y(ee(this.storageKey));return r?(console.error("Failed to get database size",r),0):s?s.byteLength:0}parse(s){if(s.length===0||!s[0])return[];const{columns:r,values:n}=s[0];return n.map(o=>Object.fromEntries(r.map((l,c)=>[l,o[c]])))}async loadDatabase(){const s=await We({locateFile:x=>`https://sql.js.org/dist/${x}`}),{data:r,error:n}=await y(ee(this.storageKey));if(n&&console.error("Failed to get cached database",n),r)return new s.Database(r);const{data:o,error:l}=await y((async()=>{const a=await(await fetch(this.dbPath)).arrayBuffer();return new s.Database(new Uint8Array(a))})());if(l)return console.error("Failed to fetch database file",l),new s.Database;const c=o.export(),{error:d}=await y(te(this.storageKey,c));return d&&console.error("Failed to save database to IndexedDB",d),o}async saveDatabase(s){const r=s.export(),{error:n}=await y(te(this.storageKey,r));n&&console.error("Failed to save database to IndexedDB",n)}}const pe=new Event("locationchange"),kt=window.history.pushState,It=window.history.replaceState;window.history.pushState=function(...t){kt.apply(this,t),window.dispatchEvent(pe)};window.history.replaceState=function(...t){It.apply(this,t),window.dispatchEvent(pe)};const Rt=t=>t.startsWith("/")?t:"/"+t;function ne(t){document.startViewTransition?document.startViewTransition(t):t()}const K="__preserved__hash__key__";function L(){const[t,s]=p.useState(new URLSearchParams(window.location.search)),[r,n]=p.useState(window.location.hash),o=p.useRef(new Set),l=p.useMemo(()=>({get:a=>(o.current.add(a),t.get(a)),getAll:a=>(o.current.add(a),t.getAll(a)),has:a=>(o.current.add(a),t.has(a))}),[t]),c=p.useMemo(()=>({get:a=>(o.current.add(K),a!=null&&a.raw?r:r.replace(/^#/,"")),getParts:()=>(o.current.add(K),r.replace(/^#/,"").split("/").filter(Boolean))}),[r]),d=p.useCallback(a=>{const m=new URL(window.location.href);Object.entries(a).forEach(([u,f])=>{f===null?m.searchParams.delete(u):m.searchParams.set(u,f)}),m.hash=window.location.hash,ne(()=>window.history.pushState({},"",m))},[]),x=p.useCallback(a=>{const m=new URL(window.location.href);m.hash=Rt(a),ne(()=>window.history.pushState({},"",m))},[]);return p.useEffect(()=>{const a=()=>{const m=new URLSearchParams(window.location.search),u=window.location.hash;let f=!1;o.current.forEach(j=>{(j===K&&r!==u||t.get(j)!==m.get(j))&&(f=!0)}),f&&(s(m),n(u))};return window.addEventListener("popstate",a),window.addEventListener("locationchange",a),()=>{window.removeEventListener("popstate",a),window.removeEventListener("locationchange",a)}},[t,o,r]),{searchParams:l,updateSearchParams:d,hash:c,updateHash:x}}const xe={forum:Ne},Pt=t=>He(xe).includes(t);function Et(){const{searchParams:t}=L(),s=ue(n=>n.setClient),r=de();p.useEffect(()=>{let n=t.get("db");if((n===null||n.trim()==="")&&(n="forum"),!Pt(n))throw new Error(`要求資料庫 "${n}" 不存在`);const o=new St({dbPath:xe[n],storageKey:`sqlite-db-${n}`});s(o),r.resetQueries({queryKey:[]})},[s,t,r])}const Mt=g(e.jsx("path",{d:"M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42a.996.996 0 0 0-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1"}));function me({error:t,resetErrorBoundary:s,isFatal:r}){return he(),e.jsxs(i,{sx:{position:"fixed",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:{xs:2,sm:4},bgcolor:"background.default"},children:[e.jsx(i,{sx:{position:"absolute",inset:0,bgcolor:"primary.main",opacity:.1,pointerEvents:"none"}}),e.jsx(i,{sx:{position:"absolute",inset:0,pointerEvents:"none",overflow:"hidden",display:"flex",justifyContent:"center"},children:e.jsxs(i,{sx:{position:"absolute",maskImage:"radial-gradient(circle at 50% 25%, #0008 0%, #0008 100%)",pointerEvents:"none",bgcolor:"primary.main",fill:"var(--mui-palette-background-paper)",fillOpacity:.2,width:1,minWidth:1200,height:1},children:[e.jsxs("svg",{style:{scale:"1 -1"},width:"100%",height:"200",viewBox:"0 0 1920 300",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,160 C160,180 320,140 480,160 C640,180 800,120 960,150 C1120,180 1280,130 1440,160 C1600,190 1760,150 1920,170 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,190 C120,210 240,160 360,190 C480,220 600,140 720,180 C840,220 960,130 1080,180 C1200,230 1320,160 1440,200 C1560,240 1740,180 1920,210 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,230 C160,250 320,190 480,230 C640,270 800,180 960,220 C1120,260 1280,170 1440,210 C1600,250 1760,200 1920,230 L1920,300 L0,300 Z"})]}),e.jsxs("svg",{style:{position:"absolute",inset:"auto 0 0 0"},width:"100%",height:"200",viewBox:"0 0 1920 300",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,160 C160,180 320,140 480,160 C640,180 800,120 960,150 C1120,180 1280,130 1440,160 C1600,190 1760,150 1920,170 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,190 C120,210 240,160 360,190 C480,220 600,140 720,180 C840,220 960,130 1080,180 C1200,230 1320,160 1440,200 C1560,240 1740,180 1920,210 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,230 C160,250 320,190 480,230 C640,270 800,180 960,220 C1120,260 1280,170 1440,210 C1600,250 1760,200 1920,230 L1920,300 L0,300 Z"})]})]})}),e.jsx(i,{sx:{position:"relative",zIndex:1,display:"grid",placeItems:"center"},children:e.jsxs(z,{sx:{gap:5,alignItems:"center"},children:[e.jsxs(i,{sx:{display:"flex",gap:1,alignItems:"center",translate:"-2.5%"},children:[e.jsx(N,{sx:{fontSize:"4rem",color:"secondary.dark"}}),e.jsx(h,{variant:"h3",component:"h1",sx:{fontFamily:'"timemachine-wa"',color:"secondary.dark"},children:"資料樣板"})]}),e.jsxs(z,{sx:{gap:1,alignItems:"center"},children:[e.jsx(h,{variant:"h5",component:"h3",children:"發生錯誤"}),e.jsx(h,{variant:"body1",sx:{color:"text.secondary"},children:(t==null?void 0:t.message)||"未知錯誤"})]}),e.jsxs(i,{sx:{display:"flex",gap:2,mt:2,color:"text.secondary"},children:[!r&&e.jsx(P,{variant:"outlined",color:"inherit",disableElevation:!0,href:ze.datahub_home,startIcon:e.jsx(Mt,{}),children:"返回首頁"}),s&&e.jsx(P,{variant:"text",color:"inherit",onClick:()=>s(),startIcon:e.jsx(Ze,{}),children:"重新載入"})]})]})})]})}const Lt=()=>e.jsx(me,{error:{message:"請使用寬度超過 700px 的裝置或將視窗放大，以使用此應用程式。"},isFatal:!0}),Bt=new Ge;function oe({children:t}){return e.jsxs(Oe,{theme:H,children:[e.jsx(_e,{}),e.jsx(Ve,{}),e.jsx(Je,{client:Bt,children:e.jsx(Ye,{fallbackRender:s=>e.jsx(me,{...s}),children:t})})]})}const Dt=()=>e.jsxs(W,{select:!0,defaultValue:"db",size:"small",variant:"outlined",sx:{bgcolor:"background.paper",backgroundImage:"linear-gradient(#fff1, #fff1)",borderRadius:1},slotProps:{input:{sx:{"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"secondary.main"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"divider"}}}},children:[e.jsx(v,{value:"db",dense:!0,children:"資料庫"}),e.jsx(v,{value:"table",dense:!0,children:"資料表"}),e.jsx(v,{value:"column",dense:!0,children:"欄位"}),e.jsx(v,{value:"record",dense:!0,children:"紀錄"})]}),Tt=()=>{const[t,s]=p.useState(""),r=l=>s(l.target.value),n="#"+t,o=({key:l})=>{if(l==="Enter"){if(!t.trim())return console.error("請輸入搜尋內容");console.log("還沒寫完，請稍後再試"),window.location.href="#"}};return e.jsx(W,{variant:"outlined",label:"搜尋",size:"small",sx:{width:"20vw",maxWidth:"22rem",bgcolor:"background.paper",backgroundImage:"linear-gradient(#fff1, #fff1)",borderRadius:1},value:t,onChange:r,onKeyDown:o,slotProps:{input:{sx:{"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"secondary.main"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"divider"}},endAdornment:e.jsx(M,{title:t.trim()?"搜尋":"請輸入搜尋內容",arrow:!0,children:e.jsx(st,{position:"end",children:e.jsx(O,{edge:"end",href:n,disabled:!t.trim(),children:e.jsx(rt,{})})})})}}})},At=()=>{const[t,s]=p.useState(null),r=o=>s(o.currentTarget),n=()=>s(null);return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"切換主題",arrow:!0,children:e.jsx(O,{onClick:r,children:e.jsx(Xe,{})})}),e.jsx(Ht,{open:!!t,anchorEl:t,onClose:n,anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"}})]})},Ht=({onClose:t,...s})=>{const{mode:r,setMode:n}=Fe(),o=l=>()=>{n(l),t()};return e.jsx(le,{anchorOrigin:{horizontal:"right",vertical:"top"},onClose:t,...s,children:e.jsxs(Ke,{dense:!0,children:[e.jsx(v,{onClick:o("light"),selected:r==="light",children:"淺色"}),e.jsx(v,{onClick:o("dark"),selected:r==="dark",children:"暗色"}),e.jsx(v,{onClick:o("system"),selected:r==="system",children:"跟隨系統"})]})})},zt=g(e.jsx("path",{d:"m8.71 11.71 2.59 2.59c.39.39 1.02.39 1.41 0l2.59-2.59c.63-.63.18-1.71-.71-1.71H9.41c-.89 0-1.33 1.08-.7 1.71"})),Ot=()=>{const t=R(s=>s.breakpoints.up("md"));return e.jsxs(Q,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,textAlign:"left",borderRadius:1,p:.5,px:1.5,"&:hover":{bgcolor:"action.hover"}},children:[e.jsx(i,{sx:{width:"2.8rem",aspectRatio:1,borderRadius:1,bgcolor:"primary.main",display:"grid",placeItems:"center"},children:e.jsx(h,{variant:"h6",component:"span",sx:{color:"primary.contrastText"},children:"1"})}),e.jsxs(i,{sx:{pr:{xs:0,md:1}},children:[e.jsx(h,{variant:"subtitle1",component:"h6",children:"1ureka"}),t&&e.jsx(h,{variant:"body2",component:"p",color:"text.secondary",children:"資料庫管理員"})]}),e.jsx(i,{sx:{color:"text.secondary"},children:e.jsx(zt,{color:"inherit"})})]})},fe=72,C={display:"flex",flexDirection:"row",alignItems:"center"},_t=()=>{const t=R(s=>s.breakpoints.up("md"));return e.jsxs(i,{component:"header",sx:{position:"relative",gap:3,justifyContent:"space-between",px:3.5,bgcolor:"background.paper",height:fe,...C},children:[e.jsx(i,{sx:{position:"absolute",inset:0,bgcolor:"primary.main",opacity:.1,pointerEvents:"none"}}),e.jsxs(i,{sx:{gap:6,...C},children:[e.jsxs(i,{sx:{gap:1,...C},children:[e.jsx(N,{sx:{fontSize:"3em",color:"primary.main"}}),t&&e.jsx(h,{variant:"h4",component:"h1",sx:{fontFamily:'"timemachine-wa"',color:"secondary.dark"},children:"資料樣板"})]}),e.jsxs(i,{sx:{gap:.5,...C},children:[e.jsx(Dt,{}),e.jsx(Tt,{})]})]}),e.jsxs(i,{sx:{gap:2,...C},children:[e.jsx(At,{}),e.jsx(M,{title:"通知",arrow:!0,children:e.jsx(O,{children:e.jsx(et,{variant:"dot",badgeContent:1,color:"error",children:e.jsx(tt,{})})})}),e.jsx(Ot,{})]})]})},ge=g(e.jsx("path",{d:"M4 13h6c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1m0 8h6c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1m10 0h6c.55 0 1-.45 1-1v-8c0-.55-.45-1-1-1h-6c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1M13 4v4c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1h-6c-.55 0-1 .45-1 1"})),je=g(e.jsx("path",{d:"M14 10.5v.5h-3v-.5c0-.83-.67-1.5-1.5-1.5h-1V7h1c.83 0 1.5-.67 1.5-1.5v-3c0-.83-.67-1.5-1.5-1.5h-4C4.67 1 4 1.67 4 2.5v3C4 6.33 4.67 7 5.5 7h1v2h-1C4.67 9 4 9.67 4 10.5v3c0 .83.67 1.5 1.5 1.5h1v2h-1c-.83 0-1.5.67-1.5 1.5v3c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5v-3c0-.83-.67-1.5-1.5-1.5h-1v-2h1c.83 0 1.5-.67 1.5-1.5V13h3v.5c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5v-3c0-.83-.67-1.5-1.5-1.5h-4c-.83 0-1.5.67-1.5 1.5"})),be=g(e.jsx("path",{d:"M4 14h2c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m0 5h2c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1M4 9h2c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m5 5h11c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m0 5h11c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1M8 6v2c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1"})),ve=g(e.jsx("path",{d:"M20 4H4c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.89-2-2-2m0 14H4V8h16zm-8-2c0-.55.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1M6.79 9.71c.39-.39 1.02-.39 1.41 0l2.59 2.59c.39.39.39 1.02 0 1.41L8.2 16.3c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41L8.67 13l-1.88-1.88a.996.996 0 0 1 0-1.41"})),Vt=g(e.jsx("path",{d:"M5 10h10c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1m0-4h10c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1m0 8h6c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1m9 .88v4.23c0 .39.42.63.76.43l3.53-2.12c.32-.19.32-.66 0-.86l-3.53-2.12c-.34-.19-.76.05-.76.44"})),Ft=g(e.jsx("path",{d:"M17.7 15.89 13.82 12l3.89-3.89c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0l-4.59 4.59c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.38.38-1.02-.01-1.4M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1"})),S=({title:t,active:s,onClick:r,children:n})=>e.jsx(M,{title:t,arrow:!0,placement:"right",children:e.jsx(O,{color:"inherit",centerRipple:!1,onClick:r,sx:{borderRadius:1,aspectRatio:1,bgcolor:s?"#fffc":void 0,boxShadow:s?1:void 0,color:s?"primary.dark":void 0,"&:hover":{bgcolor:s?"#fffe":void 0},transition:"all 0.2s ease-in-out"},children:n})}),k=({title:t,description:s,icon:r,active:n,onClick:o})=>e.jsx(Q,{onClick:o,sx:{borderRadius:1,bgcolor:n?"#fffc":void 0,boxShadow:n?1:void 0,"&:hover":{bgcolor:n?"#fffe":"#fff1"},transition:"all 0.2s ease-in-out"},children:e.jsxs(i,{sx:{display:"flex",gap:2,alignItems:"center",p:2,width:1},children:[e.jsx(i,{children:r}),e.jsxs(i,{sx:{flex:1,textAlign:"left"},children:[e.jsx(h,{variant:"h6",component:"h6",sx:{color:n?"primary.dark":"#fffc"},children:t}),s&&e.jsx(h,{variant:"body2",component:"p",sx:{color:n?"primary.dark":"#fffc",opacity:.8},children:s})]})]})}),Kt=({open:t,onClose:s})=>{const{searchParams:r,updateSearchParams:n,updateHash:o,hash:l}=L(),c=d=>()=>{n({db:d})};return e.jsxs(ot,{anchor:"left",open:t,onClose:s,sx:{"& .MuiDrawer-paper":{width:450,maxWidth:"100vw",bgcolor:"primary.dark",p:3,display:"flex",flexDirection:"column",gap:2}},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,mb:2},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(N,{sx:{fontSize:"3em",color:"#fffc"}}),e.jsx(h,{variant:"h4",component:"h1",sx:{fontFamily:'"timemachine-wa"',color:"#fffc"},children:"資料樣板"})]}),e.jsx(W,{className:"mode-dark",select:!0,label:"資料庫",variant:"outlined",slotProps:{select:{IconComponent:nt}},value:r.get("db")||"forum",children:e.jsx(v,{value:"forum",dense:!0,children:e.jsx(h,{variant:"body2",sx:{color:"text.primary"},onClick:c("forum"),children:"論壇資料庫"})})})]}),e.jsx(k,{title:"概覽",description:"快速掌握資料庫狀態與視覺化圖表",icon:e.jsx(ge,{sx:{color:l.getParts().length===0?"primary.dark":"#fffc",fontSize:"3.5rem"}}),active:l.getParts().length===0,onClick:()=>{o(""),s()}}),e.jsx(k,{title:"資料庫結構",description:"圖像化呈現資料表間的關聯",icon:e.jsx(je,{sx:{color:l.getParts()[0]==="schema"?"primary.dark":"#fffc",fontSize:"3.5rem"}}),active:l.getParts()[0]==="schema",onClick:()=>{o("schema"),s()}}),e.jsx(k,{title:"資料表",description:"檢視、編輯與標準化資料表內容",icon:e.jsx(be,{sx:{color:"#fffc",fontSize:"3.5rem"}}),onClick:s}),e.jsx(k,{title:"撰寫查詢",description:"手動撰寫 SQL 以進行自定義查詢",icon:e.jsx(ve,{sx:{color:"#fffc",fontSize:"3.5rem"}}),onClick:s}),e.jsx(i,{sx:{flex:1}}),e.jsx(k,{title:"收起側邊欄",icon:e.jsx(Ft,{sx:{color:"#fffc",fontSize:"2rem"}}),onClick:s})]})},qt=()=>{const{updateHash:t,hash:s}=L(),[r,n]=p.useState(!1),o=()=>n(!r);return e.jsxs(z,{sx:{position:"relative",bgcolor:"primary.dark",p:2,py:4,color:"#fffc",height:1,gap:2},children:[e.jsx(S,{title:"概覽",active:s.getParts().length===0,onClick:()=>t(""),children:e.jsx(ge,{})}),e.jsx(S,{title:"資料庫結構",active:s.getParts()[0]==="schema",onClick:()=>t("schema"),children:e.jsx(je,{})}),e.jsx(S,{title:"資料表",children:e.jsx(be,{})}),e.jsx(S,{title:"撰寫查詢",children:e.jsx(ve,{})}),e.jsx(i,{sx:{flex:1}}),e.jsx(S,{title:"展開面板",onClick:o,children:e.jsx(Vt,{})}),e.jsx(Kt,{open:r,onClose:o})]})},Ut=g(e.jsx("path",{d:"M19 13H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2M7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2M19 3H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),$t=()=>e.jsx(i,{sx:{position:"absolute",inset:0,pointerEvents:"none",overflow:"hidden",display:"flex",justifyContent:"center"},children:e.jsx(i,{sx:{position:"relative",maskImage:"radial-gradient(circle at 50% 25%, #0003 0%, #000a 100%)",bgcolor:"primary.main",fill:"var(--mui-palette-background-paper)",fillOpacity:.375,width:1,minWidth:1200,height:1},children:e.jsxs("svg",{style:{scale:"1.01 -1"},width:"100%",height:"200",viewBox:"0 0 1920 300",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,160 C160,180 320,140 480,160 C640,180 800,120 960,150 C1120,180 1280,130 1440,160 C1600,190 1760,150 1920,170 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,190 C120,210 240,160 360,190 C480,220 600,140 720,180 C840,220 960,130 1080,180 C1200,230 1320,160 1440,200 C1560,240 1740,180 1920,210 L1920,300 L0,300 Z"}),e.jsx("path",{d:"M0,230 C160,250 320,190 480,230 C640,270 800,180 960,220 C1120,260 1280,170 1440,210 C1600,250 1760,200 1920,230 L1920,300 L0,300 Z"})]})})}),Qt=g(e.jsx("path",{d:"M12 5V3.21c0-.45-.54-.67-.85-.35l-2.8 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.32.31.86.09.86-.36V7c3.31 0 6 2.69 6 6 0 2.72-1.83 5.02-4.31 5.75-.42.12-.69.52-.69.95 0 .65.62 1.16 1.25.97C17.57 19.7 20 16.64 20 13c0-4.42-3.58-8-8-8m-6 8c0-1.34.44-2.58 1.19-3.59.3-.4.26-.95-.09-1.31-.42-.42-1.14-.38-1.5.1-1 1.34-1.6 3-1.6 4.8 0 3.64 2.43 6.7 5.75 7.67.63.19 1.25-.32 1.25-.97 0-.43-.27-.83-.69-.95C7.83 18.02 6 15.72 6 13"})),Wt=g(e.jsx("path",{d:"M16.59 9H15V4c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v5H7.41c-.89 0-1.34 1.08-.71 1.71l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.63-.63.19-1.71-.7-1.71M5 19c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1"})),Nt=g(e.jsx("path",{d:"M10 16h4c.55 0 1-.45 1-1v-5h1.59c.89 0 1.34-1.08.71-1.71L12.71 3.7a.996.996 0 0 0-1.41 0L6.71 8.29c-.63.63-.19 1.71.7 1.71H9v5c0 .55.45 1 1 1m-4 2h12c.55 0 1 .45 1 1s-.45 1-1 1H6c-.55 0-1-.45-1-1s.45-1 1-1"})),Zt=()=>{const{client:t}=ue.getState();if(!t)throw new Error("SQLite client is not initialized.");return t},Gt=()=>Zt().reset(),Jt=()=>{const t=de();return at({mutationFn:Gt,onSuccess:()=>{t.resetQueries({queryKey:[]})},onError:s=>{console.error("重置資料庫失敗:",s),t.resetQueries({queryKey:[]})}})},ae={outlined:{variant:"outlined",color:"inherit"},main:{variant:"contained",color:"inherit"},danger:{variant:"contained",color:"error"}},q=({variant:t,sx:s,children:r,...n})=>e.jsx(P,{variant:ae[t].variant,color:ae[t].color,sx:{scale:"1.001","&:hover":{scale:"1.05"},"&:active":{scale:"0.95"},transition:"all 0.2s ease",...s},...n,children:r}),Yt=()=>{const{status:t,mutate:s}=Jt(),[r,n]=p.useState(null),o=d=>{t!=="pending"&&n(d.currentTarget)},l=()=>{s(),n(null)},c=()=>{n(null)};return e.jsxs(i,{sx:{display:"flex",gap:1.5,color:"text.primary"},children:[e.jsx(q,{startIcon:e.jsx(Wt,{}),variant:"outlined",children:"匯入"}),e.jsx(q,{startIcon:e.jsx(Nt,{}),variant:"main",disableElevation:!0,sx:{bgcolor:"background.paper"},children:"匯出"}),e.jsx(M,{title:e.jsx(h,{variant:"body2",children:"從伺服器複製一份副本取代目前資料"}),placement:"bottom",arrow:!0,children:e.jsx("span",{children:e.jsx(q,{startIcon:e.jsx(Qt,{}),variant:"danger",disableElevation:!0,sx:{cursor:"help",pr:2.5},loading:t==="pending",onClick:o,children:"重置"})})}),e.jsx(le,{open:!!r,anchorEl:r,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:3,children:e.jsxs(i,{sx:{p:2,maxWidth:300},children:[e.jsx(h,{variant:"subtitle1",sx:{mb:1},children:"確認重置資料庫"}),e.jsx(h,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"此操作將從伺服器複製一份新的資料庫，並覆蓋所有本地修改。為避免資料庫不一致，請先關閉所有本網站的分頁再繼續。確定要繼續嗎？"}),e.jsxs(i,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(P,{variant:"outlined",size:"small",onClick:c,color:"inherit",children:"取消"}),e.jsx(P,{variant:"contained",color:"error",size:"small",onClick:l,disabled:t==="pending",disableElevation:!0,children:"確認重置"})]})]})})]})},I={color:"text.secondary"},A={...I,borderRadius:1,bgcolor:"divider",p:.7},Xt=()=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(h,{variant:"body2",sx:A,children:"⇧ Shift"}),e.jsx(h,{variant:"body2",sx:I,children:" + "}),e.jsx(h,{variant:"body2",sx:A,children:"LMB"}),e.jsx(h,{variant:"body2",sx:I,children:"可選取方框範圍內的所有項目，"}),e.jsx(h,{variant:"body2",sx:A,children:"⌘ / Ctrl"}),e.jsx(h,{variant:"body2",sx:I,children:" + "}),e.jsx(h,{variant:"body2",sx:A,children:"LMB"}),e.jsx(h,{variant:"body2",sx:I,children:"可多選個別項目。"})]}),ye={home:"概覽",schema:"結構圖"},es={home:e.jsx(Yt,{}),schema:e.jsx(Xt,{})},ts=t=>Object.keys(ye).includes(t),ss=()=>{const[t,s]=p.useState(null),r=m=>s(u=>u?null:m.currentTarget),n=()=>s(null),{updateSearchParams:o,searchParams:l,hash:c}=L(),d=m=>()=>{o({db:m}),s(null)},x=c.getParts(),a=x[0]||"home";if(!ts(a)||x.length>1)throw new Error(`頁面不存在: ${c.get()}`);return e.jsxs(i,{sx:{position:"relative",p:5,overflow:"hidden",borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0},children:[e.jsx($t,{}),e.jsxs(i,{sx:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(Ut,{fontSize:"small",sx:{color:"text.secondary"}}),e.jsxs(jt,{children:[e.jsx(h,{variant:"body2",sx:{color:"text.secondary"},children:"資料庫"}),e.jsx(h,{variant:"body2",sx:{"&:hover":{textDecoration:"underline"},cursor:"pointer",color:"text.primary"},onClick:r,children:"論壇資料庫"})]}),e.jsx(qe,{open:!!t,anchorEl:t,onClose:n,children:e.jsx(v,{onClick:n,selected:(l.get("db")||"forum")==="forum",children:e.jsx(h,{variant:"body2",sx:{color:"text.primary"},onClick:d("forum"),children:"論壇資料庫"})})})]}),e.jsx(h,{variant:"h4",component:"h2",sx:{pt:1.5},children:ye[a]})]}),es[a]]})]})},rs="modulepreload",ns=function(t){return"/"+t},ie={},_=function(s,r,n){let o=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(r.map(x=>{if(x=ns(x),x in ie)return;ie[x]=!0;const a=x.endsWith(".css"),m=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${m}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":rs,a||(u.as="script"),u.crossOrigin="",u.href=x,d&&u.setAttribute("nonce",d),document.head.appendChild(u),a)return new Promise((f,j)=>{u.addEventListener("load",f),u.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return s().catch(l)})},Cs={xs:4,md:6,xl:8},os={xs:3,md:4,xl:5},Ss={xs:1,md:2,xl:3},ks={xs:0,md:0,xl:0},Is={color:"background.paper",bgcolor:"primary.main",borderRadius:1,p:1,fontSize:"3rem"},Rs={"&:hover":{textDecoration:"underline"},cursor:"pointer"},Ps={display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all"},Es="all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",as=p.lazy(()=>_(()=>import("./LargeTiles-BBoeaOv1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(t=>({default:t.LargeTiles}))),is=p.lazy(()=>_(()=>import("./SmallTiles-CyRiieXD.js"),__vite__mapDeps([20,1,21,6,7,4,2,3,5,15,8,22,9,17,18,19])).then(t=>({default:t.SmallTiles}))),cs=p.lazy(()=>_(()=>import("./Sidebar-DyL0Ciog.js"),__vite__mapDeps([23,1,12,24,25,26,8,16,7,4,2,3,5,17,18,19]))),ls=p.lazy(()=>_(()=>import("./FlowChart-D7teaGZM.js"),__vite__mapDeps([27,1,28,24,2,3,4,5,11,12,13,8,14,7,22,17,18,19]))),$={borderRadius:4,boxShadow:"none",flex:1},we={home:()=>e.jsxs(U,{sx:{...$,p:os},children:[e.jsx(is,{}),e.jsx(as,{})]}),schema:()=>e.jsxs(U,{sx:{...$,position:"relative",overflow:"hidden",display:"flex",alignItems:"stretch"},children:[e.jsx("title",{children:"資料樣板 | 結構圖"}),e.jsx(cs,{}),e.jsx(ls,{})]})},ds=t=>Object.keys(we).includes(t),hs=()=>e.jsx(U,{sx:{...$,position:"relative",display:"grid",placeItems:"stretch"},children:e.jsx(i,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:e.jsx(Ue,{})})}),us=()=>{const{hash:t}=L(),s=t.getParts(),r=s[0]||"home";if(!ds(r)||s.length>1)throw new Error(`頁面不存在: ${t.get()}`);return e.jsx(p.Suspense,{fallback:e.jsx(hs,{}),children:we[r]()})},ps=()=>(Et(),null);function xs(){const{isSm:t}=he();return t?e.jsxs(oe,{children:[e.jsx(ps,{}),e.jsx(_t,{}),e.jsxs(i,{component:"main",sx:{position:"relative",display:"flex",height:`calc(100dvh - ${fe}px)`},children:[e.jsx(i,{sx:{position:"absolute",inset:0,bgcolor:"primary.main",opacity:.2,pointerEvents:"none"}}),e.jsx(qt,{}),e.jsx(i,{sx:{position:"relative",flex:1,height:1,overflow:"auto"},id:"scroll-area",children:e.jsxs(z,{sx:{minHeight:1,gap:3,px:2,pb:3},children:[e.jsx(ss,{}),e.jsx(us,{})]})})]})]}):e.jsx(oe,{children:e.jsx(Lt,{})})}$e.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(xs,{})}));export{zt as A,Qt as R,L as a,ue as b,Es as c,Ps as e,Cs as l,os as m,ks as n,Ss as s,Is as t,Rs as u};
