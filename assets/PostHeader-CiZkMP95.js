var nt=e=>{throw TypeError(e)};var _e=(e,t,s)=>t.has(e)||nt("Cannot "+s);var S=(e,t,s)=>(_e(e,t,"read from private field"),s?s.call(e):t.get(e)),ve=(e,t,s)=>t.has(e)?nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),ye=(e,t,s,n)=>(_e(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),be=(e,t,s)=>(_e(e,t,"access private method"),s);import{g as Y,a as K,r as c,u as _,al as Vt,M as Gt,a7 as Qe,am as Kt,U as vt,j as o,s as w,c as E,d as H,an as rt,m as q,o as k,Q as Z,D as Ye,P as yt,V as at,a1 as Qt,b as V,ao as Yt,ap as Xt,aq as Jt,e as bt,ar as Le,G as $e,T as p,as as it,at as we,au as Zt,av as lt,aw as ct,B as u,A as Xe,q as U,y as A,ax as jt,ay as eo,t as to,a0 as oo,v as Ge}from"./routes-DVE_20A7.js";import{F as wt}from"./ForumRounded-3ZIZ9FLv.js";import{S as Je,f as De,a as so,F as Ct,c as Ze,T as no,g as ro}from"./CommentRounded-ZJNG_QBu.js";import{D as pe,I as ao,S as St}from"./SearchRounded-BeeGGA9i.js";import{T as xe}from"./Tooltip-D6sM6jqj.js";import{g as io,a as lo,l as Fe,I as me,M as He,S as ue,D as co}from"./DarkModeRounded-BcA9CbiF.js";import{a as oe,u as uo}from"./session-C8jZZaHN.js";import{B as It,N as kt}from"./NotificationsRounded-BASWRzFo.js";import{n as po,s as ho,S as ee,h as Rt,f as ge,e as G}from"./ScrollArea-BEpX462B.js";import{C as Ce,E as dt}from"./ExpandMoreRounded-BqJolT4h.js";import{S as xo,s as mo,h as ut,g as go,n as Lt,u as Se}from"./RefreshRounded-DJszxv1A.js";function fo(e){return Y("MuiCollapse",e)}K("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const vo=e=>{const{orientation:t,classes:s}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return H(n,fo,s)},yo=w("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],s.state==="entered"&&t.entered,s.state==="exited"&&!s.in&&s.collapsedSize==="0px"&&t.hidden]}})(q(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),bo=w("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),jo=w("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ne=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiCollapse"}),{addEndListener:r,children:a,className:i,collapsedSize:l="0px",component:d,easing:h,in:g,onEnter:f,onEntered:v,onEntering:x,onExit:y,onExited:I,onExiting:b,orientation:j="vertical",style:L,timeout:C=Vt.standard,TransitionComponent:T=Gt,...R}=n,N={...n,orientation:j,collapsedSize:l},z=vo(N),P=Qe(),se=Kt(),F=c.useRef(null),ne=c.useRef(),X=typeof l=="number"?`${l}px`:l,M=j==="horizontal",$=M?"width":"height",D=c.useRef(null),Q=vt(s,D),re=m=>O=>{if(m){const W=D.current;O===void 0?m(W):m(W,O)}},le=()=>F.current?F.current[M?"clientWidth":"clientHeight"]:0,Be=re((m,O)=>{F.current&&M&&(F.current.style.position="absolute"),m.style[$]=X,f&&f(m,O)}),ze=re((m,O)=>{const W=le();F.current&&M&&(F.current.style.position="");const{duration:de,easing:fe}=rt({style:L,timeout:C,easing:h},{mode:"enter"});if(C==="auto"){const Re=P.transitions.getAutoHeightDuration(W);m.style.transitionDuration=`${Re}ms`,ne.current=Re}else m.style.transitionDuration=typeof de=="string"?de:`${de}ms`;m.style[$]=`${W}px`,m.style.transitionTimingFunction=fe,x&&x(m,O)}),Oe=re((m,O)=>{m.style[$]="auto",v&&v(m,O)}),ce=re(m=>{m.style[$]=`${le()}px`,y&&y(m)}),We=re(I),Ue=re(m=>{const O=le(),{duration:W,easing:de}=rt({style:L,timeout:C,easing:h},{mode:"exit"});if(C==="auto"){const fe=P.transitions.getAutoHeightDuration(O);m.style.transitionDuration=`${fe}ms`,ne.current=fe}else m.style.transitionDuration=typeof W=="string"?W:`${W}ms`;m.style[$]=X,m.style.transitionTimingFunction=de,b&&b(m)}),qe=m=>{C==="auto"&&se.start(ne.current||0,m),r&&r(D.current,m)};return o.jsx(T,{in:g,onEnter:Be,onEntered:Oe,onEntering:ze,onExit:ce,onExited:We,onExiting:Ue,addEndListener:qe,nodeRef:D,timeout:C==="auto"?null:C,...R,children:(m,{ownerState:O,...W})=>o.jsx(yo,{as:d,className:E(z.root,i,{entered:z.entered,exited:!g&&X==="0px"&&z.hidden}[m]),style:{[M?"minWidth":"minHeight"]:X,...L},ref:Q,ownerState:{...N,state:m},...W,children:o.jsx(bo,{ownerState:{...N,state:m},className:z.wrapper,ref:F,children:o.jsx(jo,{ownerState:{...N,state:m},className:z.wrapperInner,children:a})})})})});Ne&&(Ne.muiSupportAuto=!0);const wo=k(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Co(e){return Y("MuiAvatar",e)}K("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const So=e=>{const{classes:t,variant:s,colorDefault:n}=e;return H({root:["root",s,n&&"colorDefault"],img:["img"],fallback:["fallback"]},Co,t)},Io=w("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],s.colorDefault&&t.colorDefault]}})(q(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),ko=w("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ro=w(wo,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Lo({crossOrigin:e,referrerPolicy:t,src:s,srcSet:n}){const[r,a]=c.useState(!1);return c.useEffect(()=>{if(!s&&!n)return;a(!1);let i=!0;const l=new Image;return l.onload=()=>{i&&a("loaded")},l.onerror=()=>{i&&a("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=s,n&&(l.srcset=n),()=>{i=!1}},[e,t,s,n]),r}const Ft=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiAvatar"}),{alt:r,children:a,className:i,component:l="div",slots:d={},slotProps:h={},imgProps:g,sizes:f,src:v,srcSet:x,variant:y="circular",...I}=n;let b=null;const j={...n,component:l,variant:y},L=Lo({...g,...typeof h.img=="function"?h.img(j):h.img,src:v,srcSet:x}),C=v||x,T=C&&L!=="error";j.colorDefault=!T,delete j.ownerState;const R=So(j),[N,z]=Z("img",{className:R.img,elementType:ko,externalForwardedProps:{slots:d,slotProps:{img:{...g,...h.img}}},additionalProps:{alt:r,src:v,srcSet:x,sizes:f},ownerState:j});return T?b=o.jsx(N,{...z}):a||a===0?b=a:C&&r?b=r[0]:b=o.jsx(Ro,{ownerState:j,className:R.fallback}),o.jsx(Io,{as:l,className:E(R.root,i),ref:s,...I,ownerState:j,children:b})});function Fo(e){return Y("MuiBottomNavigation",e)}K("MuiBottomNavigation",["root"]);const Mo=e=>{const{classes:t}=e;return H({root:["root"]},Fo,t)},Po=w("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(q(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper}))),Eo=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiBottomNavigation"}),{children:r,className:a,component:i="div",onChange:l,showLabels:d=!1,value:h,...g}=n,f={...n,component:i,showLabels:d},v=Mo(f);return o.jsx(Po,{as:i,className:E(v.root,a),ref:s,ownerState:f,...g,children:c.Children.map(r,(x,y)=>{if(!c.isValidElement(x))return null;const I=x.props.value===void 0?y:x.props.value;return c.cloneElement(x,{selected:I===h,showLabel:x.props.showLabel!==void 0?x.props.showLabel:d,value:I,onChange:l})})})});function $o(e){return Y("MuiBottomNavigationAction",e)}const Mt=K("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Ao=e=>{const{classes:t,showLabel:s,selected:n}=e;return H({root:["root",!s&&!n&&"iconOnly",n&&"selected"],label:["label",!s&&!n&&"iconOnly",n&&"selected"]},$o,t)},To=w(Ye,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.showLabel&&!s.selected&&t.iconOnly]}})(q(({theme:e})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${Mt.selected}`]:{color:(e.vars||e).palette.primary.main},variants:[{props:({showLabel:t,selected:s})=>!t&&!s,style:{paddingTop:14}},{props:({showLabel:t,selected:s,label:n})=>!t&&!s&&!n,style:{paddingTop:0}}]}))),No=w("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(q(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${Mt.selected}`]:{fontSize:e.typography.pxToRem(14)},variants:[{props:({showLabel:t,selected:s})=>!t&&!s,style:{opacity:0,transitionDelay:"0s"}}]}))),he=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiBottomNavigationAction"}),{className:r,icon:a,label:i,onChange:l,onClick:d,selected:h,showLabel:g,value:f,...v}=n,x=n,y=Ao(x),I=b=>{l&&l(b,f),d&&d(b)};return o.jsxs(To,{ref:s,className:E(y.root,r),focusRipple:!0,onClick:I,ownerState:x,...v,children:[a,o.jsx(No,{className:y.label,ownerState:x,children:i})]})});function Do(e){return Y("MuiDialog",e)}const Ve=K("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Bo=c.createContext({}),zo=w(Xt,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Oo=e=>{const{classes:t,scroll:s,maxWidth:n,fullWidth:r,fullScreen:a}=e,i={root:["root"],container:["container",`scroll${V(s)}`],paper:["paper",`paperScroll${V(s)}`,`paperWidth${V(String(n))}`,r&&"paperFullWidth",a&&"paperFullScreen"]};return H(i,Do,t)},Wo=w(Yt,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Uo=w("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.container,t[`scroll${V(s.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),qo=w(yt,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.paper,t[`scrollPaper${V(s.scroll)}`],t[`paperWidth${V(String(s.maxWidth))}`],s.fullWidth&&t.paperFullWidth,s.fullScreen&&t.paperFullScreen]}})(q(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Ve.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${Ve.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Ve.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),_o=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiDialog"}),r=Qe(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,"aria-modal":d=!0,BackdropComponent:h,BackdropProps:g,children:f,className:v,disableEscapeKeyDown:x=!1,fullScreen:y=!1,fullWidth:I=!1,maxWidth:b="sm",onClick:j,onClose:L,open:C,PaperComponent:T=yt,PaperProps:R={},scroll:N="paper",slots:z={},slotProps:P={},TransitionComponent:se=at,transitionDuration:F=a,TransitionProps:ne,...X}=n,M={...n,disableEscapeKeyDown:x,fullScreen:y,fullWidth:I,maxWidth:b,scroll:N},$=Oo(M),D=c.useRef(),Q=Ie=>{D.current=Ie.target===Ie.currentTarget},re=Ie=>{j&&j(Ie),D.current&&(D.current=null,L&&L(Ie,"backdropClick"))},le=Qt(l),Be=c.useMemo(()=>({titleId:le}),[le]),ze={transition:se,...z},Oe={transition:ne,paper:R,backdrop:g,...P},ce={slots:ze,slotProps:Oe},[We,Ue]=Z("root",{elementType:Wo,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:M,className:E($.root,v),ref:s}),[qe,m]=Z("backdrop",{elementType:zo,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:M}),[O,W]=Z("paper",{elementType:qo,shouldForwardComponentProp:!0,externalForwardedProps:ce,ownerState:M,className:E($.paper,R.className)}),[de,fe]=Z("container",{elementType:Uo,externalForwardedProps:ce,ownerState:M,className:E($.container)}),[Re,Ht]=Z("transition",{elementType:at,externalForwardedProps:ce,ownerState:M,additionalProps:{appear:!0,in:C,timeout:F,role:"presentation"}});return o.jsx(We,{closeAfterTransition:!0,slots:{backdrop:qe},slotProps:{backdrop:{transitionDuration:F,as:h,...m}},disableEscapeKeyDown:x,onClose:L,open:C,onClick:re,...Ue,...X,children:o.jsx(Re,{...Ht,children:o.jsx(de,{onMouseDown:Q,...fe,children:o.jsx(O,{as:T,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":le,"aria-modal":d,...W,children:o.jsx(Bo.Provider,{value:Be,children:f})})})})})});function Ho(e){return Y("MuiFab",e)}const pt=K("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Vo=e=>{const{color:t,variant:s,classes:n,size:r}=e,a={root:["root",s,`size${V(r)}`,t==="inherit"?"colorInherit":t]},i=H(a,Ho,n);return{...n,...i}},Go=w(Ye,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Jt(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${V(s.size)}`],s.color==="inherit"&&t.colorInherit,t[V(s.size)],t[s.color]]}})(q(({theme:e})=>{var t,s;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:(s=(t=e.palette).getContrastText)==null?void 0:s.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${pt.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),q(({theme:e})=>({variants:[...Object.entries(e.palette).filter(bt(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),q(({theme:e})=>({[`&.${pt.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),Ko=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiFab"}),{children:r,className:a,color:i="default",component:l="button",disabled:d=!1,disableFocusRipple:h=!1,focusVisibleClassName:g,size:f="large",variant:v="circular",...x}=n,y={...n,color:i,component:l,disabled:d,disableFocusRipple:h,size:f,variant:v},I=Vo(y);return o.jsx(Go,{className:E(I.root,a),component:l,disabled:d,focusRipple:!h,focusVisibleClassName:E(I.focusVisible,g),ownerState:y,ref:s,...x,classes:I,children:r})});function Qo(e){return Y("MuiLink",e)}const Yo=K("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Xo=({theme:e,ownerState:t})=>{const s=t.color,n=Le(e,`palette.${s}.main`,!1)||Le(e,`palette.${s}`,!1)||t.color,r=Le(e,`palette.${s}.mainChannel`)||Le(e,`palette.${s}Channel`);return"vars"in e&&r?`rgba(${r} / 0.4)`:$e(n,.4)},ht={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Jo=e=>{const{classes:t,component:s,focusVisible:n,underline:r}=e,a={root:["root",`underline${V(r)}`,s==="button"&&"button",n&&"focusVisible"]};return H(a,Qo,t)},Zo=w(p,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`underline${V(s.underline)}`],s.component==="button"&&t.button]}})(q(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:s})=>t==="always"&&s.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(bt()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:$e(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:$e(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:$e(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Yo.focusVisible}`]:{outline:"auto"}}}]}))),Me=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiLink"}),r=Qe(),{className:a,color:i="primary",component:l="a",onBlur:d,onFocus:h,TypographyClasses:g,underline:f="always",variant:v="inherit",sx:x,...y}=n,[I,b]=c.useState(!1),j=R=>{it(R.target)||b(!1),d&&d(R)},L=R=>{it(R.target)&&b(!0),h&&h(R)},C={...n,color:i,component:l,focusVisible:I,underline:f,variant:v},T=Jo(C);return o.jsx(Zo,{color:i,className:E(T.root,a),classes:g,component:l,onBlur:j,onFocus:L,ref:s,ownerState:C,variant:v,...y,sx:[...ht[i]===void 0?[{color:i}]:[],...Array.isArray(x)?x:[x]],style:{...y.style,...f==="always"&&i!=="inherit"&&!ht[i]&&{"--Link-underlineColor":Xo({theme:r,ownerState:C})}}})});function es(e){return Y("MuiListItem",e)}K("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const ts=K("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function os(e){return Y("MuiListItemSecondaryAction",e)}K("MuiListItemSecondaryAction",["root","disableGutters"]);const ss=e=>{const{disableGutters:t,classes:s}=e;return H({root:["root",t&&"disableGutters"]},os,s)},ns=w("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),Pt=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiListItemSecondaryAction"}),{className:r,...a}=n,i=c.useContext(we),l={...n,disableGutters:i.disableGutters},d=ss(l);return o.jsx(ns,{className:E(d.root,r),ownerState:l,ref:s,...a})});Pt.muiName="ListItemSecondaryAction";const rs=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters,!s.disablePadding&&t.padding,s.hasSecondaryAction&&t.secondaryAction]},as=e=>{const{alignItems:t,classes:s,dense:n,disableGutters:r,disablePadding:a,divider:i,hasSecondaryAction:l}=e;return H({root:["root",n&&"dense",!r&&"gutters",!a&&"padding",i&&"divider",t==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},es,s)},is=w("div",{name:"MuiListItem",slot:"Root",overridesResolver:rs})(q(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${ts.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),ls=w("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),cs=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiListItem"}),{alignItems:r="center",children:a,className:i,component:l,components:d={},componentsProps:h={},ContainerComponent:g="li",ContainerProps:{className:f,...v}={},dense:x=!1,disableGutters:y=!1,disablePadding:I=!1,divider:b=!1,secondaryAction:j,slotProps:L={},slots:C={},...T}=n,R=c.useContext(we),N=c.useMemo(()=>({dense:x||R.dense||!1,alignItems:r,disableGutters:y}),[r,R.dense,x,y]),z=c.useRef(null),P=c.Children.toArray(a),se=P.length&&Zt(P[P.length-1],["ListItemSecondaryAction"]),F={...n,alignItems:r,dense:N.dense,disableGutters:y,disablePadding:I,divider:b,hasSecondaryAction:se},ne=as(F),X=vt(z,s),M=C.root||d.Root||is,$=L.root||h.root||{},D={className:E(ne.root,$.className,i),...T};let Q=l||"li";return se?(Q=!D.component&&!l?"div":Q,g==="li"&&(Q==="li"?Q="div":D.component==="li"&&(D.component="div")),o.jsx(we.Provider,{value:N,children:o.jsxs(ls,{as:g,className:E(ne.container,f),ref:X,ownerState:F,...v,children:[o.jsx(M,{...$,...!lt(M)&&{as:Q,ownerState:{...F,...$.ownerState}},...D,children:P}),P.pop()]})})):o.jsx(we.Provider,{value:N,children:o.jsxs(M,{...$,as:Q,ref:X,...!lt(M)&&{ownerState:{...F,...$.ownerState}},...D,children:[P,j&&o.jsx(Pt,{children:j})]})})}),ds=e=>{const{alignItems:t,classes:s}=e;return H({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},io,s)},us=w("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(q(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),Ae=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiListItemIcon"}),{className:r,...a}=n,i=c.useContext(we),l={...n,alignItems:i.alignItems},d=ds(l);return o.jsx(us,{className:E(d.root,r),ownerState:l,ref:s,...a})}),ps=e=>{const{classes:t,inset:s,primary:n,secondary:r,dense:a}=e;return H({root:["root",s&&"inset",a&&"dense",n&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},lo,t)},hs=w("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${Fe.primary}`]:t.primary},{[`& .${Fe.secondary}`]:t.secondary},t.root,s.inset&&t.inset,s.primary&&s.secondary&&t.multiline,s.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${ct.root}:where(& .${Fe.primary})`]:{display:"block"},[`.${ct.root}:where(& .${Fe.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),xs=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiListItemText"}),{children:r,className:a,disableTypography:i=!1,inset:l=!1,primary:d,primaryTypographyProps:h,secondary:g,secondaryTypographyProps:f,slots:v={},slotProps:x={},...y}=n,{dense:I}=c.useContext(we);let b=d??r,j=g;const L={...n,disableTypography:i,inset:l,primary:!!b,secondary:!!j,dense:I},C=ps(L),T={slots:v,slotProps:{primary:h,secondary:f,...x}},[R,N]=Z("root",{className:E(C.root,a),elementType:hs,externalForwardedProps:{...T,...y},ownerState:L,ref:s}),[z,P]=Z("primary",{className:C.primary,elementType:p,externalForwardedProps:T,ownerState:L}),[se,F]=Z("secondary",{className:C.secondary,elementType:p,externalForwardedProps:T,ownerState:L});return b!=null&&b.type!==p&&!i&&(b=o.jsx(z,{variant:I?"body2":"body1",component:P!=null&&P.variant?void 0:"span",...P,children:b})),j!=null&&j.type!==p&&!i&&(j=o.jsx(se,{variant:"body2",color:"textSecondary",...F,children:j})),o.jsxs(R,{...N,children:[b,j]})});function ms(e){return Y("MuiToolbar",e)}K("MuiToolbar",["root","gutters","regular","dense"]);const gs=e=>{const{classes:t,disableGutters:s,variant:n}=e;return H({root:["root",!s&&"gutters",n]},ms,t)},fs=w("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,!s.disableGutters&&t.gutters,t[s.variant]]}})(q(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),Et=c.forwardRef(function(t,s){const n=_({props:t,name:"MuiToolbar"}),{className:r,component:a="div",disableGutters:i=!1,variant:l="regular",...d}=n,h={...n,component:a,disableGutters:i,variant:l},g=gs(h);return o.jsx(fs,{as:a,className:E(g.root,r),ref:s,ownerState:h,...d})});var ae,ie,B,J,te,Te,Ke,ft,vs=(ft=class extends xo{constructor(t,s){super();ve(this,te);ve(this,ae);ve(this,ie);ve(this,B);ve(this,J);ye(this,ae,t),this.setOptions(s),this.bindMethods(),be(this,te,Te).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const s=this.options;this.options=S(this,ae).defaultMutationOptions(t),mo(this.options,s)||S(this,ae).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,B),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ut(s.mutationKey)!==ut(this.options.mutationKey)?this.reset():((n=S(this,B))==null?void 0:n.state.status)==="pending"&&S(this,B).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=S(this,B))==null||t.removeObserver(this)}onMutationUpdate(t){be(this,te,Te).call(this),be(this,te,Ke).call(this,t)}getCurrentResult(){return S(this,ie)}reset(){var t;(t=S(this,B))==null||t.removeObserver(this),ye(this,B,void 0),be(this,te,Te).call(this),be(this,te,Ke).call(this)}mutate(t,s){var n;return ye(this,J,s),(n=S(this,B))==null||n.removeObserver(this),ye(this,B,S(this,ae).getMutationCache().build(S(this,ae),this.options)),S(this,B).addObserver(this),S(this,B).execute(t)}},ae=new WeakMap,ie=new WeakMap,B=new WeakMap,J=new WeakMap,te=new WeakSet,Te=function(){var s;const t=((s=S(this,B))==null?void 0:s.state)??go();ye(this,ie,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Ke=function(t){Lt.batch(()=>{var s,n,r,a,i,l,d,h;if(S(this,J)&&this.hasListeners()){const g=S(this,ie).variables,f=S(this,ie).context;(t==null?void 0:t.type)==="success"?((n=(s=S(this,J)).onSuccess)==null||n.call(s,t.data,g,f),(a=(r=S(this,J)).onSettled)==null||a.call(r,t.data,null,g,f)):(t==null?void 0:t.type)==="error"&&((l=(i=S(this,J)).onError)==null||l.call(i,t.error,g,f),(h=(d=S(this,J)).onSettled)==null||h.call(d,void 0,t.error,g,f))}this.listeners.forEach(g=>{g(S(this,ie))})})},ft);function $t(e,t){const s=Se(),[n]=c.useState(()=>new vs(s,e));c.useEffect(()=>{n.setOptions(e)},[n,e]);const r=c.useSyncExternalStore(c.useCallback(i=>n.subscribe(Lt.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=c.useCallback((i,l)=>{n.mutate(i,l).catch(po)},[n]);if(r.error&&ho(n.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}const Tn=()=>o.jsxs(u,{sx:{position:"absolute",inset:0,pointerEvents:"none"},children:[o.jsx(u,{sx:{bgcolor:"secondary.main",height:"35vh"}}),o.jsx(u,{sx:{height:"100px",backgroundColor:"secondary.main",maskImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' fill-rule='evenodd' d='M0,0H200V100H0Z M0,0C0,0 100,100 200,0L200,100L0,100Z'/%3E%3C/svg%3E")`,maskRepeat:"repeat-x",maskPosition:"center bottom",maskSize:"auto 100px"}})]}),ys=k(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4"})),bs=k([o.jsx("path",{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V19c0 .55.45 1 1 1h8.26c-.79-1.13-1.26-2.51-1.26-4 0-1.07.25-2.07.67-2.98"},"0"),o.jsx("circle",{cx:"10",cy:"8",r:"4"},"1"),o.jsx("path",{d:"M20.75 16c0-.22-.03-.42-.06-.63l.84-.73c.18-.16.22-.42.1-.63l-.59-1.02c-.12-.21-.37-.3-.59-.22l-1.06.36q-.48-.405-1.08-.63l-.22-1.09c-.05-.23-.25-.4-.49-.4h-1.18c-.24 0-.44.17-.49.4l-.22 1.09q-.6.225-1.08.63l-1.06-.36c-.23-.08-.47.02-.59.22l-.59 1.02c-.12.21-.08.47.1.63l.84.73c-.03.21-.06.41-.06.63s.03.42.06.63l-.84.73c-.18.16-.22.42-.1.63l.59 1.02c.12.21.37.3.59.22l1.06-.36q.48.405 1.08.63l.22 1.09c.05.23.25.4.49.4h1.18c.24 0 .44-.17.49-.4l.22-1.09q.6-.225 1.08-.63l1.06.36c.23.08.47-.02.59-.22l.59-1.02c.12-.21.08-.47-.1-.63l-.84-.73c.03-.21.06-.41.06-.63M17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"2")]),js=k([o.jsx("path",{d:"M5 5h6c.55 0 1-.45 1-1s-.45-1-1-1H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6c.55 0 1-.45 1-1s-.45-1-1-1H5z"},"0"),o.jsx("path",{d:"m20.65 11.65-2.79-2.79c-.32-.32-.86-.1-.86.35V11h-7c-.55 0-1 .45-1 1s.45 1 1 1h7v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.19.2-.51.01-.7"},"1")]),xt=k(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),At=k(o.jsx("path",{d:"M10.3 7.7c-.39.39-.39 1.01 0 1.4l1.9 1.9H3c-.55 0-1 .45-1 1s.45 1 1 1h9.2l-1.9 1.9c-.39.39-.39 1.01 0 1.4s1.01.39 1.4 0l3.59-3.59c.39-.39.39-1.02 0-1.41L11.7 7.7a.984.984 0 0 0-1.4 0M20 19h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-7c-.55 0-1 .45-1 1s.45 1 1 1h7z"})),ws=e=>o.jsx(ee,{variant:"circular",width:"2rem",height:"2rem",animation:"wave",...e}),et=({name:e,sx:t,...s})=>o.jsx(Ft,{sx:{bgcolor:"primary.main",width:"2rem",height:"2rem",...t},...s,children:o.jsx(p,{sx:{translate:"0px 5%"},children:e.slice(0,1).toUpperCase()})}),Cs=({showProgress:e})=>o.jsxs(o.Fragment,{children:[o.jsx(ee,{variant:"circular",sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1},animation:"wave"}),e&&o.jsx(u,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1,display:"grid",placeItems:"center"},children:o.jsx(Xe,{})})]}),Nn=({size:e=6,borderSize:t=.8})=>{const s=new URLSearchParams(window.location.search),{data:n,isFetching:r}=Rt(s.get("user"));return o.jsxs(u,{sx:{display:"flex",justifyContent:"center",position:"relative",width:`${e}rem`,alignSelf:"flex-end",m:2},children:[o.jsx(u,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1},children:o.jsx(u,{sx:{borderRadius:"50%",position:"absolute",inset:`${-t}rem`,bgcolor:"background.paper",backgroundImage:"var(--Paper-overlay)"}})}),!r&&n?o.jsx(Ft,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1,bgcolor:"primary.main",boxShadow:3},children:o.jsx(p,{variant:"h3",component:"span",sx:{translate:"0px 5%",color:"white"},children:n.name.charAt(0).toUpperCase()})}):o.jsx(Cs,{showProgress:r})]})},Tt=({onItemClick:e,userName:t})=>{const[s,n]=c.useState(!1),{logout:r}=uo(),a=()=>{n(!0),r(),e()};return o.jsxs(eo,{dense:!0,children:[o.jsxs(He,{href:`${A.forum_users}?user=${t}`,component:"a",children:[o.jsx(Ae,{children:o.jsx(ys,{})}),"個人檔案"]}),o.jsxs(He,{onClick:e,children:[o.jsx(Ae,{children:o.jsx(bs,{})}),"設定"]}),o.jsx(pe,{}),o.jsxs(He,{onClick:a,disabled:s,children:[o.jsx(Ae,{children:o.jsx(js,{})}),s?"登出中...":"登出"]})]})},Ss=()=>{const{user:e,loading:t,authenticated:s}=oe(),[n,r]=c.useState(null),a=l=>r(n?null:l.currentTarget),i=()=>r(null);return t?o.jsx(U,{variant:"outlined",color:"inherit",startIcon:o.jsx(xt,{}),disabled:!0,loading:t,children:"Loading"}):o.jsxs(o.Fragment,{children:[s?o.jsx(U,{variant:"outlined",color:"inherit",startIcon:o.jsx(xt,{}),onClick:a,children:e.name}):o.jsx(U,{variant:"outlined",color:"inherit",startIcon:o.jsx(At,{}),href:A.forum_login,children:"登入"}),s&&o.jsx(jt,{anchorEl:n,anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},open:!!n,onClose:i,children:o.jsx(Tt,{onItemClick:i,userName:e.name})})]})},Is=w("div")(({theme:e})=>({height:30,width:6,backgroundColor:e.palette.divider,borderRadius:3,position:"absolute",left:8,top:"calc(50% - 15px)",...e.applyStyles("dark",{backgroundColor:e.palette.divider})})),ks=()=>{const{user:e,loading:t,authenticated:s}=oe(),[n,r]=c.useState(!1),a=()=>r(!0),i=()=>r(!1);return t?o.jsx(he,{showLabel:!0,label:"帳戶",icon:o.jsx(Xe,{size:"2rem"})}):o.jsxs(o.Fragment,{children:[s?o.jsx(he,{showLabel:!0,label:e.name,onClick:a,icon:o.jsx(et,{name:e.name,sx:{color:"primary.contrastText"}})}):o.jsx(he,{showLabel:!0,label:"登入",icon:o.jsx(At,{}),href:A.forum_login}),s&&o.jsxs(Je,{anchor:"right",open:n,onClose:i,onOpen:a,slotProps:{paper:{sx:{width:240}}},children:[o.jsx(Is,{}),o.jsxs(u,{sx:{p:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx(p,{variant:"h6",children:"帳戶"}),o.jsx(me,{onClick:i,children:o.jsx(De,{})})]}),o.jsx(Tt,{onItemClick:i,userName:e.name})]})]})},Rs=A.forum_search,Ls="?all=",Fs=()=>{const[e,t]=c.useState(""),s=a=>t(a.target.value),n=Rs+Ls+e,r=({key:a})=>{if(a==="Enter"){if(!e.trim())return console.error("請輸入搜尋內容");window.location.href=n}};return o.jsx(to,{variant:"filled",label:"搜尋",placeholder:"使用者 / 貼文",size:"small",sx:{minWidth:150,width:1,maxWidth:800},value:e,onChange:s,onKeyDown:r,slotProps:{input:{endAdornment:o.jsx(xe,{title:e.trim()?"搜尋":"請輸入搜尋內容",arrow:!0,children:o.jsx(ao,{position:"end",children:o.jsx(me,{edge:"end",href:n,disabled:!e.trim(),children:o.jsx(St,{})})})})}}})},Ms=k(o.jsx("path",{d:"M18 12c0 .55.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1m-1.41 4.82c-.33.44-.24 1.05.2 1.37.53.39 1.09.81 1.62 1.21.44.33 1.06.24 1.38-.2 0-.01.01-.01.01-.02.33-.44.24-1.06-.2-1.38-.53-.4-1.09-.82-1.61-1.21-.44-.33-1.06-.23-1.39.21 0 .01-.01.02-.01.02m3.22-12.01c0-.01-.01-.01-.01-.02-.33-.44-.95-.53-1.38-.2-.53.4-1.1.82-1.62 1.22-.44.33-.52.95-.19 1.38 0 .01.01.01.01.02.33.44.94.53 1.38.2.53-.39 1.09-.82 1.62-1.22.43-.32.51-.94.19-1.38M8 9H4c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h1v3c0 .55.45 1 1 1s1-.45 1-1v-3h1l5 3V6zm7.5 3c0-1.33-.58-2.53-1.5-3.35v6.69c.92-.81 1.5-2.01 1.5-3.34"})),Ps=[{id:1,title:"歡迎加入 論壇樣板！",content:"感謝您加入論壇樣板，希望您在這裡能找到有趣的討論。"},{id:2,title:"預計維護公告",content:"論壇樣板將於下週四的 10:00 AM 進行系統維護，預計需 2 小時。"},{id:3,title:"新留言通知",content:"您的貼文 'React 18 的並發模式值得升級嗎？' 有新留言。"}],Es=async()=>(await new Promise(e=>setTimeout(()=>e(),Math.random()*1e3)),Ps),$s=1e3*60*5,tt=()=>ge({queryKey:["notifications"],queryFn:Es,staleTime:$s}),Nt=e=>{const{data:t}=tt(),s=t??[];return o.jsx(oo,{dense:!0,...e,children:s.map((n,r)=>o.jsxs(c.Fragment,{children:[o.jsxs(cs,{alignItems:"flex-start",children:[o.jsx(Ae,{children:o.jsx(Ms,{})}),o.jsx(xs,{primary:n.title,secondary:n.content})]},n.id),r<s.length-1&&o.jsx(pe,{component:"li"})]},n.id))})},As=()=>{const{data:e,isFetching:t}=tt(),[s,n]=c.useState(null),r=()=>n(null),a=i=>n(s?null:i.currentTarget);return o.jsxs(o.Fragment,{children:[o.jsx(xe,{title:"通知",arrow:!0,children:o.jsx("span",{children:o.jsx(me,{onClick:a,loading:t||!e,children:o.jsx(It,{badgeContent:e==null?void 0:e.length,color:"primary",children:o.jsx(kt,{fontSize:"small"})})})})}),o.jsx(jt,{anchorEl:s,open:!!s,onClose:r,anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},children:o.jsx(Nt,{sx:{maxWidth:320}})})]})},Ts=w("div")(({theme:e})=>({height:30,width:6,backgroundColor:e.palette.divider,borderRadius:3,position:"absolute",right:8,top:"calc(50% - 15px)",...e.applyStyles("dark",{backgroundColor:e.palette.divider})})),Ns=()=>{const{data:e,isFetching:t}=tt(),[s,n]=c.useState(!1),r=()=>n(!1),a=()=>n(!0);return o.jsxs(o.Fragment,{children:[o.jsx(he,{showLabel:!0,label:"通知",onClick:a,disabled:t||!e,icon:o.jsx(It,{badgeContent:(e==null?void 0:e.length)||0,color:"primary",children:o.jsx(kt,{})})}),o.jsxs(Je,{anchor:"left",open:s,onClose:r,onOpen:a,children:[o.jsx(Ts,{}),o.jsxs(u,{sx:{p:3,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o.jsx(p,{variant:"h6",children:"通知"}),o.jsx(me,{onClick:r,children:o.jsx(De,{})})]}),o.jsx(Nt,{})]})]})},Ds=k(o.jsx("path",{d:"M17 20H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1m3-18H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 10-2.5-1.5L15 12V4h5z"})),Bs=async({postId:e,userId:t})=>{const s=`
      SELECT 1 as liked
      FROM post_interactions
      WHERE postId = $postId
        AND userId = $userId
        AND type = 'like'
      LIMIT 1
    `,n=`
      SELECT COALESCE(likeCount, 0) as likeCount
      FROM post_interaction_counts
      WHERE postId = $postId
    `,r=await G.exec(s,{$postId:e,$userId:t}),a=await G.exec(n,{$postId:e}),i=r.length>0;return!a[0]||!Number.isInteger(a[0].likeCount)?null:{liked:i,likeCount:a[0].likeCount}},zs=async({postId:e,userId:t})=>({fav:(await G.exec(`
      SELECT 1 as fav
      FROM post_interactions
      WHERE postId = $postId
        AND userId = $userId
        AND type = 'favorite'
      LIMIT 1
    `,{$postId:e,$userId:t})).length>0}),Os=async({postId:e,userId:t,type:s,value:n})=>{n?await G.exec(`
        INSERT OR IGNORE INTO post_interactions (userId, postId, type)
        VALUES ($userId, $postId, $type)
      `,{$userId:t,$postId:e,$type:s}):await G.exec(`
        DELETE FROM post_interactions
        WHERE userId = $userId
          AND postId = $postId
          AND type = $type
      `,{$userId:t,$postId:e,$type:s})},Ws=async({userId:e})=>(await G.exec(`
    SELECT postId
    FROM post_interactions
    WHERE userId = $userId
      AND type = 'favorite'
    ORDER BY createdAt DESC
  `,{$userId:e})).map(n=>n.postId),ot=0,Dt=(e,t,s)=>{const n=Se(),r=c.useRef(0);return $t({mutationFn:a=>{if(t===void 0)throw new Error("未登錄");return Os({postId:e,userId:t,type:s,value:a})},onMutate:()=>(r.current++,r.current),onSettled:(a,i,l,d)=>{if(d===r.current){const h=s==="like"?["likeStatus",e,t]:["favoriteStatus",e,t];n.invalidateQueries({queryKey:h})}},onError:()=>{console.error(`${s==="like"?"按讚":"收藏"}操作失敗`)}})},Us=e=>{const t=Se(),{user:s,authenticated:n,loading:r}=oe(),{data:a}=ge({staleTime:ot,queryKey:["likeStatus",e,s==null?void 0:s.id],enabled:!r&&n&&(s==null?void 0:s.id)!==void 0,queryFn:async()=>Bs({postId:e,userId:s.id})}),i=!n||r||a===void 0||a===null,l=(a==null?void 0:a.liked)??!1,d=(a==null?void 0:a.likeCount)??null,{mutate:h}=Dt(e,s==null?void 0:s.id,"like");return{liked:l,likeCount:d,handleLike:async()=>{i||(await t.cancelQueries({queryKey:["likeStatus",e,s.id]}),t.setQueryData(["likeStatus",e,s.id],f=>{const v=!f.liked;return h(v),{liked:v,likeCount:f.likeCount+(v?1:-1)}}))},disabled:i}},Bt=e=>{const t=Se(),{user:s,authenticated:n,loading:r}=oe(),{data:a,isLoading:i}=ge({staleTime:ot,queryKey:["favoriteStatus",e,s==null?void 0:s.id],enabled:!r&&n&&(s==null?void 0:s.id)!==void 0,queryFn:async()=>zs({postId:e,userId:s.id})}),l=r||i,d=!n||r||a===void 0||a===null,h=(a==null?void 0:a.fav)??!1,{mutate:g}=Dt(e,s==null?void 0:s.id,"favorite");return{isFavorited:h,handleFavorite:async()=>{d||(await t.cancelQueries({queryKey:["favoriteStatus",e,s.id]}),t.setQueryData(["favoriteStatus",e,s.id],v=>{const x=!v.fav;return g(x),{fav:x}}))},disabled:d,loading:l}},qs=()=>{const{user:e,authenticated:t,loading:s}=oe(),{data:n,isFetching:r}=ge({staleTime:ot,queryKey:["favoritePosts",e==null?void 0:e.id],queryFn:()=>Ws({userId:e.id}),enabled:!s&&t&&(e==null?void 0:e.id)!==void 0});return{data:n,loading:s||r||n===void 0}},_s=async({userId:e})=>{const s=await G.exec(`
      SELECT u.id, u.name, u.description
      FROM user_interactions ui
      JOIN users u ON ui.followeeId = u.id
      WHERE ui.followerId = $userId
        AND ui.type = 'follow'
      ORDER BY ui.createdAt DESC
    `,{$userId:e});return!s||s.length===0?null:s.map(n=>({id:n.id,name:n.name,description:n.description}))},Hs=async({userId:e})=>{const s=await G.exec(`
      SELECT u.id, u.name, u.description
      FROM user_interactions ui
      JOIN users u ON ui.followerId = u.id
      WHERE ui.followeeId = $userId
        AND ui.type = 'follow'
      ORDER BY ui.createdAt DESC
    `,{$userId:e});return!s||s.length===0?null:s.map(n=>({id:n.id,name:n.name,description:n.description}))},Vs=async({followerId:e,followeeId:t,value:s})=>{if(e===t)throw new Error("使用者不能追蹤自己");s?await G.exec(`
          INSERT OR IGNORE INTO user_interactions (followerId, followeeId, type)
          VALUES ($followerId, $followeeId, 'follow')
        `,{$followerId:e,$followeeId:t}):await G.exec(`
          DELETE FROM user_interactions
          WHERE followerId = $followerId
            AND followeeId = $followeeId
            AND type = 'follow'
        `,{$followerId:e,$followeeId:t})},Gs=async({targetId:e,userId:t})=>({follow:(await G.exec(`
      SELECT 1 as follow
      FROM user_interactions
      WHERE followerId = $userId
        AND followeeId = $targetId
        AND type = 'follow'
      LIMIT 1
    `,{$userId:t,$targetId:e})).length>0}),st=0,Ks=(e,t)=>{const s=Se(),n=c.useRef(0);return $t({mutationFn:r=>{if(t===void 0)throw new Error("未登錄");return Vs({followerId:t,followeeId:e,value:r})},onMutate:()=>(n.current++,n.current),onSettled:(r,a,i,l)=>{if(l===n.current){const d=["userFollow",e,t];s.invalidateQueries({queryKey:d})}},onError:()=>{console.error("追蹤操作失敗")}})},zt=e=>{const t=Se(),{user:s,authenticated:n,loading:r}=oe(),{data:a,isFetching:i}=ge({staleTime:st,queryKey:["userFollow",e,s==null?void 0:s.id],enabled:!r&&n&&(s==null?void 0:s.id)!==void 0,queryFn:async()=>Gs({targetId:e,userId:s.id})}),l=r||i,d=!n||a===void 0||e===(s==null?void 0:s.id),h=(a==null?void 0:a.follow)??!1,g=e===(s==null?void 0:s.id),{mutate:f}=Ks(e,s==null?void 0:s.id);return{isFollowed:h,handleFollow:async()=>{d||(await t.cancelQueries({queryKey:["userFollow",e,s.id]}),t.setQueryData(["userFollow",e,s.id],x=>{const y=!x.follow;return f(y),{follow:y}}))},disabled:d,loading:l,isSelf:g}},Dn=({userId:e})=>ge({queryKey:["userFollowers",e],queryFn:()=>Hs({userId:e}),staleTime:st}),Qs=({userId:e})=>ge({queryKey:["userFollowing",e],queryFn:()=>_s({userId:e}),staleTime:st}),Ot=()=>o.jsxs(u,{sx:{p:1.5,outline:"1px solid",outlineColor:"divider",borderRadius:1},children:[o.jsx(u,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center"},children:o.jsx(ee,{variant:"rounded",animation:"wave",children:o.jsx(p,{variant:"body2",children:"by loading..."})})}),o.jsx(ee,{variant:"rounded",animation:"wave",children:o.jsx(p,{variant:"subtitle1",component:"h6",sx:{textAlign:"start"},children:"正在載入標題..."})})]}),Ys=({postId:e,action:t})=>{const{data:s,isFetching:n}=so({postId:e});if(n||!s)return o.jsx(Ot,{});const r=()=>{window.location.href=`${A.forum_post}?postId=${s.id}`};return o.jsxs(u,{sx:{p:1.5,outline:"1px solid",outlineColor:"divider",borderRadius:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:r,children:[o.jsxs(u,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center",justifyContent:"space-between"},children:[o.jsxs(p,{variant:"body2",component:"a",href:`${A.forum_users}?user=${s.userName}`,sx:{color:"text.secondary",textDecoration:"none","&:hover":{textDecoration:"underline",color:"text.primary"}},children:["by ",s.userName]}),o.jsx(u,{sx:{color:"text.secondary"},children:t})]}),o.jsx(p,{variant:"subtitle1",component:"h6",sx:{textAlign:"start",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",width:.7},children:s.title})]})},Xs=k(o.jsx("path",{d:"M10 20h4c0 1.1-.9 2-2 2s-2-.9-2-2m4-11c0 2.61 1.67 4.83 4 5.66V17h1c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1h1v-7c0-2.79 1.91-5.14 4.5-5.8v-.7c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.7c.71.18 1.36.49 1.95.9C14.54 6.14 14 7.51 14 9m9-1h-2V6c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1"})),Js=k(o.jsx("path",{d:"M14 11c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1M3 7c0 .55.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1m7 8c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1h5c.55 0 1-.45 1-1m8.01-2.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.16 5.16c-.09.09-.14.21-.14.35v1.41c0 .28.22.5.5.5h1.41c.13 0 .26-.05.35-.15l5.16-5.16z"})),ke={variant:"contained",color:"primary",size:"large",startIcon:o.jsx(Xs,{})},je={borderRadius:99,transition:"all 0.2s ease",boxShadow:3,scale:"1.001"},Zs=({targetId:e})=>{const{isFollowed:t,handleFollow:s,disabled:n,loading:r,isSelf:a}=zt(e);return a?o.jsx(U,{variant:"contained",color:"primary",size:"large",startIcon:o.jsx(Js,{}),sx:{...je,"&:hover":{bgcolor:"primary.main",scale:"1.05",boxShadow:3},"&:active":{scale:"0.95"}},children:"編輯個人資料"}):n?o.jsx(U,{...ke,disabled:!0,sx:je,children:"追蹤"}):r?o.jsx(U,{...ke,loading:!0,sx:je,children:"追蹤"}):o.jsx(U,{...ke,onClick:s,sx:{...je,"&:hover":{bgcolor:"primary.main",scale:"1.05",boxShadow:3},"&:active":{scale:"0.95"}},children:t?"已追蹤":"追蹤"})},Bn=()=>{const e=new URLSearchParams(window.location.search),{data:t,isFetching:s}=Rt(e.get("user"));return!s&&t===null?o.jsx(U,{...ke,disabled:!0,sx:je,children:"追蹤"}):s||!t?o.jsx(U,{...ke,loading:!0,sx:je,children:"追蹤"}):o.jsx(Zs,{targetId:t.id})},en=({targetId:e})=>{const{isFollowed:t,handleFollow:s,disabled:n,loading:r}=zt(e);return r?o.jsx(Ce,{variant:"outlined",clickable:!0,disabled:!0,label:o.jsx(Xe,{size:"1rem"})}):n?o.jsx(Ce,{variant:"outlined",label:"追蹤",clickable:!0,disabled:!0}):o.jsx(Ce,{variant:"outlined",label:t?"已追蹤":"追蹤",clickable:!0,onClick:s,color:t?"primary":"default"})},tn=()=>o.jsxs(o.Fragment,{children:[o.jsx(ws,{}),o.jsxs(u,{children:[o.jsx(ee,{variant:"rounded",animation:"wave",children:o.jsx(p,{variant:"subtitle1",sx:{textWrap:"nowrap",color:"text.primary",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"作者名稱"})}),o.jsx(ee,{variant:"text",animation:"wave",children:o.jsx(p,{variant:"body2",component:"p",sx:{color:"text.secondary"},children:"作者描述載入中..."})})]}),o.jsx(Ce,{variant:"outlined",label:"追蹤",clickable:!0,disabled:!0})]}),on={display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},sn=({id:e,name:t,description:s,ellipsis:n})=>o.jsxs(o.Fragment,{children:[o.jsx(et,{name:t}),o.jsxs(u,{children:[o.jsx(p,{variant:"subtitle1",sx:{textWrap:"nowrap",color:"text.primary",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline"}},component:"a",href:`${A.forum_users}?user=${t}`,children:t}),o.jsx(p,{variant:"body2",component:"p",sx:{color:"text.secondary",...n&&on},children:s||"這個使用者很懶，什麼都沒寫"})]}),o.jsx(en,{targetId:e})]}),Wt=k(o.jsx("path",{d:"M21 6c0 .55-.45 1-1 1h-1v1c0 .55-.45 1-1 1s-1-.45-1-1V7h-1c-.55 0-1-.45-1-1s.45-1 1-1h1V4c0-.55.45-1 1-1s1 .45 1 1v1h1c.55 0 1 .45 1 1m-2 13.48c0 .72-.73 1.2-1.39.92L12 18l-5.61 2.4c-.66.29-1.39-.2-1.39-.92V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),Ut=k(o.jsx("path",{d:"M21 6c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1m-2 4.9c-.32.07-.66.1-1 .1-2.76 0-5-2.24-5-5 0-1.13.37-2.16 1-3H7c-1.1 0-2 .9-2 2v14.48c0 .72.73 1.2 1.39.92L12 18l5.61 2.4c.66.28 1.39-.2 1.39-.92z"})),zn=({postId:e})=>{const t=Ge(a=>a.breakpoints.down("sm")),{isFavorited:s,handleFavorite:n,disabled:r}=Bt(e);return o.jsx(U,{color:s?"primary":"inherit",startIcon:s?o.jsx(Ut,{}):o.jsx(Wt,{}),size:"small",onClick:n,disabled:r,children:o.jsx(p,{variant:"caption",component:"span",children:t?s?"取消":"收藏":s?"取消收藏":"收藏該貼文"})})},nn=({postId:e})=>{const{isFavorited:t,handleFavorite:s,disabled:n,loading:r}=Bt(e),a=i=>{i.preventDefault(),i.stopPropagation(),s()};return o.jsx(U,{size:"small",color:"inherit",startIcon:t?o.jsx(Ut,{}):o.jsx(Wt,{}),onClick:a,disabled:n,loading:r,variant:t?"text":"outlined",children:t?"取消收藏":"收藏該貼文"})},mt={position:"relative",display:"grid",gridTemplateColumns:{xs:"auto 1fr auto",sm:"auto 1fr auto auto 1fr auto"},alignItems:"center",gap:2,"& > *:nth-of-type(6n - 3)":{"&::after":{content:'""',position:"absolute",display:{xs:"none",sm:"block"},inset:0,pointerEvents:"none",borderRight:"1px solid",borderColor:"divider",mr:-1,my:-2.1}}},rn=({userId:e})=>{const{data:t,isFetching:s}=Qs({userId:e});return s?o.jsx(u,{sx:mt,children:[...Array(4)].map((n,r)=>o.jsx(tn,{},r))}):!t||t.length===0?o.jsx(u,{children:o.jsx(p,{variant:"subtitle2",color:"text.secondary",align:"center",children:"你還沒追蹤任何使用者"})}):o.jsx(u,{sx:mt,children:t.map(n=>o.jsx(sn,{...n,ellipsis:!0},n.id))})},gt={display:"grid",gridTemplateColumns:{xs:"1fr",md:"repeat(2, 1fr)"},gap:1,"& > *:nth-of-type(4n+2), & > *:nth-of-type(4n+3)":{bgcolor:{xs:"",md:"action.hover"}}},an=()=>{const{data:e,loading:t}=qs();return t?o.jsx(u,{sx:gt,children:[...Array(4)].map((s,n)=>o.jsx(Ot,{},n))}):!e||e.length===0?o.jsx(u,{sx:{m:3},children:o.jsx(p,{variant:"subtitle2",color:"text.secondary",align:"center",children:"你尚未收藏任何貼文"})}):o.jsx(u,{sx:gt,children:e.map(s=>o.jsx(u,{sx:{position:"relative"},children:o.jsx(Ys,{postId:s,action:o.jsx(nn,{postId:s})})},s))})},qt=()=>{const{user:e}=oe(),[t,s]=c.useState(!0),[n,r]=c.useState(!0),a=()=>s(!t),i=()=>r(!n);return o.jsxs(ue,{children:[o.jsxs(u,{sx:{bgcolor:"action.hover",cursor:"pointer"},onClick:a,children:[o.jsx(pe,{}),o.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:1},children:[o.jsx(p,{variant:"subtitle1",children:"追蹤的使用者"}),o.jsx(dt,{sx:{transform:t?"rotate(180deg)":"",transition:"all 0.2s ease"}})]}),o.jsx(pe,{})]}),o.jsx(Ne,{in:t,children:o.jsx(u,{sx:{px:3,py:2},children:e?o.jsx(rn,{userId:e.id}):o.jsx(u,{children:o.jsx(p,{variant:"subtitle2",color:"error",align:"center",children:"出了點問題，請稍後再試"})})})}),o.jsxs(u,{sx:{bgcolor:"action.hover",cursor:"pointer"},onClick:i,children:[o.jsx(pe,{}),o.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,py:1},children:[o.jsx(p,{variant:"subtitle1",children:"收藏的貼文"}),o.jsx(dt,{sx:{transform:n?"rotate(180deg)":"",transition:"all 0.2s ease"}})]}),o.jsx(pe,{})]}),o.jsx(Ne,{in:n,children:o.jsx(u,{sx:{px:3,py:2},children:o.jsx(an,{})})})]})},ln=()=>{const{authenticated:e,loading:t}=oe(),[s,n]=c.useState(!1),r=()=>n(!0),a=()=>n(!1);return o.jsxs(o.Fragment,{children:[o.jsx(xe,{title:"收藏與追蹤",arrow:!0,children:o.jsx("span",{children:o.jsx(me,{onClick:r,disabled:!e,loading:t,children:o.jsx(Ct,{fontSize:"small"})})})}),o.jsxs(_o,{open:s,onClose:a,maxWidth:"md",fullWidth:!0,children:[o.jsxs(u,{sx:{position:"relative",display:"flex",gap:1,alignItems:"center",p:2,bgcolor:"background.paper",borderBottom:"1px solid",borderColor:"divider"},children:[o.jsx(u,{sx:{position:"absolute",inset:0,bgcolor:"action.hover"}}),o.jsx(Ds,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1}}),o.jsx(p,{variant:"h6",component:"h2",sx:{color:"text.primary"},children:"收藏與追蹤"}),o.jsx(u,{sx:{flex:1}}),o.jsx(xe,{title:"關閉",arrow:!0,children:o.jsx(me,{onClick:a,children:o.jsx(De,{})})})]}),o.jsx(qt,{})]})]})},cn=w("div")(({theme:e})=>({height:6,width:30,backgroundColor:e.palette.divider,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)",...e.applyStyles("dark",{backgroundColor:e.palette.divider})})),dn=()=>{const{authenticated:e,loading:t}=oe(),[s,n]=c.useState(!1),r=()=>n(!0),a=()=>n(!1);return o.jsxs(o.Fragment,{children:[o.jsx(he,{showLabel:!0,label:t?"載入中...":"收藏",icon:o.jsx(Ct,{}),disabled:!e||t,onClick:r}),o.jsxs(Je,{anchor:"bottom",open:s,onClose:a,onOpen:r,children:[o.jsx(cn,{}),o.jsxs(u,{sx:{p:2},children:[o.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[o.jsx(p,{variant:"h6",component:"h2",children:"收藏與追蹤"}),o.jsx(me,{onClick:a,children:o.jsx(De,{})})]}),o.jsx(qt,{})]})]})]})},un=()=>o.jsx(xe,{title:"返回首頁",arrow:!0,children:o.jsxs(Ye,{href:A.forum_home,sx:{display:"flex",gap:1.5,alignItems:"center",justifyContent:"center",borderRadius:1,p:1,"&:hover":{bgcolor:"divider"},"&:active":{scale:"0.95"},transition:"all 0.2s ease-in-out"},children:[o.jsx(wt,{fontSize:"large",color:"primary"}),o.jsx(p,{variant:"h4",component:"h1",sx:{fontFamily:'"timemachine-wa"'},children:"論壇樣板"})]})}),pn={position:"sticky",top:0,zIndex:"appBar",bgcolor:"secondary.main",borderBottom:"solid 1px #fff2",boxShadow:3,".top &":{boxShadow:"none"},transition:"all 0.2s ease-in-out"},On=({sx:e,...t})=>o.jsx(Et,{className:"mode-dark",disableGutters:!0,sx:{...pn,...e},...t,children:o.jsxs(Ze,{sx:{display:"flex",alignItems:"center",gap:1,color:"text.primary"},maxWidth:!1,children:[o.jsx(u,{sx:{display:"flex",justifyContent:"flex-start",flex:{xs:void 0,md:1}},children:o.jsx(un,{})}),o.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},children:o.jsx(Fs,{})}),o.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"flex-end",flex:1},children:[o.jsx(no,{}),o.jsx(ln,{}),o.jsx(As,{}),o.jsx(Ss,{})]})]})}),hn=k(o.jsx("path",{d:"M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1"})),xn={position:"sticky",top:0,zIndex:"appBar",bgcolor:"secondary.main",borderBottom:"solid 1px #fff2",boxShadow:3,".top &":{boxShadow:"none"},transition:"all 0.2s ease-in-out"},mn={position:"fixed",inset:"auto 0 0 0",zIndex:"appBar",bgcolor:"secondary.main",borderTop:"solid 1px #fff2",boxShadow:3},Wn=({sx:e,...t})=>{const[s,n]=c.useState(!1),r=()=>n(!0),a=()=>n(!1),i=c.useRef(null);return c.useEffect(()=>{if(!i.current)return;const l=document.getElementById("scroll-area");if(!l)return;const d=i.current.clientHeight;return l.style.paddingBottom=`${d}px`,()=>{l.style.paddingBottom="0px"}},[i]),o.jsxs(o.Fragment,{children:[o.jsx(Et,{className:"mode-dark",disableGutters:!0,sx:{...xn,...e},...t,children:o.jsxs(Ze,{sx:{display:"flex",alignItems:"center",gap:1,color:"text.primary"},maxWidth:"xl",children:[o.jsxs(u,{sx:{display:"flex",gap:1,alignItems:"center",flex:1},children:[o.jsx(wt,{fontSize:"large",color:"primary"}),o.jsx(p,{variant:"h4",component:"h1",sx:{mr:1,fontFamily:'"timemachine-wa"'},children:"論壇樣板"})]}),o.jsx(U,{href:A.forum_search,startIcon:o.jsx(St,{}),variant:"outlined",color:"inherit",size:"large",children:"搜尋"})]})}),o.jsxs(Eo,{className:"mode-dark",value:2,showLabels:!0,sx:mn,ref:i,children:[o.jsx(Ns,{}),o.jsx(he,{label:"主題",icon:o.jsx(co,{}),onClick:r}),o.jsx(he,{sx:{cursor:"default",minWidth:"auto"},disableRipple:!0,label:o.jsx(Ko,{color:"primary",size:"large",href:A.forum_home,component:"a",sx:{position:"absolute",transform:"translate(-50%, -80%) scale(1.2)",cursor:"pointer",display:"grid",placeItems:"center","&:hover":{bgcolor:"primary.light"}},children:o.jsxs(u,{children:[o.jsx(hn,{}),o.jsx(p,{variant:"caption",component:"h5",children:"首頁"})]})})}),o.jsx(dn,{}),o.jsx(ks,{})]}),o.jsx(ro,{open:s,onClose:a,onOpen:r})]})},gn=k(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1m1 4h-2v-2h2z"})),fn=k([o.jsx("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-4.99-5.58-5.34C6.54 2.58 3.3 5.38 3.03 9h2.02c.24-2.12 1.92-3.8 4.06-3.98C11.65 4.8 14 6.95 14 9.5c0 2.49-2.01 4.5-4.5 4.5-.17 0-.33-.03-.5-.05v2.02l.01.01c1.8.13 3.47-.47 4.72-1.55l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49z"},"0"),o.jsx("path",{d:"M6.12 11.17 4 13.29l-2.12-2.12c-.2-.2-.51-.2-.71 0s-.2.51 0 .71L3.29 14l-2.12 2.12c-.2.2-.2.51 0 .71s.51.2.71 0L4 14.71l2.12 2.12c.2.2.51.2.71 0s.2-.51 0-.71L4.71 14l2.12-2.12c.2-.2.2-.51 0-.71-.2-.19-.51-.19-.71 0"},"1")]),vn=k(o.jsx("path",{d:"M8.65 5.82C9.36 4.72 10.6 4 12 4c2.21 0 4 1.79 4 4 0 1.4-.72 2.64-1.82 3.35zM20 17.17c-.02-1.1-.63-2.11-1.61-2.62-.54-.28-1.13-.54-1.77-.76zm.49 3.32L3.51 3.51a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l8.18 8.18c-1.82.23-3.41.8-4.7 1.46C4.6 15.08 4 16.11 4 17.22V20h13.17l1.9 1.9c.39.39 1.02.39 1.41 0 .4-.39.4-1.02.01-1.41"})),yn=k(o.jsx("path",{d:"M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2m13.3 11.29c-.39.39-1.02.39-1.41 0L12 13.41 9.11 16.3c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41L10.59 12 7.7 9.11a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 10.59l2.89-2.88c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41L13.41 12l2.89 2.88c.38.39.38 1.03 0 1.41"})),Pe={display:"flex",alignItems:"center",gap:1},Ee=e=>({gap:1,flex:1,borderRight:e?0:1,borderColor:"divider",px:3}),Un=()=>{const e=Ge(r=>r.breakpoints.between("xs","md")),t=Ge(r=>r.breakpoints.down("sm")),[s,n]=c.useState(!1);if(s)throw new Error("測試目的的錯誤，請忽略");return o.jsx(u,{component:"footer",sx:{position:"relative",mt:"auto",py:3,bgcolor:"background.paper",borderTop:1,borderColor:"divider","&::before":{bgcolor:"action.hover",content:'""',position:"absolute",inset:0,pointerEvents:"none"}},children:o.jsxs(Ze,{maxWidth:"lg",sx:{position:"relative"},children:[o.jsxs(ue,{sx:{display:"flex",gap:3,alignItems:"center"},children:[o.jsxs(ue,{sx:{alignItems:"center"},children:[o.jsx(p,{variant:"h6",gutterBottom:!0,children:"相關連結"}),o.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:"故意引發錯誤或使用錯誤參數，用於展示網站對於真實錯誤的處理能力。"})]}),o.jsx(pe,{orientation:"horizontal",flexItem:!0,variant:"middle"}),o.jsxs(u,{sx:{display:"grid",width:1,rowGap:2,gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr 1fr"}},children:[o.jsxs(ue,{sx:Ee(t),children:[o.jsxs(Me,{href:"#",variant:"body2",color:"primary",sx:Pe,underline:"hover",onClick:()=>n(!0),children:[o.jsx(gn,{fontSize:"small"}),"觸發錯誤"]}),o.jsx(p,{variant:"caption",sx:{color:"text.secondary"},children:"測試任意頁面發生錯誤時的情境"})]}),o.jsxs(ue,{sx:Ee(e),children:[o.jsxs(Me,{href:"/this/is/a/not/exist/route",variant:"body2",color:"primary",sx:Pe,underline:"hover",children:[o.jsx(fn,{fontSize:"small"}),"404 錯誤"]}),o.jsx(p,{variant:"caption",sx:{color:"text.secondary"},children:"測試要求資源不存在的情境"})]}),o.jsxs(ue,{sx:Ee(t),children:[o.jsxs(Me,{href:`${A.forum_users}?user=I_think_this_wont_be_an_username`,variant:"body2",color:"primary",sx:Pe,underline:"hover",children:[o.jsx(vn,{fontSize:"small"}),"使用者不存在"]}),o.jsx(p,{variant:"caption",sx:{color:"text.secondary"},children:"測試使用者頁面，但所要求的使用者不存在的情況"})]}),o.jsxs(ue,{sx:Ee(!0),children:[o.jsxs(Me,{href:`${A.forum_post}?postId=-99`,variant:"body2",color:"primary",sx:Pe,underline:"hover",children:[o.jsx(yn,{fontSize:"small"}),"貼文不存在"]}),o.jsx(p,{variant:"caption",sx:{color:"text.secondary"},children:"測試單個貼文頁面，但所要求的貼文不存在的情況"})]})]})]}),o.jsxs(p,{variant:"caption",sx:{mt:2,textAlign:"center",display:"block",color:"text.secondary"},children:["© ",new Date().getFullYear()," 論壇樣板 by 1ureka"]})]})})},qn=k(o.jsx("path",{d:"M16.5 6.75v10.58c0 2.09-1.53 3.95-3.61 4.15-2.39.23-4.39-1.64-4.39-3.98V5.14c0-1.31.94-2.5 2.24-2.63 1.5-.15 2.76 1.02 2.76 2.49v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6.75c0-.41-.34-.75-.75-.75s-.75.34-.75.75v8.61c0 1.31.94 2.5 2.24 2.63 1.5.15 2.76-1.02 2.76-2.49V5.17c0-2.09-1.53-3.95-3.61-4.15C9.01.79 7 2.66 7 5v12.27c0 2.87 2.1 5.44 4.96 5.71 3.29.3 6.04-2.26 6.04-5.48V6.75c0-.41-.34-.75-.75-.75s-.75.34-.75.75"})),_t=new Event("locationchange"),bn=window.history.pushState,jn=window.history.replaceState;window.history.pushState=function(...e){bn.apply(this,e),window.dispatchEvent(_t)};window.history.replaceState=function(...e){jn.apply(this,e),window.dispatchEvent(_t)};function _n(){const[e,t]=c.useState(new URLSearchParams(window.location.search)),s=c.useRef(new Set),n=c.useMemo(()=>({get:a=>(s.current.add(a),e.get(a)),getAll:a=>(s.current.add(a),e.getAll(a)),has:a=>(s.current.add(a),e.has(a))}),[e]),r=c.useCallback(a=>{const i=new URL(window.location.href),l=i.searchParams;Object.entries(a).forEach(([d,h])=>{h===null?l.delete(d):l.set(d,h)}),window.history.pushState({},"",i)},[]);return c.useEffect(()=>{const a=()=>{const i=new URLSearchParams(window.location.search);let l=!1;s.current.forEach(d=>{e.get(d)!==i.get(d)&&(l=!0)}),l&&t(i)};return window.addEventListener("popstate",a),window.addEventListener("locationchange",a),()=>{window.removeEventListener("popstate",a),window.removeEventListener("locationchange",a)}},[e,s]),{searchParams:n,updateSearchParams:r}}const Hn=k(o.jsx("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),wn=k(o.jsx("path",{d:"M13.12 2.06 7.58 7.6c-.37.37-.58.88-.58 1.41V19c0 1.1.9 2 2 2h9c.8 0 1.52-.48 1.84-1.21l3.26-7.61C23.94 10.2 22.49 8 20.34 8h-5.65l.95-4.58c.1-.5-.05-1.01-.41-1.37-.59-.58-1.53-.58-2.11.01M3 21c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2s-2 .9-2 2v8c0 1.1.9 2 2 2"})),Vn=({postId:e,likeCount:t})=>{const{liked:s,likeCount:n,handleLike:r,disabled:a}=Us(e);return o.jsx(xe,{title:s?"取消喜歡":"喜歡",arrow:!0,placement:"left",children:o.jsx("span",{children:o.jsx(U,{startIcon:o.jsx(wn,{}),size:"small",color:s?"primary":"inherit",onClick:r,disabled:a,children:o.jsxs(p,{variant:"caption",component:"span",children:[n??t," 個讚"]})})})})},Gn=({post:e,displayCount:t=3})=>{const{tags:s,id:n}=e;return o.jsxs(o.Fragment,{children:[s.map((r,a)=>a<t&&o.jsx(Ce,{label:r,clickable:!0,size:"small",component:"a",href:`${A.forum_posts}?topic=${r}`},r)),s.length>t&&o.jsx(Ce,{label:`+${s.length-t}`,clickable:!0,size:"small",variant:"outlined",component:"a",href:`${A.forum_post}?postId=${n}`})]})},Kn=({post:e,sx:t,...s})=>{const n=Math.abs(e.updatedAt.getTime()-e.createdAt.getTime())>1e3;return o.jsxs(u,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center",...t},...s,children:[o.jsx(et,{name:e.userName}),o.jsxs(p,{variant:"subtitle1",component:"a",href:`${A.forum_users}?user=${e.userName}`,sx:{color:"text.secondary",textDecoration:"none","&:hover":{textDecoration:"underline",color:"text.primary"}},children:["by ",e.userName]}),o.jsx(u,{sx:{flex:1}}),n?o.jsx(xe,{title:`上次編輯於 ${e.updatedAt.toLocaleString()}`,arrow:!0,children:o.jsxs(p,{variant:"body2",sx:{color:"text.secondary",opacity:.9,"&:hover":{textDecoration:"underline"}},children:["*",e.createdAt.toLocaleString()]})}):o.jsx(p,{variant:"body2",sx:{color:"text.secondary",opacity:.9},children:e.createdAt.toLocaleString()})]})},Qn=({sx:e,...t})=>o.jsxs(u,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center",...e},...t,children:[o.jsx(ee,{variant:"circular",sx:{width:"2rem",height:"2rem"},animation:"wave"}),o.jsx(ee,{variant:"rounded",animation:"wave",children:o.jsx(p,{variant:"subtitle1",children:"by loading..."})}),o.jsx(u,{sx:{flex:1}}),o.jsx(ee,{variant:"rounded",animation:"wave",children:o.jsx(p,{variant:"body2",children:"0000-00-00 00:00"})})]});export{tn as A,Wt as B,Ne as C,_o as D,zn as F,Qn as L,Kn as P,wn as T,et as U,Hn as V,sn as a,Gn as b,Vn as c,Tn as d,On as e,Wn as f,Un as g,qn as h,Ft as i,$t as j,cs as k,Ve as l,Dn as m,Qs as n,Nn as o,Bn as p,_n as u};
