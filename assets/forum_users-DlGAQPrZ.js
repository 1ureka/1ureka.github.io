import{j as r,p as l,n,S as m,B as y,o as D,l as F,r as g,A as R,y as k}from"./Toast-DyYNk4-H.js";import{S as L,A as W}from"./SentimentDissatisfiedRounded-C6tjO7qf.js";import{e as p,u as $,t as S,f as A,a as B,A as E,S as z}from"./ScrollArea-CWsqJ-m7.js";import{A as j,a as v,u as N,g as _,b as M,c as T,d as O,P as Q,h as V,e as q}from"./AttachFileRounded-8cB_MC6w.js";import{r as G}from"./routes-Dr3OAPvi.js";import{S as x}from"./Skeleton-B4KrwzUk.js";import{E as f,a as H}from"./ExpandedPost-CJm1QZgb.js";import{D as h}from"./ExpandMoreRounded-C6udOSym.js";import{N as J}from"./NewPost-CFbSKFud.js";import{i as K,j as X,C as Y}from"./post-B4t0p6W2.js";import{P as w}from"./TopicPicker-vjP1nXl2.js";import{u as Z}from"./url-DQkdvWoa.js";import{D as rr}from"./NotificationsRounded-BFj30jCL.js";import{a as er,D as sr}from"./DialogContent-CEsLVCj4.js";import"./ErrorOutlineRounded-zTQCHSuR.js";import"./ForumRounded-CG-lRx8w.js";import"./RefreshRounded-CtptDvbj.js";import"./SQLiteClient-BALt6Otu.js";import"./DarkModeRounded-Nq1sIAOR.js";import"./Toolbar-C8NndNHH.js";import"./ErrorRounded-DMrgOrVg.js";import"./OpenInNewRounded-BoAcplo9.js";import"./index-mSkvzYyn.js";import"./MenuItem-CaZ61uO_.js";import"./dividerClasses-DJNea_kN.js";import"./useMutation-DN65KMXB.js";import"./MoreHorizRounded-DrE_20N4.js";import"./ArrowOutwardRounded-B5GiA-pi.js";import"./formatters-C9bWSe0O.js";import"./Badge-DmwQitVd.js";import"./CommentRounded-Cnr5ARrC.js";import"./PersonPinCircleRounded-BCcWmav8.js";import"./PostHeader-95zQcB3q.js";import"./Motion-Be3Z0ox5.js";import"./proxy-CLnU6fuJ.js";import"./AddRounded-DPjuEatA.js";import"./PublishRounded-CjPOBuHz.js";import"./EmojiMenu-bmY0rIWa.js";import"./array-l11GhOAf.js";import"./with-selector-DPazL_cM.js";import"./fuse-_0KYXJjK.js";import"./ClearRounded-PkG5QBTw.js";const tr=()=>{const s=new URLSearchParams(window.location.search),{data:e}=p(s.get("user"));return e?r.jsx("title",{children:`論壇樣板 | ${e.name}`}):s.get("user")&&!e?r.jsx("title",{children:`論壇樣板 | ${s.get("user")}`}):null},nr=()=>{const s=new URLSearchParams(window.location.search),{data:e,isFetching:t}=p(s.get("user"));return t||!e?r.jsxs(l,{sx:{m:2},children:[s.get("user")?r.jsx(n,{variant:"h5",component:"h2",children:s.get("user")}):r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"h5",component:"h2",children:"使用者名稱"})}),r.jsx(x,{variant:"text",animation:"wave",children:r.jsx(n,{variant:"body2",children:"佔位符佔位符佔位符佔位符佔位符佔位符佔位符"})})]}):r.jsxs(l,{sx:{m:2},children:[r.jsx(n,{variant:"h5",component:"h2",children:e.name}),r.jsx(n,{variant:"body2",color:"text.secondary",children:e.description||"這個使用者很懶，什麼都沒寫"})]})},or=({length:s})=>{const{data:e,isFetching:t}=$({limit:s,orderBy:"postCount",order:"desc",isUnfollowed:!0}),i=e&&e.pages[0]?e.pages[0].users:null;return r.jsx(l,{sx:{position:"relative",display:"grid",gridTemplateColumns:{xs:"auto 1fr auto",md:"auto 1fr auto auto 1fr auto"},alignItems:"center",gap:2,p:2,"& > *:nth-of-type(6n - 3)":{"&::after":{content:'""',position:"absolute",display:{xs:"none",md:"block"},inset:0,pointerEvents:"none",borderRight:"1px solid",borderColor:"divider",mr:-1,my:-2.1}}},children:t||!i?[...Array(s)].map((o,a)=>r.jsx(j,{},a)):i.map(o=>r.jsx(v,{...o},o.id))})},ir=()=>r.jsxs(r.Fragment,{children:[r.jsxs(l,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[r.jsx(L,{sx:{fontSize:"6rem",color:"action.disabled"}}),r.jsx(n,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"使用者不存在或已被刪除"})]}),r.jsx(h,{}),r.jsxs(l,{sx:{position:"relative"},children:[r.jsx(l,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),r.jsx(n,{variant:"subtitle1",sx:{p:2},children:"我們找不到這位使用者...這裡有其他活躍的使用者供你參考！"})]}),r.jsx(h,{}),r.jsx(or,{length:6})]}),ar=({userId:s})=>{const{data:e,isLoading:t,isFetchingNextPage:i,hasNextPage:o,fetchNextPage:a}=X({userId:s,orderBy:"createdAt",order:"desc"});return t||!e?r.jsx(m,{sx:{alignItems:"stretch"},children:[...Array(3)].map((c,d)=>r.jsx(f,{},d))}):e.pages[0].posts.length===0?r.jsx(n,{sx:{textAlign:"center",mt:9,mb:6,color:"text.secondary"},children:"他/她還沒有發布過任何文章"}):r.jsxs(m,{sx:{alignItems:"stretch"},children:[e.pages.map(c=>c.posts.map(d=>r.jsx(H,{postId:d},d))),i&&r.jsx(m,{sx:{alignItems:"stretch",mt:1.5},children:[...Array(3)].map((c,d)=>r.jsx(f,{},d))}),o?i?r.jsx(n,{sx:{color:"text.secondary",textAlign:"center",mt:3},children:"載入中..."}):r.jsxs(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:3,gap:1},children:[r.jsx(n,{sx:{color:"text.secondary"},children:"滾動以載入更多，或點擊"}),r.jsx(y,{onClick:()=>a(),children:"載入更多"})]}):r.jsx(n,{sx:{color:"text.secondary",textAlign:"center",mt:3},children:"已經到底了"})]})},lr=()=>{const s=new URLSearchParams(window.location.search),{data:e,isFetching:t}=p(s.get("user")),{user:i}=K();return!t&&e===null?r.jsx(ir,{}):t||!e?r.jsx(m,{sx:{alignItems:"stretch"},children:[...Array(3)].map((o,a)=>r.jsx(f,{},a))}):r.jsxs(r.Fragment,{children:[i&&i.name===e.name&&r.jsxs(r.Fragment,{children:[r.jsx(m,{sx:{p:1}}),r.jsx(J,{}),r.jsx(h,{})]}),r.jsx(ar,{userId:e.id})]})},I=D(r.jsx("path",{d:"M6 20c1.1 0 2-.9 2-2v-7c0-1.1-.9-2-2-2s-2 .9-2 2v7c0 1.1.9 2 2 2m10-5v3c0 1.1.9 2 2 2s2-.9 2-2v-3c0-1.1-.9-2-2-2s-2 .9-2 2m-4 5c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2s-2 .9-2 2v12c0 1.1.9 2 2 2"})),P=()=>{const s=F(S.breakpoints.up("md"));return r.jsxs(r.Fragment,{children:[r.jsx(I,{fontSize:"small",color:"inherit"}),r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"body2",children:s?"發布了 0 篇文章":"0 篇文章"})}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"body2",children:s?"獲得了 0 次讚":"0 次讚"})}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"body2",children:s?"文章總瀏覽次數 0 次":"0 次瀏覽"})})]})},cr=({user:s})=>{const e=F(S.breakpoints.up("md")),{data:t,isFetching:i}=A(s.id);if(t===void 0||i)return r.jsx(P,{});const{postCount:o,likeCount:a,viewCount:c}=t;return r.jsxs(r.Fragment,{children:[r.jsx(I,{fontSize:"small",color:"inherit"}),r.jsx(n,{variant:"body2",children:e?`發布了 ${o} 篇文章`:`${o} 篇文章`}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(n,{variant:"body2",children:e?`獲得了 ${a} 次讚`:`${a} 次讚`}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(n,{variant:"body2",children:e?`文章總瀏覽次數 ${c} 次`:`${c} 次瀏覽`})]})},dr=()=>{const s=new URLSearchParams(window.location.search),{data:e,isFetching:t}=p(s.get("user"));return t||e===void 0||e===null?r.jsx(P,{}):r.jsx(cr,{user:e})},xr=({userId:s,counts:e})=>{const{data:t,isFetching:i}=N({userId:s});return i||t===void 0||t===null?r.jsx(r.Fragment,{children:[...Array(e)].map((o,a)=>r.jsx(j,{},a))}):r.jsx(r.Fragment,{children:t.map(o=>r.jsx(v,{...o},o.id))})},pr=({userId:s,counts:e})=>{const{data:t,isFetching:i}=_({userId:s});return i||t===void 0||t===null?r.jsx(r.Fragment,{children:[...Array(e)].map((o,a)=>r.jsx(j,{},a))}):r.jsx(r.Fragment,{children:t.map(o=>r.jsx(v,{...o},o.id))})},b=({open:s,onClose:e,type:t,counts:i})=>{const{searchParams:o}=Z(),a=o.get("user"),{data:c,isFetching:d}=p(a);return r.jsxs(rr,{open:s,onClose:e,maxWidth:"sm",fullWidth:!0,children:[r.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center",p:2,bgcolor:"action.hover"},children:[r.jsx(w,{className:"mode-light",sx:{fontSize:36,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1}}),r.jsx(n,{variant:"h6",component:"h2",sx:{color:"text.primary"},children:t==="followers"?"追蹤者":"正在追蹤"})]}),r.jsx(er,{children:r.jsx(l,{sx:{display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center",gap:2},children:d||(c==null?void 0:c.id)===void 0?r.jsx(r.Fragment,{children:[...Array(i)].map((u,U)=>r.jsx(j,{},U))}):t==="followers"?r.jsx(xr,{userId:c.id,counts:i}):r.jsx(pr,{userId:c.id,counts:i})})}),r.jsx(sr,{children:r.jsx(y,{onClick:e,children:"關閉"})})]})},C=()=>r.jsxs(r.Fragment,{children:[r.jsx(w,{fontSize:"small",color:"inherit"}),r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"body2",children:"0 位追蹤者"})}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(x,{variant:"rounded",animation:"wave",children:r.jsx(n,{variant:"body2",children:"正在追蹤 0 人"})})]}),mr=({user:s})=>{const[e,t]=g.useState(!1),[i,o]=g.useState(!1),{data:a,isFetching:c}=A(s.id);if(a===void 0||c)return r.jsx(C,{});const{followerCount:d,followingCount:u}=a;return r.jsxs(r.Fragment,{children:[r.jsx(w,{fontSize:"small",color:"inherit"}),r.jsx(n,{variant:"body2",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer",color:"text.primary"}},onClick:()=>t(!0),children:`${d} 位追蹤者`}),r.jsx(n,{variant:"body2",children:"·"}),r.jsx(n,{variant:"body2",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer",color:"text.primary"}},onClick:()=>o(!0),children:`正在追蹤 ${u} 人`}),r.jsx(b,{open:e,onClose:()=>t(!1),type:"followers",counts:d}),r.jsx(b,{open:i,onClose:()=>o(!1),type:"following",counts:u})]})},hr=()=>{const s=new URLSearchParams(window.location.search),{data:e,isFetching:t}=p(s.get("user"));return t||e===void 0||e===null?r.jsx(C,{}):r.jsx(mr,{user:e})};function jr(){const{isMd:s}=B();return r.jsxs(E,{children:[r.jsx(tr,{}),r.jsx(M,{}),r.jsxs(z,{children:[s?r.jsx(T,{}):r.jsx(O,{}),r.jsx(Y,{maxWidth:"lg",sx:{position:"relative",my:10,px:0},children:r.jsxs(R,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[r.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,flexWrap:"wrap"},children:[r.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Q,{}),r.jsx(nr,{})]}),r.jsx(l,{sx:{m:2},children:r.jsx(V,{})})]}),r.jsx(h,{}),r.jsxs(l,{sx:{position:"relative",display:"flex",justifyContent:"space-between",gap:3,alignItems:"center",px:3,py:2,flexWrap:"wrap"},children:[r.jsx(l,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),r.jsxs(l,{sx:{display:"flex",gap:1,alignItems:"center",color:"text.secondary"},children:[r.jsx(y,{variant:"outlined",startIcon:r.jsx(W,{}),size:"small",sx:{mr:1},href:G.forum_home,children:s?"返回首頁":"首頁"}),r.jsx(dr,{})]}),r.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center",color:"text.secondary"},children:r.jsx(hr,{})})]}),r.jsx(h,{}),r.jsx(l,{children:r.jsx(lr,{})})]})}),r.jsx(q,{})]})]})}k.createRoot(document.getElementById("root")).render(r.jsx(g.StrictMode,{children:r.jsx(jr,{})}));
