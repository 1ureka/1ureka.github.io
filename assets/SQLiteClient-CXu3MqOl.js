var ni=Object.defineProperty;var Vr=h=>{throw TypeError(h)};var ii=(h,u,f)=>u in h?ni(h,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):h[u]=f;var te=(h,u,f)=>ii(h,typeof u!="symbol"?u+"":u,f),Bt=(h,u,f)=>u.has(h)||Vr("Cannot "+f);var m=(h,u,f)=>(Bt(h,u,"read from private field"),f?f.call(h):u.get(h)),B=(h,u,f)=>u.has(h)?Vr("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(h):u.set(h,f),F=(h,u,f,p)=>(Bt(h,u,"write to private field"),p?p.call(h,f):u.set(h,f),f),z=(h,u,f)=>(Bt(h,u,"access private method"),f);import{S as si,p as Xr,r as ue,s as Vt,e as yt,f as oi,j as Xt,k as Yr,t as ai,l as ui,m as li,o as Gr,n as on,u as fi}from"./RefreshRounded-Hlj_ZRjd.js";import{r as me,aF as hi,ak as ci}from"./routes-DrAjfNKu.js";var G,A,nt,V,Te,ze,ge,Ee,it,Be,$e,De,Le,qe,He,T,rt,Yt,Gt,Kt,Zt,Jt,er,tr,an,sn,di=(sn=class extends si{constructor(u,f){super();B(this,T);B(this,G);B(this,A);B(this,nt);B(this,V);B(this,Te);B(this,ze);B(this,ge);B(this,Ee);B(this,it);B(this,Be);B(this,$e);B(this,De);B(this,Le);B(this,qe);B(this,He,new Set);this.options=f,F(this,G,u),F(this,Ee,null),F(this,ge,Xr()),this.options.experimental_prefetchInRender||m(this,ge).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(f)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(m(this,A).addObserver(this),Kr(m(this,A),this.options)?z(this,T,rt).call(this):this.updateResult(),z(this,T,Zt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rr(m(this,A),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rr(m(this,A),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,z(this,T,Jt).call(this),z(this,T,er).call(this),m(this,A).removeObserver(this)}setOptions(u){const f=this.options,p=m(this,A);if(this.options=m(this,G).defaultQueryOptions(u),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ue(this.options.enabled,m(this,A))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");z(this,T,tr).call(this),m(this,A).setOptions(this.options),f._defaulted&&!Vt(this.options,f)&&m(this,G).getQueryCache().notify({type:"observerOptionsUpdated",query:m(this,A),observer:this});const x=this.hasListeners();x&&Zr(m(this,A),p,this.options,f)&&z(this,T,rt).call(this),this.updateResult(),x&&(m(this,A)!==p||ue(this.options.enabled,m(this,A))!==ue(f.enabled,m(this,A))||yt(this.options.staleTime,m(this,A))!==yt(f.staleTime,m(this,A)))&&z(this,T,Yt).call(this);const E=z(this,T,Gt).call(this);x&&(m(this,A)!==p||ue(this.options.enabled,m(this,A))!==ue(f.enabled,m(this,A))||E!==m(this,qe))&&z(this,T,Kt).call(this,E)}getOptimisticResult(u){const f=m(this,G).getQueryCache().build(m(this,G),u),p=this.createResult(f,u);return pi(this,p)&&(F(this,V,p),F(this,ze,this.options),F(this,Te,m(this,A).state)),p}getCurrentResult(){return m(this,V)}trackResult(u,f){const p={};return Object.keys(u).forEach(x=>{Object.defineProperty(p,x,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(x),f==null||f(x),u[x])})}),p}trackProp(u){m(this,He).add(u)}getCurrentQuery(){return m(this,A)}refetch({...u}={}){return this.fetch({...u})}fetchOptimistic(u){const f=m(this,G).defaultQueryOptions(u),p=m(this,G).getQueryCache().build(m(this,G),f);return p.fetch().then(()=>this.createResult(p,f))}fetch(u){return z(this,T,rt).call(this,{...u,cancelRefetch:u.cancelRefetch??!0}).then(()=>(this.updateResult(),m(this,V)))}createResult(u,f){var Ce;const p=m(this,A),x=this.options,E=m(this,V),q=m(this,Te),P=m(this,ze),s=u!==p?u.state:m(this,nt),{state:Re}=u;let N={...Re},se=!1,I;if(f._optimisticResults){const M=this.hasListeners(),O=!M&&Kr(u,f),Z=M&&Zr(u,p,f,x);(O||Z)&&(N={...N,...li(Re.data,u.options)}),f._optimisticResults==="isRestoring"&&(N.fetchStatus="idle")}let{error:le,errorUpdatedAt:oe,status:U}=N;I=N.data;let pe=!1;if(f.placeholderData!==void 0&&I===void 0&&U==="pending"){let M;E!=null&&E.isPlaceholderData&&f.placeholderData===(P==null?void 0:P.placeholderData)?(M=E.data,pe=!0):M=typeof f.placeholderData=="function"?f.placeholderData((Ce=m(this,$e))==null?void 0:Ce.state.data,m(this,$e)):f.placeholderData,M!==void 0&&(U="success",I=Gr(E==null?void 0:E.data,M,f),se=!0)}if(f.select&&I!==void 0&&!pe)if(E&&I===(q==null?void 0:q.data)&&f.select===m(this,it))I=m(this,Be);else try{F(this,it,f.select),I=f.select(I),I=Gr(E==null?void 0:E.data,I,f),F(this,Be,I),F(this,Ee,null)}catch(M){F(this,Ee,M)}m(this,Ee)&&(le=m(this,Ee),I=m(this,Be),oe=Date.now(),U="error");const be=N.fetchStatus==="fetching",Se=U==="pending",Ne=U==="error",fe=Se&&be,xe=I!==void 0,$={status:U,fetchStatus:N.fetchStatus,isPending:Se,isSuccess:U==="success",isError:Ne,isInitialLoading:fe,isLoading:fe,data:I,dataUpdatedAt:N.dataUpdatedAt,error:le,errorUpdatedAt:oe,failureCount:N.fetchFailureCount,failureReason:N.fetchFailureReason,errorUpdateCount:N.errorUpdateCount,isFetched:N.dataUpdateCount>0||N.errorUpdateCount>0,isFetchedAfterMount:N.dataUpdateCount>s.dataUpdateCount||N.errorUpdateCount>s.errorUpdateCount,isFetching:be,isRefetching:be&&!Se,isLoadingError:Ne&&!xe,isPaused:N.fetchStatus==="paused",isPlaceholderData:se,isRefetchError:Ne&&xe,isStale:nr(u,f),refetch:this.refetch,promise:m(this,ge)};if(this.options.experimental_prefetchInRender){const M=k=>{$.status==="error"?k.reject($.error):$.data!==void 0&&k.resolve($.data)},O=()=>{const k=F(this,ge,$.promise=Xr());M(k)},Z=m(this,ge);switch(Z.status){case"pending":u.queryHash===p.queryHash&&M(Z);break;case"fulfilled":($.status==="error"||$.data!==Z.value)&&O();break;case"rejected":($.status!=="error"||$.error!==Z.reason)&&O();break}}return $}updateResult(){const u=m(this,V),f=this.createResult(m(this,A),this.options);if(F(this,Te,m(this,A).state),F(this,ze,this.options),m(this,Te).data!==void 0&&F(this,$e,m(this,A)),Vt(f,u))return;F(this,V,f);const p=()=>{if(!u)return!0;const{notifyOnChangeProps:x}=this.options,E=typeof x=="function"?x():x;if(E==="all"||!E&&!m(this,He).size)return!0;const q=new Set(E??m(this,He));return this.options.throwOnError&&q.add("error"),Object.keys(m(this,V)).some(P=>{const L=P;return m(this,V)[L]!==u[L]&&q.has(L)})};z(this,T,an).call(this,{listeners:p()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&z(this,T,Zt).call(this)}},G=new WeakMap,A=new WeakMap,nt=new WeakMap,V=new WeakMap,Te=new WeakMap,ze=new WeakMap,ge=new WeakMap,Ee=new WeakMap,it=new WeakMap,Be=new WeakMap,$e=new WeakMap,De=new WeakMap,Le=new WeakMap,qe=new WeakMap,He=new WeakMap,T=new WeakSet,rt=function(u){z(this,T,tr).call(this);let f=m(this,A).fetch(this.options,u);return u!=null&&u.throwOnError||(f=f.catch(oi)),f},Yt=function(){z(this,T,Jt).call(this);const u=yt(this.options.staleTime,m(this,A));if(Xt||m(this,V).isStale||!Yr(u))return;const p=ai(m(this,V).dataUpdatedAt,u)+1;F(this,De,setTimeout(()=>{m(this,V).isStale||this.updateResult()},p))},Gt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(m(this,A)):this.options.refetchInterval)??!1},Kt=function(u){z(this,T,er).call(this),F(this,qe,u),!(Xt||ue(this.options.enabled,m(this,A))===!1||!Yr(m(this,qe))||m(this,qe)===0)&&F(this,Le,setInterval(()=>{(this.options.refetchIntervalInBackground||ui.isFocused())&&z(this,T,rt).call(this)},m(this,qe)))},Zt=function(){z(this,T,Yt).call(this),z(this,T,Kt).call(this,z(this,T,Gt).call(this))},Jt=function(){m(this,De)&&(clearTimeout(m(this,De)),F(this,De,void 0))},er=function(){m(this,Le)&&(clearInterval(m(this,Le)),F(this,Le,void 0))},tr=function(){const u=m(this,G).getQueryCache().build(m(this,G),this.options);if(u===m(this,A))return;const f=m(this,A);F(this,A,u),F(this,nt,u.state),this.hasListeners()&&(f==null||f.removeObserver(this),u.addObserver(this))},an=function(u){on.batch(()=>{u.listeners&&this.listeners.forEach(f=>{f(m(this,V))}),m(this,G).getQueryCache().notify({query:m(this,A),type:"observerResultsUpdated"})})},sn);function mi(h,u){return ue(u.enabled,h)!==!1&&h.state.data===void 0&&!(h.state.status==="error"&&u.retryOnMount===!1)}function Kr(h,u){return mi(h,u)||h.state.data!==void 0&&rr(h,u,u.refetchOnMount)}function rr(h,u,f){if(ue(u.enabled,h)!==!1){const p=typeof f=="function"?f(h):f;return p==="always"||p!==!1&&nr(h,u)}return!1}function Zr(h,u,f,p){return(h!==u||ue(p.enabled,h)===!1)&&(!f.suspense||h.state.status!=="error")&&nr(h,f)}function nr(h,u){return ue(u.enabled,h)!==!1&&h.isStaleByTime(yt(u.staleTime,h))}function pi(h,u){return!Vt(h.getCurrentResult(),u)}var un=me.createContext(!1),bi=()=>me.useContext(un);un.Provider;function wi(){let h=!1;return{clearReset:()=>{h=!1},reset:()=>{h=!0},isReset:()=>h}}var yi=me.createContext(wi()),vi=()=>me.useContext(yi);function _i(h,u){return typeof h=="function"?h(...u):!!h}function Jr(){}var gi=(h,u)=>{(h.suspense||h.throwOnError||h.experimental_prefetchInRender)&&(u.isReset()||(h.retryOnMount=!1))},Ei=h=>{me.useEffect(()=>{h.clearReset()},[h])},qi=({result:h,errorResetBoundary:u,throwOnError:f,query:p,suspense:x})=>h.isError&&!u.isReset()&&!h.isFetching&&p&&(x&&h.data===void 0||_i(f,[h.error,p])),Ri=h=>{const u=h.staleTime;h.suspense&&(h.staleTime=typeof u=="function"?(...f)=>Math.max(u(...f),1e3):Math.max(u??1e3,1e3),typeof h.gcTime=="number"&&(h.gcTime=Math.max(h.gcTime,1e3)))},Si=(h,u)=>h.isLoading&&h.isFetching&&!u,xi=(h,u)=>(h==null?void 0:h.suspense)&&u.isPending,en=(h,u,f)=>u.fetchOptimistic(h).catch(()=>{f.clearReset()});function Oi(h,u,f){var N,se,I,le,oe;const p=fi(),x=bi(),E=vi(),q=p.defaultQueryOptions(h);(se=(N=p.getDefaultOptions().queries)==null?void 0:N._experimental_beforeQuery)==null||se.call(N,q),q._optimisticResults=x?"isRestoring":"optimistic",Ri(q),gi(q,E),Ei(E);const P=!p.getQueryCache().get(q.queryHash),[L]=me.useState(()=>new u(p,q)),s=L.getOptimisticResult(q),Re=!x&&h.subscribed!==!1;if(me.useSyncExternalStore(me.useCallback(U=>{const pe=Re?L.subscribe(on.batchCalls(U)):Jr;return L.updateResult(),pe},[L,Re]),()=>L.getCurrentResult(),()=>L.getCurrentResult()),me.useEffect(()=>{L.setOptions(q)},[q,L]),xi(q,s))throw en(q,L,E);if(qi({result:s,errorResetBoundary:E,throwOnError:q.throwOnError,query:p.getQueryCache().get(q.queryHash),suspense:q.suspense}))throw s.error;if((le=(I=p.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||le.call(I,q,s),q.experimental_prefetchInRender&&!Xt&&Si(s,x)){const U=P?en(q,L,E):(oe=p.getQueryCache().get(q.queryHash))==null?void 0:oe.promise;U==null||U.catch(Jr).finally(()=>{L.updateResult()})}return q.notifyOnChangeProps?s:L.trackResult(s)}function Ii(h,u){return Oi(h,di)}const Qi="/assets/forum-B5RtzFX9.db";var $t={exports:{}};const Ai={},ki=Object.freeze(Object.defineProperty({__proto__:null,default:Ai},Symbol.toStringTag,{value:"Module"})),tn=hi(ki);var rn;function Mi(){return rn||(rn=1,function(h,u){var f=void 0,p=function(x){return f||(f=new Promise(function(E,q){var P=typeof x<"u"?x:{},L=P.onAbort;P.onAbort=function(e){q(new Error(e)),L&&L(e)},P.postRun=P.postRun||[],P.postRun.push(function(){E(P)}),h=void 0;var s;s||(s=typeof P<"u"?P:{});var Re=typeof window=="object",N=typeof WorkerGlobalScope<"u",se=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function e(o,c){switch(typeof c){case"boolean":ti(o,c?1:0);break;case"number":Zn(o,c);break;case"string":Jn(o,c,-1,-1);break;case"object":if(c===null)zr(o);else if(c.length!=null){var b=pt(c,mt);ei(o,b,c.length,-1),bt(b)}else wt(o,"Wrong API use : tried to return a value of an unknown type ("+c+").",-1);break;default:zr(o)}}function t(o,c){for(var b=[],v=0;v<o;v+=1){var _=he(c+4*v,"i32"),D=Vn(_);if(D===1||D===2)_=Kn(_);else if(D===3)_=Yn(_);else if(D===4){D=_,_=Xn(D),D=Gn(D);for(var ne=new Uint8Array(_),ee=0;ee<_;ee+=1)ne[ee]=M[D+ee];_=ne}else _=null;b.push(_)}return b}function r(o,c){this.Qa=o,this.db=c,this.Oa=1,this.lb=[]}function n(o,c){if(this.db=c,c=Ge(o)+1,this.eb=jt(c),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ce(o,O,this.eb,c),this.kb=this.eb,this.Za=this.pb=null}function i(o){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),o!=null){var c=this.filename,b="/",v=c;if(b&&(b=typeof b=="string"?b:kt(b),v=c?xt(b+"/"+c):b),c=br(!0,!0),v=qn(v,c),o){if(typeof o=="string"){b=Array(o.length);for(var _=0,D=o.length;_<D;++_)b[_]=o.charCodeAt(_);o=b}ft(v,c|146),b=Qe(v,577),Dr(b,o,0,o.length,0),Nt(b),ft(v,c)}}this.handleError(w(this.filename,a)),this.db=he(a,"i32"),$r(this.db),this.fb={},this.Sa={}}var a=_e(4),l=s.cwrap,w=l("sqlite3_open","number",["string","number"]),S=l("sqlite3_close_v2","number",["number"]),R=l("sqlite3_exec","number",["number","string","number","number","number"]),j=l("sqlite3_changes","number",["number"]),Y=l("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Fr=l("sqlite3_sql","string",["number"]),Mn=l("sqlite3_normalized_sql","string",["number"]),Ir=l("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Pn=l("sqlite3_bind_text","number",["number","number","number","number","number"]),Qr=l("sqlite3_bind_blob","number",["number","number","number","number","number"]),Tn=l("sqlite3_bind_double","number",["number","number","number"]),Dn=l("sqlite3_bind_int","number",["number","number","number"]),Ln=l("sqlite3_bind_parameter_index","number",["number","string"]),Nn=l("sqlite3_step","number",["number"]),Cn=l("sqlite3_errmsg","string",["number"]),Un=l("sqlite3_column_count","number",["number"]),Fn=l("sqlite3_data_count","number",["number"]),In=l("sqlite3_column_double","number",["number","number"]),jr=l("sqlite3_column_text","string",["number","number"]),Qn=l("sqlite3_column_blob","number",["number","number"]),jn=l("sqlite3_column_bytes","number",["number","number"]),Wn=l("sqlite3_column_type","number",["number","number"]),zn=l("sqlite3_column_name","string",["number","number"]),Bn=l("sqlite3_reset","number",["number"]),$n=l("sqlite3_clear_bindings","number",["number"]),Hn=l("sqlite3_finalize","number",["number"]),Wr=l("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Vn=l("sqlite3_value_type","number",["number"]),Xn=l("sqlite3_value_bytes","number",["number"]),Yn=l("sqlite3_value_text","string",["number"]),Gn=l("sqlite3_value_blob","number",["number"]),Kn=l("sqlite3_value_double","number",["number"]),Zn=l("sqlite3_result_double","",["number","number"]),zr=l("sqlite3_result_null","",["number"]),Jn=l("sqlite3_result_text","",["number","string","number","number"]),ei=l("sqlite3_result_blob","",["number","number","number","number"]),ti=l("sqlite3_result_int","",["number","number"]),wt=l("sqlite3_result_error","",["number","string","number"]),Br=l("sqlite3_aggregate_context","number",["number","number"]),$r=l("RegisterExtensionFunctions","number",["number"]),Hr=l("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(o){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(o)?this.Cb(o):o!=null&&typeof o=="object"?this.Db(o):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var o=Nn(this.Qa);switch(o){case 100:return!0;case 101:return!1;default:throw this.db.handleError(o)}},r.prototype.wb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),In(this.Qa,o)},r.prototype.Gb=function(o){if(o==null&&(o=this.Oa,this.Oa+=1),o=jr(this.Qa,o),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(o)},r.prototype.Hb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),jr(this.Qa,o)},r.prototype.getBlob=function(o){o==null&&(o=this.Oa,this.Oa+=1);var c=jn(this.Qa,o);o=Qn(this.Qa,o);for(var b=new Uint8Array(c),v=0;v<c;v+=1)b[v]=M[o+v];return b},r.prototype.get=function(o,c){c=c||{},o!=null&&this.bind(o)&&this.step(),o=[];for(var b=Fn(this.Qa),v=0;v<b;v+=1)switch(Wn(this.Qa,v)){case 1:var _=c.useBigInt?this.Gb(v):this.wb(v);o.push(_);break;case 2:o.push(this.wb(v));break;case 3:o.push(this.Hb(v));break;case 4:o.push(this.getBlob(v));break;default:o.push(null)}return o},r.prototype.getColumnNames=function(){for(var o=[],c=Un(this.Qa),b=0;b<c;b+=1)o.push(zn(this.Qa,b));return o},r.prototype.getAsObject=function(o,c){o=this.get(o,c),c=this.getColumnNames();for(var b={},v=0;v<c.length;v+=1)b[c[v]]=o[v];return b},r.prototype.getSQL=function(){return Fr(this.Qa)},r.prototype.getNormalizedSQL=function(){return Mn(this.Qa)},r.prototype.run=function(o){return o!=null&&this.bind(o),this.step(),this.reset()},r.prototype.sb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1),o=dr(o);var b=pt(o,mt);this.lb.push(b),this.db.handleError(Pn(this.Qa,c,b,o.length-1,0))},r.prototype.Bb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1);var b=pt(o,mt);this.lb.push(b),this.db.handleError(Qr(this.Qa,c,b,o.length,0))},r.prototype.rb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1),this.db.handleError((o===(o|0)?Dn:Tn)(this.Qa,c,o))},r.prototype.Eb=function(o){o==null&&(o=this.Oa,this.Oa+=1),Qr(this.Qa,o,0,0,0)},r.prototype.tb=function(o,c){switch(c==null&&(c=this.Oa,this.Oa+=1),typeof o){case"string":this.sb(o,c);return;case"number":this.rb(o,c);return;case"bigint":this.sb(o.toString(),c);return;case"boolean":this.rb(o+0,c);return;case"object":if(o===null){this.Eb(c);return}if(o.length!=null){this.Bb(o,c);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+o+")."},r.prototype.Db=function(o){var c=this;return Object.keys(o).forEach(function(b){var v=Ln(c.Qa,b);v!==0&&c.tb(o[b],v)}),!0},r.prototype.Cb=function(o){for(var c=0;c<o.length;c+=1)this.tb(o[c],c+1);return!0},r.prototype.reset=function(){return this.freemem(),$n(this.Qa)===0&&Bn(this.Qa)===0},r.prototype.freemem=function(){for(var o;(o=this.lb.pop())!==void 0;)bt(o)},r.prototype.free=function(){this.freemem();var o=Hn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,o},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var o=tt(),c=_e(4);Ye(a),Ye(c);try{this.db.handleError(Ir(this.db.db,this.kb,-1,a,c)),this.kb=he(c,"i32");var b=he(a,"i32");return b===0?(this.mb(),{done:!0}):(this.Za=new r(b,this.db),this.db.fb[b]=this.Za,{value:this.Za,done:!1})}catch(v){throw this.pb=St(this.kb),this.mb(),v}finally{et(o)}},n.prototype.mb=function(){bt(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:St(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(o,c){if(!this.db)throw"Database closed";if(c){o=this.prepare(o,c);try{o.step()}finally{o.free()}}else this.handleError(R(this.db,o,0,0,a));return this},i.prototype.exec=function(o,c,b){if(!this.db)throw"Database closed";var v=tt(),_=null;try{var D=It(o),ne=_e(4);for(o=[];he(D,"i8")!==0;){Ye(a),Ye(ne),this.handleError(Ir(this.db,D,-1,a,ne));var ee=he(a,"i32");if(D=he(ne,"i32"),ee!==0){var K=null;for(_=new r(ee,this),c!=null&&_.bind(c);_.step();)K===null&&(K={columns:_.getColumnNames(),values:[]},o.push(K)),K.values.push(_.get(null,b));_.free()}}return o}catch(ie){throw _&&_.free(),ie}finally{et(v)}},i.prototype.each=function(o,c,b,v,_){typeof c=="function"&&(v=b,b=c,c=void 0),o=this.prepare(o,c);try{for(;o.step();)b(o.getAsObject(null,_))}finally{o.free()}if(typeof v=="function")return v()},i.prototype.prepare=function(o,c){if(Ye(a),this.handleError(Y(this.db,o,-1,a,0)),o=he(a,"i32"),o===0)throw"Nothing to prepare";var b=new r(o,this);return c!=null&&b.bind(c),this.fb[o]=b},i.prototype.iterateStatements=function(o){return new n(o,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(c){c.free()}),Object.values(this.Sa).forEach(ve),this.Sa={},this.handleError(S(this.db));var o=Rn(this.filename);return this.handleError(w(this.filename,a)),this.db=he(a,"i32"),$r(this.db),o},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(o){o.free()}),Object.values(this.Sa).forEach(ve),this.Sa={},this.Ya&&(ve(this.Ya),this.Ya=void 0),this.handleError(S(this.db)),Ar("/"+this.filename),this.db=null)},i.prototype.handleError=function(o){if(o===0)return null;throw o=Cn(this.db),Error(o)},i.prototype.getRowsModified=function(){return j(this.db)},i.prototype.create_function=function(o,c){Object.prototype.hasOwnProperty.call(this.Sa,o)&&(ve(this.Sa[o]),delete this.Sa[o]);var b=Je(function(v,_,D){_=t(_,D);try{var ne=c.apply(null,_)}catch(ee){wt(v,ee,-1);return}e(v,ne)},"viii");return this.Sa[o]=b,this.handleError(Wr(this.db,o,c.length,1,0,b,0,0,0)),this},i.prototype.create_aggregate=function(o,c){var b=c.init||function(){return null},v=c.finalize||function(K){return K},_=c.step;if(!_)throw"An aggregate function must have a step function in "+o;var D={};Object.hasOwnProperty.call(this.Sa,o)&&(ve(this.Sa[o]),delete this.Sa[o]),c=o+"__finalize",Object.hasOwnProperty.call(this.Sa,c)&&(ve(this.Sa[c]),delete this.Sa[c]);var ne=Je(function(K,ie,zt){var Pe=Br(K,1);Object.hasOwnProperty.call(D,Pe)||(D[Pe]=b()),ie=t(ie,zt),ie=[D[Pe]].concat(ie);try{D[Pe]=_.apply(null,ie)}catch(ri){delete D[Pe],wt(K,ri,-1)}},"viii"),ee=Je(function(K){var ie=Br(K,1);try{var zt=v(D[ie])}catch(Pe){delete D[ie],wt(K,Pe,-1);return}e(K,zt),delete D[ie]},"vi");return this.Sa[o]=ne,this.Sa[c]=ee,this.handleError(Wr(this.db,o,_.length-1,1,0,0,ne,ee,0)),this},i.prototype.updateHook=function(o){this.Ya&&(Hr(this.db,0,0),ve(this.Ya),this.Ya=void 0),o&&(this.Ya=Je(function(c,b,v,_,D){switch(b){case 18:c="insert";break;case 23:c="update";break;case 9:c="delete";break;default:throw"unknown operationCode in updateHook callback: "+b}if(v=v?Q(O,v):"",_=_?Q(O,_):"",D>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";o(c,v,_,Number(D))},"viiiij"),Hr(this.db,this.Ya,0))},s.Database=i};var I={...s},le="./this.program",oe=(e,t)=>{throw t},U="",pe,be;if(se){var Se=tn;U=__dirname+"/",be=e=>(e=st(e)?new URL(e):e,Se.readFileSync(e)),pe=async e=>(e=st(e)?new URL(e):e,Se.readFileSync(e,void 0)),!s.thisProgram&&1<process.argv.length&&(le=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),h.exports=s,oe=(e,t)=>{throw process.exitCode=e,t}}else(Re||N)&&(N?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),U=U.startsWith("blob:")?"":U.slice(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1),N&&(be=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),pe=async e=>{if(st(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var Ne=s.print||console.log.bind(console),fe=s.printErr||console.error.bind(console);Object.assign(s,I),I=null,s.thisProgram&&(le=s.thisProgram);var xe=s.wasmBinary,Ve,$=!1,Ce,M,O,Z,k,W,_t,re,gt,st=e=>e.startsWith("file://");function sr(){var e=Ve.buffer;s.HEAP8=M=new Int8Array(e),s.HEAP16=Z=new Int16Array(e),s.HEAPU8=O=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=k=new Int32Array(e),s.HEAPU32=W=new Uint32Array(e),s.HEAPF32=_t=new Float32Array(e),s.HEAPF64=gt=new Float64Array(e),s.HEAP64=re=new BigInt64Array(e),s.HEAPU64=new BigUint64Array(e)}var Oe=0,Xe=null;function Ue(e){var t;throw(t=s.onAbort)==null||t.call(s,e),e="Aborted("+e+")",fe(e),$=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Et;async function ln(e){if(!xe)try{var t=await pe(e);return new Uint8Array(t)}catch{}if(e==Et&&xe)e=new Uint8Array(xe);else if(be)e=be(e);else throw"both async and sync fetching of the wasm failed";return e}async function fn(e,t){try{var r=await ln(e);return await WebAssembly.instantiate(r,t)}catch(n){fe(`failed to asynchronously prepare wasm: ${n}`),Ue(n)}}async function hn(e){var t=Et;if(!xe&&typeof WebAssembly.instantiateStreaming=="function"&&!st(t)&&!se)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){fe(`wasm streaming compile failed: ${n}`),fe("falling back to ArrayBuffer instantiation")}return fn(t,e)}class qt{constructor(t){te(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var or=e=>{for(;0<e.length;)e.shift()(s)},ar=[],ur=[],cn=()=>{var e=s.preRun.shift();ur.unshift(e)};function he(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return M[e];case"i8":return M[e];case"i16":return Z[e>>1];case"i32":return k[e>>2];case"i64":return re[e>>3];case"float":return _t[e>>2];case"double":return gt[e>>3];case"*":return W[e>>2];default:Ue(`invalid type for getValue: ${t}`)}}var Rt=s.noExitRuntime||!0;function Ye(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":M[e]=0;break;case"i8":M[e]=0;break;case"i16":Z[e>>1]=0;break;case"i32":k[e>>2]=0;break;case"i64":re[e>>3]=BigInt(0);break;case"float":_t[e>>2]=0;break;case"double":gt[e>>3]=0;break;case"*":W[e>>2]=0;break;default:Ue(`invalid type for setValue: ${t}`)}}var lr=typeof TextDecoder<"u"?new TextDecoder:void 0,Q=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&lr)return lr.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var a=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var l=e[t++]&63;i=(i&240)==224?(i&15)<<12|a<<6|l:(i&7)<<18|a<<12|l<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},St=(e,t)=>e?Q(O,e,t):"",fr=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},xt=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=fr(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},hr=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},ot=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],dn=()=>{if(se){var e=tn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},cr=e=>{(cr=dn())(e)},mn=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=fr(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},Ot=[],Ge=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},ce=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<e.length;++a){var l=e.charCodeAt(a);if(55296<=l&&57343>=l){var w=e.charCodeAt(++a);l=65536+((l&1023)<<10)|w&1023}if(127>=l){if(r>=n)break;t[r++]=l}else{if(2047>=l){if(r+1>=n)break;t[r++]=192|l>>6}else{if(65535>=l){if(r+2>=n)break;t[r++]=224|l>>12}else{if(r+3>=n)break;t[r++]=240|l>>18,t[r++]=128|l>>12&63}t[r++]=128|l>>6&63}t[r++]=128|l&63}}return t[r]=0,r-i},dr=(e,t)=>{var r=Array(Ge(e)+1);return e=ce(e,r,0,r.length),t&&(r.length=e),r},mr=[];function pr(e,t){mr[e]={input:[],output:[],cb:t},Dt(e,pn)}var pn={open(e){var t=mr[e.node.rdev];if(!t)throw new d(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new d(60);for(var i=0,a=0;a<n;a++){try{var l=e.tty.cb.xb(e.tty)}catch{throw new d(29)}if(l===void 0&&i===0)throw new d(6);if(l==null)break;i++,t[r+a]=l}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new d(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new d(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},bn={xb(){e:{if(!Ot.length){var e=null;if(se){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=Se.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}Ot=dr(e,!0)}e=Ot.shift()}return e},qb(e,t){t===null||t===10?(Ne(Q(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(Ne(Q(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},wn={qb(e,t){t===null||t===10?(fe(Q(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(fe(Q(e.output)),e.output=[])}},g={Wa:null,Xa(){return g.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new d(63);return g.Wa||(g.Wa={dir:{node:{Ta:g.La.Ta,Ua:g.La.Ua,lookup:g.La.lookup,hb:g.La.hb,rename:g.La.rename,unlink:g.La.unlink,rmdir:g.La.rmdir,readdir:g.La.readdir,symlink:g.La.symlink},stream:{Va:g.Ma.Va}},file:{node:{Ta:g.La.Ta,Ua:g.La.Ua},stream:{Va:g.Ma.Va,read:g.Ma.read,write:g.Ma.write,ib:g.Ma.ib,jb:g.Ma.jb}},link:{node:{Ta:g.La.Ta,Ua:g.La.Ua,readlink:g.La.readlink},stream:{}},ub:{node:{Ta:g.La.Ta,Ua:g.La.Ua},stream:En}}),r=gr(e,t,r,n),X(r.mode)?(r.La=g.Wa.dir.node,r.Ma=g.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=g.Wa.file.node,r.Ma=g.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=g.Wa.link.node,r.Ma=g.Wa.link.stream):(r.mode&61440)===8192&&(r.La=g.Wa.ub.node,r.Ma=g.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,X(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw g.vb},hb(e,t,r,n){return g.createNode(e,t,r,n)},rename(e,t,r){try{var n=Ae(t,r)}catch{}if(n){if(X(e.mode))for(var i in n.Na)throw new d(55);Pt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=Ae(e,t),n;for(n in r.Na)throw new d(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=g.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new d(28);return e.link}},Ma:{read(e,t,r,n,i){var a=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&a.subarray)t.set(a.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=a[i+n];return e},write(e,t,r,n,i,a){if(t.buffer===M.buffer&&(a=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}a=i+n;var l=e.Na?e.Na.length:0;if(l>=a||(a=Math.max(a,l*(1048576>l?2:1.125)>>>0),l!=0&&(a=Math.max(a,256)),l=e.Na,e.Na=new Uint8Array(a),0<e.Ra&&e.Na.set(l.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(a=0;a<n;a++)e.Na[i+a]=t[r+a];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new d(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new d(43);if(e=e.node.Na,i&2||!e||e.buffer!==M.buffer){i=!0,n=65536*Math.ceil(t/65536);var a=Cr(65536,n);if(a&&O.fill(0,a,a+n),n=a,!n)throw new d(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),M.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return g.Ma.write(e,t,0,n,r,!1),0}}},br=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},At=null,wr={},Fe=[],yn=1,we=null,yr=!1,vr=!0,_r={},d=class{constructor(e){te(this,"name","ErrnoError");this.Pa=e}},vn=class{constructor(){te(this,"gb",{});te(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},_n=class{constructor(e,t,r,n){te(this,"La",{});te(this,"Ma",{});te(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=yn++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function J(e,t={}){if(!e)throw new d(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(w=>!!w);for(var n=At,i="/",a=0;a<e.length;a++){var l=a===e.length-1;if(l&&t.parent)break;if(e[a]!==".")if(e[a]==="..")i=hr(i),n=n.parent;else{i=xt(i+"/"+e[a]);try{n=Ae(n,e[a])}catch(w){if((w==null?void 0:w.Pa)===44&&l&&t.Jb)return{path:i};throw w}if(!n.ab||l&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!l||t.$a)){if(!n.La.readlink)throw new d(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=hr(i)+"/"+n),e=n+"/"+e.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new d(32)}function kt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Mt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%we.length}function Pt(e){var t=Mt(e.parent.id,e.name);if(we[t]===e)we[t]=e.bb;else for(t=we[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Ae(e,t){var r=X(e.mode)?(r=Ie(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new d(r);for(r=we[Mt(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function gr(e,t,r,n){return e=new _n(e,t,r,n),t=Mt(e.parent.id,e.name),e.bb=we[t],we[t]=e}function X(e){return(e&61440)===16384}function Er(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function Ie(e,t){if(vr)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function qr(e,t){if(!X(e.mode))return 54;try{return Ae(e,t),20}catch{}return Ie(e,"wx")}function Rr(e,t,r){try{var n=Ae(e,t)}catch(i){return i.Pa}if(e=Ie(e,"wx"))return e;if(r){if(!X(n.mode))return 54;if(n===n.parent||kt(n)==="/")return 10}else if(X(n.mode))return 31;return 0}function at(e){if(!e)throw new d(63);return e}function H(e){if(e=Fe[e],!e)throw new d(8);return e}function Sr(e,t=-1){if(e=Object.assign(new vn,e),t==-1)e:{for(t=0;4096>=t;t++)if(!Fe[t])break e;throw new d(33)}return e.fd=t,Fe[t]=e}function gn(e,t=-1){var r,n;return e=Sr(e,t),(n=(r=e.Ma)==null?void 0:r.Rb)==null||n.call(r,e),e}function Tt(e,t,r){var n=e==null?void 0:e.Ma.Ua;e=n?e:t,n??(n=t.La.Ua),at(n),n(e,r)}var En={open(e){var t,r;e.Ma=wr[e.node.rdev].Ma,(r=(t=e.Ma).open)==null||r.call(t,e)},Va(){throw new d(70)}};function Dt(e,t){wr[e]={Ma:t}}function xr(e,t){var r=t==="/";if(r&&At)throw new d(10);if(!r&&t){var n=J(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new d(10);if(!X(n.mode))throw new d(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?At=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function ut(e,t,r){var n=J(e,{parent:!0}).node;if(e=ot(e),!e)throw new d(28);if(e==="."||e==="..")throw new d(20);var i=qr(n,e);if(i)throw new d(i);if(!n.La.hb)throw new d(63);return n.La.hb(n,e,t,r)}function qn(e,t=438){return ut(e,t&4095|32768,0)}function ae(e,t=511){return ut(e,t&1023|16384,0)}function lt(e,t,r){typeof r>"u"&&(r=t,t=438),ut(e,t|8192,r)}function Lt(e,t){if(!mn(e))throw new d(44);var r=J(t,{parent:!0}).node;if(!r)throw new d(44);t=ot(t);var n=qr(r,t);if(n)throw new d(n);if(!r.La.symlink)throw new d(63);r.La.symlink(r,t,e)}function Or(e){var t=J(e,{parent:!0}).node;e=ot(e);var r=Ae(t,e),n=Rr(t,e,!0);if(n)throw new d(n);if(!t.La.rmdir)throw new d(63);if(r.ab)throw new d(10);t.La.rmdir(t,e),Pt(r)}function Ar(e){var t=J(e,{parent:!0}).node;if(!t)throw new d(44);e=ot(e);var r=Ae(t,e),n=Rr(t,e,!1);if(n)throw new d(n);if(!t.La.unlink)throw new d(63);if(r.ab)throw new d(10);t.La.unlink(t,e),Pt(r)}function Ke(e,t){return e=J(e,{$a:!t}).node,at(e.La.Ta)(e)}function kr(e,t,r,n){Tt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function ft(e,t){e=typeof e=="string"?J(e,{$a:!0}).node:e,kr(null,e,t)}function Mr(e,t,r){if(X(t.mode))throw new d(31);if((t.mode&61440)!==32768)throw new d(28);var n=Ie(t,"w");if(n)throw new d(n);Tt(e,t,{size:r,timestamp:Date.now()})}function Qe(e,t,r=438){if(e==="")throw new d(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=J(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var a=!1;if(t&64)if(n){if(t&128)throw new d(20)}else{if(i)throw new d(31);n=ut(e,r|511,0),a=!0}if(!n)throw new d(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!X(n.mode))throw new d(54);if(!a&&(i=n?(n.mode&61440)===40960?32:X(n.mode)&&(Er(t)!=="r"||t&576)?31:Ie(n,Er(t)):44))throw new d(i);return t&512&&!a&&(i=n,i=typeof i=="string"?J(i,{$a:!0}).node:i,Mr(null,i,0)),t&=-131713,i=Sr({node:n,path:kt(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),a&&ft(n,r&511),!s.logReadFiles||t&1||e in _r||(_r[e]=1),i}function Nt(e){if(e.fd===null)throw new d(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{Fe[e.fd]=null}e.fd=null}function Pr(e,t,r){if(e.fd===null)throw new d(8);if(!e.seekable||!e.Ma.Va)throw new d(70);if(r!=0&&r!=1&&r!=2)throw new d(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function Tr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if((e.flags&2097155)===1)throw new d(8);if(X(e.node.mode))throw new d(31);if(!e.Ma.read)throw new d(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.read(e,t,r,n,i),a||(e.position+=t),t}function Dr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if((e.flags&2097155)===0)throw new d(8);if(X(e.node.mode))throw new d(31);if(!e.Ma.write)throw new d(28);e.seekable&&e.flags&1024&&Pr(e,0,2);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.write(e,t,r,n,i,void 0),a||(e.position+=t),t}function Rn(e){var t,r=Qe(e,r||0);e=Ke(e).size;var n=new Uint8Array(e);return Tr(r,n,0,e,0),t=n,Nt(r),t}function ye(e,t,r){e=xt("/dev/"+e);var n=br(!!t,!!r);ye.yb??(ye.yb=64);var i=ye.yb++<<8|0;Dt(i,{open(a){a.seekable=!1},close(){var a;(a=r==null?void 0:r.buffer)!=null&&a.length&&r(10)},read(a,l,w,S){for(var R=0,j=0;j<S;j++){try{var Y=t()}catch{throw new d(29)}if(Y===void 0&&R===0)throw new d(6);if(Y==null)break;R++,l[w+j]=Y}return R&&(a.node.atime=Date.now()),R},write(a,l,w,S){for(var R=0;R<S;R++)try{r(l[w+R])}catch{throw new d(29)}return S&&(a.node.mtime=a.node.ctime=Date.now()),R}}),lt(e,n,i)}var C={};function ke(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":H(e).path,t.length==0){if(!r)throw new d(44);return e}return e+"/"+t}function ht(e,t){k[e>>2]=t.dev,k[e+4>>2]=t.mode,W[e+8>>2]=t.nlink,k[e+12>>2]=t.uid,k[e+16>>2]=t.gid,k[e+20>>2]=t.rdev,re[e+24>>3]=BigInt(t.size),k[e+32>>2]=4096,k[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return re[e+40>>3]=BigInt(Math.floor(r/1e3)),W[e+48>>2]=r%1e3*1e6,re[e+56>>3]=BigInt(Math.floor(n/1e3)),W[e+64>>2]=n%1e3*1e6,re[e+72>>3]=BigInt(Math.floor(i/1e3)),W[e+80>>2]=i%1e3*1e6,re[e+88>>3]=BigInt(t.ino),0}var ct=void 0,dt=()=>{var e=k[+ct>>2];return ct+=4,e},Ct=0,Sn=[0,31,60,91,121,152,182,213,244,274,305,335],xn=[0,31,59,90,120,151,181,212,243,273,304,334],Ze={},Lr=e=>{var t;Ce=e,Rt||0<Ct||((t=s.onExit)==null||t.call(s,e),$=!0),oe(e,new qt(e))},On=e=>{if(!$)try{if(e(),!(Rt||0<Ct))try{Ce=e=Ce,Lr(e)}catch(t){t instanceof qt||t=="unwind"||oe(1,t)}}catch(t){t instanceof qt||t=="unwind"||oe(1,t)}},Ut={},Nr=()=>{if(!Ft){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:le||"./this.program"},t;for(t in Ut)Ut[t]===void 0?delete e[t]:e[t]=Ut[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Ft=r}return Ft},Ft,It=e=>{var t=Ge(e)+1,r=_e(t);return ce(e,O,r,t),r},An=(e,t,r,n)=>{var i={string:R=>{var j=0;return R!=null&&R!==0&&(j=It(R)),j},array:R=>{var j=_e(R.length);return M.set(R,j),j}};e=s["_"+e];var a=[],l=0;if(n)for(var w=0;w<n.length;w++){var S=i[r[w]];S?(l===0&&(l=tt()),a[w]=S(n[w])):a[w]=n[w]}return r=e(...a),r=function(R){return l!==0&&et(l),t==="string"?R?Q(O,R):"":t==="boolean"?!!R:R}(r)},mt=0,pt=(e,t)=>(t=t==1?_e(e.length):jt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),O.set(e,t),t),Me,Qt=[],de,ve=e=>{Me.delete(de.get(e)),de.set(e,null),Qt.push(e)},Je=(e,t)=>{if(!Me){Me=new WeakMap;var r=de.length;if(Me)for(var n=0;n<0+r;n++){var i=de.get(n);i&&Me.set(i,n)}}if(r=Me.get(e)||0)return r;if(Qt.length)r=Qt.pop();else{try{de.grow(1)}catch(S){throw S instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":S}r=de.length-1}try{de.set(r,e)}catch(S){if(!(S instanceof TypeError))throw S;if(typeof WebAssembly.Function=="function"){var a=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var l=1;l<t.length;++l)i.parameters.push(n[t[l]]);t=new a(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),l={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var w=t.length;128>w?n.push(w):n.push(w%128|128,w>>7);for(a of t)n.push(l[a]);i=="v"?n.push(0):n.push(1,l[i]),t=[0,97,115,109,1,0,0,0,1],a=n.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}de.set(r,t)}return Me.set(e,r),r};we=Array(4096),xr(g,"/"),ae("/tmp"),ae("/home"),ae("/home/web_user"),function(){ae("/dev"),Dt(259,{read:()=>0,write:(n,i,a,l)=>l,Va:()=>0}),lt("/dev/null",259),pr(1280,bn),pr(1536,wn),lt("/dev/tty",1280),lt("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(cr(e),t=e.byteLength),e[--t]);ye("random",r),ye("urandom",r),ae("/dev/shm"),ae("/dev/shm/tmp")}(),function(){ae("/proc");var e=ae("/proc/self");ae("/proc/self/fd"),xr({Xa(){var t=gr(e,"fd",16895,73);return t.Ma={Va:g.Ma.Va},t.La={lookup(r,n){r=+n;var i=H(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(Fe.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),g.vb=new d(44),g.vb.stack="<generic error, no stack>";var kn={a:(e,t,r,n)=>Ue(`Assertion failed: ${e?Q(O,e):""}, at: `+[t?t?Q(O,t):"":"unknown filename",r,n?n?Q(O,n):"":"unknown function"]),i:function(e,t){try{return e=e?Q(O,e):"",ft(e,t),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?Q(O,t):"",t=ke(e,t),r&-8)return-28;var n=J(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&Ie(n,e)?-2:0):-44}catch(i){if(typeof C>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=H(e);return kr(r,r.node,t,!1),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=H(e);return Tt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){ct=r;try{var n=H(e);switch(t){case 0:var i=dt();if(0>i)break;for(;Fe[i];)i++;return gn(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=dt(),n.flags|=i,0;case 12:return i=dt(),Z[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},g:function(e,t){try{var r=H(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??(i=n.La.Ta),at(i);var a=i(e);return ht(t,a)}catch(l){if(typeof C>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=H(e);if(0>t||(r.flags&2097155)===0)throw new d(28);return Mr(r,r.node,t),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=Ge("/")+1;return t<r?-68:(ce("/",O,e,t),r)}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?Q(O,e):"",ht(t,Ke(e,!0))}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?Q(O,t):"",t=ke(e,t),ae(t,r),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?Q(O,t):"";var i=n&256;return t=ke(e,t,n&4096),ht(r,i?Ke(t,!0):Ke(t))}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},x:function(e,t,r,n){ct=n;try{t=t?Q(O,t):"",t=ke(e,t);var i=n?dt():0;return Qe(t,r,i).fd}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},v:function(e,t,r,n){try{if(t=t?Q(O,t):"",t=ke(e,t),0>=n)return-28;var i=J(t).node;if(!i)throw new d(44);if(!i.La.readlink)throw new d(28);var a=i.La.readlink(i),l=Math.min(n,Ge(a)),w=M[r+l];return ce(a,O,r,n+1),M[r+l]=w,l}catch(S){if(typeof C>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},u:function(e){try{return e=e?Q(O,e):"",Or(e),0}catch(t){if(typeof C>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?Q(O,e):"",ht(t,Ke(e))}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?Q(O,t):"",t=ke(e,t),r===0?Ar(t):r===512?Or(t):Ue("Invalid flags passed to unlinkat"),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?Q(O,t):"",t=ke(e,t,!0);var n=Date.now(),i,a;if(r){var l=W[r>>2]+4294967296*k[r+4>>2],w=k[r+8>>2];w==1073741823?i=n:w==1073741822?i=null:i=1e3*l+w/1e6,r+=16,l=W[r>>2]+4294967296*k[r+4>>2],w=k[r+8>>2],w==1073741823?a=n:w==1073741822?a=null:a=1e3*l+w/1e6}else a=i=n;if((a??i)!==null){e=i;var S=J(t,{$a:!0}).node;at(S.La.Ua)(S,{atime:e,mtime:a})}return 0}catch(R){if(typeof C>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},m:()=>Ue(""),l:()=>{Rt=!1,Ct=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),k[t>>2]=e.getSeconds(),k[t+4>>2]=e.getMinutes(),k[t+8>>2]=e.getHours(),k[t+12>>2]=e.getDate(),k[t+16>>2]=e.getMonth(),k[t+20>>2]=e.getFullYear()-1900,k[t+24>>2]=e.getDay();var r=e.getFullYear();k[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?xn:Sn)[e.getMonth()]+e.getDate()-1|0,k[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();k[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,a,l){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var w=H(n);if((t&2)!==0&&(r&2)===0&&(w.flags&2097155)!==2)throw new d(2);if((w.flags&2097155)===1)throw new d(2);if(!w.Ma.ib)throw new d(43);if(!e)throw new d(28);var S=w.Ma.ib(w,e,i,t,r),R=S.Kb;return k[a>>2]=S.Ab,W[l>>2]=R,0}catch(j){if(typeof C>"u"||j.name!=="ErrnoError")throw j;return-j.Pa}},z:function(e,t,r,n,i,a){a=-9007199254740992>a||9007199254740992<a?NaN:Number(a);try{var l=H(i);if(r&2){if(r=a,(l.node.mode&61440)!==32768)throw new d(43);if(!(n&2)){var w=O.slice(e,e+t);l.Ma.jb&&l.Ma.jb(l,w,r,t,n)}}}catch(S){if(typeof C>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},n:(e,t)=>{if(Ze[e]&&(clearTimeout(Ze[e].id),delete Ze[e]),!t)return 0;var r=setTimeout(()=>{delete Ze[e],On(()=>Ur(e,performance.now()))},t);return Ze[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),a=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),W[e>>2]=60*Math.max(a,i),k[t>>2]=+(a!=i),t=l=>{var w=Math.abs(l);return`UTC${0<=l?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(a),t=t(i),i<a?(ce(e,O,r,17),ce(t,O,n,17)):(ce(e,O,n,17),ce(t,O,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=O.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-Ve.buffer.byteLength+65535)/65536|0;try{Ve.grow(n),sr();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return Nr().forEach((n,i)=>{var a=t+r;for(i=W[e+4*i>>2]=a,a=0;a<n.length;++a)M[i++]=n.charCodeAt(a);M[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=Nr();W[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),W[t>>2]=n,0},e:function(e){try{var t=H(e);return Nt(t),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=H(e);return M[t]=r.tty?2:X(r.mode)?3:(r.mode&61440)===40960?7:4,Z[t+2>>1]=0,re[t+8>>3]=BigInt(0),re[t+16>>3]=BigInt(0),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=H(e);e=t;for(var a,l=t=0;l<r;l++){var w=W[e>>2],S=W[e+4>>2];e+=8;var R=Tr(i,M,w,S,a);if(0>R){var j=-1;break e}if(t+=R,R<S)break;typeof a<"u"&&(a+=R)}j=t}return W[n>>2]=j,0}catch(Y){if(typeof C>"u"||Y.name!=="ErrnoError")throw Y;return Y.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=H(e);return Pr(i,t,r),re[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},I:function(e){var r;try{var t=H(e);return(r=t.Ma)!=null&&r.fsync?t.Ma.fsync(t):0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},t:function(e,t,r,n){try{e:{var i=H(e);e=t;for(var a,l=t=0;l<r;l++){var w=W[e>>2],S=W[e+4>>2];e+=8;var R=Dr(i,M,w,S,a);if(0>R){var j=-1;break e}if(t+=R,R<S)break;typeof a<"u"&&(a+=R)}j=t}return W[n>>2]=j,0}catch(Y){if(typeof C>"u"||Y.name!=="ErrnoError")throw Y;return Y.Pa}},k:Lr},y;(async function(){var r;function e(n){var i;return y=n.exports,Ve=y.M,sr(),de=y.O,Oe--,(i=s.monitorRunDependencies)==null||i.call(s,Oe),Oe==0&&Xe&&(n=Xe,Xe=null,n()),y}Oe++,(r=s.monitorRunDependencies)==null||r.call(s,Oe);var t={a:kn};return s.instantiateWasm?new Promise(n=>{s.instantiateWasm(t,(i,a)=>{e(i),n(i.exports)})}):(Et??(Et=s.locateFile?s.locateFile("sql-wasm.wasm",U):U+"sql-wasm.wasm"),e((await hn(t)).instance))})(),s._sqlite3_free=e=>(s._sqlite3_free=y.P)(e),s._sqlite3_value_text=e=>(s._sqlite3_value_text=y.Q)(e),s._sqlite3_prepare_v2=(e,t,r,n,i)=>(s._sqlite3_prepare_v2=y.R)(e,t,r,n,i),s._sqlite3_step=e=>(s._sqlite3_step=y.S)(e),s._sqlite3_reset=e=>(s._sqlite3_reset=y.T)(e),s._sqlite3_exec=(e,t,r,n,i)=>(s._sqlite3_exec=y.U)(e,t,r,n,i),s._sqlite3_finalize=e=>(s._sqlite3_finalize=y.V)(e),s._sqlite3_column_name=(e,t)=>(s._sqlite3_column_name=y.W)(e,t),s._sqlite3_column_text=(e,t)=>(s._sqlite3_column_text=y.X)(e,t),s._sqlite3_column_type=(e,t)=>(s._sqlite3_column_type=y.Y)(e,t),s._sqlite3_errmsg=e=>(s._sqlite3_errmsg=y.Z)(e),s._sqlite3_clear_bindings=e=>(s._sqlite3_clear_bindings=y._)(e),s._sqlite3_value_blob=e=>(s._sqlite3_value_blob=y.$)(e),s._sqlite3_value_bytes=e=>(s._sqlite3_value_bytes=y.aa)(e),s._sqlite3_value_double=e=>(s._sqlite3_value_double=y.ba)(e),s._sqlite3_value_int=e=>(s._sqlite3_value_int=y.ca)(e),s._sqlite3_value_type=e=>(s._sqlite3_value_type=y.da)(e),s._sqlite3_result_blob=(e,t,r,n)=>(s._sqlite3_result_blob=y.ea)(e,t,r,n),s._sqlite3_result_double=(e,t)=>(s._sqlite3_result_double=y.fa)(e,t),s._sqlite3_result_error=(e,t,r)=>(s._sqlite3_result_error=y.ga)(e,t,r),s._sqlite3_result_int=(e,t)=>(s._sqlite3_result_int=y.ha)(e,t),s._sqlite3_result_int64=(e,t)=>(s._sqlite3_result_int64=y.ia)(e,t),s._sqlite3_result_null=e=>(s._sqlite3_result_null=y.ja)(e),s._sqlite3_result_text=(e,t,r,n)=>(s._sqlite3_result_text=y.ka)(e,t,r,n),s._sqlite3_aggregate_context=(e,t)=>(s._sqlite3_aggregate_context=y.la)(e,t),s._sqlite3_column_count=e=>(s._sqlite3_column_count=y.ma)(e),s._sqlite3_data_count=e=>(s._sqlite3_data_count=y.na)(e),s._sqlite3_column_blob=(e,t)=>(s._sqlite3_column_blob=y.oa)(e,t),s._sqlite3_column_bytes=(e,t)=>(s._sqlite3_column_bytes=y.pa)(e,t),s._sqlite3_column_double=(e,t)=>(s._sqlite3_column_double=y.qa)(e,t),s._sqlite3_bind_blob=(e,t,r,n,i)=>(s._sqlite3_bind_blob=y.ra)(e,t,r,n,i),s._sqlite3_bind_double=(e,t,r)=>(s._sqlite3_bind_double=y.sa)(e,t,r),s._sqlite3_bind_int=(e,t,r)=>(s._sqlite3_bind_int=y.ta)(e,t,r),s._sqlite3_bind_text=(e,t,r,n,i)=>(s._sqlite3_bind_text=y.ua)(e,t,r,n,i),s._sqlite3_bind_parameter_index=(e,t)=>(s._sqlite3_bind_parameter_index=y.va)(e,t),s._sqlite3_sql=e=>(s._sqlite3_sql=y.wa)(e),s._sqlite3_normalized_sql=e=>(s._sqlite3_normalized_sql=y.xa)(e),s._sqlite3_changes=e=>(s._sqlite3_changes=y.ya)(e),s._sqlite3_close_v2=e=>(s._sqlite3_close_v2=y.za)(e),s._sqlite3_create_function_v2=(e,t,r,n,i,a,l,w,S)=>(s._sqlite3_create_function_v2=y.Aa)(e,t,r,n,i,a,l,w,S),s._sqlite3_update_hook=(e,t,r)=>(s._sqlite3_update_hook=y.Ba)(e,t,r),s._sqlite3_open=(e,t)=>(s._sqlite3_open=y.Ca)(e,t);var jt=s._malloc=e=>(jt=s._malloc=y.Da)(e),bt=s._free=e=>(bt=s._free=y.Ea)(e);s._RegisterExtensionFunctions=e=>(s._RegisterExtensionFunctions=y.Fa)(e);var Cr=(e,t)=>(Cr=y.Ga)(e,t),Ur=(e,t)=>(Ur=y.Ha)(e,t),et=e=>(et=y.Ia)(e),_e=e=>(_e=y.Ja)(e),tt=()=>(tt=y.Ka)();s.stackSave=()=>tt(),s.stackRestore=e=>et(e),s.stackAlloc=e=>_e(e),s.cwrap=(e,t,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return t!=="string"&&i&&!n?s["_"+e]:(...a)=>An(e,t,r,a)},s.addFunction=Je,s.removeFunction=ve,s.UTF8ToString=St,s.ALLOC_NORMAL=mt,s.allocate=pt,s.allocateUTF8OnStack=It;function Wt(){function e(){var i;if(s.calledRun=!0,!$){if(!s.noFSInit&&!yr){var t,r;yr=!0,n??(n=s.stdin),t??(t=s.stdout),r??(r=s.stderr),n?ye("stdin",n):Lt("/dev/tty","/dev/stdin"),t?ye("stdout",null,t):Lt("/dev/tty","/dev/stdout"),r?ye("stderr",null,r):Lt("/dev/tty1","/dev/stderr"),Qe("/dev/stdin",0),Qe("/dev/stdout",1),Qe("/dev/stderr",1)}if(y.N(),vr=!1,(i=s.onRuntimeInitialized)==null||i.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var n=s.postRun.shift();ar.unshift(n)}or(ar)}}if(0<Oe)Xe=Wt;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)cn();or(ur),0<Oe?Xe=Wt:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Wt(),P}),f)};h.exports=p,h.exports.default=p}($t)),$t.exports}var Pi=Mi();const Ti=ci(Pi);function vt(h){return new Promise((u,f)=>{h.oncomplete=h.onsuccess=()=>u(h.result),h.onabort=h.onerror=()=>f(h.error)})}function Di(h,u){const f=indexedDB.open(h);f.onupgradeneeded=()=>f.result.createObjectStore(u);const p=vt(f);return(x,E)=>p.then(q=>E(q.transaction(u,x).objectStore(u)))}let Ht;function ir(){return Ht||(Ht=Di("keyval-store","keyval")),Ht}function nn(h,u=ir()){return u("readonly",f=>vt(f.get(h)))}function Li(h,u,f=ir()){return f("readwrite",p=>(p.put(u,h),vt(p.transaction)))}function Ni(h,u=ir()){return u("readwrite",f=>(f.delete(h),vt(f.transaction)))}async function je(h){try{return{data:await h,error:null}}catch(u){return{data:null,error:u}}}function ji(h){try{return{data:h(),error:null}}catch(u){return{data:null,error:u}}}const We=500;class Wi{constructor(u){te(this,"dbPromise",null);te(this,"dbPath");te(this,"storageKey");te(this,"timestamp",null);this.dbPath=u.dbPath,this.storageKey=u.storageKey}ready(){return this.checkTimestamp(),this.dbPromise=this.dbPromise===null?this.loadDatabase():this.dbPromise,this.dbPromise}async exec(u,f,p=!1){const x=Date.now(),E=await this.ready();E.run("PRAGMA foreign_keys = ON;");const[{values:q}]=E.exec("PRAGMA foreign_keys;");if(q[0][0]!==1)return console.error("Failed to enable foreign keys"),this.parse([]);const P=await je((async()=>{const s=E.exec(u,f);return await this.saveDatabase(E),s})());if(P.error!==null)return console.error("Failed to execute SQL query",P.error),this.parse([]);const L=Date.now()-x;return L<We&&!p&&await new Promise(s=>setTimeout(s,We-L)),this.parse(P.data)}async downloadDatabase(u="database.db"){const f=Date.now(),x=(await this.ready()).export(),E=new Blob([x],{type:"application/x-sqlite3"}),q=URL.createObjectURL(E),P=document.createElement("a");P.href=q,P.download=u,P.style.display="none",document.body.appendChild(P);const L=Date.now()-f;L<We&&await new Promise(s=>setTimeout(s,We-L)),P.click(),setTimeout(()=>{document.body.removeChild(P),URL.revokeObjectURL(q)},100)}async reset(){const u=Date.now(),{error:f}=await je(Ni(this.storageKey)),p=Date.now()-u;p<We&&await new Promise(x=>setTimeout(x,We-p)),f?console.error("刪除本地資料庫失敗"):console.log("刪除本地資料庫成功"),this.dbPromise=this.loadDatabase()}async getDatabaseSize(){await this.ready();const{data:u,error:f}=await je(nn(this.storageKey));return f?(console.error("Failed to get database size",f),0):u?u.byteLength:0}checkTimestamp(){const u=localStorage.getItem("__db_timestamp__")??Date.now().toString(),f=parseInt(u,10);this.timestamp===null?this.timestamp=f:this.timestamp!==f&&(this.timestamp=f,this.dbPromise=null)}setTimestamp(){const u=Date.now();localStorage.setItem("__db_timestamp__",u.toString()),this.timestamp=u}parse(u){if(u.length===0||!u[0])return[];const{columns:f,values:p}=u[0];return p.map(x=>Object.fromEntries(f.map((E,q)=>[E,x[q]])))}async loadDatabase(){const u=await Ti({locateFile:q=>`https://sql.js.org/dist/${q}`}),{data:f,error:p}=await je(nn(this.storageKey));if(p&&console.error("Failed to get cached database",p),f)return new u.Database(f);const{data:x,error:E}=await je((async()=>{const P=await(await fetch(this.dbPath)).arrayBuffer();return new u.Database(new Uint8Array(P))})());return E?(console.error("Failed to fetch database file",E),new u.Database):(await this.saveDatabase(x),x)}async saveDatabase(u){this.setTimestamp();const f=u.export(),{error:p}=await je(Li(this.storageKey,f));p&&console.error("Failed to save database to IndexedDB",p)}}export{di as Q,Wi as S,Oi as a,Qi as f,Jr as n,_i as s,ji as t,Ii as u};
