var il=Object.defineProperty;var ol=(e,t,n)=>t in e?il(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>ol(e,typeof t!="symbol"?t+"":t,n);import{a as sl,g as al,r as z,aW as cl,u as ll,j as C,s as ul,c as dl,b as ls,d as fl,D as hl,m as pl,G as Te,e as gl,B as ae,o as Je,R as ml,T as ye,a7 as yl,p as xl,A as wl,q as vl}from"./routes-6viKbL0G.js";import{m as bl,D as _l}from"./proxy-BVjybiPj.js";import{e as El}from"./read-Bh4r4OqE.js";import{u as Nl}from"./with-selector-tCt2MiXk.js";import{e as Fe,R as kl}from"./datahub_home-BssvtVkl.js";import{S as Cl}from"./DarkModeRounded-Lrqg7oSU.js";import{T as ot}from"./useMutation-BzBtwrSc.js";import{D as Sl}from"./Divider-BxyrZAJf.js";import"./useQuery-B2a_c7zo.js";import"./forum-CQ6vMwqh.js";import"./dayjs.min-Ds0WJk-z.js";import"./DataExplorationRounded-ChKNeTP-.js";import"./NotificationsRounded-DWK0bULF.js";import"./ExpandMoreRounded-CdtBiN-4.js";function Ml(e){return al("MuiToggleButton",e)}const _n=sl("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Il=z.createContext({}),Al=z.createContext(void 0);function Tl(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.includes(e):e===t}const Rl=e=>{const{classes:t,fullWidth:n,selected:r,disabled:i,size:s,color:o}=e,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${ls(s)}`,o]};return fl(a,Ml,t)},$l=ul(hl,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${ls(n.size)}`]]}})(pl(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${_n.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Te(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${_n.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.selectedOpacity})`:Te(e.palette.text.primary,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Te(e.palette.text.primary,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.selectedOpacity})`:Te(e.palette.text.primary,e.palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter(gl()).map(([t])=>({props:{color:t},style:{[`&.${_n.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Te(e.palette[t].main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Te(e.palette[t].main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Te(e.palette[t].main,e.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),st=z.forwardRef(function(t,n){const{value:r,...i}=z.useContext(Il),s=z.useContext(Al),o=cl({...i,selected:Tl(t.value,r)},t),a=ll({props:o,name:"MuiToggleButton"}),{children:l,className:d,color:c="standard",disabled:u=!1,disableFocusRipple:f=!1,fullWidth:h=!1,onChange:p,onClick:m,selected:w,size:x="medium",value:v,...g}=a,y={...a,color:c,disabled:u,disableFocusRipple:f,fullWidth:h,size:x},N=Rl(y),M=_=>{m&&(m(_,v),_.defaultPrevented)||p&&p(_,v)},S=s||"";return C.jsx($l,{className:dl(i.className,N.root,d,S),disabled:u,focusRipple:!f,ref:n,onClick:M,onChange:p,value:v,ownerState:y,"aria-pressed":w,...g,children:l})}),Ol=bl.create(ae),Pl=Je(C.jsx("path",{d:"M21 8.59V4c0-.55-.45-1-1-1h-4.59c-.89 0-1.34 1.08-.71 1.71l1.59 1.59-10 10-1.59-1.59c-.62-.63-1.7-.19-1.7.7V20c0 .55.45 1 1 1h4.59c.89 0 1.34-1.08.71-1.71L7.71 17.7l10-10 1.59 1.59c.62.63 1.7.19 1.7-.7"})),jl=Je(C.jsx("path",{d:"M21.29 4.12 16.7 8.71l1.59 1.59c.63.63.18 1.71-.71 1.71H13c-.55 0-1-.45-1-1v-4.6c0-.89 1.08-1.34 1.71-.71l1.59 1.59 4.59-4.59c.39-.39 1.02-.39 1.41 0 .38.4.38 1.03-.01 1.42M4.12 21.29l4.59-4.59 1.59 1.59c.63.63 1.71.18 1.71-.71V13c0-.55-.45-1-1-1h-4.6c-.89 0-1.34 1.08-.71 1.71l1.59 1.59-4.59 4.59c-.39.39-.39 1.02 0 1.41.4.38 1.03.38 1.42-.01"}));function se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=se(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ll={value:()=>{}};function nn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bt(n)}function Bt(e){this._=e}function Dl(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bt.prototype=nn.prototype={constructor:Bt,on:function(e,t){var n=this._,r=Dl(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=zl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=li(n[i],e.name,t);else if(t==null)for(i in n)n[i]=li(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function zl(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function li(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ll,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kr="http://www.w3.org/1999/xhtml";const ui={svg:"http://www.w3.org/2000/svg",xhtml:kr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ui.hasOwnProperty(t)?{space:ui[t],local:e}:e}function Hl(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kr&&t.documentElement.namespaceURI===kr?t.createElement(e):t.createElementNS(n,e)}}function Bl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function us(e){var t=rn(e);return(t.local?Bl:Hl)(t)}function Vl(){}function Hr(e){return e==null?Vl:function(){return this.querySelector(e)}}function Fl(e){typeof e!="function"&&(e=Hr(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,d,c=0;c<o;++c)(l=s[c])&&(d=e.call(l,l.__data__,c,s))&&("__data__"in l&&(d.__data__=l.__data__),a[c]=d);return new de(r,this._parents)}function ql(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yl(){return[]}function ds(e){return e==null?Yl:function(){return this.querySelectorAll(e)}}function Gl(e){return function(){return ql(e.apply(this,arguments))}}function Xl(e){typeof e=="function"?e=Gl(e):e=ds(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,d=0;d<a;++d)(l=o[d])&&(r.push(e.call(l,l.__data__,d,o)),i.push(l));return new de(r,i)}function fs(e){return function(){return this.matches(e)}}function hs(e){return function(t){return t.matches(e)}}var Wl=Array.prototype.find;function Ul(e){return function(){return Wl.call(this.children,e)}}function Kl(){return this.firstElementChild}function Ql(e){return this.select(e==null?Kl:Ul(typeof e=="function"?e:hs(e)))}var Zl=Array.prototype.filter;function Jl(){return Array.from(this.children)}function eu(e){return function(){return Zl.call(this.children,e)}}function tu(e){return this.selectAll(e==null?Jl:eu(typeof e=="function"?e:hs(e)))}function nu(e){typeof e!="function"&&(e=fs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,d=0;d<o;++d)(l=s[d])&&e.call(l,l.__data__,d,s)&&a.push(l);return new de(r,this._parents)}function ps(e){return new Array(e.length)}function ru(){return new de(this._enter||this._groups.map(ps),this._parents)}function Yt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yt.prototype={constructor:Yt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function iu(e){return function(){return e}}function ou(e,t,n,r,i,s){for(var o=0,a,l=t.length,d=s.length;o<d;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Yt(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function su(e,t,n,r,i,s,o){var a,l,d=new Map,c=t.length,u=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",d.has(h)?i[a]=l:d.set(h,l));for(a=0;a<u;++a)h=o.call(e,s[a],a,s)+"",(l=d.get(h))?(r[a]=l,l.__data__=s[a],d.delete(h)):n[a]=new Yt(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&d.get(f[a])===l&&(i[a]=l)}function au(e){return e.__data__}function cu(e,t){if(!arguments.length)return Array.from(this,au);var n=t?su:ou,r=this._parents,i=this._groups;typeof e!="function"&&(e=iu(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),d=0;d<s;++d){var c=r[d],u=i[d],f=u.length,h=lu(e.call(c,c&&c.__data__,d,r)),p=h.length,m=a[d]=new Array(p),w=o[d]=new Array(p),x=l[d]=new Array(f);n(c,u,m,w,x,h,t);for(var v=0,g=0,y,N;v<p;++v)if(y=m[v]){for(v>=g&&(g=v+1);!(N=w[g])&&++g<p;);y._next=N||null}}return o=new de(o,r),o._enter=a,o._exit=l,o}function lu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uu(){return new de(this._exit||this._groups.map(ps),this._parents)}function du(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var d=n[l],c=r[l],u=d.length,f=a[l]=new Array(u),h,p=0;p<u;++p)(h=d[p]||c[p])&&(f[p]=h);for(;l<i;++l)a[l]=n[l];return new de(a,this._parents)}function hu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pu(e){e||(e=gu);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),d,c=0;c<a;++c)(d=o[c])&&(l[c]=d);l.sort(t)}return new de(i,this._parents).order()}function gu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yu(){return Array.from(this)}function xu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function wu(){let e=0;for(const t of this)++e;return e}function vu(){return!this.node()}function bu(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function _u(e){return function(){this.removeAttribute(e)}}function Eu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nu(e,t){return function(){this.setAttribute(e,t)}}function ku(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Cu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Su(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mu(e,t){var n=rn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Eu:_u:typeof t=="function"?n.local?Su:Cu:n.local?ku:Nu)(n,t))}function gs(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Iu(e){return function(){this.style.removeProperty(e)}}function Au(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Tu(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ru(e,t,n){return arguments.length>1?this.each((t==null?Iu:typeof t=="function"?Tu:Au)(e,t,n??"")):Ge(this.node(),e)}function Ge(e,t){return e.style.getPropertyValue(t)||gs(e).getComputedStyle(e,null).getPropertyValue(t)}function $u(e){return function(){delete this[e]}}function Ou(e,t){return function(){this[e]=t}}function Pu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ju(e,t){return arguments.length>1?this.each((t==null?$u:typeof t=="function"?Pu:Ou)(e,t)):this.node()[e]}function ms(e){return e.trim().split(/^|\s+/)}function Br(e){return e.classList||new ys(e)}function ys(e){this._node=e,this._names=ms(e.getAttribute("class")||"")}ys.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xs(e,t){for(var n=Br(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ws(e,t){for(var n=Br(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Lu(e){return function(){xs(this,e)}}function Du(e){return function(){ws(this,e)}}function zu(e,t){return function(){(t.apply(this,arguments)?xs:ws)(this,e)}}function Hu(e,t){var n=ms(e+"");if(arguments.length<2){for(var r=Br(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?zu:t?Lu:Du)(n,t))}function Bu(){this.textContent=""}function Vu(e){return function(){this.textContent=e}}function Fu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qu(e){return arguments.length?this.each(e==null?Bu:(typeof e=="function"?Fu:Vu)(e)):this.node().textContent}function Yu(){this.innerHTML=""}function Gu(e){return function(){this.innerHTML=e}}function Xu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wu(e){return arguments.length?this.each(e==null?Yu:(typeof e=="function"?Xu:Gu)(e)):this.node().innerHTML}function Uu(){this.nextSibling&&this.parentNode.appendChild(this)}function Ku(){return this.each(Uu)}function Qu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zu(){return this.each(Qu)}function Ju(e){var t=typeof e=="function"?e:us(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ed(){return null}function td(e,t){var n=typeof e=="function"?e:us(e),r=t==null?ed:typeof t=="function"?t:Hr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function nd(){var e=this.parentNode;e&&e.removeChild(this)}function rd(){return this.each(nd)}function id(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function od(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sd(e){return this.select(e?od:id)}function ad(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cd(e){return function(t){e.call(this,t,this.__data__)}}function ld(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ud(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function dd(e,t,n){return function(){var r=this.__on,i,s=cd(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function fd(e,t,n){var r=ld(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,d=a.length,c;l<d;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?dd:ud,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function vs(e,t,n){var r=gs(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function hd(e,t){return function(){return vs(this,e,t)}}function pd(e,t){return function(){return vs(this,e,t.apply(this,arguments))}}function gd(e,t){return this.each((typeof t=="function"?pd:hd)(e,t))}function*md(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var bs=[null];function de(e,t){this._groups=e,this._parents=t}function Nt(){return new de([[document.documentElement]],bs)}function yd(){return this}de.prototype=Nt.prototype={constructor:de,select:Fl,selectAll:Xl,selectChild:Ql,selectChildren:tu,filter:nu,data:cu,enter:ru,exit:uu,join:du,merge:fu,selection:yd,order:hu,sort:pu,call:mu,nodes:yu,node:xu,size:wu,empty:vu,each:bu,attr:Mu,style:Ru,property:ju,classed:Hu,text:qu,html:Wu,raise:Ku,lower:Zu,append:Ju,insert:td,remove:rd,clone:sd,datum:ad,on:fd,dispatch:gd,[Symbol.iterator]:md};function ue(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],bs)}function xd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function fe(e,t){if(e=xd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const wd={passive:!1},ht={capture:!0,passive:!1};function En(e){e.stopImmediatePropagation()}function qe(e){e.preventDefault(),e.stopImmediatePropagation()}function _s(e){var t=e.document.documentElement,n=ue(e).on("dragstart.drag",qe,ht);"onselectstart"in t?n.on("selectstart.drag",qe,ht):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Es(e,t){var n=e.document.documentElement,r=ue(e).on("dragstart.drag",null);t&&(r.on("click.drag",qe,ht),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rt=e=>()=>e;function Cr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}Cr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function vd(e){return!e.ctrlKey&&!e.button}function bd(){return this.parentNode}function _d(e,t){return t??{x:e.x,y:e.y}}function Ed(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ns(){var e=vd,t=bd,n=_d,r=Ed,i={},s=nn("start","drag","end"),o=0,a,l,d,c,u=0;function f(y){y.on("mousedown.drag",h).filter(r).on("touchstart.drag",w).on("touchmove.drag",x,wd).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,N){if(!(c||!e.call(this,y,N))){var M=g(this,t.call(this,y,N),y,N,"mouse");M&&(ue(y.view).on("mousemove.drag",p,ht).on("mouseup.drag",m,ht),_s(y.view),En(y),d=!1,a=y.clientX,l=y.clientY,M("start",y))}}function p(y){if(qe(y),!d){var N=y.clientX-a,M=y.clientY-l;d=N*N+M*M>u}i.mouse("drag",y)}function m(y){ue(y.view).on("mousemove.drag mouseup.drag",null),Es(y.view,d),qe(y),i.mouse("end",y)}function w(y,N){if(e.call(this,y,N)){var M=y.changedTouches,S=t.call(this,y,N),_=M.length,E,k;for(E=0;E<_;++E)(k=g(this,S,y,N,M[E].identifier,M[E]))&&(En(y),k("start",y,M[E]))}}function x(y){var N=y.changedTouches,M=N.length,S,_;for(S=0;S<M;++S)(_=i[N[S].identifier])&&(qe(y),_("drag",y,N[S]))}function v(y){var N=y.changedTouches,M=N.length,S,_;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),S=0;S<M;++S)(_=i[N[S].identifier])&&(En(y),_("end",y,N[S]))}function g(y,N,M,S,_,E){var k=s.copy(),A=fe(E||M,N),I,D,b;if((b=n.call(y,new Cr("beforestart",{sourceEvent:M,target:f,identifier:_,active:o,x:A[0],y:A[1],dx:0,dy:0,dispatch:k}),S))!=null)return I=b.x-A[0]||0,D=b.y-A[1]||0,function R(T,O,H){var P=A,B;switch(T){case"start":i[_]=R,B=o++;break;case"end":delete i[_],--o;case"drag":A=fe(H||O,N),B=o;break}k.call(T,y,new Cr(T,{sourceEvent:O,subject:b,target:f,identifier:_,active:B,x:A[0]+I,y:A[1]+D,dx:A[0]-P[0],dy:A[1]-P[1],dispatch:k}),S)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Rt(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:Rt(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Rt(y),f):n},f.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Rt(!!y),f):r},f.on=function(){var y=s.on.apply(s,arguments);return y===s?f:y},f.clickDistance=function(y){return arguments.length?(u=(y=+y)*y,f):Math.sqrt(u)},f}function Vr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ks(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kt(){}var pt=.7,Gt=1/pt,Ye="\\s*([+-]?\\d+)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nd=/^#([0-9a-f]{3,8})$/,kd=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Cd=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Sd=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${gt}\\)$`),Md=new RegExp(`^rgba\\(${xe},${xe},${xe},${gt}\\)$`),Id=new RegExp(`^hsl\\(${gt},${xe},${xe}\\)$`),Ad=new RegExp(`^hsla\\(${gt},${xe},${xe},${gt}\\)$`),di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vr(kt,mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fi,formatHex:fi,formatHex8:Td,formatHsl:Rd,formatRgb:hi,toString:hi});function fi(){return this.rgb().formatHex()}function Td(){return this.rgb().formatHex8()}function Rd(){return Cs(this).formatHsl()}function hi(){return this.rgb().formatRgb()}function mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Nd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pi(t):n===3?new le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$t(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$t(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kd.exec(e))?new le(t[1],t[2],t[3],1):(t=Cd.exec(e))?new le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Sd.exec(e))?$t(t[1],t[2],t[3],t[4]):(t=Md.exec(e))?$t(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Id.exec(e))?yi(t[1],t[2]/100,t[3]/100,1):(t=Ad.exec(e))?yi(t[1],t[2]/100,t[3]/100,t[4]):di.hasOwnProperty(e)?pi(di[e]):e==="transparent"?new le(NaN,NaN,NaN,0):null}function pi(e){return new le(e>>16&255,e>>8&255,e&255,1)}function $t(e,t,n,r){return r<=0&&(e=t=n=NaN),new le(e,t,n,r)}function $d(e){return e instanceof kt||(e=mt(e)),e?(e=e.rgb(),new le(e.r,e.g,e.b,e.opacity)):new le}function Sr(e,t,n,r){return arguments.length===1?$d(e):new le(e,t,n,r??1)}function le(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Vr(le,Sr,ks(kt,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pt:Math.pow(pt,e),new le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new le(Oe(this.r),Oe(this.g),Oe(this.b),Xt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gi,formatHex:gi,formatHex8:Od,formatRgb:mi,toString:mi}));function gi(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}`}function Od(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}${$e((isNaN(this.opacity)?1:this.opacity)*255)}`}function mi(){const e=Xt(this.opacity);return`${e===1?"rgb(":"rgba("}${Oe(this.r)}, ${Oe(this.g)}, ${Oe(this.b)}${e===1?")":`, ${e})`}`}function Xt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $e(e){return e=Oe(e),(e<16?"0":"")+e.toString(16)}function yi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new he(e,t,n,r)}function Cs(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);if(e instanceof kt||(e=mt(e)),!e)return new he;if(e instanceof he)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new he(o,a,l,e.opacity)}function Pd(e,t,n,r){return arguments.length===1?Cs(e):new he(e,t,n,r??1)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Vr(he,Pd,ks(kt,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new he(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pt:Math.pow(pt,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new le(Nn(e>=240?e-240:e+120,i,r),Nn(e,i,r),Nn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new he(xi(this.h),Ot(this.s),Ot(this.l),Xt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xt(this.opacity);return`${e===1?"hsl(":"hsla("}${xi(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xi(e){return e=(e||0)%360,e<0?e+360:e}function Ot(e){return Math.max(0,Math.min(1,e||0))}function Nn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ss=e=>()=>e;function jd(e,t){return function(n){return e+n*t}}function Ld(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dd(e){return(e=+e)==1?Ms:function(t,n){return n-t?Ld(t,n,e):Ss(isNaN(t)?n:t)}}function Ms(e,t){var n=t-e;return n?jd(e,n):Ss(isNaN(e)?t:e)}const wi=function e(t){var n=Dd(t);function r(i,s){var o=n((i=Sr(i)).r,(s=Sr(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),d=Ms(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=d(c),i+""}}return r.gamma=e,r}(1);function Me(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Mr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kn=new RegExp(Mr.source,"g");function zd(e){return function(){return e}}function Hd(e){return function(t){return e(t)+""}}function Bd(e,t){var n=Mr.lastIndex=kn.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Mr.exec(e))&&(i=kn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Me(r,i)})),n=kn.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Hd(l[0].x):zd(t):(t=l.length,function(d){for(var c=0,u;c<t;++c)a[(u=l[c]).i]=u.x(d);return a.join("")})}var vi=180/Math.PI,Ir={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Is(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*vi,skewX:Math.atan(l)*vi,scaleX:o,scaleY:a}}var Pt;function Vd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ir:Is(t.a,t.b,t.c,t.d,t.e,t.f)}function Fd(e){return e==null||(Pt||(Pt=document.createElementNS("http://www.w3.org/2000/svg","g")),Pt.setAttribute("transform",e),!(e=Pt.transform.baseVal.consolidate()))?Ir:(e=e.matrix,Is(e.a,e.b,e.c,e.d,e.e,e.f))}function As(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,c,u,f,h,p){if(d!==u||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Me(d,u)},{i:m-2,x:Me(c,f)})}else(u||f)&&h.push("translate("+u+t+f+n)}function o(d,c,u,f){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),f.push({i:u.push(i(u)+"rotate(",null,r)-2,x:Me(d,c)})):c&&u.push(i(u)+"rotate("+c+r)}function a(d,c,u,f){d!==c?f.push({i:u.push(i(u)+"skewX(",null,r)-2,x:Me(d,c)}):c&&u.push(i(u)+"skewX("+c+r)}function l(d,c,u,f,h,p){if(d!==u||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Me(d,u)},{i:m-2,x:Me(c,f)})}else(u!==1||f!==1)&&h.push(i(h)+"scale("+u+","+f+")")}return function(d,c){var u=[],f=[];return d=e(d),c=e(c),s(d.translateX,d.translateY,c.translateX,c.translateY,u,f),o(d.rotate,c.rotate,u,f),a(d.skewX,c.skewX,u,f),l(d.scaleX,d.scaleY,c.scaleX,c.scaleY,u,f),d=c=null,function(h){for(var p=-1,m=f.length,w;++p<m;)u[(w=f[p]).i]=w.x(h);return u.join("")}}}var qd=As(Vd,"px, ","px)","deg)"),Yd=As(Fd,", ",")",")"),Gd=1e-12;function bi(e){return((e=Math.exp(e))+1/e)/2}function Xd(e){return((e=Math.exp(e))-1/e)/2}function Wd(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ud=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],d=s[2],c=o[0],u=o[1],f=o[2],h=c-a,p=u-l,m=h*h+p*p,w,x;if(m<Gd)x=Math.log(f/d)/t,w=function(S){return[a+S*h,l+S*p,d*Math.exp(t*S*x)]};else{var v=Math.sqrt(m),g=(f*f-d*d+r*m)/(2*d*n*v),y=(f*f-d*d-r*m)/(2*f*n*v),N=Math.log(Math.sqrt(g*g+1)-g),M=Math.log(Math.sqrt(y*y+1)-y);x=(M-N)/t,w=function(S){var _=S*x,E=bi(N),k=d/(n*v)*(E*Wd(t*_+N)-Xd(N));return[a+k*h,l+k*p,d*E/bi(t*_+N)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);var Xe=0,lt=0,at=0,Ts=1e3,Wt,ut,Ut=0,Le=0,on=0,yt=typeof performance=="object"&&performance.now?performance:Date,Rs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fr(){return Le||(Rs(Kd),Le=yt.now()+on)}function Kd(){Le=0}function Kt(){this._call=this._time=this._next=null}Kt.prototype=$s.prototype={constructor:Kt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fr():+n)+(t==null?0:+t),!this._next&&ut!==this&&(ut?ut._next=this:Wt=this,ut=this),this._call=e,this._time=n,Ar()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ar())}};function $s(e,t,n){var r=new Kt;return r.restart(e,t,n),r}function Qd(){Fr(),++Xe;for(var e=Wt,t;e;)(t=Le-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xe}function _i(){Le=(Ut=yt.now())+on,Xe=lt=0;try{Qd()}finally{Xe=0,Jd(),Le=0}}function Zd(){var e=yt.now(),t=e-Ut;t>Ts&&(on-=t,Ut=e)}function Jd(){for(var e,t=Wt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wt=n);ut=e,Ar(r)}function Ar(e){if(!Xe){lt&&(lt=clearTimeout(lt));var t=e-Le;t>24?(e<1/0&&(lt=setTimeout(_i,e-yt.now()-on)),at&&(at=clearInterval(at))):(at||(Ut=yt.now(),at=setInterval(Zd,Ts)),Xe=1,Rs(_i))}}function Ei(e,t,n){var r=new Kt;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ef=nn("start","end","cancel","interrupt"),tf=[],Os=0,Ni=1,Tr=2,Vt=3,ki=4,Rr=5,Ft=6;function sn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;nf(e,n,{name:t,index:r,group:i,on:ef,tween:tf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Os})}function qr(e,t){var n=me(e,t);if(n.state>Os)throw new Error("too late; already scheduled");return n}function ve(e,t){var n=me(e,t);if(n.state>Vt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$s(s,0,n.time);function s(d){n.state=Ni,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var c,u,f,h;if(n.state!==Ni)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Vt)return Ei(o);h.state===ki?(h.state=Ft,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Ft,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ei(function(){n.state===Vt&&(n.state=ki,n.timer.restart(a,n.delay,n.time),a(d))}),n.state=Tr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tr){for(n.state=Vt,i=new Array(f=n.tween.length),c=0,u=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function a(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(l),n.state=Rr,1),u=-1,f=i.length;++u<f;)i[u].call(e,c);n.state===Rr&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ft,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function qt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Tr&&r.state<Rr,r.state=Ft,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function rf(e){return this.each(function(){qt(this,e)})}function of(e,t){var n,r;return function(){var i=ve(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ve(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,d=i.length;l<d;++l)if(i[l].name===t){i[l]=a;break}l===d&&i.push(a)}s.tween=i}}function af(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=me(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?of:sf)(n,e,t))}function Yr(e,t,n){var r=e._id;return e.each(function(){var i=ve(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return me(i,r).value[t]}}function Ps(e,t){var n;return(typeof t=="number"?Me:t instanceof mt?wi:(n=mt(t))?(t=n,wi):Bd)(e,t)}function cf(e){return function(){this.removeAttribute(e)}}function lf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uf(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function df(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function ff(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function hf(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function pf(e,t){var n=rn(e),r=n==="transform"?Yd:Ps;return this.attrTween(e,typeof t=="function"?(n.local?hf:ff)(n,r,Yr(this,"attr."+e,t)):t==null?(n.local?lf:cf)(n):(n.local?df:uf)(n,r,t))}function gf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yf(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mf(e,s)),n}return i._value=t,i}function xf(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&gf(e,s)),n}return i._value=t,i}function wf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=rn(e);return this.tween(n,(r.local?yf:xf)(r,t))}function vf(e,t){return function(){qr(this,e).delay=+t.apply(this,arguments)}}function bf(e,t){return t=+t,function(){qr(this,e).delay=t}}function _f(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vf:bf)(t,e)):me(this.node(),t).delay}function Ef(e,t){return function(){ve(this,e).duration=+t.apply(this,arguments)}}function Nf(e,t){return t=+t,function(){ve(this,e).duration=t}}function kf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ef:Nf)(t,e)):me(this.node(),t).duration}function Cf(e,t){if(typeof t!="function")throw new Error;return function(){ve(this,e).ease=t}}function Sf(e){var t=this._id;return arguments.length?this.each(Cf(t,e)):me(this.node(),t).ease}function Mf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ve(this,e).ease=n}}function If(e){if(typeof e!="function")throw new Error;return this.each(Mf(this._id,e))}function Af(e){typeof e!="function"&&(e=fs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,d=0;d<o;++d)(l=s[d])&&e.call(l,l.__data__,d,s)&&a.push(l);return new Ne(r,this._parents,this._name,this._id)}function Tf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],d=n[a],c=l.length,u=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||d[h])&&(u[h]=f);for(;a<r;++a)o[a]=t[a];return new Ne(o,this._parents,this._name,this._id)}function Rf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $f(e,t,n){var r,i,s=Rf(t)?qr:ve;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Of(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each($f(n,e,t))}function Pf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jf(){return this.on("end.remove",Pf(this._id))}function Lf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hr(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,d=s[o]=new Array(l),c,u,f=0;f<l;++f)(c=a[f])&&(u=e.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),d[f]=u,sn(d[f],t,n,f,d,me(c,n)));return new Ne(s,this._parents,t,n)}function Df(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ds(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],d=l.length,c,u=0;u<d;++u)if(c=l[u]){for(var f=e.call(c,c.__data__,u,l),h,p=me(c,n),m=0,w=f.length;m<w;++m)(h=f[m])&&sn(h,t,n,m,f,p);s.push(f),o.push(c)}return new Ne(s,o,t,n)}var zf=Nt.prototype.constructor;function Hf(){return new zf(this._groups,this._parents)}function Bf(e,t){var n,r,i;return function(){var s=Ge(this,e),o=(this.style.removeProperty(e),Ge(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function js(e){return function(){this.style.removeProperty(e)}}function Vf(e,t,n){var r,i=n+"",s;return function(){var o=Ge(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ff(e,t,n){var r,i,s;return function(){var o=Ge(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ge(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function qf(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=ve(this,e),d=l.on,c=l.value[s]==null?a||(a=js(t)):void 0;(d!==n||i!==c)&&(r=(n=d).copy()).on(o,i=c),l.on=r}}function Yf(e,t,n){var r=(e+="")=="transform"?qd:Ps;return t==null?this.styleTween(e,Bf(e,r)).on("end.style."+e,js(e)):typeof t=="function"?this.styleTween(e,Ff(e,r,Yr(this,"style."+e,t))).each(qf(this._id,e)):this.styleTween(e,Vf(e,r,t),n).on("end.style."+e,null)}function Gf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Xf(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Gf(e,o,n)),r}return s._value=t,s}function Wf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Xf(e,t,n??""))}function Uf(e){return function(){this.textContent=e}}function Kf(e){return function(){var t=e(this);this.textContent=t??""}}function Qf(e){return this.tween("text",typeof e=="function"?Kf(Yr(this,"text",e)):Uf(e==null?"":e+""))}function Zf(e){return function(t){this.textContent=e.call(this,t)}}function Jf(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Zf(i)),t}return r._value=e,r}function eh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jf(e))}function th(){for(var e=this._name,t=this._id,n=Ls(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,d=0;d<a;++d)if(l=o[d]){var c=me(l,t);sn(l,e,n,d,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ne(r,this._parents,e,n)}function nh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var d=ve(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),d.on=t}),i===0&&s()})}var rh=0;function Ne(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ls(){return++rh}var be=Nt.prototype;Ne.prototype={constructor:Ne,select:Lf,selectAll:Df,selectChild:be.selectChild,selectChildren:be.selectChildren,filter:Af,merge:Tf,selection:Hf,transition:th,call:be.call,nodes:be.nodes,node:be.node,size:be.size,empty:be.empty,each:be.each,on:Of,attr:pf,attrTween:wf,style:Yf,styleTween:Wf,text:Qf,textTween:eh,remove:jf,tween:af,delay:_f,duration:kf,ease:Sf,easeVarying:If,end:nh,[Symbol.iterator]:be[Symbol.iterator]};function ih(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oh={time:null,delay:0,duration:250,ease:ih};function sh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ah(e){var t,n;e instanceof Ne?(t=e._id,e=e._name):(t=Ls(),(n=oh).time=Fr(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,d=0;d<a;++d)(l=o[d])&&sn(l,e,t,d,o,n||sh(l,t));return new Ne(r,this._parents,e,t)}Nt.prototype.interrupt=rf;Nt.prototype.transition=ah;const jt=e=>()=>e;function ch(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function _e(e,t,n){this.k=e,this.x=t,this.y=n}_e.prototype={constructor:_e,scale:function(e){return e===1?this:new _e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var an=new _e(1,0,0);Ds.prototype=_e.prototype;function Ds(e){for(;!e.__zoom;)if(!(e=e.parentNode))return an;return e.__zoom}function Cn(e){e.stopImmediatePropagation()}function ct(e){e.preventDefault(),e.stopImmediatePropagation()}function lh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function uh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ci(){return this.__zoom||an}function dh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fh(){return navigator.maxTouchPoints||"ontouchstart"in this}function hh(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function zs(){var e=lh,t=uh,n=hh,r=dh,i=fh,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ud,d=nn("start","zoom","end"),c,u,f,h=500,p=150,m=0,w=10;function x(b){b.property("__zoom",Ci).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(b,R,T,O){var H=b.selection?b.selection():b;H.property("__zoom",Ci),b!==H?N(b,R,T,O):H.interrupt().each(function(){M(this,arguments).event(O).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},x.scaleBy=function(b,R,T,O){x.scaleTo(b,function(){var H=this.__zoom.k,P=typeof R=="function"?R.apply(this,arguments):R;return H*P},T,O)},x.scaleTo=function(b,R,T,O){x.transform(b,function(){var H=t.apply(this,arguments),P=this.__zoom,B=T==null?y(H):typeof T=="function"?T.apply(this,arguments):T,q=P.invert(B),Y=typeof R=="function"?R.apply(this,arguments):R;return n(g(v(P,Y),B,q),H,o)},T,O)},x.translateBy=function(b,R,T,O){x.transform(b,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),o)},null,O)},x.translateTo=function(b,R,T,O,H){x.transform(b,function(){var P=t.apply(this,arguments),B=this.__zoom,q=O==null?y(P):typeof O=="function"?O.apply(this,arguments):O;return n(an.translate(q[0],q[1]).scale(B.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof T=="function"?-T.apply(this,arguments):-T),P,o)},O,H)};function v(b,R){return R=Math.max(s[0],Math.min(s[1],R)),R===b.k?b:new _e(R,b.x,b.y)}function g(b,R,T){var O=R[0]-T[0]*b.k,H=R[1]-T[1]*b.k;return O===b.x&&H===b.y?b:new _e(b.k,O,H)}function y(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function N(b,R,T,O){b.on("start.zoom",function(){M(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(O).end()}).tween("zoom",function(){var H=this,P=arguments,B=M(H,P).event(O),q=t.apply(H,P),Y=T==null?y(q):typeof T=="function"?T.apply(H,P):T,$=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),j=H.__zoom,L=typeof R=="function"?R.apply(H,P):R,V=l(j.invert(Y).concat($/j.k),L.invert(Y).concat($/L.k));return function(F){if(F===1)F=L;else{var G=V(F),X=$/G[2];F=new _e(X,Y[0]-G[0]*X,Y[1]-G[1]*X)}B.zoom(null,F)}})}function M(b,R,T){return!T&&b.__zooming||new S(b,R)}function S(b,R){this.that=b,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,R),this.taps=0}S.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,R){return this.mouse&&b!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var R=ue(this.that).datum();d.call(b,this.that,new ch(b,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:d}),R)}};function _(b,...R){if(!e.apply(this,arguments))return;var T=M(this,R).event(b),O=this.__zoom,H=Math.max(s[0],Math.min(s[1],O.k*Math.pow(2,r.apply(this,arguments)))),P=fe(b);if(T.wheel)(T.mouse[0][0]!==P[0]||T.mouse[0][1]!==P[1])&&(T.mouse[1]=O.invert(T.mouse[0]=P)),clearTimeout(T.wheel);else{if(O.k===H)return;T.mouse=[P,O.invert(P)],qt(this),T.start()}ct(b),T.wheel=setTimeout(B,p),T.zoom("mouse",n(g(v(O,H),T.mouse[0],T.mouse[1]),T.extent,o));function B(){T.wheel=null,T.end()}}function E(b,...R){if(f||!e.apply(this,arguments))return;var T=b.currentTarget,O=M(this,R,!0).event(b),H=ue(b.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",$,!0),P=fe(b,T),B=b.clientX,q=b.clientY;_s(b.view),Cn(b),O.mouse=[P,this.__zoom.invert(P)],qt(this),O.start();function Y(j){if(ct(j),!O.moved){var L=j.clientX-B,V=j.clientY-q;O.moved=L*L+V*V>m}O.event(j).zoom("mouse",n(g(O.that.__zoom,O.mouse[0]=fe(j,T),O.mouse[1]),O.extent,o))}function $(j){H.on("mousemove.zoom mouseup.zoom",null),Es(j.view,O.moved),ct(j),O.event(j).end()}}function k(b,...R){if(e.apply(this,arguments)){var T=this.__zoom,O=fe(b.changedTouches?b.changedTouches[0]:b,this),H=T.invert(O),P=T.k*(b.shiftKey?.5:2),B=n(g(v(T,P),O,H),t.apply(this,R),o);ct(b),a>0?ue(this).transition().duration(a).call(N,B,O,b):ue(this).call(x.transform,B,O,b)}}function A(b,...R){if(e.apply(this,arguments)){var T=b.touches,O=T.length,H=M(this,R,b.changedTouches.length===O).event(b),P,B,q,Y;for(Cn(b),B=0;B<O;++B)q=T[B],Y=fe(q,this),Y=[Y,this.__zoom.invert(Y),q.identifier],H.touch0?!H.touch1&&H.touch0[2]!==Y[2]&&(H.touch1=Y,H.taps=0):(H.touch0=Y,P=!0,H.taps=1+!!c);c&&(c=clearTimeout(c)),P&&(H.taps<2&&(u=Y[0],c=setTimeout(function(){c=null},h)),qt(this),H.start())}}function I(b,...R){if(this.__zooming){var T=M(this,R).event(b),O=b.changedTouches,H=O.length,P,B,q,Y;for(ct(b),P=0;P<H;++P)B=O[P],q=fe(B,this),T.touch0&&T.touch0[2]===B.identifier?T.touch0[0]=q:T.touch1&&T.touch1[2]===B.identifier&&(T.touch1[0]=q);if(B=T.that.__zoom,T.touch1){var $=T.touch0[0],j=T.touch0[1],L=T.touch1[0],V=T.touch1[1],F=(F=L[0]-$[0])*F+(F=L[1]-$[1])*F,G=(G=V[0]-j[0])*G+(G=V[1]-j[1])*G;B=v(B,Math.sqrt(F/G)),q=[($[0]+L[0])/2,($[1]+L[1])/2],Y=[(j[0]+V[0])/2,(j[1]+V[1])/2]}else if(T.touch0)q=T.touch0[0],Y=T.touch0[1];else return;T.zoom("touch",n(g(B,q,Y),T.extent,o))}}function D(b,...R){if(this.__zooming){var T=M(this,R).event(b),O=b.changedTouches,H=O.length,P,B;for(Cn(b),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),P=0;P<H;++P)B=O[P],T.touch0&&T.touch0[2]===B.identifier?delete T.touch0:T.touch1&&T.touch1[2]===B.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(B=fe(B,this),Math.hypot(u[0]-B[0],u[1]-B[1])<w)){var q=ue(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return x.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:jt(+b),x):r},x.filter=function(b){return arguments.length?(e=typeof b=="function"?b:jt(!!b),x):e},x.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:jt(!!b),x):i},x.extent=function(b){return arguments.length?(t=typeof b=="function"?b:jt([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),x):t},x.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],x):[s[0],s[1]]},x.translateExtent=function(b){return arguments.length?(o[0][0]=+b[0][0],o[1][0]=+b[1][0],o[0][1]=+b[0][1],o[1][1]=+b[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(b){return arguments.length?(n=b,x):n},x.duration=function(b){return arguments.length?(a=+b,x):a},x.interpolate=function(b){return arguments.length?(l=b,x):l},x.on=function(){var b=d.on.apply(d,arguments);return b===d?x:b},x.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,x):Math.sqrt(m)},x.tapDistance=function(b){return arguments.length?(w=+b,x):w},x}const we={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},xt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hs=["Enter"," ","Escape"];var We;(function(e){e.Strict="strict",e.Loose="loose"})(We||(We={}));var Pe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pe||(Pe={}));var wt;(function(e){e.Partial="partial",e.Full="full"})(wt||(wt={}));const Bs={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ie;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ie||(Ie={}));var vt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(vt||(vt={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));const Si={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top};function Vs(e){return e===null?null:e?"valid":"invalid"}const Fs=e=>"id"in e&&"source"in e&&"target"in e,ph=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Gr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ct=(e,t=[0,0])=>{const{width:n,height:r}=ke(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},gh=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):Gr(i)?i:t.nodeLookup.get(i.id));const a=o?Qt(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return cn(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ln(n)},St=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Qt(r);n=cn(n,i)}}),ln(n)},qs=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...Mt(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const d of e.values()){const{measured:c,selectable:u=!0,hidden:f=!1}=d;if(o&&!u||f)continue;const h=c.width??d.width??d.initialWidth??null,p=c.height??d.height??d.initialHeight??null,m=bt(a,Ke(d)),w=(h??0)*(p??0),x=s&&m>0;(!d.internals.handleBounds||x||m>=w||d.dragging)&&l.push(d)}return l},mh=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function yh(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function xh({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=yh(e,o),l=St(a),d=Xr(l,t,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(d,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function Ys({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:l,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let u=i;if(o.extent==="parent"&&!o.expandParent)if(!a)s==null||s("005",we.error005());else{const h=a.measured.width,p=a.measured.height;h&&p&&(u=[[l,d],[l+h,d+p]])}else a&&Qe(o.extent)&&(u=[[o.extent[0][0]+l,o.extent[0][1]+d],[o.extent[1][0]+l,o.extent[1][1]+d]]);const f=Qe(u)?De(t,u,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",we.error015())),{position:{x:f.x-l+(o.measured.width??0)*c[0],y:f.y-d+(o.measured.height??0)*c[1]},positionAbsolute:f}}async function wh({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(f=>f.id)),o=[];for(const f of n){if(f.deletable===!1)continue;const h=s.has(f.id),p=!h&&f.parentId&&o.find(m=>m.id===f.parentId);(h||p)&&o.push(f)}const a=new Set(t.map(f=>f.id)),l=r.filter(f=>f.deletable!==!1),c=mh(o,l);for(const f of l)a.has(f.id)&&!c.find(p=>p.id===f.id)&&c.push(f);if(!i)return{edges:c,nodes:o};const u=await i({nodes:o,edges:c});return typeof u=="boolean"?u?{edges:c,nodes:o}:{edges:[],nodes:[]}:u}const Ue=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),De=(e={x:0,y:0},t,n)=>({x:Ue(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ue(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Gs(e,t,n){const{width:r,height:i}=ke(n),{x:s,y:o}=n.internals.positionAbsolute;return De(e,[[s,o],[s+r,o+i]],t)}const Mi=(e,t,n)=>e<t?Ue(Math.abs(e-t),1,t)/t:e>n?-Ue(Math.abs(e-n),1,t)/t:0,Xs=(e,t,n=15,r=40)=>{const i=Mi(e.x,r,t.width-r)*n,s=Mi(e.y,r,t.height-r)*n;return[i,s]},cn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$r=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ln=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ke=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=Gr(e)?e.internals.positionAbsolute:Ct(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},Qt=(e,t=[0,0])=>{var i,s;const{x:n,y:r}=Gr(e)?e.internals.positionAbsolute:Ct(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},Ws=(e,t)=>ln(cn($r(e),$r(t))),bt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ii=e=>pe(e.width)&&pe(e.height)&&pe(e.x)&&pe(e.y),pe=e=>!isNaN(e)&&isFinite(e),vh=(e,t)=>{},un=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Mt=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?un(a,o):a},Zt=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function He(e,t){if(typeof e=="number")return Math.floor(t-t/(1+e));if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function bh(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=He(e,n),i=He(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=He(e.top??e.y??0,n),i=He(e.bottom??e.y??0,n),s=He(e.left??e.x??0,t),o=He(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function _h(e,t,n,r,i,s){const{x:o,y:a}=Zt(e,[t,n,r]),{x:l,y:d}=Zt({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-l,u=s-d;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(u)}}const Xr=(e,t,n,r,i,s)=>{const o=bh(s,t,n),a=(t-o.x)/e.width,l=(n-o.y)/e.height,d=Math.min(a,l),c=Ue(d,r,i),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*c,p=n/2-f*c,m=_h(e,h,p,c,t,n),w={left:Math.min(m.left-o.left,0),top:Math.min(m.top-o.top,0),right:Math.min(m.right-o.right,0),bottom:Math.min(m.bottom-o.bottom,0)};return{x:h-w.left+w.right,y:p-w.top+w.bottom,zoom:c}},Jt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Qe(e){return e!==void 0&&e!=="parent"}function ke(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Us(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ks(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function Ai(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function dt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Ee(e),a=Mt({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:l,y:d}=n?un(a,t):a;return{xSnapped:l,ySnapped:d,...a}}const Wr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Qs=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Eh=["INPUT","SELECT","TEXTAREA"];function Zs(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Eh.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Js=e=>"clientX"in e,Ee=(e,t)=>{var s,o;const n=Js(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Ti=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Wr(o)}})};function ea({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),u=Math.abs(d-t);return[l,d,c,u]}function Lt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ri({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case U.Left:return[t-Lt(t-r,s),n];case U.Right:return[t+Lt(r-t,s),n];case U.Top:return[t,n-Lt(n-i,s)];case U.Bottom:return[t,n+Lt(i-n,s)]}}function ta({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,curvature:o=.25}){const[a,l]=Ri({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,c]=Ri({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[u,f,h,p]=ea({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:d,targetControlY:c});return[`M${e},${t} C${a},${l} ${d},${c} ${r},${i}`,u,f,h,p]}function na({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function Nh({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(s?o:0)}function kh({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=cn(Qt(e),Qt(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return bt(o,ln(s))>0}const Ch=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Sh=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ra=(e,t)=>{if(!e.source||!e.target)return t;let n;return Fs(e)?n={...e}:n={...e,id:Ch(e)},Sh(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function ia({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=na({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const $i={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Mh=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Oi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ih({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:i,offset:s}){const o=$i[t],a=$i[r],l={x:e.x+o.x*s,y:e.y+o.y*s},d={x:n.x+a.x*s,y:n.y+a.y*s},c=Mh({source:l,sourcePosition:t,target:d}),u=c.x!==0?"x":"y",f=c[u];let h=[],p,m;const w={x:0,y:0},x={x:0,y:0},[v,g,y,N]=na({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[u]*a[u]===-1){p=i.x??v,m=i.y??g;const S=[{x:p,y:l.y},{x:p,y:d.y}],_=[{x:l.x,y:m},{x:d.x,y:m}];o[u]===f?h=u==="x"?S:_:h=u==="x"?_:S}else{const S=[{x:l.x,y:d.y}],_=[{x:d.x,y:l.y}];if(u==="x"?h=o.x===f?_:S:h=o.y===f?S:_,t===r){const D=Math.abs(e[u]-n[u]);if(D<=s){const b=Math.min(s-1,s-D);o[u]===f?w[u]=(l[u]>e[u]?-1:1)*b:x[u]=(d[u]>n[u]?-1:1)*b}}if(t!==r){const D=u==="x"?"y":"x",b=o[u]===a[D],R=l[D]>d[D],T=l[D]<d[D];(o[u]===1&&(!b&&R||b&&T)||o[u]!==1&&(!b&&T||b&&R))&&(h=u==="x"?S:_)}const E={x:l.x+w.x,y:l.y+w.y},k={x:d.x+x.x,y:d.y+x.y},A=Math.max(Math.abs(E.x-h[0].x),Math.abs(k.x-h[0].x)),I=Math.max(Math.abs(E.y-h[0].y),Math.abs(k.y-h[0].y));A>=I?(p=(E.x+k.x)/2,m=h[0].y):(p=h[0].x,m=(E.y+k.y)/2)}return[[e,{x:l.x+w.x,y:l.y+w.y},...h,{x:d.x+x.x,y:d.y+x.y},n],p,m,y,N]}function Ah(e,t,n,r){const i=Math.min(Oi(e,t)/2,Oi(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function Or({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,borderRadius:o=5,centerX:a,centerY:l,offset:d=20}){const[c,u,f,h,p]=Ih({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:d});return[c.reduce((w,x,v)=>{let g="";return v>0&&v<c.length-1?g=Ah(c[v-1],x,c[v+1],o):g=`${v===0?"M":"L"}${x.x} ${x.y}`,w+=g,w},""),u,f,h,p]}function Pi(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Th(e){var u;const{sourceNode:t,targetNode:n}=e;if(!Pi(t)||!Pi(n))return null;const r=t.internals.handleBounds||ji(t.handles),i=n.internals.handleBounds||ji(n.handles),s=Li((r==null?void 0:r.source)??[],e.sourceHandle),o=Li(e.connectionMode===We.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!s||!o)return(u=e.onError)==null||u.call(e,"008",we.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(s==null?void 0:s.position)||U.Bottom,l=(o==null?void 0:o.position)||U.Top,d=_t(t,s,a),c=_t(n,o,l);return{sourceX:d.x,sourceY:d.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function ji(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function _t(e,t,n=U.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??ke(e);if(r)return{x:i+o/2,y:s+a/2};switch((t==null?void 0:t.position)??n){case U.Top:return{x:i+o/2,y:s};case U.Right:return{x:i+o,y:s+a/2};case U.Bottom:return{x:i+o/2,y:s+a};case U.Left:return{x:i,y:s+a/2}}}function Li(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Pr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Rh(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const d=Pr(l,t);s.has(d)||(o.push({id:d,color:l.color||n,...l}),s.add(d))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const Ur={nodeOrigin:[0,0],nodeExtent:xt,elevateNodesOnSelect:!0,defaults:{}},$h={...Ur,checkEquality:!0};function Kr(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Oh(e,t,n){const r=Kr(Ur,n);for(const i of e.values())if(i.parentId)Qr(i,e,t,r);else{const s=Ct(i,r.nodeOrigin),o=Qe(i.extent)?i.extent:r.nodeExtent,a=De(s,o,ke(i));i.internals.positionAbsolute=a}}function jr(e,t,n,r){var l,d;const i=Kr($h,r);let s=!0;const o=new Map(t),a=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let u=o.get(c.id);if(i.checkEquality&&c===(u==null?void 0:u.internals.userNode))t.set(c.id,u);else{const f=Ct(c,i.nodeOrigin),h=Qe(c.extent)?c.extent:i.nodeExtent,p=De(f,h,ke(c));u={...i.defaults,...c,measured:{width:(l=c.measured)==null?void 0:l.width,height:(d=c.measured)==null?void 0:d.height},internals:{positionAbsolute:p,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:oa(c,a),userNode:c}},t.set(c.id,u)}(!u.measured||!u.measured.width||!u.measured.height)&&!u.hidden&&(s=!1),c.parentId&&Qr(u,t,n,r)}return s}function Ph(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Qr(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=Kr(Ur,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Ph(e,n);const d=i?1e3:0,{x:c,y:u,z:f}=jh(e,l,s,o,d),{positionAbsolute:h}=e.internals,p=c!==h.x||u!==h.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y:u}:h,z:f}})}function oa(e,t){return(pe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function jh(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,a=ke(e),l=Ct(e,n),d=Qe(e.extent)?De(l,e.extent,a):l;let c=De({x:s+d.x,y:o+d.y},r,a);e.extent==="parent"&&(c=Gs(c,a,t));const u=oa(e,i),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>u?f:u}}function Zr(e,t,n,r=[0,0]){var o;const i=[],s=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const d=((o=s.get(a.parentId))==null?void 0:o.expandedRect)??Ke(l),c=Ws(d,a.rect);s.set(a.parentId,{expandedRect:c,parent:l})}return s.size>0&&s.forEach(({expandedRect:a,parent:l},d)=>{var g;const c=l.internals.positionAbsolute,u=ke(l),f=l.origin??r,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,p=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,m=Math.max(u.width,Math.round(a.width)),w=Math.max(u.height,Math.round(a.height)),x=(m-u.width)*f[0],v=(w-u.height)*f[1];(h>0||p>0||x||v)&&(i.push({id:d,type:"position",position:{x:l.position.x-h+x,y:l.position.y-p+v}}),(g=n.get(d))==null||g.forEach(y=>{e.some(N=>N.id===y.id)||i.push({id:y.id,type:"position",position:{x:y.position.x+h,y:y.position.y+p}})})),(u.width<a.width||u.height<a.height||h||p)&&i.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?f[0]*h-x:0),height:w+(p?f[1]*p-v:0)}})}),i}function Lh(e,t,n,r,i,s){const o=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const l=[],d=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(d.transform),u=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}const p=Wr(f.nodeElement),m=h.measured.width!==p.width||h.measured.height!==p.height;if(!!(p.width&&p.height&&(m||!h.internals.handleBounds||f.force))){const x=f.nodeElement.getBoundingClientRect(),v=Qe(h.extent)?h.extent:s;let{positionAbsolute:g}=h.internals;h.parentId&&h.extent==="parent"?g=Gs(g,p,t.get(h.parentId)):v&&(g=De(g,v,p));const y={...h,measured:p,internals:{...h.internals,positionAbsolute:g,handleBounds:{source:Ti("source",f.nodeElement,x,c,h.id),target:Ti("target",f.nodeElement,x,c,h.id)}}};t.set(h.id,y),h.parentId&&Qr(y,t,n,{nodeOrigin:i}),a=!0,m&&(l.push({id:h.id,type:"dimensions",dimensions:p}),h.expandParent&&h.parentId&&u.push({id:h.id,parentId:h.parentId,rect:Ke(y,i)}))}}if(u.length>0){const f=Zr(u,t,n,i);l.push(...f)}return{changes:l,updatedInternals:a}}async function Dh({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function Di(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function sa(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},d=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;Di("source",l,c,e,i,o),Di("target",l,d,e,s,a),t.set(r.id,r)}}function aa(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:aa(n,t):!1}function zi(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function zh(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!aa(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Sn({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var o,a,l;const i=[];for(const[d,c]of t){const u=(o=n.get(d))==null?void 0:o.internals.userNode;u&&i.push({...u,position:c.position,dragging:r})}if(!e)return[i[0],i];const s=(a=n.get(e))==null?void 0:a.internals.userNode;return[s?{...s,position:((l=t.get(e))==null?void 0:l.position)||s.position,dragging:r}:i[0],i]}function Hh({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,d={x:0,y:0},c=null,u=!1,f=null,h=!1;function p({noDragClassName:w,handleSelector:x,domNode:v,isSelectable:g,nodeId:y,nodeClickDistance:N=0}){f=ue(v);function M({x:k,y:A},I){const{nodeLookup:D,nodeExtent:b,snapGrid:R,snapToGrid:T,nodeOrigin:O,onNodeDrag:H,onSelectionDrag:P,onError:B,updateNodePositions:q}=t();s={x:k,y:A};let Y=!1,$={x:0,y:0,x2:0,y2:0};if(a.size>1&&b){const j=St(a);$=$r(j)}for(const[j,L]of a){if(!D.has(j))continue;let V={x:k-L.distance.x,y:A-L.distance.y};T&&(V=un(V,R));let F=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(a.size>1&&b&&!L.extent){const{positionAbsolute:Z}=L.internals,K=Z.x-$.x+b[0][0],W=Z.x+L.measured.width-$.x2+b[1][0],Q=Z.y-$.y+b[0][1],J=Z.y+L.measured.height-$.y2+b[1][1];F=[[K,Q],[W,J]]}const{position:G,positionAbsolute:X}=Ys({nodeId:j,nextPosition:V,nodeLookup:D,nodeExtent:F,nodeOrigin:O,onError:B});Y=Y||L.position.x!==G.x||L.position.y!==G.y,L.position=G,L.internals.positionAbsolute=X}if(Y&&(q(a,!0),I&&(r||H||!y&&P))){const[j,L]=Sn({nodeId:y,dragItems:a,nodeLookup:D});r==null||r(I,a,j,L),H==null||H(I,j,L),y||P==null||P(I,L)}}async function S(){if(!c)return;const{transform:k,panBy:A,autoPanSpeed:I,autoPanOnNodeDrag:D}=t();if(!D){l=!1,cancelAnimationFrame(o);return}const[b,R]=Xs(d,c,I);(b!==0||R!==0)&&(s.x=(s.x??0)-b/k[2],s.y=(s.y??0)-R/k[2],await A({x:b,y:R})&&M(s,null)),o=requestAnimationFrame(S)}function _(k){var Y;const{nodeLookup:A,multiSelectionActive:I,nodesDraggable:D,transform:b,snapGrid:R,snapToGrid:T,selectNodesOnDrag:O,onNodeDragStart:H,onSelectionDragStart:P,unselectNodesAndEdges:B}=t();u=!0,(!O||!g)&&!I&&y&&((Y=A.get(y))!=null&&Y.selected||B()),g&&O&&y&&(e==null||e(y));const q=dt(k.sourceEvent,{transform:b,snapGrid:R,snapToGrid:T,containerBounds:c});if(s=q,a=zh(A,D,q,y),a.size>0&&(n||H||!y&&P)){const[$,j]=Sn({nodeId:y,dragItems:a,nodeLookup:A});n==null||n(k.sourceEvent,a,$,j),H==null||H(k.sourceEvent,$,j),y||P==null||P(k.sourceEvent,j)}}const E=Ns().clickDistance(N).on("start",k=>{const{domNode:A,nodeDragThreshold:I,transform:D,snapGrid:b,snapToGrid:R}=t();c=(A==null?void 0:A.getBoundingClientRect())||null,h=!1,I===0&&_(k),s=dt(k.sourceEvent,{transform:D,snapGrid:b,snapToGrid:R,containerBounds:c}),d=Ee(k.sourceEvent,c)}).on("drag",k=>{const{autoPanOnNodeDrag:A,transform:I,snapGrid:D,snapToGrid:b,nodeDragThreshold:R,nodeLookup:T}=t(),O=dt(k.sourceEvent,{transform:I,snapGrid:D,snapToGrid:b,containerBounds:c});if((k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1||y&&!T.has(y))&&(h=!0),!h){if(!l&&A&&u&&(l=!0,S()),!u){const H=O.xSnapped-(s.x??0),P=O.ySnapped-(s.y??0);Math.sqrt(H*H+P*P)>R&&_(k)}(s.x!==O.xSnapped||s.y!==O.ySnapped)&&a&&u&&(d=Ee(k.sourceEvent,c),M(O,k.sourceEvent))}}).on("end",k=>{if(!(!u||h)&&(l=!1,u=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:A,updateNodePositions:I,onNodeDragStop:D,onSelectionDragStop:b}=t();if(I(a,!1),i||D||!y&&b){const[R,T]=Sn({nodeId:y,dragItems:a,nodeLookup:A,dragging:!1});i==null||i(k.sourceEvent,a,R,T),D==null||D(k.sourceEvent,R,T),y||b==null||b(k.sourceEvent,T)}}}).filter(k=>{const A=k.target;return!k.button&&(!w||!zi(A,`.${w}`,v))&&(!x||zi(A,x,v))});f.call(E)}function m(){f==null||f.on(".drag",null)}return{update:p,destroy:m}}function Bh(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())bt(i,Ke(s))>0&&r.push(s);return r}const Vh=250;function Fh(e,t,n,r){var a,l;let i=[],s=1/0;const o=Bh(e,n,t+Vh);for(const d of o){const c=[...((a=d.internals.handleBounds)==null?void 0:a.source)??[],...((l=d.internals.handleBounds)==null?void 0:l.target)??[]];for(const u of c){if(r.nodeId===u.nodeId&&r.type===u.type&&r.id===u.id)continue;const{x:f,y:h}=_t(d,u,u.position,!0),p=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));p>t||(p<s?(i=[{...u,x:f,y:h}],s=p):p===s&&i.push({...u,x:f,y:h}))}}if(!i.length)return null;if(i.length>1){const d=r.type==="source"?"target":"source";return i.find(c=>c.type===d)??i[0]}return i[0]}function ca(e,t,n,r,i,s=!1){var d,c,u;const o=r.get(e);if(!o)return null;const a=i==="strict"?(d=o.internals.handleBounds)==null?void 0:d[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((u=o.internals.handleBounds)==null?void 0:u.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&s?{...l,..._t(o,l,l.position,!0)}:l}function la(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function qh(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ua=()=>!0;function Yh(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:d,autoPanOnConnect:c,flowId:u,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:w,isValidConnection:x=ua,onReconnectEnd:v,updateConnection:g,getTransform:y,getFromHandle:N,autoPanSpeed:M}){const S=Qs(e.target);let _=0,E;const{x:k,y:A}=Ee(e),I=S==null?void 0:S.elementFromPoint(k,A),D=la(s,I),b=a==null?void 0:a.getBoundingClientRect();if(!b||!D)return;const R=ca(i,D,r,l,t);if(!R)return;let T=Ee(e,b),O=!1,H=null,P=!1,B=null;function q(){if(!c||!b)return;const[X,Z]=Xs(T,b,M);f({x:X,y:Z}),_=requestAnimationFrame(q)}const Y={...R,nodeId:i,type:D,position:R.position},$=l.get(i),L={inProgress:!0,isValid:null,from:_t($,Y,U.Left,!0),fromHandle:Y,fromPosition:Y.position,fromNode:$,to:T,toHandle:null,toPosition:Si[Y.position],toNode:null};g(L);let V=L;p==null||p(e,{nodeId:i,handleId:r,handleType:D});function F(X){if(!N()||!Y){G(X);return}const Z=y();T=Ee(X,b),E=Fh(Mt(T,Z,!1,[1,1]),n,l,Y),O||(q(),O=!0);const K=da(X,{handle:E,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:S,lib:d,flowId:u,nodeLookup:l});B=K.handleDomNode,H=K.connection,P=qh(!!E,K.isValid);const W={...V,isValid:P,to:E&&P?Zt({x:E.x,y:E.y},Z):T,toHandle:K.toHandle,toPosition:P&&K.toHandle?K.toHandle.position:Si[Y.position],toNode:K.toHandle?l.get(K.toHandle.nodeId):null};P&&E&&V.toHandle&&W.toHandle&&V.toHandle.type===W.toHandle.type&&V.toHandle.nodeId===W.toHandle.nodeId&&V.toHandle.id===W.toHandle.id&&V.to.x===W.to.x&&V.to.y===W.to.y||(g(W),V=W)}function G(X){(E||B)&&H&&P&&(m==null||m(H));const{inProgress:Z,...K}=V,W={...K,toPosition:V.toHandle?V.toPosition:null};w==null||w(X,W),s&&(v==null||v(X,W)),h(),cancelAnimationFrame(_),O=!1,P=!1,H=null,B=null,S.removeEventListener("mousemove",F),S.removeEventListener("mouseup",G),S.removeEventListener("touchmove",F),S.removeEventListener("touchend",G)}S.addEventListener("mousemove",F),S.addEventListener("mouseup",G),S.addEventListener("touchmove",F),S.addEventListener("touchend",G)}function da(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:d=ua,nodeLookup:c}){const u=s==="target",f=t?o.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:p}=Ee(e),m=o.elementFromPoint(h,p),w=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:f,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const v=la(void 0,w),g=w.getAttribute("data-nodeid"),y=w.getAttribute("data-handleid"),N=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!g||!v)return x;const S={source:u?g:r,sourceHandle:u?y:i,target:u?r:g,targetHandle:u?i:y};x.connection=S;const E=N&&M&&(n===We.Strict?u&&v==="source"||!u&&v==="target":g!==r||y!==i);x.isValid=E&&d(S),x.toHandle=ca(g,v,y,c,n,!1)}return x}const Lr={onPointerDown:Yh,isValid:da};function Gh({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ue(e);function s({translateExtent:a,width:l,height:d,zoomStep:c=10,pannable:u=!0,zoomable:f=!0,inversePan:h=!1}){const p=g=>{const y=n();if(g.sourceEvent.type!=="wheel"||!t)return;const N=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,M=y[2]*Math.pow(2,N);t.scaleTo(M)};let m=[0,0];const w=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(m=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},x=g=>{const y=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const N=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],M=[N[0]-m[0],N[1]-m[1]];m=N;const S=r()*Math.max(y[2],Math.log(y[2]))*(h?-1:1),_={x:y[0]-M[0]*S,y:y[1]-M[1]*S},E=[[0,0],[l,d]];t.setViewportConstrained({x:_.x,y:_.y,zoom:y[2]},E,a)},v=zs().on("start",w).on("zoom",u?x:null).on("zoom.wheel",f?p:null);i.call(v,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:fe}}const Xh=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,dn=e=>({x:e.x,y:e.y,zoom:e.k}),Mn=({x:e,y:t,zoom:n})=>an.translate(e,t).scale(n),Be=(e,t)=>e.target.closest(`.${t}`),fa=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),In=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},ha=e=>{const t=e.ctrlKey&&Jt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Wh({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:d}){return c=>{if(Be(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(c.ctrlKey&&o){const w=fe(c),x=ha(c),v=u*Math.pow(2,x);r.scaleTo(n,v,w,c);return}const f=c.deltaMode===1?20:1;let h=i===Pe.Vertical?0:c.deltaX*f,p=i===Pe.Horizontal?0:c.deltaY*f;!Jt()&&c.shiftKey&&i!==Pe.Vertical&&(h=c.deltaY*f,p=0),r.translateBy(n,-(h/u)*s,-(p/u)*s,{internal:!0});const m=dn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(c,m)),e.isPanScrolling&&(l==null||l(c,m),e.panScrollTimeout=setTimeout(()=>{d==null||d(c,m),e.isPanScrolling=!1},150))}}function Uh({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=Be(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Kh({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var s,o,a;if((s=r.sourceEvent)!=null&&s.internal)return;const i=dn(r.transform);e.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Qh({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,a;e.usedRightMouseButton=!!(n&&fa(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((a=s.sourceEvent)!=null&&a.internal)&&(i==null||i(s.sourceEvent,dn(s.transform)))}}function Zh({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var a;if(!((a=o.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,s&&fa(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Xh(e.prevViewport,o.transform))){const l=dn(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,l)},n?150:0)}}}function Jh({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:d}){return c=>{var p;const u=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Be(c,`${d}-flow__node`)||Be(c,`${d}-flow__edge`)))return!0;if(!r&&!u&&!i&&!s&&!n||o||Be(c,a)&&c.type==="wheel"||Be(c,l)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((p=c.touches)==null?void 0:p.length)>1)return c.preventDefault(),!1;if(!u&&!i&&!f&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function ep({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:d}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),f=zs().clickDistance(!pe(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),h=ue(e).call(f);g({x:s.x,y:s.y,zoom:Ue(s.zoom,t,n)},[[0,0],[u.width,u.height]],i);const p=h.on("wheel.zoom"),m=h.on("dblclick.zoom");f.wheelDelta(ha);function w(I,D){return h?new Promise(b=>{f==null||f.transform(In(h,D==null?void 0:D.duration,()=>b(!0)),I)}):Promise.resolve(!1)}function x({noWheelClassName:I,noPanClassName:D,onPaneContextMenu:b,userSelectionActive:R,panOnScroll:T,panOnDrag:O,panOnScrollMode:H,panOnScrollSpeed:P,preventScrolling:B,zoomOnPinch:q,zoomOnScroll:Y,zoomOnDoubleClick:$,zoomActivationKeyPressed:j,lib:L,onTransformChange:V}){R&&!c.isZoomingOrPanning&&v();const G=T&&!j&&!R?Wh({zoomPanValues:c,noWheelClassName:I,d3Selection:h,d3Zoom:f,panOnScrollMode:H,panOnScrollSpeed:P,zoomOnPinch:q,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:l}):Uh({noWheelClassName:I,preventScrolling:B,d3ZoomHandler:p});if(h.on("wheel.zoom",G,{passive:!1}),!R){const Z=Kh({zoomPanValues:c,onDraggingChange:d,onPanZoomStart:a});f.on("start",Z);const K=Qh({zoomPanValues:c,panOnDrag:O,onPaneContextMenu:!!b,onPanZoom:o,onTransformChange:V});f.on("zoom",K);const W=Zh({zoomPanValues:c,panOnDrag:O,panOnScroll:T,onPaneContextMenu:b,onPanZoomEnd:l,onDraggingChange:d});f.on("end",W)}const X=Jh({zoomActivationKeyPressed:j,panOnDrag:O,zoomOnScroll:Y,panOnScroll:T,zoomOnDoubleClick:$,zoomOnPinch:q,userSelectionActive:R,noPanClassName:D,noWheelClassName:I,lib:L});f.filter(X),$?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function v(){f.on("zoom",null)}async function g(I,D,b){const R=Mn(I),T=f==null?void 0:f.constrain()(R,D,b);return T&&await w(T),new Promise(O=>O(T))}async function y(I,D){const b=Mn(I);return await w(b,D),new Promise(R=>R(b))}function N(I){if(h){const D=Mn(I),b=h.property("__zoom");(b.k!==I.zoom||b.x!==I.x||b.y!==I.y)&&(f==null||f.transform(h,D,null,{sync:!0}))}}function M(){const I=h?Ds(h.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function S(I,D){return h?new Promise(b=>{f==null||f.scaleTo(In(h,D==null?void 0:D.duration,()=>b(!0)),I)}):Promise.resolve(!1)}function _(I,D){return h?new Promise(b=>{f==null||f.scaleBy(In(h,D==null?void 0:D.duration,()=>b(!0)),I)}):Promise.resolve(!1)}function E(I){f==null||f.scaleExtent(I)}function k(I){f==null||f.translateExtent(I)}function A(I){const D=!pe(I)||I<0?0:I;f==null||f.clickDistance(D)}return{update:x,destroy:v,setViewport:y,setViewportConstrained:g,getViewport:M,scaleTo:S,scaleBy:_,setScaleExtent:E,setTranslateExtent:k,syncViewport:N,setClickDistance:A}}var ft;(function(e){e.Line="line",e.Handle="handle"})(ft||(ft={}));function tp({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,a=n-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function np(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Ce(e,t){return Math.max(0,t-e)}function Se(e,t){return Math.max(0,e-t)}function Dt(e,t,n){return Math.max(0,t-e,e-n)}function Hi(e,t){return e?!t:t}function rp(e,t,n,r,i,s,o,a){let{affectsX:l,affectsY:d}=t;const{isHorizontal:c,isVertical:u}=t,f=c&&u,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:w,minHeight:x,maxHeight:v}=r,{x:g,y,width:N,height:M,aspectRatio:S}=e;let _=Math.floor(c?h-e.pointerX:0),E=Math.floor(u?p-e.pointerY:0);const k=N+(l?-_:_),A=M+(d?-E:E),I=-s[0]*N,D=-s[1]*M;let b=Dt(k,m,w),R=Dt(A,x,v);if(o){let H=0,P=0;l&&_<0?H=Ce(g+_+I,o[0][0]):!l&&_>0&&(H=Se(g+k+I,o[1][0])),d&&E<0?P=Ce(y+E+D,o[0][1]):!d&&E>0&&(P=Se(y+A+D,o[1][1])),b=Math.max(b,H),R=Math.max(R,P)}if(a){let H=0,P=0;l&&_>0?H=Se(g+_,a[0][0]):!l&&_<0&&(H=Ce(g+k,a[1][0])),d&&E>0?P=Se(y+E,a[0][1]):!d&&E<0&&(P=Ce(y+A,a[1][1])),b=Math.max(b,H),R=Math.max(R,P)}if(i){if(c){const H=Dt(k/S,x,v)*S;if(b=Math.max(b,H),o){let P=0;!l&&!d||l&&!d&&f?P=Se(y+D+k/S,o[1][1])*S:P=Ce(y+D+(l?_:-_)/S,o[0][1])*S,b=Math.max(b,P)}if(a){let P=0;!l&&!d||l&&!d&&f?P=Ce(y+k/S,a[1][1])*S:P=Se(y+(l?_:-_)/S,a[0][1])*S,b=Math.max(b,P)}}if(u){const H=Dt(A*S,m,w)/S;if(R=Math.max(R,H),o){let P=0;!l&&!d||d&&!l&&f?P=Se(g+A*S+I,o[1][0])/S:P=Ce(g+(d?E:-E)*S+I,o[0][0])/S,R=Math.max(R,P)}if(a){let P=0;!l&&!d||d&&!l&&f?P=Ce(g+A*S,a[1][0])/S:P=Se(g+(d?E:-E)*S,a[0][0])/S,R=Math.max(R,P)}}}E=E+(E<0?R:-R),_=_+(_<0?b:-b),i&&(f?k>A*S?E=(Hi(l,d)?-_:_)/S:_=(Hi(l,d)?-E:E)*S:c?(E=_/S,d=l):(_=E*S,l=d));const T=l?g+_:g,O=d?y+E:y;return{width:N+(l?-_:_),height:M+(d?-E:E),x:s[0]*_*(l?-1:1)+T,y:s[1]*E*(d?-1:1)+O}}const pa={width:0,height:0,x:0,y:0},ip={...pa,pointerX:0,pointerY:0,aspectRatio:1};function op(e){return[[0,0],[e.measured.width,e.measured.height]]}function sp(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,a=n[0]*s,l=n[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function ap({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=ue(e);function o({controlPosition:l,boundaries:d,keepAspectRatio:c,onResizeStart:u,onResize:f,onResizeEnd:h,shouldResize:p}){let m={...pa},w={...ip};const x=np(l);let v,g=null,y=[],N,M,S;const _=Ns().on("start",E=>{const{nodeLookup:k,transform:A,snapGrid:I,snapToGrid:D,nodeOrigin:b,paneDomNode:R}=n();if(v=k.get(t),!v)return;g=(R==null?void 0:R.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:O}=dt(E.sourceEvent,{transform:A,snapGrid:I,snapToGrid:D,containerBounds:g});m={width:v.measured.width??0,height:v.measured.height??0,x:v.position.x??0,y:v.position.y??0},w={...m,pointerX:T,pointerY:O,aspectRatio:m.width/m.height},N=void 0,v.parentId&&(v.extent==="parent"||v.expandParent)&&(N=k.get(v.parentId),M=N&&v.extent==="parent"?op(N):void 0),y=[],S=void 0;for(const[H,P]of k)if(P.parentId===t&&(y.push({id:H,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const B=sp(P,v,P.origin??b);S?S=[[Math.min(B[0][0],S[0][0]),Math.min(B[0][1],S[0][1])],[Math.max(B[1][0],S[1][0]),Math.max(B[1][1],S[1][1])]]:S=B}u==null||u(E,{...m})}).on("drag",E=>{const{transform:k,snapGrid:A,snapToGrid:I,nodeOrigin:D}=n(),b=dt(E.sourceEvent,{transform:k,snapGrid:A,snapToGrid:I,containerBounds:g}),R=[];if(!v)return;const{x:T,y:O,width:H,height:P}=m,B={},q=v.origin??D,{width:Y,height:$,x:j,y:L}=rp(w,x,b,d,c,q,M,S),V=Y!==H,F=$!==P,G=j!==T&&V,X=L!==O&&F;if(!G&&!X&&!V&&!F)return;if((G||X||q[0]===1||q[1]===1)&&(B.x=G?j:m.x,B.y=X?L:m.y,m.x=B.x,m.y=B.y,y.length>0)){const Q=j-T,J=L-O;for(const re of y)re.position={x:re.position.x-Q+q[0]*(Y-H),y:re.position.y-J+q[1]*($-P)},R.push(re)}if((V||F)&&(B.width=V?Y:m.width,B.height=F?$:m.height,m.width=B.width,m.height=B.height),N&&v.expandParent){const Q=q[0]*(B.width??0);B.x&&B.x<Q&&(m.x=Q,w.x=w.x-(B.x-Q));const J=q[1]*(B.height??0);B.y&&B.y<J&&(m.y=J,w.y=w.y-(B.y-J))}const Z=tp({width:m.width,prevWidth:H,height:m.height,prevHeight:P,affectsX:x.affectsX,affectsY:x.affectsY}),K={...m,direction:Z};(p==null?void 0:p(E,K))!==!1&&(f==null||f(E,K),r(B,R))}).on("end",E=>{h==null||h(E,{...m}),i==null||i({...m})});s.call(_)}function a(){s.on(".drag",null)}return{update:o,destroy:a}}const cp={},Bi=e=>{let t;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const h=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>d,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(cp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,l);return l},lp=e=>e?Bi(e):Bi,{useDebugValue:up}=ml,{useSyncExternalStoreWithSelector:dp}=Nl,fp=e=>e;function ga(e,t=fp,n){const r=dp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return up(r),r}const Vi=(e,t)=>{const n=lp(e),r=(i,s=t)=>ga(n,i,s);return Object.assign(r,n),r},hp=(e,t)=>e?Vi(e,t):Vi;function ne(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const fn=z.createContext(null),pp=fn.Provider,ma=we.error001();function ee(e,t){const n=z.useContext(fn);if(n===null)throw new Error(ma);return ga(n,e,t)}function te(){const e=z.useContext(fn);if(e===null)throw new Error(ma);return z.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Fi={display:"none"},gp={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ya="react-flow__node-desc",xa="react-flow__edge-desc",mp="react-flow__aria-live",yp=e=>e.ariaLiveMessage;function xp({rfId:e}){const t=ee(yp);return C.jsx("div",{id:`${mp}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gp,children:t})}function wp({rfId:e,disableKeyboardA11y:t}){return C.jsxs(C.Fragment,{children:[C.jsxs("div",{id:`${ya}-${e}`,style:Fi,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),C.jsx("div",{id:`${xa}-${e}`,style:Fi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&C.jsx(xp,{rfId:e})]})}const vp=e=>e.userSelectionActive?"none":"all",It=z.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=ee(vp),a=`${e}`.split("-");return C.jsx("div",{className:se(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},ref:s,...i,children:t})});It.displayName="Panel";function bp({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:C.jsx(It,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:C.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const _p=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},zt=e=>e.id;function Ep(e,t){return ne(e.selectedNodes.map(zt),t.selectedNodes.map(zt))&&ne(e.selectedEdges.map(zt),t.selectedEdges.map(zt))}function Np({onSelectionChange:e}){const t=te(),{selectedNodes:n,selectedEdges:r}=ee(_p,Ep);return z.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const kp=e=>!!e.onSelectionChangeHandlers;function Cp({onSelectionChange:e}){const t=ee(kp);return e||t?C.jsx(Np,{onSelectionChange:e}):null}const wa=[0,0],Sp={x:0,y:0,zoom:1},Mp=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],qi=[...Mp,"rfId"],Ip=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Yi={translateExtent:xt,nodeOrigin:wa,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Ap(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:d}=ee(Ip,ne),c=te();z.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{u.current=Yi,a()}),[]);const u=z.useRef(Yi);return z.useEffect(()=>{for(const f of qi){const h=e[f],p=u.current[f];h!==p&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?n(h):f==="minZoom"?r(h):f==="maxZoom"?i(h):f==="translateExtent"?s(h):f==="nodeExtent"?o(h):f==="paneClickDistance"?d(h):f==="fitView"?c.setState({fitViewQueued:h}):f==="fitViewOptions"?c.setState({fitViewOptions:h}):c.setState({[f]:h})))}u.current=e},qi.map(f=>e[f])),null}function Gi(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Tp(e){var r;const[t,n]=z.useState(e==="system"?null:e);return z.useEffect(()=>{if(e!=="system"){n(e);return}const i=Gi(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[e]),t!==null?t:(r=Gi())!=null&&r.matches?"dark":"light"}const Xi=typeof document<"u"?document:null;function Et(e=null,t={target:Xi,actInsideInputWithModifier:!0}){const[n,r]=z.useState(!1),i=z.useRef(!1),s=z.useRef(new Set([])),[o,a]=z.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=d.reduce((u,f)=>u.concat(...f),[]);return[d,c]}return[[],[]]},[e]);return z.useEffect(()=>{const l=(t==null?void 0:t.target)||Xi;if(e!==null){const d=f=>{var m,w;if(i.current=f.ctrlKey||f.metaKey||f.shiftKey||f.altKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Zs(f))return!1;const p=Ui(f.code,a);if(s.current.add(f[p]),Wi(o,s.current,!1)){const x=((w=(m=f.composedPath)==null?void 0:m.call(f))==null?void 0:w[0])||f.target,v=(x==null?void 0:x.nodeName)==="BUTTON"||(x==null?void 0:x.nodeName)==="A";t.preventDefault!==!1&&(i.current||!v)&&f.preventDefault(),r(!0)}},c=f=>{const h=Ui(f.code,a);Wi(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(f[h]),f.key==="Meta"&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",d),l==null||l.addEventListener("keyup",c),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",d),l==null||l.removeEventListener("keyup",c),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function Wi(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Ui(e,t){return t.includes(e)?"code":"key"}const Rp=()=>{const e=te();return z.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:a}=e.getState(),l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:o,d=i/2-t*l,c=s/2-n*l;return a?(await a.setViewport({x:d,y:c,zoom:l},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=e.getState(),l=Xr(t,r,i,s,o,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:a,y:l}=o.getBoundingClientRect(),d={x:t.x-a,y:t.y-l},c=n.snapGrid??i,u=n.snapToGrid??s;return Mt(d,r,u,c)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Zt(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function va(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const a={...s};for(const l of o)$p(l,a);n.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function $p(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function ba(e,t){return va(e,t)}function _a(e,t){return va(e,t)}function Re(e,t){return{id:e,type:"select",selected:t}}function Ve(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Re(s.id,o)))}return r}function Ki({items:e=[],lookup:t}){var i;const n=[],r=new Map(e.map(s=>[s.id,s]));for(const[s,o]of e.entries()){const a=t.get(o.id),l=((i=a==null?void 0:a.internals)==null?void 0:i.userNode)??a;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of t)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function Qi(e){return{id:e.id,type:"remove"}}const Zi=e=>ph(e),Op=e=>Fs(e);function Ea(e){return z.forwardRef(e)}const Pp=typeof window<"u"?z.useLayoutEffect:z.useEffect;function Ji(e){const[t,n]=z.useState(BigInt(0)),[r]=z.useState(()=>jp(()=>n(i=>i+BigInt(1))));return Pp(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function jp(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Na=z.createContext(null);function Lp({children:e}){const t=te(),n=z.useCallback(a=>{const{nodes:l=[],setNodes:d,hasDefaultNodes:c,onNodesChange:u,nodeLookup:f,fitViewQueued:h}=t.getState();let p=l;for(const m of a)p=typeof m=="function"?m(p):m;if(c)d(p);else{const m=Ki({items:p,lookup:f});m.length>0?u==null||u(m):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:x,setNodes:v}=t.getState();w&&v(x)})}},[]),r=Ji(n),i=z.useCallback(a=>{const{edges:l=[],setEdges:d,hasDefaultEdges:c,onEdgesChange:u,edgeLookup:f}=t.getState();let h=l;for(const p of a)h=typeof p=="function"?p(h):p;c?d(h):u&&u(Ki({items:h,lookup:f}))},[]),s=Ji(i),o=z.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return C.jsx(Na.Provider,{value:o,children:e})}function Dp(){const e=z.useContext(Na);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const zp=e=>!!e.panZoom;function hn(){const e=Rp(),t=te(),n=Dp(),r=ee(zp),i=z.useMemo(()=>{const s=u=>t.getState().nodeLookup.get(u),o=u=>{n.nodeQueue.push(u)},a=u=>{n.edgeQueue.push(u)},l=u=>{var x,v;const{nodeLookup:f,nodeOrigin:h}=t.getState(),p=Zi(u)?u:f.get(u.id),m=p.parentId?Ks(p.position,p.measured,p.parentId,f,h):p.position,w={...p,position:m,width:((x=p.measured)==null?void 0:x.width)??p.width,height:((v=p.measured)==null?void 0:v.height)??p.height};return Ke(w)},d=(u,f,h={replace:!1})=>{o(p=>p.map(m=>{if(m.id===u){const w=typeof f=="function"?f(m):f;return h.replace&&Zi(w)?w:{...m,...w}}return m}))},c=(u,f,h={replace:!1})=>{a(p=>p.map(m=>{if(m.id===u){const w=typeof f=="function"?f(m):f;return h.replace&&Op(w)?w:{...m,...w}}return m}))};return{getNodes:()=>t.getState().nodes.map(u=>({...u})),getNode:u=>{var f;return(f=s(u))==null?void 0:f.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:u=[]}=t.getState();return u.map(f=>({...f}))},getEdge:u=>t.getState().edgeLookup.get(u),setNodes:o,setEdges:a,addNodes:u=>{const f=Array.isArray(u)?u:[u];n.nodeQueue.push(h=>[...h,...f])},addEdges:u=>{const f=Array.isArray(u)?u:[u];n.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:u=[],edges:f=[],transform:h}=t.getState(),[p,m,w]=h;return{nodes:u.map(x=>({...x})),edges:f.map(x=>({...x})),viewport:{x:p,y:m,zoom:w}}},deleteElements:async({nodes:u=[],edges:f=[]})=>{const{nodes:h,edges:p,onNodesDelete:m,onEdgesDelete:w,triggerNodeChanges:x,triggerEdgeChanges:v,onDelete:g,onBeforeDelete:y}=t.getState(),{nodes:N,edges:M}=await wh({nodesToRemove:u,edgesToRemove:f,nodes:h,edges:p,onBeforeDelete:y}),S=M.length>0,_=N.length>0;if(S){const E=M.map(Qi);w==null||w(M),v(E)}if(_){const E=N.map(Qi);m==null||m(N),x(E)}return(_||S)&&(g==null||g({nodes:N,edges:M})),{deletedNodes:N,deletedEdges:M}},getIntersectingNodes:(u,f=!0,h)=>{const p=Ii(u),m=p?u:l(u),w=h!==void 0;return m?(h||t.getState().nodes).filter(x=>{const v=t.getState().nodeLookup.get(x.id);if(v&&!p&&(x.id===u.id||!v.internals.positionAbsolute))return!1;const g=Ke(w?x:v),y=bt(g,m);return f&&y>0||y>=m.width*m.height}):[]},isNodeIntersecting:(u,f,h=!0)=>{const m=Ii(u)?u:l(u);if(!m)return!1;const w=bt(m,f);return h&&w>0||w>=m.width*m.height},updateNode:d,updateNodeData:(u,f,h={replace:!1})=>{d(u,p=>{const m=typeof f=="function"?f(p):f;return h.replace?{...p,data:m}:{...p,data:{...p.data,...m}}},h)},updateEdge:c,updateEdgeData:(u,f,h={replace:!1})=>{c(u,p=>{const m=typeof f=="function"?f(p):f;return h.replace?{...p,data:m}:{...p,data:{...p.data,...m}}},h)},getNodesBounds:u=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return gh(u,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:u,id:f,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}-${u}${f?`-${f}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:u,handleId:f,nodeId:h})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${h}${u?f?`-${u}-${f}`:`-${u}`:""}`))==null?void 0:p.values())??[])},fitView:async u=>{const f=t.getState().fitViewResolver??Promise.withResolvers();return t.setState({fitViewQueued:!0,fitViewOptions:u,fitViewResolver:f}),n.nodeQueue.push(h=>[...h]),f.promise}}},[]);return z.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const eo=e=>e.selected,Hp={actInsideInputWithModifier:!1},Bp=typeof window<"u"?window:void 0;function Vp({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=te(),{deleteElements:r}=hn(),i=Et(e,Hp),s=Et(t,{target:Bp});z.useEffect(()=>{if(i){const{edges:o,nodes:a}=n.getState();r({nodes:a.filter(eo),edges:o.filter(eo)}),n.setState({nodesSelectionActive:!1})}},[i]),z.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Fp(e){const t=te();z.useEffect(()=>{const n=()=>{var i,s;if(!e.current)return!1;const r=Wr(e.current);(r.height===0||r.width===0)&&((s=(i=t.getState()).onError)==null||s.call(i,"004",we.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const pn={position:"absolute",width:"100%",height:"100%",top:0,left:0},qp=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Yp({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Pe.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:d,minZoom:c,maxZoom:u,zoomActivationKeyCode:f,preventScrolling:h=!0,children:p,noWheelClassName:m,noPanClassName:w,onViewportChange:x,isControlledViewport:v,paneClickDistance:g}){const y=te(),N=z.useRef(null),{userSelectionActive:M,lib:S}=ee(qp,ne),_=Et(f),E=z.useRef();Fp(N);const k=z.useCallback(A=>{x==null||x({x:A[0],y:A[1],zoom:A[2]}),v||y.setState({transform:A})},[x,v]);return z.useEffect(()=>{if(N.current){E.current=ep({domNode:N.current,minZoom:c,maxZoom:u,translateExtent:d,viewport:l,paneClickDistance:g,onDraggingChange:b=>y.setState({paneDragging:b}),onPanZoomStart:(b,R)=>{const{onViewportChangeStart:T,onMoveStart:O}=y.getState();O==null||O(b,R),T==null||T(R)},onPanZoom:(b,R)=>{const{onViewportChange:T,onMove:O}=y.getState();O==null||O(b,R),T==null||T(R)},onPanZoomEnd:(b,R)=>{const{onViewportChangeEnd:T,onMoveEnd:O}=y.getState();O==null||O(b,R),T==null||T(R)}});const{x:A,y:I,zoom:D}=E.current.getViewport();return y.setState({panZoom:E.current,transform:[A,I,D],domNode:N.current.closest(".react-flow")}),()=>{var b;(b=E.current)==null||b.destroy()}}},[]),z.useEffect(()=>{var A;(A=E.current)==null||A.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:_,preventScrolling:h,noPanClassName:w,userSelectionActive:M,noWheelClassName:m,lib:S,onTransformChange:k})},[e,t,n,r,i,s,o,a,_,h,w,M,m,S,k]),C.jsx("div",{className:"react-flow__renderer",ref:N,style:pn,children:p})}const Gp=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Xp(){const{userSelectionActive:e,userSelectionRect:t}=ee(Gp,ne);return e&&t?C.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const An=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Wp=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Up({isSelecting:e,selectionKeyPressed:t,selectionMode:n=wt.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:d,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:f,children:h}){const p=te(),{userSelectionActive:m,elementsSelectable:w,dragging:x,connectionInProgress:v}=ee(Wp,ne),g=w&&(e||m),y=z.useRef(null),N=z.useRef(),M=z.useRef(new Set),S=z.useRef(new Set),_=z.useRef(!1),E=z.useRef(!1),k=O=>{if(_.current||v){_.current=!1;return}a==null||a(O),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},A=O=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){O.preventDefault();return}l==null||l(O)},I=d?O=>d(O):void 0,D=O=>{var Y,$;const{resetSelectedElements:H,domNode:P}=p.getState();if(N.current=P==null?void 0:P.getBoundingClientRect(),!w||!e||O.button!==0||O.target!==y.current||!N.current)return;($=(Y=O.target)==null?void 0:Y.setPointerCapture)==null||$.call(Y,O.pointerId),E.current=!0,_.current=!1;const{x:B,y:q}=Ee(O.nativeEvent,N.current);H(),p.setState({userSelectionRect:{width:0,height:0,startX:B,startY:q,x:B,y:q}}),s==null||s(O)},b=O=>{const{userSelectionRect:H,transform:P,nodeLookup:B,edgeLookup:q,connectionLookup:Y,triggerNodeChanges:$,triggerEdgeChanges:j,defaultEdgeOptions:L}=p.getState();if(!N.current||!H)return;_.current=!0;const{x:V,y:F}=Ee(O.nativeEvent,N.current),{startX:G,startY:X}=H,Z={startX:G,startY:X,x:V<G?V:G,y:F<X?F:X,width:Math.abs(V-G),height:Math.abs(F-X)},K=M.current,W=S.current;M.current=new Set(qs(B,Z,P,n===wt.Partial,!0).map(J=>J.id)),S.current=new Set;const Q=(L==null?void 0:L.selectable)??!0;for(const J of M.current){const re=Y.get(J);if(re)for(const{edgeId:ce}of re.values()){const ze=q.get(ce);ze&&(ze.selectable??Q)&&S.current.add(ce)}}if(!Ai(K,M.current)){const J=Ve(B,M.current,!0);$(J)}if(!Ai(W,S.current)){const J=Ve(q,S.current);j(J)}p.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},R=O=>{var P,B;if(O.button!==0||!E.current)return;(B=(P=O.target)==null?void 0:P.releasePointerCapture)==null||B.call(P,O.pointerId);const{userSelectionRect:H}=p.getState();!m&&H&&O.target===y.current&&(k==null||k(O)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),o==null||o(O),(t||i)&&(_.current=!1),E.current=!1},T=r===!0||Array.isArray(r)&&r.includes(0);return C.jsxs("div",{className:se(["react-flow__pane",{draggable:T,dragging:x,selection:e}]),onClick:g?void 0:An(k,y),onContextMenu:An(A,y),onWheel:An(I,y),onPointerEnter:g?void 0:c,onPointerDown:g?D:u,onPointerMove:g?b:u,onPointerUp:g?R:void 0,onPointerLeave:f,ref:y,style:pn,children:[h,C.jsx(Xp,{})]})}function Dr({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=t.getState(),d=a.get(e);if(!d){l==null||l("012",we.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function ka({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=te(),[l,d]=z.useState(!1),c=z.useRef();return z.useEffect(()=>{c.current=Hh({getStoreItems:()=>a.getState(),onNodeMouseDown:u=>{Dr({id:u,store:a,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),z.useEffect(()=>{var u,f;if(t)(u=c.current)==null||u.destroy();else if(e.current)return(f=c.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var h;(h=c.current)==null||h.destroy()}},[n,r,t,s,e,i]),l}const Kp=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Ca(){const e=te();return z.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:d,nodeOrigin:c}=e.getState(),u=new Map,f=Kp(o),h=i?s[0]:5,p=i?s[1]:5,m=n.direction.x*h*n.factor,w=n.direction.y*p*n.factor;for(const[,x]of d){if(!f(x))continue;let v={x:x.internals.positionAbsolute.x+m,y:x.internals.positionAbsolute.y+w};i&&(v=un(v,s));const{position:g,positionAbsolute:y}=Ys({nodeId:x.id,nextPosition:v,nodeLookup:d,nodeExtent:r,nodeOrigin:c,onError:a});x.position=g,x.internals.positionAbsolute=y,u.set(x.id,x)}l(u)},[])}const Jr=z.createContext(null),Qp=Jr.Provider;Jr.Consumer;const Sa=()=>z.useContext(Jr),Zp=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Jp=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:d}=o,c=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.id)===t&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===We.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!i,valid:c&&d}};function eg({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:d,onMouseDown:c,onTouchStart:u,...f},h){var R,T;const p=o||null,m=e==="target",w=te(),x=Sa(),{connectOnClick:v,noPanClassName:g,rfId:y}=ee(Zp,ne),{connectingFrom:N,connectingTo:M,clickConnecting:S,isPossibleEndHandle:_,connectionInProcess:E,clickConnectionInProcess:k,valid:A}=ee(Jp(x,p,e),ne);x||(T=(R=w.getState()).onError)==null||T.call(R,"010",we.error010());const I=O=>{const{defaultEdgeOptions:H,onConnect:P,hasDefaultEdges:B}=w.getState(),q={...H,...O};if(B){const{edges:Y,setEdges:$}=w.getState();$(ra(q,Y))}P==null||P(q),a==null||a(q)},D=O=>{if(!x)return;const H=Js(O.nativeEvent);if(i&&(H&&O.button===0||!H)){const P=w.getState();Lr.onPointerDown(O.nativeEvent,{autoPanOnConnect:P.autoPanOnConnect,connectionMode:P.connectionMode,connectionRadius:P.connectionRadius,domNode:P.domNode,nodeLookup:P.nodeLookup,lib:P.lib,isTarget:m,handleId:p,nodeId:x,flowId:P.rfId,panBy:P.panBy,cancelConnection:P.cancelConnection,onConnectStart:P.onConnectStart,onConnectEnd:P.onConnectEnd,updateConnection:P.updateConnection,onConnect:I,isValidConnection:n||P.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:P.autoPanSpeed})}H?c==null||c(O):u==null||u(O)},b=O=>{const{onClickConnectStart:H,onClickConnectEnd:P,connectionClickStartHandle:B,connectionMode:q,isValidConnection:Y,lib:$,rfId:j,nodeLookup:L,connection:V}=w.getState();if(!x||!B&&!i)return;if(!B){H==null||H(O.nativeEvent,{nodeId:x,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,id:p}});return}const F=Qs(O.target),G=n||Y,{connection:X,isValid:Z}=Lr.isValid(O.nativeEvent,{handle:{nodeId:x,id:p,type:e},connectionMode:q,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:G,flowId:j,doc:F,lib:$,nodeLookup:L});Z&&X&&I(X);const K=structuredClone(V);delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,P==null||P(O,K),w.setState({connectionClickStartHandle:null})};return C.jsx("div",{"data-handleid":p,"data-nodeid":x,"data-handlepos":t,"data-id":`${y}-${x}-${p}-${e}`,className:se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,d,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:s,clickconnecting:S,connectingfrom:N,connectingto:M,valid:A,connectionindicator:r&&(!E||_)&&(E||k?s:i)}]),onMouseDown:D,onTouchStart:D,onClick:v?b:void 0,ref:h,...f,children:l})}const je=z.memo(Ea(eg));function tg({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return C.jsxs(C.Fragment,{children:[e==null?void 0:e.label,C.jsx(je,{type:"source",position:n,isConnectable:t})]})}function ng({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:r=U.Bottom}){return C.jsxs(C.Fragment,{children:[C.jsx(je,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,C.jsx(je,{type:"source",position:r,isConnectable:t})]})}function rg(){return null}function ig({data:e,isConnectable:t,targetPosition:n=U.Top}){return C.jsxs(C.Fragment,{children:[C.jsx(je,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const en={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},to={input:tg,default:ng,output:ig,group:rg};function og(e){var t,n,r,i;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((i=e.style)==null?void 0:i.height)}}const sg=e=>{const{width:t,height:n,x:r,y:i}=St(e.nodeLookup,{filter:s=>!!s.selected});return{width:pe(t)?t:null,height:pe(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function ag({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=te(),{width:i,height:s,transformString:o,userSelectionActive:a}=ee(sg,ne),l=Ca(),d=z.useRef(null);if(z.useEffect(()=>{var f;n||(f=d.current)==null||f.focus({preventScroll:!0})},[n]),ka({nodeRef:d}),a||!i||!s)return null;const c=e?f=>{const h=r.getState().nodes.filter(p=>p.selected);e(f,h)}:void 0,u=f=>{Object.prototype.hasOwnProperty.call(en,f.key)&&(f.preventDefault(),l({direction:en[f.key],factor:f.shiftKey?4:1}))};return C.jsx("div",{className:se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:C.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:i,height:s}})})}const no=typeof window<"u"?window:void 0,cg=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ma({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:d,selectionOnDrag:c,selectionMode:u,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:w,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:g,panOnScroll:y,panOnScrollSpeed:N,panOnScrollMode:M,zoomOnDoubleClick:S,panOnDrag:_,defaultViewport:E,translateExtent:k,minZoom:A,maxZoom:I,preventScrolling:D,onSelectionContextMenu:b,noWheelClassName:R,noPanClassName:T,disableKeyboardA11y:O,onViewportChange:H,isControlledViewport:P}){const{nodesSelectionActive:B,userSelectionActive:q}=ee(cg),Y=Et(d,{target:no}),$=Et(m,{target:no}),j=$||_,L=$||y,V=c&&j!==!0,F=Y||q||V;return Vp({deleteKeyCode:l,multiSelectionKeyCode:p}),C.jsx(Yp,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:g,panOnScroll:L,panOnScrollSpeed:N,panOnScrollMode:M,zoomOnDoubleClick:S,panOnDrag:!Y&&j,defaultViewport:E,translateExtent:k,minZoom:A,maxZoom:I,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:R,noPanClassName:T,onViewportChange:H,isControlledViewport:P,paneClickDistance:a,children:C.jsxs(Up,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:j,isSelecting:!!F,selectionMode:u,selectionKeyPressed:Y,selectionOnDrag:V,children:[e,B&&C.jsx(ag,{onSelectionContextMenu:b,noPanClassName:T,disableKeyboardA11y:O})]})})}Ma.displayName="FlowRenderer";const lg=z.memo(Ma),ug=e=>t=>e?qs(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function dg(e){return ee(z.useCallback(ug(e),[e]),ne)}const fg=e=>e.updateNodeInternals;function hg(){const e=ee(fg),[t]=z.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return z.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function pg({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=te(),s=z.useRef(null),o=z.useRef(null),a=z.useRef(e.sourcePosition),l=z.useRef(e.targetPosition),d=z.useRef(t),c=n&&!!e.internals.handleBounds;return z.useEffect(()=>{s.current&&!e.hidden&&(!c||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[c,e.hidden]),z.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),z.useEffect(()=>{if(s.current){const u=d.current!==t,f=a.current!==e.sourcePosition,h=l.current!==e.targetPosition;(u||f||h)&&(d.current=t,a.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function gg({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:d,nodesFocusable:c,resizeObserver:u,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:p,rfId:m,nodeTypes:w,nodeClickDistance:x,onError:v}){const{node:g,internals:y,isParent:N}=ee(F=>{const G=F.nodeLookup.get(e),X=F.parentLookup.has(e);return{node:G,internals:G.internals,isParent:X}},ne);let M=g.type||"default",S=(w==null?void 0:w[M])||to[M];S===void 0&&(v==null||v("003",we.error003(M)),M="default",S=to.default);const _=!!(g.draggable||a&&typeof g.draggable>"u"),E=!!(g.selectable||l&&typeof g.selectable>"u"),k=!!(g.connectable||d&&typeof g.connectable>"u"),A=!!(g.focusable||c&&typeof g.focusable>"u"),I=te(),D=Us(g),b=pg({node:g,nodeType:M,hasDimensions:D,resizeObserver:u}),R=ka({nodeRef:b,disabled:g.hidden||!_,noDragClassName:f,handleSelector:g.dragHandle,nodeId:e,isSelectable:E,nodeClickDistance:x}),T=Ca();if(g.hidden)return null;const O=ke(g),H=og(g),P=E||_||t||n||r||i,B=n?F=>n(F,{...y.userNode}):void 0,q=r?F=>r(F,{...y.userNode}):void 0,Y=i?F=>i(F,{...y.userNode}):void 0,$=s?F=>s(F,{...y.userNode}):void 0,j=o?F=>o(F,{...y.userNode}):void 0,L=F=>{const{selectNodesOnDrag:G,nodeDragThreshold:X}=I.getState();E&&(!G||!_||X>0)&&Dr({id:e,store:I,nodeRef:b}),t&&t(F,{...y.userNode})},V=F=>{if(!(Zs(F.nativeEvent)||p))if(Hs.includes(F.key)&&E){const G=F.key==="Escape";Dr({id:e,store:I,unselect:G,nodeRef:b})}else _&&g.selected&&Object.prototype.hasOwnProperty.call(en,F.key)&&(F.preventDefault(),I.setState({ariaLiveMessage:`Moved selected node ${F.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.positionAbsolute.x}, y: ${~~y.positionAbsolute.y}`}),T({direction:en[F.key],factor:F.shiftKey?4:1}))};return C.jsx("div",{className:se(["react-flow__node",`react-flow__node-${M}`,{[h]:_},g.className,{selected:g.selected,selectable:E,parent:N,draggable:_,dragging:R}]),ref:b,style:{zIndex:y.z,transform:`translate(${y.positionAbsolute.x}px,${y.positionAbsolute.y}px)`,pointerEvents:P?"all":"none",visibility:D?"visible":"hidden",...g.style,...H},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:q,onMouseLeave:Y,onContextMenu:$,onClick:L,onDoubleClick:j,onKeyDown:A?V:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":p?void 0:`${ya}-${m}`,"aria-label":g.ariaLabel,children:C.jsx(Qp,{value:e,children:C.jsx(S,{id:e,data:g.data,type:M,positionAbsoluteX:y.positionAbsolute.x,positionAbsoluteY:y.positionAbsolute.y,selected:g.selected??!1,selectable:E,draggable:_,deletable:g.deletable??!0,isConnectable:k,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:R,dragHandle:g.dragHandle,zIndex:y.z,parentId:g.parentId,...O})})})}const mg=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ia(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=ee(mg,ne),o=dg(e.onlyRenderVisibleElements),a=hg();return C.jsx("div",{className:"react-flow__nodes",style:pn,children:o.map(l=>C.jsx(gg,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},l))})}Ia.displayName="NodeRenderer";const yg=z.memo(Ia);function xg(e){return ee(z.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&kh({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),ne)}const wg=({color:e="none",strokeWidth:t=1})=>C.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),vg=({color:e="none",strokeWidth:t=1})=>C.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ro={[vt.Arrow]:wg,[vt.ArrowClosed]:vg};function bg(e){const t=te();return z.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(ro,e)?ro[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",we.error009(e)),null)},[e])}const _g=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=bg(t);return l?C.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:C.jsx(l,{color:n,strokeWidth:o})}):null},Aa=({defaultColor:e,rfId:t})=>{const n=ee(s=>s.edges),r=ee(s=>s.defaultEdgeOptions),i=z.useMemo(()=>Rh(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return i.length?C.jsx("svg",{className:"react-flow__marker",children:C.jsx("defs",{children:i.map(s=>C.jsx(_g,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};Aa.displayName="MarkerDefinitions";var Eg=z.memo(Aa);function Ta({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:d,...c}){const[u,f]=z.useState({x:1,y:0,width:0,height:0}),h=se(["react-flow__edge-textwrapper",d]),p=z.useRef(null);return z.useEffect(()=>{if(p.current){const m=p.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),n?C.jsxs("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:h,visibility:u.width?"visible":"hidden",...c,children:[i&&C.jsx("rect",{width:u.width+2*o[0],x:-o[0],y:-o[1],height:u.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),C.jsx("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:p,style:r,children:n}),l]}):null}Ta.displayName="EdgeText";const Ng=z.memo(Ta);function gn({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:d=20,...c}){return C.jsxs(C.Fragment,{children:[C.jsx("path",{...c,d:e,fill:"none",className:se(["react-flow__edge-path",c.className])}),d&&C.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&pe(t)&&pe(n)?C.jsx(Ng,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function io({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===U.Left||e===U.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Ra({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top}){const[o,a]=io({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,d]=io({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,u,f,h]=ea({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:d});return[`M${e},${t} C${o},${a} ${l},${d} ${r},${i}`,c,u,f,h]}function $a(e){return z.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=U.Bottom,targetPosition:a=U.Top,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:w,interactionWidth:x})=>{const[v,g,y]=Ra({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),N=e.isInternal?void 0:t;return C.jsx(gn,{id:N,path:v,labelX:g,labelY:y,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:w,interactionWidth:x})})}const kg=$a({isInternal:!1}),Oa=$a({isInternal:!0});kg.displayName="SimpleBezierEdge";Oa.displayName="SimpleBezierEdgeInternal";function Pa(e){return z.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,sourcePosition:h=U.Bottom,targetPosition:p=U.Top,markerEnd:m,markerStart:w,pathOptions:x,interactionWidth:v})=>{const[g,y,N]=Or({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:p,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset}),M=e.isInternal?void 0:t;return C.jsx(gn,{id:M,path:g,labelX:y,labelY:N,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:w,interactionWidth:v})})}const ja=Pa({isInternal:!1}),La=Pa({isInternal:!0});ja.displayName="SmoothStepEdge";La.displayName="SmoothStepEdgeInternal";function Da(e){return z.memo(({id:t,...n})=>{var i;const r=e.isInternal?void 0:t;return C.jsx(ja,{...n,id:r,pathOptions:z.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const Cg=Da({isInternal:!1}),za=Da({isInternal:!0});Cg.displayName="StepEdge";za.displayName="StepEdgeInternal";function Ha(e){return z.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:h,markerStart:p,interactionWidth:m})=>{const[w,x,v]=ia({sourceX:n,sourceY:r,targetX:i,targetY:s}),g=e.isInternal?void 0:t;return C.jsx(gn,{id:g,path:w,labelX:x,labelY:v,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:h,markerStart:p,interactionWidth:m})})}const Sg=Ha({isInternal:!1}),Ba=Ha({isInternal:!0});Sg.displayName="StraightEdge";Ba.displayName="StraightEdgeInternal";function Va(e){return z.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=U.Bottom,targetPosition:a=U.Top,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:w,pathOptions:x,interactionWidth:v})=>{const[g,y,N]=ta({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:x==null?void 0:x.curvature}),M=e.isInternal?void 0:t;return C.jsx(gn,{id:M,path:g,labelX:y,labelY:N,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:w,interactionWidth:v})})}const Mg=Va({isInternal:!1}),Fa=Va({isInternal:!0});Mg.displayName="BezierEdge";Fa.displayName="BezierEdgeInternal";const oo={default:Fa,straight:Ba,step:za,smoothstep:La,simplebezier:Oa},so={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ig=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Ag=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,ao="react-flow__edgeupdater";function co({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return C.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:se([ao,`${ao}-${a}`]),cx:Ig(t,r,e),cy:Ag(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Tg({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:d,onReconnectStart:c,onReconnectEnd:u,setReconnecting:f,setUpdateHover:h}){const p=te(),m=(y,N)=>{if(y.button!==0)return;const{autoPanOnConnect:M,domNode:S,isValidConnection:_,connectionMode:E,connectionRadius:k,lib:A,onConnectStart:I,onConnectEnd:D,cancelConnection:b,nodeLookup:R,rfId:T,panBy:O,updateConnection:H}=p.getState(),P=N.type==="target";f(!0),c==null||c(y,n,N.type);const B=(Y,$)=>{f(!1),u==null||u(Y,n,N.type,$)},q=Y=>d==null?void 0:d(n,Y);Lr.onPointerDown(y.nativeEvent,{autoPanOnConnect:M,connectionMode:E,connectionRadius:k,domNode:S,handleId:N.id,nodeId:N.nodeId,nodeLookup:R,isTarget:P,edgeUpdaterType:N.type,lib:A,flowId:T,cancelConnection:b,panBy:O,isValidConnection:_,onConnect:q,onConnectStart:I,onConnectEnd:D,onReconnectEnd:B,updateConnection:H,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},w=y=>m(y,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),x=y=>m(y,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),v=()=>h(!0),g=()=>h(!1);return C.jsxs(C.Fragment,{children:[(e===!0||e==="source")&&C.jsx(co,{position:a,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:v,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&C.jsx(co,{position:l,centerX:s,centerY:o,radius:t,onMouseDown:x,onMouseEnter:v,onMouseOut:g,type:"target"})]})}function Rg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:d,reconnectRadius:c,onReconnect:u,onReconnectStart:f,onReconnectEnd:h,rfId:p,edgeTypes:m,noPanClassName:w,onError:x,disableKeyboardA11y:v}){let g=ee(W=>W.edgeLookup.get(e));const y=ee(W=>W.defaultEdgeOptions);g=y?{...y,...g}:g;let N=g.type||"default",M=(m==null?void 0:m[N])||oo[N];M===void 0&&(x==null||x("011",we.error011(N)),N="default",M=oo.default);const S=!!(g.focusable||t&&typeof g.focusable>"u"),_=typeof u<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),E=!!(g.selectable||r&&typeof g.selectable>"u"),k=z.useRef(null),[A,I]=z.useState(!1),[D,b]=z.useState(!1),R=te(),{zIndex:T,sourceX:O,sourceY:H,targetX:P,targetY:B,sourcePosition:q,targetPosition:Y}=ee(z.useCallback(W=>{const Q=W.nodeLookup.get(g.source),J=W.nodeLookup.get(g.target);if(!Q||!J)return{zIndex:g.zIndex,...so};const re=Th({id:e,sourceNode:Q,targetNode:J,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:W.connectionMode,onError:x});return{zIndex:Nh({selected:g.selected,zIndex:g.zIndex,sourceNode:Q,targetNode:J,elevateOnSelect:W.elevateEdgesOnSelect}),...re||so}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),ne),$=z.useMemo(()=>g.markerStart?`url('#${Pr(g.markerStart,p)}')`:void 0,[g.markerStart,p]),j=z.useMemo(()=>g.markerEnd?`url('#${Pr(g.markerEnd,p)}')`:void 0,[g.markerEnd,p]);if(g.hidden||O===null||H===null||P===null||B===null)return null;const L=W=>{var ce;const{addSelectedEdges:Q,unselectNodesAndEdges:J,multiSelectionActive:re}=R.getState();E&&(R.setState({nodesSelectionActive:!1}),g.selected&&re?(J({nodes:[],edges:[g]}),(ce=k.current)==null||ce.blur()):Q([e])),i&&i(W,g)},V=s?W=>{s(W,{...g})}:void 0,F=o?W=>{o(W,{...g})}:void 0,G=a?W=>{a(W,{...g})}:void 0,X=l?W=>{l(W,{...g})}:void 0,Z=d?W=>{d(W,{...g})}:void 0,K=W=>{var Q;if(!v&&Hs.includes(W.key)&&E){const{unselectNodesAndEdges:J,addSelectedEdges:re}=R.getState();W.key==="Escape"?((Q=k.current)==null||Q.blur(),J({edges:[g]})):re([e])}};return C.jsx("svg",{style:{zIndex:T},children:C.jsxs("g",{className:se(["react-flow__edge",`react-flow__edge-${N}`,g.className,w,{selected:g.selected,animated:g.animated,inactive:!E&&!i,updating:A,selectable:E}]),onClick:L,onDoubleClick:V,onContextMenu:F,onMouseEnter:G,onMouseMove:X,onMouseLeave:Z,onKeyDown:S?K:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":S?`${xa}-${p}`:void 0,ref:k,children:[!D&&C.jsx(M,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:E,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:O,sourceY:H,targetX:P,targetY:B,sourcePosition:q,targetPosition:Y,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:$,markerEnd:j,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),_&&C.jsx(Tg,{edge:g,isReconnectable:_,reconnectRadius:c,onReconnect:u,onReconnectStart:f,onReconnectEnd:h,sourceX:O,sourceY:H,targetX:P,targetY:B,sourcePosition:q,targetPosition:Y,setUpdateHover:I,setReconnecting:b})]})})}const $g=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function qa({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:d,onEdgeClick:c,reconnectRadius:u,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:m}){const{edgesFocusable:w,edgesReconnectable:x,elementsSelectable:v,onError:g}=ee($g,ne),y=xg(t);return C.jsxs("div",{className:"react-flow__edges",children:[C.jsx(Eg,{defaultColor:e,rfId:n}),y.map(N=>C.jsx(Rg,{id:N,edgesFocusable:w,edgesReconnectable:x,elementsSelectable:v,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:d,onClick:c,reconnectRadius:u,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:m},N))]})}qa.displayName="EdgeRenderer";const Og=z.memo(qa),Pg=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function jg({children:e}){const t=ee(Pg);return C.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Lg(e){const t=hn(),n=z.useRef(!1);z.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Dg=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function zg(e){const t=ee(Dg),n=te();return z.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Hg(e){return e.connection.inProgress?{...e.connection,to:Mt(e.connection.to,e.transform)}:{...e.connection}}function Bg(e){return Hg}function Vg(e){const t=Bg();return ee(t,ne)}const Fg=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function qg({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=ee(Fg,ne);return!(s&&i&&l)?null:C.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:C.jsx("g",{className:se(["react-flow__connection",Vs(a)]),children:C.jsx(Ya,{style:t,type:n,CustomComponent:r,isValid:a})})})}const Ya=({style:e,type:t=Ie.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:d,toNode:c,toHandle:u,toPosition:f}=Vg();if(!i)return;if(n)return C.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:l,toPosition:f,connectionStatus:Vs(r),toNode:c,toHandle:u});let h="";const p={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:d.x,targetY:d.y,targetPosition:f};switch(t){case Ie.Bezier:[h]=ta(p);break;case Ie.SimpleBezier:[h]=Ra(p);break;case Ie.Step:[h]=Or({...p,borderRadius:0});break;case Ie.SmoothStep:[h]=Or(p);break;default:[h]=ia(p)}return C.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};Ya.displayName="ConnectionLine";const Yg={};function lo(e=Yg){z.useRef(e),te(),z.useEffect(()=>{},[e])}function Gg(){te(),z.useRef(!1),z.useEffect(()=>{},[])}function Ga({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:c,onSelectionContextMenu:u,onSelectionStart:f,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:g,selectionMode:y,multiSelectionKeyCode:N,panActivationKeyCode:M,zoomActivationKeyCode:S,deleteKeyCode:_,onlyRenderVisibleElements:E,elementsSelectable:k,defaultViewport:A,translateExtent:I,minZoom:D,maxZoom:b,preventScrolling:R,defaultMarkerColor:T,zoomOnScroll:O,zoomOnPinch:H,panOnScroll:P,panOnScrollSpeed:B,panOnScrollMode:q,zoomOnDoubleClick:Y,panOnDrag:$,onPaneClick:j,onPaneMouseEnter:L,onPaneMouseMove:V,onPaneMouseLeave:F,onPaneScroll:G,onPaneContextMenu:X,paneClickDistance:Z,nodeClickDistance:K,onEdgeContextMenu:W,onEdgeMouseEnter:Q,onEdgeMouseMove:J,onEdgeMouseLeave:re,reconnectRadius:ce,onReconnect:ze,onReconnectStart:mn,onReconnectEnd:yn,noDragClassName:et,noWheelClassName:xn,noPanClassName:tt,disableKeyboardA11y:nt,nodeExtent:wn,rfId:rt,viewport:it,onViewportChange:At}){return lo(e),lo(t),Gg(),Lg(n),zg(it),C.jsx(lg,{onPaneClick:j,onPaneMouseEnter:L,onPaneMouseMove:V,onPaneMouseLeave:F,onPaneContextMenu:X,onPaneScroll:G,paneClickDistance:Z,deleteKeyCode:_,selectionKeyCode:v,selectionOnDrag:g,selectionMode:y,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:N,panActivationKeyCode:M,zoomActivationKeyCode:S,elementsSelectable:k,zoomOnScroll:O,zoomOnPinch:H,zoomOnDoubleClick:Y,panOnScroll:P,panOnScrollSpeed:B,panOnScrollMode:q,panOnDrag:$,defaultViewport:A,translateExtent:I,minZoom:D,maxZoom:b,onSelectionContextMenu:u,preventScrolling:R,noDragClassName:et,noWheelClassName:xn,noPanClassName:tt,disableKeyboardA11y:nt,onViewportChange:At,isControlledViewport:!!it,children:C.jsxs(jg,{children:[C.jsx(Og,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ze,onReconnectStart:mn,onReconnectEnd:yn,onlyRenderVisibleElements:E,onEdgeContextMenu:W,onEdgeMouseEnter:Q,onEdgeMouseMove:J,onEdgeMouseLeave:re,reconnectRadius:ce,defaultMarkerColor:T,noPanClassName:tt,disableKeyboardA11y:nt,rfId:rt}),C.jsx(qg,{style:m,type:p,component:w,containerStyle:x}),C.jsx("div",{className:"react-flow__edgelabel-renderer"}),C.jsx(yg,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:c,nodeClickDistance:K,onlyRenderVisibleElements:E,noPanClassName:tt,noDragClassName:et,disableKeyboardA11y:nt,nodeExtent:wn,rfId:rt}),C.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ga.displayName="GraphView";const Xg=z.memo(Ga),uo=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}={})=>{const d=new Map,c=new Map,u=new Map,f=new Map,h=r??t??[],p=n??e??[],m=a??[0,0],w=l??xt;sa(u,f,h),jr(p,d,c,{nodeOrigin:m,nodeExtent:w,elevateNodesOnSelect:!1});let x=[0,0,1];if(o&&i&&s){const v=St(d,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:g,y,zoom:N}=Xr(v,i,s,.5,2,.1);x=[g,y,N]}return{rfId:"1",width:0,height:0,transform:x,nodes:p,nodeLookup:d,parentLookup:c,edges:h,edgeLookup:f,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:xt,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:We.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:void 0,fitViewResolver:null,connection:{...Bs},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:vh,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Wg=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l})=>hp((d,c)=>{async function u(){const{nodeLookup:f,panZoom:h,fitViewOptions:p,fitViewResolver:m,width:w,height:x,minZoom:v,maxZoom:g}=c();h&&(await xh({nodes:f,width:w,height:x,panZoom:h,minZoom:v,maxZoom:g},p),m==null||m.resolve(!0),d({fitViewResolver:null}))}return{...uo({nodes:e,edges:t,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:h,parentLookup:p,nodeOrigin:m,elevateNodesOnSelect:w,fitViewQueued:x}=c(),v=jr(f,h,p,{nodeOrigin:m,nodeExtent:l,elevateNodesOnSelect:w,checkEquality:!0});x&&v?(u(),d({nodes:f,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:f})},setEdges:f=>{const{connectionLookup:h,edgeLookup:p}=c();sa(h,p,f),d({edges:f})},setDefaultNodesAndEdges:(f,h)=>{if(f){const{setNodes:p}=c();p(f),d({hasDefaultNodes:!0})}if(h){const{setEdges:p}=c();p(h),d({hasDefaultEdges:!0})}},updateNodeInternals:f=>{const{triggerNodeChanges:h,nodeLookup:p,parentLookup:m,domNode:w,nodeOrigin:x,nodeExtent:v,debug:g,fitViewQueued:y}=c(),{changes:N,updatedInternals:M}=Lh(f,p,m,w,x,v);M&&(Oh(p,m,{nodeOrigin:x,nodeExtent:v}),y?(u(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),(N==null?void 0:N.length)>0&&(g&&console.log("React Flow: trigger node changes",N),h==null||h(N)))},updateNodePositions:(f,h=!1)=>{const p=[],m=[],{nodeLookup:w,triggerNodeChanges:x}=c();for(const[v,g]of f){const y=w.get(v),N=!!(y!=null&&y.expandParent&&(y!=null&&y.parentId)&&(g!=null&&g.position)),M={id:v,type:"position",position:N?{x:Math.max(0,g.position.x),y:Math.max(0,g.position.y)}:g.position,dragging:h};N&&y.parentId&&p.push({id:v,parentId:y.parentId,rect:{...g.internals.positionAbsolute,width:g.measured.width??0,height:g.measured.height??0}}),m.push(M)}if(p.length>0){const{parentLookup:v,nodeOrigin:g}=c(),y=Zr(p,w,v,g);m.push(...y)}x(m)},triggerNodeChanges:f=>{const{onNodesChange:h,setNodes:p,nodes:m,hasDefaultNodes:w,debug:x}=c();if(f!=null&&f.length){if(w){const v=ba(f,m);p(v)}x&&console.log("React Flow: trigger node changes",f),h==null||h(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:h,setEdges:p,edges:m,hasDefaultEdges:w,debug:x}=c();if(f!=null&&f.length){if(w){const v=_a(f,m);p(v)}x&&console.log("React Flow: trigger edge changes",f),h==null||h(f)}},addSelectedNodes:f=>{const{multiSelectionActive:h,edgeLookup:p,nodeLookup:m,triggerNodeChanges:w,triggerEdgeChanges:x}=c();if(h){const v=f.map(g=>Re(g,!0));w(v);return}w(Ve(m,new Set([...f]),!0)),x(Ve(p))},addSelectedEdges:f=>{const{multiSelectionActive:h,edgeLookup:p,nodeLookup:m,triggerNodeChanges:w,triggerEdgeChanges:x}=c();if(h){const v=f.map(g=>Re(g,!0));x(v);return}x(Ve(p,new Set([...f]))),w(Ve(m,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:h}={})=>{const{edges:p,nodes:m,nodeLookup:w,triggerNodeChanges:x,triggerEdgeChanges:v}=c(),g=f||m,y=h||p,N=g.map(S=>{const _=w.get(S.id);return _&&(_.selected=!1),Re(S.id,!1)}),M=y.map(S=>Re(S.id,!1));x(N),v(M)},setMinZoom:f=>{const{panZoom:h,maxZoom:p}=c();h==null||h.setScaleExtent([f,p]),d({minZoom:f})},setMaxZoom:f=>{const{panZoom:h,minZoom:p}=c();h==null||h.setScaleExtent([p,f]),d({maxZoom:f})},setTranslateExtent:f=>{var h;(h=c().panZoom)==null||h.setTranslateExtent(f),d({translateExtent:f})},setPaneClickDistance:f=>{var h;(h=c().panZoom)==null||h.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:h,triggerNodeChanges:p,triggerEdgeChanges:m}=c(),w=h.reduce((v,g)=>g.selected?[...v,Re(g.id,!1)]:v,[]),x=f.reduce((v,g)=>g.selected?[...v,Re(g.id,!1)]:v,[]);p(w),m(x)},setNodeExtent:f=>{const{nodes:h,nodeLookup:p,parentLookup:m,nodeOrigin:w,elevateNodesOnSelect:x,nodeExtent:v}=c();f[0][0]===v[0][0]&&f[0][1]===v[0][1]&&f[1][0]===v[1][0]&&f[1][1]===v[1][1]||(jr(h,p,m,{nodeOrigin:w,nodeExtent:f,elevateNodesOnSelect:x,checkEquality:!1}),d({nodeExtent:f}))},panBy:f=>{const{transform:h,width:p,height:m,panZoom:w,translateExtent:x}=c();return Dh({delta:f,panZoom:w,transform:h,translateExtent:x,width:p,height:m})},cancelConnection:()=>{d({connection:{...Bs}})},updateConnection:f=>{d({connection:f})},reset:()=>d({...uo()})}},Object.is);function Xa({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:a,nodeExtent:l,children:d}){const[c]=z.useState(()=>Wg({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}));return C.jsx(pp,{value:c,children:C.jsx(Lp,{children:d})})}function Ug({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,nodeOrigin:l,nodeExtent:d}){return z.useContext(fn)?C.jsx(C.Fragment,{children:e}):C.jsx(Xa,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,nodeOrigin:l,nodeExtent:d,children:e})}const Kg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Qg({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:d,onMove:c,onMoveStart:u,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:v,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:N,onNodeDoubleClick:M,onNodeDragStart:S,onNodeDrag:_,onNodeDragStop:E,onNodesDelete:k,onEdgesDelete:A,onDelete:I,onSelectionChange:D,onSelectionDragStart:b,onSelectionDrag:R,onSelectionDragStop:T,onSelectionContextMenu:O,onSelectionStart:H,onSelectionEnd:P,onBeforeDelete:B,connectionMode:q,connectionLineType:Y=Ie.Bezier,connectionLineStyle:$,connectionLineComponent:j,connectionLineContainerStyle:L,deleteKeyCode:V="Backspace",selectionKeyCode:F="Shift",selectionOnDrag:G=!1,selectionMode:X=wt.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:K=Jt()?"Meta":"Control",zoomActivationKeyCode:W=Jt()?"Meta":"Control",snapToGrid:Q,snapGrid:J,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ce,nodesDraggable:ze,nodesConnectable:mn,nodesFocusable:yn,nodeOrigin:et=wa,edgesFocusable:xn,edgesReconnectable:tt,elementsSelectable:nt=!0,defaultViewport:wn=Sp,minZoom:rt=.5,maxZoom:it=2,translateExtent:At=xt,preventScrolling:rc=!0,nodeExtent:vn,defaultMarkerColor:ic="#b1b1b7",zoomOnScroll:oc=!0,zoomOnPinch:sc=!0,panOnScroll:ac=!1,panOnScrollSpeed:cc=.5,panOnScrollMode:lc=Pe.Free,zoomOnDoubleClick:uc=!0,panOnDrag:dc=!0,onPaneClick:fc,onPaneMouseEnter:hc,onPaneMouseMove:pc,onPaneMouseLeave:gc,onPaneScroll:mc,onPaneContextMenu:yc,paneClickDistance:ri=0,nodeClickDistance:xc=0,children:wc,onReconnect:vc,onReconnectStart:bc,onReconnectEnd:_c,onEdgeContextMenu:Ec,onEdgeDoubleClick:Nc,onEdgeMouseEnter:kc,onEdgeMouseMove:Cc,onEdgeMouseLeave:Sc,reconnectRadius:Mc=10,onNodesChange:Ic,onEdgesChange:Ac,noDragClassName:Tc="nodrag",noWheelClassName:Rc="nowheel",noPanClassName:ii="nopan",fitView:oi,fitViewOptions:$c,connectOnClick:Oc,attributionPosition:Pc,proOptions:jc,defaultEdgeOptions:Lc,elevateNodesOnSelect:Dc,elevateEdgesOnSelect:zc,disableKeyboardA11y:si=!1,autoPanOnConnect:Hc,autoPanOnNodeDrag:Bc,autoPanSpeed:Vc,connectionRadius:Fc,isValidConnection:qc,onError:Yc,style:Gc,id:ai,nodeDragThreshold:Xc,viewport:Wc,onViewportChange:Uc,width:Kc,height:Qc,colorMode:Zc="light",debug:Jc,onScroll:Tt,...el},tl){const bn=ai||"1",nl=Tp(Zc),rl=z.useCallback(ci=>{ci.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Tt==null||Tt(ci)},[Tt]);return C.jsx("div",{"data-testid":"rf__wrapper",...el,onScroll:rl,style:{...Gc,...Kg},ref:tl,className:se(["react-flow",i,nl]),id:ai,children:C.jsxs(Ug,{nodes:e,edges:t,width:Kc,height:Qc,fitView:oi,nodeOrigin:et,nodeExtent:vn,children:[C.jsx(Xg,{onInit:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:N,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:Y,connectionLineStyle:$,connectionLineComponent:j,connectionLineContainerStyle:L,selectionKeyCode:F,selectionOnDrag:G,selectionMode:X,deleteKeyCode:V,multiSelectionKeyCode:K,panActivationKeyCode:Z,zoomActivationKeyCode:W,onlyRenderVisibleElements:re,defaultViewport:wn,translateExtent:At,minZoom:rt,maxZoom:it,preventScrolling:rc,zoomOnScroll:oc,zoomOnPinch:sc,zoomOnDoubleClick:uc,panOnScroll:ac,panOnScrollSpeed:cc,panOnScrollMode:lc,panOnDrag:dc,onPaneClick:fc,onPaneMouseEnter:hc,onPaneMouseMove:pc,onPaneMouseLeave:gc,onPaneScroll:mc,onPaneContextMenu:yc,paneClickDistance:ri,nodeClickDistance:xc,onSelectionContextMenu:O,onSelectionStart:H,onSelectionEnd:P,onReconnect:vc,onReconnectStart:bc,onReconnectEnd:_c,onEdgeContextMenu:Ec,onEdgeDoubleClick:Nc,onEdgeMouseEnter:kc,onEdgeMouseMove:Cc,onEdgeMouseLeave:Sc,reconnectRadius:Mc,defaultMarkerColor:ic,noDragClassName:Tc,noWheelClassName:Rc,noPanClassName:ii,rfId:bn,disableKeyboardA11y:si,nodeExtent:vn,viewport:Wc,onViewportChange:Uc}),C.jsx(Ap,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:ze,nodesConnectable:mn,nodesFocusable:yn,edgesFocusable:xn,edgesReconnectable:tt,elementsSelectable:nt,elevateNodesOnSelect:Dc,elevateEdgesOnSelect:zc,minZoom:rt,maxZoom:it,nodeExtent:vn,onNodesChange:Ic,onEdgesChange:Ac,snapToGrid:Q,snapGrid:J,connectionMode:q,translateExtent:At,connectOnClick:Oc,defaultEdgeOptions:Lc,fitView:oi,fitViewOptions:$c,onNodesDelete:k,onEdgesDelete:A,onDelete:I,onNodeDragStart:S,onNodeDrag:_,onNodeDragStop:E,onSelectionDrag:R,onSelectionDragStart:b,onSelectionDragStop:T,onMove:c,onMoveStart:u,onMoveEnd:f,noPanClassName:ii,nodeOrigin:et,rfId:bn,autoPanOnConnect:Hc,autoPanOnNodeDrag:Bc,autoPanSpeed:Vc,onError:Yc,connectionRadius:Fc,isValidConnection:qc,selectNodesOnDrag:ce,nodeDragThreshold:Xc,onBeforeDelete:B,paneClickDistance:ri,debug:Jc}),C.jsx(Cp,{onSelectionChange:D}),wc,C.jsx(bp,{proOptions:jc,position:Pc}),C.jsx(wp,{rfId:bn,disableKeyboardA11y:si})]})})}var Zg=Ea(Qg);function Jg({dimensions:e,lineWidth:t,variant:n,className:r}){return C.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:se(["react-flow__background-pattern",n,r])})}function e0({radius:e,className:t}){return C.jsx("circle",{cx:e,cy:e,r:e,className:se(["react-flow__background-pattern","dots",t])})}var Ae;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ae||(Ae={}));const t0={[Ae.Dots]:1,[Ae.Lines]:1,[Ae.Cross]:6},n0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Wa({id:e,variant:t=Ae.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:d,patternClassName:c}){const u=z.useRef(null),{transform:f,patternId:h}=ee(n0,ne),p=r||t0[t],m=t===Ae.Dots,w=t===Ae.Cross,x=Array.isArray(n)?n:[n,n],v=[x[0]*f[2]||1,x[1]*f[2]||1],g=p*f[2],y=Array.isArray(s)?s:[s,s],N=w?[g,g]:v,M=[y[0]*f[2]||1+N[0]/2,y[1]*f[2]||1+N[1]/2],S=`${h}${e||""}`;return C.jsxs("svg",{className:se(["react-flow__background",d]),style:{...l,...pn,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:u,"data-testid":"rf__background",children:[C.jsx("pattern",{id:S,x:f[0]%v[0],y:f[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:m?C.jsx(e0,{radius:g/2,className:c}):C.jsx(Jg,{dimensions:N,lineWidth:i,variant:t,className:c})}),C.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}Wa.displayName="Background";const r0=z.memo(Wa);function i0(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:C.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function o0(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:C.jsx("path",{d:"M0 0h32v4.2H0z"})})}function s0(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:C.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function a0(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:C.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function c0(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:C.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ht({children:e,className:t,...n}){return C.jsx("button",{type:"button",className:se(["react-flow__controls-button",t]),...n,children:e})}const l0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Ua({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:d,children:c,position:u="bottom-left",orientation:f="vertical","aria-label":h="React Flow controls"}){const p=te(),{isInteractive:m,minZoomReached:w,maxZoomReached:x}=ee(l0,ne),{zoomIn:v,zoomOut:g,fitView:y}=hn(),N=()=>{v(),s==null||s()},M=()=>{g(),o==null||o()},S=()=>{y(i),a==null||a()},_=()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)},E=f==="horizontal"?"horizontal":"vertical";return C.jsxs(It,{className:se(["react-flow__controls",E,d]),position:u,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&C.jsxs(C.Fragment,{children:[C.jsx(Ht,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:C.jsx(i0,{})}),C.jsx(Ht,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:C.jsx(o0,{})})]}),n&&C.jsx(Ht,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:C.jsx(s0,{})}),r&&C.jsx(Ht,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?C.jsx(c0,{}):C.jsx(a0,{})}),c]})}Ua.displayName="Controls";z.memo(Ua);function u0({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:d,borderRadius:c,shapeRendering:u,selected:f,onClick:h}){const{background:p,backgroundColor:m}=s||{},w=o||p||m;return C.jsx("rect",{className:se(["react-flow__minimap-node",{selected:f},d]),x:t,y:n,rx:c,ry:c,width:r,height:i,style:{fill:w,stroke:a,strokeWidth:l},shapeRendering:u,onClick:h?x=>h(x,e):void 0})}const d0=z.memo(u0),f0=e=>e.nodes.map(t=>t.id),Tn=e=>e instanceof Function?e:()=>e;function h0({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=d0,onClick:o}){const a=ee(f0,ne),l=Tn(t),d=Tn(e),c=Tn(n),u=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return C.jsx(C.Fragment,{children:a.map(f=>C.jsx(g0,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:d,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:u},f))})}function p0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:d,x:c,y:u,width:f,height:h}=ee(p=>{const{internals:m}=p.nodeLookup.get(e),w=m.userNode,{x,y:v}=m.positionAbsolute,{width:g,height:y}=ke(w);return{node:w,x,y:v,width:g,height:y}},ne);return!d||d.hidden||!Us(d)?null:C.jsx(a,{x:c,y:u,width:f,height:h,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:l,id:d.id})}const g0=z.memo(p0);var m0=z.memo(h0);const y0=200,x0=150,w0=e=>!e.hidden,v0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ws(St(e.nodeLookup,{filter:w0}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},b0="react-flow__minimap-desc";function Ka({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:d,maskStrokeColor:c,maskStrokeWidth:u,position:f="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:w=!1,ariaLabel:x="React Flow mini map",inversePan:v,zoomStep:g=10,offsetScale:y=5}){const N=te(),M=z.useRef(null),{boundingRect:S,viewBB:_,rfId:E,panZoom:k,translateExtent:A,flowWidth:I,flowHeight:D}=ee(v0,ne),b=(e==null?void 0:e.width)??y0,R=(e==null?void 0:e.height)??x0,T=S.width/b,O=S.height/R,H=Math.max(T,O),P=H*b,B=H*R,q=y*H,Y=S.x-(P-S.width)/2-q,$=S.y-(B-S.height)/2-q,j=P+q*2,L=B+q*2,V=`${b0}-${E}`,F=z.useRef(0),G=z.useRef();F.current=H,z.useEffect(()=>{if(M.current&&k)return G.current=Gh({domNode:M.current,panZoom:k,getTransform:()=>N.getState().transform,getViewScale:()=>F.current}),()=>{var K;(K=G.current)==null||K.destroy()}},[k]),z.useEffect(()=>{var K;(K=G.current)==null||K.update({translateExtent:A,width:I,height:D,inversePan:v,pannable:m,zoomStep:g,zoomable:w})},[m,w,v,g,A,I,D]);const X=h?K=>{var J;const[W,Q]=((J=G.current)==null?void 0:J.pointer(K))||[0,0];h(K,{x:W,y:Q})}:void 0,Z=p?z.useCallback((K,W)=>{const Q=N.getState().nodeLookup.get(W).internals.userNode;p(K,Q)},[]):void 0;return C.jsx(It,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof u=="number"?u*H:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:se(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:C.jsxs("svg",{width:b,height:R,viewBox:`${Y} ${$} ${j} ${L}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":V,ref:M,onClick:X,children:[x&&C.jsx("title",{id:V,children:x}),C.jsx(m0,{onClick:Z,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),C.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-q},${$-q}h${j+q*2}v${L+q*2}h${-j-q*2}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ka.displayName="MiniMap";z.memo(Ka);function _0({nodeId:e,position:t,variant:n=ft.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:d=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:h,onResize:p,onResizeEnd:m}){const w=Sa(),x=typeof e=="string"?e:w,v=te(),g=z.useRef(null),y=n===ft.Line?"right":"bottom-right",N=t??y,M=z.useRef(null);z.useEffect(()=>{if(!(!g.current||!x))return M.current||(M.current=ap({domNode:g.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:k,transform:A,snapGrid:I,snapToGrid:D,nodeOrigin:b,domNode:R}=v.getState();return{nodeLookup:k,transform:A,snapGrid:I,snapToGrid:D,nodeOrigin:b,paneDomNode:R}},onChange:(k,A)=>{const{triggerNodeChanges:I,nodeLookup:D,parentLookup:b,nodeOrigin:R}=v.getState(),T=[],O={x:k.x,y:k.y},H=D.get(x);if(H&&H.expandParent&&H.parentId){const P=H.origin??R,B=k.width??H.measured.width??0,q=k.height??H.measured.height??0,Y={id:H.id,parentId:H.parentId,rect:{width:B,height:q,...Ks({x:k.x??H.position.x,y:k.y??H.position.y},{width:B,height:q},H.parentId,D,P)}},$=Zr([Y],D,b,R);T.push(...$),O.x=k.x?Math.max(P[0]*B,k.x):void 0,O.y=k.y?Math.max(P[1]*q,k.y):void 0}if(O.x!==void 0&&O.y!==void 0){const P={id:x,type:"position",position:{...O}};T.push(P)}if(k.width!==void 0&&k.height!==void 0){const P={id:x,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:k.width,height:k.height}};T.push(P)}for(const P of A){const B={...P,type:"position"};T.push(B)}I(T)},onEnd:({width:k,height:A})=>{const I={id:x,type:"dimensions",resizing:!1,dimensions:{width:k,height:A}};v.getState().triggerNodeChanges([I])}})),M.current.update({controlPosition:N,boundaries:{minWidth:a,minHeight:l,maxWidth:d,maxHeight:c},keepAspectRatio:u,onResizeStart:h,onResize:p,onResizeEnd:m,shouldResize:f}),()=>{var k;(k=M.current)==null||k.destroy()}},[N,a,l,d,c,u,h,p,m,f]);const S=N.split("-"),_=n===ft.Line?"borderColor":"backgroundColor",E=o?{...i,[_]:o}:i;return C.jsx("div",{className:se(["react-flow__resize-control","nodrag",...S,n,r]),ref:g,style:E,children:s})}z.memo(_0);const E0=Je(C.jsx("path",{d:"M20 10h-7.01V8.21c0-.45-.54-.67-.85-.35l-2.78 2.79c-.19.2-.19.51 0 .71l2.78 2.79c.31.32.85.09.85-.35V12H20v5H4V5h16v2c0 .55.45 1 1 1s1-.45 1-1V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v1c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-1h4c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2"})),N0=Je(C.jsx("path",{d:"M3 22c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1s1 .45 1 1v18c0 .55-.45 1-1 1M20.5 7h-13C6.67 7 6 7.67 6 8.5S6.67 10 7.5 10h13c.83 0 1.5-.67 1.5-1.5S21.33 7 20.5 7m-6 7h-7c-.83 0-1.5.67-1.5 1.5S6.67 17 7.5 17h7c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5"})),k0=Je(C.jsx("path",{d:"M22 3c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1s.45-1 1-1h18c.55 0 1 .45 1 1M8.5 22c.83 0 1.5-.67 1.5-1.5v-13C10 6.67 9.33 6 8.5 6S7 6.67 7 7.5v13c0 .83.67 1.5 1.5 1.5m7-6c.83 0 1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5S14 6.67 14 7.5v7c0 .83.67 1.5 1.5 1.5"})),C0=Je(C.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m-8 7c-.55 0-1 .45-1 1v3c0 1.1.9 2 2 2h3c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1-.45-1-1v-2c0-.55-.45-1-1-1m1-9c0-.55.45-1 1-1h2c.55 0 1-.45 1-1s-.45-1-1-1H5c-1.1 0-2 .9-2 2v3c0 .55.45 1 1 1s1-.45 1-1zm14-3h-3c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1 .45 1 1v2c0 .55.45 1 1 1s1-.45 1-1V5c0-1.1-.9-2-2-2m0 15c0 .55-.45 1-1 1h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c1.1 0 2-.9 2-2v-3c0-.55-.45-1-1-1s-1 .45-1 1z"})),zr=1.5,Ze=1,ei=.5,ti=1.5,fo=({sx:e,...t})=>C.jsx(ae,{sx:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:ti*1.5,...e},...t}),ho=({sx:e,...t})=>C.jsx(ae,{sx:{position:"absolute",inset:0,pointerEvents:"none",bgcolor:"primary.main",...e},...t}),S0=z.memo(({tableName:e,tableType:t,hueIndex:n})=>C.jsxs(ae,{sx:{position:"relative",borderRadius:ti,borderBottomLeftRadius:0,borderBottomRightRadius:0,overflow:"hidden",p:zr,py:Ze},children:[C.jsx(ho,{sx:{filter:`hue-rotate(${n*20}deg)`,opacity:.35}}),C.jsxs(ae,{sx:{display:"flex",alignItems:"flex-end",gap:Ze,position:"relative"},children:[C.jsx(_l,{sx:{color:"text.primary",fontSize:"1.2rem"}}),C.jsx(ye,{variant:"body1",component:"h6",sx:{lineHeight:1,...Fe},children:e}),C.jsx(ae,{sx:{flexGrow:1}}),C.jsx(ye,{variant:"caption",sx:{lineHeight:1,alignSelf:"center",p:ei,bgcolor:"background.paper",borderRadius:1,textTransform:"uppercase"},children:t})]}),C.jsx(ho,{sx:{filter:`hue-rotate(${n*20}deg)`,opacity:.35}})]})),M0=z.memo(()=>C.jsxs(ae,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",gap:Ze,p:Ze,my:ei},children:[C.jsx(ye,{variant:"body2",sx:{...Fe,opacity:.85},children:"名稱"}),C.jsxs(ae,{sx:{display:"flex",alignItems:"center"},children:[C.jsx(ye,{variant:"body2",sx:{opacity:.85,width:"5rem",textAlign:"end",...Fe},children:"型別"}),C.jsx(ye,{variant:"body2",sx:{opacity:.85,width:"3rem",textAlign:"end",...Fe},children:"空值"})]}),C.jsx(ae,{sx:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:1,bgcolor:"divider",opacity:.5}})]})),po={color:"text.secondary",opacity:.85,textAlign:"end",...Fe},I0=z.memo(({fieldName:e,fieldType:t,nullable:n})=>C.jsxs(C.Fragment,{children:[C.jsx(ye,{variant:"body2",sx:{...Fe,opacity:.85},children:e}),C.jsxs(ae,{sx:{display:"flex",alignItems:"center"},children:[C.jsx(ye,{variant:"caption",sx:{textTransform:"uppercase",width:"5rem",...po},children:t}),C.jsx(ye,{variant:"caption",sx:{width:"3rem",...po},children:{yes:"可",no:"否",pk:"主鍵"}[n]})]})]})),A0=({selected:e,data:t})=>C.jsxs(ae,{sx:{cursor:"move",width:300,p:ei,borderRadius:ti*1.5,bgcolor:"background.paper"},children:[C.jsx(fo,{sx:{boxShadow:2,opacity:.35}}),C.jsx(fo,{sx:{outline:e?2:1,outlineColor:e?"primary.main":"divider",filter:`hue-rotate(${t.hueIndex*20}deg)`,opacity:.85}}),C.jsx(S0,{tableName:t.tableName,tableType:t.tableType,hueIndex:t.hueIndex}),C.jsx(M0,{}),C.jsx(Cl,{sx:{gap:zr,alignItems:"stretch",p:zr,pt:Ze},children:t.fields.map(({fieldName:n,fieldType:r,nullable:i,isSource:s,isTarget:o},a)=>C.jsxs(ae,{sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",gap:Ze},children:[C.jsx(I0,{fieldName:n,fieldType:r,nullable:i}),o&&C.jsx(je,{id:n,type:"target",position:U.Left,style:{marginLeft:`calc(var(--mui-spacing) * ${-1.5})`,opacity:0,pointerEvents:"none"}}),o&&C.jsx(je,{id:n+"_self",type:"target",position:U.Right,style:{marginRight:`calc(var(--mui-spacing) * ${-1.5})`,opacity:0,pointerEvents:"none"}}),s&&C.jsx(je,{id:n,type:"source",position:U.Right,style:{marginRight:"calc(var(--mui-spacing) * -2)",width:`calc(var(--mui-spacing) * ${1.5})`,height:"auto",aspectRatio:"1/1",background:"var(--mui-palette-background-paper)",border:"1px solid var(--mui-palette-divider)",boxShadow:"var(--mui-shadows-1)",pointerEvents:"none"}})]},a))})]});var Rn,go;function ni(){if(go)return Rn;go=1;var e="\0",t="\0",n="";class r{constructor(c){ie(this,"_isDirected",!0);ie(this,"_isMultigraph",!1);ie(this,"_isCompound",!1);ie(this,"_label");ie(this,"_defaultNodeLabelFn",()=>{});ie(this,"_defaultEdgeLabelFn",()=>{});ie(this,"_nodes",{});ie(this,"_in",{});ie(this,"_preds",{});ie(this,"_out",{});ie(this,"_sucs",{});ie(this,"_edgeObjs",{});ie(this,"_edgeLabels",{});ie(this,"_nodeCount",0);ie(this,"_edgeCount",0);ie(this,"_parent");ie(this,"_children");c&&(this._isDirected=Object.hasOwn(c,"directed")?c.directed:!0,this._isMultigraph=Object.hasOwn(c,"multigraph")?c.multigraph:!1,this._isCompound=Object.hasOwn(c,"compound")?c.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(c){return this._label=c,this}graph(){return this._label}setDefaultNodeLabel(c){return this._defaultNodeLabelFn=c,typeof c!="function"&&(this._defaultNodeLabelFn=()=>c),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var c=this;return this.nodes().filter(u=>Object.keys(c._in[u]).length===0)}sinks(){var c=this;return this.nodes().filter(u=>Object.keys(c._out[u]).length===0)}setNodes(c,u){var f=arguments,h=this;return c.forEach(function(p){f.length>1?h.setNode(p,u):h.setNode(p)}),this}setNode(c,u){return Object.hasOwn(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=u),this):(this._nodes[c]=arguments.length>1?u:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)}node(c){return this._nodes[c]}hasNode(c){return Object.hasOwn(this._nodes,c)}removeNode(c){var u=this;if(Object.hasOwn(this._nodes,c)){var f=h=>u.removeEdge(u._edgeObjs[h]);delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],this.children(c).forEach(function(h){u.setParent(h)}),delete this._children[c]),Object.keys(this._in[c]).forEach(f),delete this._in[c],delete this._preds[c],Object.keys(this._out[c]).forEach(f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this}setParent(c,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u===void 0)u=t;else{u+="";for(var f=u;f!==void 0;f=this.parent(f))if(f===c)throw new Error("Setting "+u+" as parent of "+c+" would create a cycle");this.setNode(u)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=u,this._children[u][c]=!0,this}_removeFromParentsChildList(c){delete this._children[this._parent[c]][c]}parent(c){if(this._isCompound){var u=this._parent[c];if(u!==t)return u}}children(c=t){if(this._isCompound){var u=this._children[c];if(u)return Object.keys(u)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}}predecessors(c){var u=this._preds[c];if(u)return Object.keys(u)}successors(c){var u=this._sucs[c];if(u)return Object.keys(u)}neighbors(c){var u=this.predecessors(c);if(u){const h=new Set(u);for(var f of this.successors(c))h.add(f);return Array.from(h.values())}}isLeaf(c){var u;return this.isDirected()?u=this.successors(c):u=this.neighbors(c),u.length===0}filterNodes(c){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([m,w]){c(m)&&u.setNode(m,w)}),Object.values(this._edgeObjs).forEach(function(m){u.hasNode(m.v)&&u.hasNode(m.w)&&u.setEdge(m,f.edge(m))});var h={};function p(m){var w=f.parent(m);return w===void 0||u.hasNode(w)?(h[m]=w,w):w in h?h[w]:p(w)}return this._isCompound&&u.nodes().forEach(m=>u.setParent(m,p(m))),u}setDefaultEdgeLabel(c){return this._defaultEdgeLabelFn=c,typeof c!="function"&&(this._defaultEdgeLabelFn=()=>c),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(c,u){var f=this,h=arguments;return c.reduce(function(p,m){return h.length>1?f.setEdge(p,m,u):f.setEdge(p,m),m}),this}setEdge(){var c,u,f,h,p=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,u=m.w,f=m.name,arguments.length===2&&(h=arguments[1],p=!0)):(c=m,u=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),c=""+c,u=""+u,f!==void 0&&(f=""+f);var w=o(this._isDirected,c,u,f);if(Object.hasOwn(this._edgeLabels,w))return p&&(this._edgeLabels[w]=h),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(u),this._edgeLabels[w]=p?h:this._defaultEdgeLabelFn(c,u,f);var x=a(this._isDirected,c,u,f);return c=x.v,u=x.w,Object.freeze(x),this._edgeObjs[w]=x,i(this._preds[u],c),i(this._sucs[c],u),this._in[u][w]=x,this._out[c][w]=x,this._edgeCount++,this}edge(c,u,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,f);return this._edgeLabels[h]}edgeAsObj(){const c=this.edge(...arguments);return typeof c!="object"?{label:c}:c}hasEdge(c,u,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,f);return Object.hasOwn(this._edgeLabels,h)}removeEdge(c,u,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,u,f),p=this._edgeObjs[h];return p&&(c=p.v,u=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[u],c),s(this._sucs[c],u),delete this._in[u][h],delete this._out[c][h],this._edgeCount--),this}inEdges(c,u){var f=this._in[c];if(f){var h=Object.values(f);return u?h.filter(p=>p.v===u):h}}outEdges(c,u){var f=this._out[c];if(f){var h=Object.values(f);return u?h.filter(p=>p.w===u):h}}nodeEdges(c,u){var f=this.inEdges(c,u);if(f)return f.concat(this.outEdges(c,u))}}function i(d,c){d[c]?d[c]++:d[c]=1}function s(d,c){--d[c]||delete d[c]}function o(d,c,u,f){var h=""+c,p=""+u;if(!d&&h>p){var m=h;h=p,p=m}return h+n+p+n+(f===void 0?e:f)}function a(d,c,u,f){var h=""+c,p=""+u;if(!d&&h>p){var m=h;h=p,p=m}var w={v:h,w:p};return f&&(w.name=f),w}function l(d,c){return o(d,c.v,c.w,c.name)}return Rn=r,Rn}var $n,mo;function T0(){return mo||(mo=1,$n="2.2.4"),$n}var On,yo;function R0(){return yo||(yo=1,On={Graph:ni(),version:T0()}),On}var Pn,xo;function $0(){if(xo)return Pn;xo=1;var e=ni();Pn={write:t,read:i};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var a=s.node(o),l=s.parent(o),d={v:o};return a!==void 0&&(d.value=a),l!==void 0&&(d.parent=l),d})}function r(s){return s.edges().map(function(o){var a=s.edge(o),l={v:o.v,w:o.w};return o.name!==void 0&&(l.name=o.name),a!==void 0&&(l.value=a),l})}function i(s){var o=new e(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return Pn}var jn,wo;function O0(){if(wo)return jn;wo=1,jn=e;function e(t){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),t.successors(o).forEach(s),t.predecessors(o).forEach(s))}return t.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return jn}var Ln,vo;function Qa(){if(vo)return Ln;vo=1;class e{constructor(){ie(this,"_arr",[]);ie(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r}}return Ln=e,Ln}var Dn,bo;function Za(){if(bo)return Dn;bo=1;var e=Qa();Dn=n;var t=()=>1;function n(i,s,o,a){return r(i,String(s),o||t,a||function(l){return i.outEdges(l)})}function r(i,s,o,a){var l={},d=new e,c,u,f=function(h){var p=h.v!==c?h.v:h.w,m=l[p],w=o(h),x=u.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+w);x<m.distance&&(m.distance=x,m.predecessor=c,d.decrease(p,x))};for(i.nodes().forEach(function(h){var p=h===s?0:Number.POSITIVE_INFINITY;l[h]={distance:p},d.add(h,p)});d.size()>0&&(c=d.removeMin(),u=l[c],u.distance!==Number.POSITIVE_INFINITY);)a(c).forEach(f);return l}return Dn}var zn,_o;function P0(){if(_o)return zn;_o=1;var e=Za();zn=t;function t(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=e(n,o,r,i),s},{})}return zn}var Hn,Eo;function Ja(){if(Eo)return Hn;Eo=1,Hn=e;function e(t){var n=0,r=[],i={},s=[];function o(a){var l=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),t.successors(a).forEach(function(u){Object.hasOwn(i,u)?i[u].onStack&&(l.lowlink=Math.min(l.lowlink,i[u].index)):(o(u),l.lowlink=Math.min(l.lowlink,i[u].lowlink))}),l.lowlink===l.index){var d=[],c;do c=r.pop(),i[c].onStack=!1,d.push(c);while(a!==c);s.push(d)}}return t.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return Hn}var Bn,No;function j0(){if(No)return Bn;No=1;var e=Ja();Bn=t;function t(n){return e(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return Bn}var Vn,ko;function L0(){if(ko)return Vn;ko=1,Vn=t;var e=()=>1;function t(r,i,s){return n(r,i||e,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},a=r.nodes();return a.forEach(function(l){o[l]={},o[l][l]={distance:0},a.forEach(function(d){l!==d&&(o[l][d]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(d){var c=d.v===l?d.w:d.v,u=i(d);o[l][c]={distance:u,predecessor:l}})}),a.forEach(function(l){var d=o[l];a.forEach(function(c){var u=o[c];a.forEach(function(f){var h=u[l],p=d[f],m=u[f],w=h.distance+p.distance;w<m.distance&&(m.distance=w,m.predecessor=p.predecessor)})})}),o}return Vn}var Fn,Co;function ec(){if(Co)return Fn;Co=1;function e(n){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new t;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,n.predecessors(a).forEach(o),delete i[a],s.push(a))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new t;return s}class t extends Error{constructor(){super(...arguments)}}return Fn=e,e.CycleException=t,Fn}var qn,So;function D0(){if(So)return qn;So=1;var e=ec();qn=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return qn}var Yn,Mo;function tc(){if(Mo)return Yn;Mo=1,Yn=e;function e(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?u=>i.successors(u):u=>i.neighbors(u),l=o==="post"?t:n,d=[],c={};return s.forEach(u=>{if(!i.hasNode(u))throw new Error("Graph does not have node: "+u);l(u,a,c,d)}),d}function t(i,s,o,a){for(var l=[[i,!1]];l.length>0;){var d=l.pop();d[1]?a.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,l.push([d[0],!0]),r(s(d[0]),c=>l.push([c,!1])))}}function n(i,s,o,a){for(var l=[i];l.length>0;){var d=l.pop();Object.hasOwn(o,d)||(o[d]=!0,a.push(d),r(s(d),c=>l.push(c)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return Yn}var Gn,Io;function z0(){if(Io)return Gn;Io=1;var e=tc();Gn=t;function t(n,r){return e(n,r,"post")}return Gn}var Xn,Ao;function H0(){if(Ao)return Xn;Ao=1;var e=tc();Xn=t;function t(n,r){return e(n,r,"pre")}return Xn}var Wn,To;function B0(){if(To)return Wn;To=1;var e=ni(),t=Qa();Wn=n;function n(r,i){var s=new e,o={},a=new t,l;function d(u){var f=u.v===l?u.w:u.v,h=a.priority(f);if(h!==void 0){var p=i(u);p<h&&(o[f]=l,a.decrease(f,p))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(u){a.add(u,Number.POSITIVE_INFINITY),s.setNode(u)}),a.decrease(r.nodes()[0],0);for(var c=!1;a.size()>0;){if(l=a.removeMin(),Object.hasOwn(o,l))s.setEdge(l,o[l]);else{if(c)throw new Error("Input graph is not connected: "+r);c=!0}r.nodeEdges(l).forEach(d)}return s}return Wn}var Un,Ro;function V0(){return Ro||(Ro=1,Un={components:O0(),dijkstra:Za(),dijkstraAll:P0(),findCycles:j0(),floydWarshall:L0(),isAcyclic:D0(),postorder:z0(),preorder:H0(),prim:B0(),tarjan:Ja(),topsort:ec()}),Un}var Kn,$o;function ge(){if($o)return Kn;$o=1;var e=R0();return Kn={Graph:e.Graph,json:$0(),alg:V0(),version:e.version},Kn}var Qn,Oo;function F0(){if(Oo)return Qn;Oo=1;class e{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return t(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&t(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Qn=e,Qn}var Zn,Po;function q0(){if(Po)return Zn;Po=1;let e=ge().Graph,t=F0();Zn=r;let n=()=>1;function r(d,c){if(d.nodeCount()<=1)return[];let u=o(d,c||n);return i(u.graph,u.buckets,u.zeroIdx).flatMap(h=>d.outEdges(h.v,h.w))}function i(d,c,u){let f=[],h=c[c.length-1],p=c[0],m;for(;d.nodeCount();){for(;m=p.dequeue();)s(d,c,u,m);for(;m=h.dequeue();)s(d,c,u,m);if(d.nodeCount()){for(let w=c.length-2;w>0;--w)if(m=c[w].dequeue(),m){f=f.concat(s(d,c,u,m,!0));break}}}return f}function s(d,c,u,f,h){let p=h?[]:void 0;return d.inEdges(f.v).forEach(m=>{let w=d.edge(m),x=d.node(m.v);h&&p.push({v:m.v,w:m.w}),x.out-=w,a(c,u,x)}),d.outEdges(f.v).forEach(m=>{let w=d.edge(m),x=m.w,v=d.node(x);v.in-=w,a(c,u,v)}),d.removeNode(f.v),p}function o(d,c){let u=new e,f=0,h=0;d.nodes().forEach(w=>{u.setNode(w,{v:w,in:0,out:0})}),d.edges().forEach(w=>{let x=u.edge(w.v,w.w)||0,v=c(w),g=x+v;u.setEdge(w.v,w.w,g),h=Math.max(h,u.node(w.v).out+=v),f=Math.max(f,u.node(w.w).in+=v)});let p=l(h+f+3).map(()=>new t),m=f+1;return u.nodes().forEach(w=>{a(p,m,u.node(w))}),{graph:u,buckets:p,zeroIdx:m}}function a(d,c,u){u.out?u.in?d[u.out-u.in+c].enqueue(u):d[d.length-1].enqueue(u):d[0].enqueue(u)}function l(d){const c=[];for(let u=0;u<d;u++)c.push(u);return c}return Zn}var Jn,jo;function oe(){if(jo)return Jn;jo=1;let e=ge().Graph;Jn={addBorderNode:c,addDummyNode:t,applyWithChunking:h,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:M,maxRank:p,normalizeRanks:l,notime:x,partition:m,pick:N,predecessorWeights:s,range:y,removeEmptyRanks:d,simplify:n,successorWeights:i,time:w,uniqueId:g,zipObject:S};function t(_,E,k,A){let I;do I=g(A);while(_.hasNode(I));return k.dummy=E,_.setNode(I,k),I}function n(_){let E=new e().setGraph(_.graph());return _.nodes().forEach(k=>E.setNode(k,_.node(k))),_.edges().forEach(k=>{let A=E.edge(k.v,k.w)||{weight:0,minlen:1},I=_.edge(k);E.setEdge(k.v,k.w,{weight:A.weight+I.weight,minlen:Math.max(A.minlen,I.minlen)})}),E}function r(_){let E=new e({multigraph:_.isMultigraph()}).setGraph(_.graph());return _.nodes().forEach(k=>{_.children(k).length||E.setNode(k,_.node(k))}),_.edges().forEach(k=>{E.setEdge(k,_.edge(k))}),E}function i(_){let E=_.nodes().map(k=>{let A={};return _.outEdges(k).forEach(I=>{A[I.w]=(A[I.w]||0)+_.edge(I).weight}),A});return S(_.nodes(),E)}function s(_){let E=_.nodes().map(k=>{let A={};return _.inEdges(k).forEach(I=>{A[I.v]=(A[I.v]||0)+_.edge(I).weight}),A});return S(_.nodes(),E)}function o(_,E){let k=_.x,A=_.y,I=E.x-k,D=E.y-A,b=_.width/2,R=_.height/2;if(!I&&!D)throw new Error("Not possible to find intersection inside of the rectangle");let T,O;return Math.abs(D)*b>Math.abs(I)*R?(D<0&&(R=-R),T=R*I/D,O=R):(I<0&&(b=-b),T=b,O=b*D/I),{x:k+T,y:A+O}}function a(_){let E=y(p(_)+1).map(()=>[]);return _.nodes().forEach(k=>{let A=_.node(k),I=A.rank;I!==void 0&&(E[I][A.order]=k)}),E}function l(_){let E=_.nodes().map(A=>{let I=_.node(A).rank;return I===void 0?Number.MAX_VALUE:I}),k=h(Math.min,E);_.nodes().forEach(A=>{let I=_.node(A);Object.hasOwn(I,"rank")&&(I.rank-=k)})}function d(_){let E=_.nodes().map(b=>_.node(b).rank),k=h(Math.min,E),A=[];_.nodes().forEach(b=>{let R=_.node(b).rank-k;A[R]||(A[R]=[]),A[R].push(b)});let I=0,D=_.graph().nodeRankFactor;Array.from(A).forEach((b,R)=>{b===void 0&&R%D!==0?--I:b!==void 0&&I&&b.forEach(T=>_.node(T).rank+=I)})}function c(_,E,k,A){let I={width:0,height:0};return arguments.length>=4&&(I.rank=k,I.order=A),t(_,"border",I,E)}function u(_,E=f){const k=[];for(let A=0;A<_.length;A+=E){const I=_.slice(A,A+E);k.push(I)}return k}const f=65535;function h(_,E){if(E.length>f){const k=u(E);return _.apply(null,k.map(A=>_.apply(null,A)))}else return _.apply(null,E)}function p(_){const k=_.nodes().map(A=>{let I=_.node(A).rank;return I===void 0?Number.MIN_VALUE:I});return h(Math.max,k)}function m(_,E){let k={lhs:[],rhs:[]};return _.forEach(A=>{E(A)?k.lhs.push(A):k.rhs.push(A)}),k}function w(_,E){let k=Date.now();try{return E()}finally{console.log(_+" time: "+(Date.now()-k)+"ms")}}function x(_,E){return E()}let v=0;function g(_){var E=++v;return toString(_)+E}function y(_,E,k=1){E==null&&(E=_,_=0);let A=D=>D<E;k<0&&(A=D=>E<D);const I=[];for(let D=_;A(D);D+=k)I.push(D);return I}function N(_,E){const k={};for(const A of E)_[A]!==void 0&&(k[A]=_[A]);return k}function M(_,E){let k=E;return typeof E=="string"&&(k=A=>A[E]),Object.entries(_).reduce((A,[I,D])=>(A[I]=k(D,I),A),{})}function S(_,E){return _.reduce((k,A,I)=>(k[A]=E[I],k),{})}return Jn}var er,Lo;function Y0(){if(Lo)return er;Lo=1;let e=q0(),t=oe().uniqueId;er={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?e(s,a(s)):r(s)).forEach(l=>{let d=s.edge(l);s.removeEdge(l),d.forwardName=l.name,d.reversed=!0,s.setEdge(l.w,l.v,d,t("rev"))});function a(l){return d=>l.edge(d).weight}}function r(s){let o=[],a={},l={};function d(c){Object.hasOwn(l,c)||(l[c]=!0,a[c]=!0,s.outEdges(c).forEach(u=>{Object.hasOwn(a,u.w)?o.push(u):d(u.w)}),delete a[c])}return s.nodes().forEach(d),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let l=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,l)}})}return er}var tr,Do;function G0(){if(Do)return tr;Do=1;let e=oe();tr={run:t,undo:r};function t(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,a=i.node(o).rank,l=s.w,d=i.node(l).rank,c=s.name,u=i.edge(s),f=u.labelRank;if(d===a+1)return;i.removeEdge(s);let h,p,m;for(m=0,++a;a<d;++m,++a)u.points=[],p={width:0,height:0,edgeLabel:u,edgeObj:s,rank:a},h=e.addDummyNode(i,"edge",p,"_d"),a===f&&(p.width=u.width,p.height=u.height,p.dummy="edge-label",p.labelpos=u.labelpos),i.setEdge(o,h,{weight:u.weight},c),m===0&&i.graph().dummyChains.push(h),o=h;i.setEdge(o,l,{weight:u.weight},c)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,l;for(i.setEdge(o.edgeObj,a);o.dummy;)l=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=l,o=i.node(s)})}return tr}var nr,zo;function tn(){if(zo)return nr;zo=1;const{applyWithChunking:e}=oe();nr={longestPath:t,slack:n};function t(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let l=r.outEdges(o).map(c=>c==null?Number.POSITIVE_INFINITY:s(c.w)-r.edge(c).minlen);var d=e(Math.min,l);return d===Number.POSITIVE_INFINITY&&(d=0),a.rank=d}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return nr}var rr,Ho;function nc(){if(Ho)return rr;Ho=1;var e=ge().Graph,t=tn().slack;rr=n;function n(o){var a=new e({directed:!1}),l=o.nodes()[0],d=o.nodeCount();a.setNode(l,{});for(var c,u;r(a,o)<d;)c=i(a,o),u=a.hasNode(c.v)?t(o,c):-t(o,c),s(a,o,u);return a}function r(o,a){function l(d){a.nodeEdges(d).forEach(c=>{var u=c.v,f=d===u?c.w:u;!o.hasNode(f)&&!t(a,c)&&(o.setNode(f,{}),o.setEdge(d,f,{}),l(f))})}return o.nodes().forEach(l),o.nodeCount()}function i(o,a){return a.edges().reduce((d,c)=>{let u=Number.POSITIVE_INFINITY;return o.hasNode(c.v)!==o.hasNode(c.w)&&(u=t(a,c)),u<d[0]?[u,c]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,l){o.nodes().forEach(d=>a.node(d).rank+=l)}return rr}var ir,Bo;function X0(){if(Bo)return ir;Bo=1;var e=nc(),t=tn().slack,n=tn().longestPath,r=ge().alg.preorder,i=ge().alg.postorder,s=oe().simplify;ir=o,o.initLowLimValues=c,o.initCutValues=a,o.calcCutValue=d,o.leaveEdge=f,o.enterEdge=h,o.exchangeEdges=p;function o(v){v=s(v),n(v);var g=e(v);c(g),a(g,v);for(var y,N;y=f(g);)N=h(g,v,y),p(g,v,y,N)}function a(v,g){var y=i(v,v.nodes());y=y.slice(0,y.length-1),y.forEach(N=>l(v,g,N))}function l(v,g,y){var N=v.node(y),M=N.parent;v.edge(y,M).cutvalue=d(v,g,y)}function d(v,g,y){var N=v.node(y),M=N.parent,S=!0,_=g.edge(y,M),E=0;return _||(S=!1,_=g.edge(M,y)),E=_.weight,g.nodeEdges(y).forEach(k=>{var A=k.v===y,I=A?k.w:k.v;if(I!==M){var D=A===S,b=g.edge(k).weight;if(E+=D?b:-b,w(v,y,I)){var R=v.edge(y,I).cutvalue;E+=D?-R:R}}}),E}function c(v,g){arguments.length<2&&(g=v.nodes()[0]),u(v,{},1,g)}function u(v,g,y,N,M){var S=y,_=v.node(N);return g[N]=!0,v.neighbors(N).forEach(E=>{Object.hasOwn(g,E)||(y=u(v,g,y,E,N))}),_.low=S,_.lim=y++,M?_.parent=M:delete _.parent,y}function f(v){return v.edges().find(g=>v.edge(g).cutvalue<0)}function h(v,g,y){var N=y.v,M=y.w;g.hasEdge(N,M)||(N=y.w,M=y.v);var S=v.node(N),_=v.node(M),E=S,k=!1;S.lim>_.lim&&(E=_,k=!0);var A=g.edges().filter(I=>k===x(v,v.node(I.v),E)&&k!==x(v,v.node(I.w),E));return A.reduce((I,D)=>t(g,D)<t(g,I)?D:I)}function p(v,g,y,N){var M=y.v,S=y.w;v.removeEdge(M,S),v.setEdge(N.v,N.w,{}),c(v),a(v,g),m(v,g)}function m(v,g){var y=v.nodes().find(M=>!g.node(M).parent),N=r(v,y);N=N.slice(1),N.forEach(M=>{var S=v.node(M).parent,_=g.edge(M,S),E=!1;_||(_=g.edge(S,M),E=!0),g.node(M).rank=g.node(S).rank+(E?_.minlen:-_.minlen)})}function w(v,g,y){return v.hasEdge(g,y)}function x(v,g,y){return y.low<=g.lim&&g.lim<=y.lim}return ir}var or,Vo;function W0(){if(Vo)return or;Vo=1;var e=tn(),t=e.longestPath,n=nc(),r=X0();or=i;function i(l){switch(l.graph().ranker){case"network-simplex":a(l);break;case"tight-tree":o(l);break;case"longest-path":s(l);break;default:a(l)}}var s=t;function o(l){t(l),n(l)}function a(l){r(l)}return or}var sr,Fo;function U0(){if(Fo)return sr;Fo=1,sr=e;function e(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,l=t(r,i,a.v,a.w),d=l.path,c=l.lca,u=0,f=d[u],h=!0;for(;s!==a.w;){if(o=r.node(s),h){for(;(f=d[u])!==c&&r.node(f).maxRank<o.rank;)u++;f===c&&(h=!1)}if(!h){for(;u<d.length-1&&r.node(f=d[u+1]).minRank<=o.rank;)u++;f=d[u]}r.setParent(s,f),s=r.successors(s)[0]}})}function t(r,i,s,o){let a=[],l=[],d=Math.min(i[s].low,i[o].low),c=Math.max(i[s].lim,i[o].lim),u,f;u=s;do u=r.parent(u),a.push(u);while(u&&(i[u].low>d||c>i[u].lim));for(f=u,u=o;(u=r.parent(u))!==f;)l.push(u);return{path:a.concat(l.reverse()),lca:f}}function n(r){let i={},s=0;function o(a){let l=s;r.children(a).forEach(o),i[a]={low:l,lim:s++}}return r.children().forEach(o),i}return sr}var ar,qo;function K0(){if(qo)return ar;qo=1;let e=oe();ar={run:t,cleanup:s};function t(o){let a=e.addDummyNode(o,"root",{},"_root"),l=r(o),d=Object.values(l),c=e.applyWithChunking(Math.max,d)-1,u=2*c+1;o.graph().nestingRoot=a,o.edges().forEach(h=>o.edge(h).minlen*=u);let f=i(o)+1;o.children().forEach(h=>n(o,a,u,f,c,l,h)),o.graph().nodeRankFactor=u}function n(o,a,l,d,c,u,f){let h=o.children(f);if(!h.length){f!==a&&o.setEdge(a,f,{weight:0,minlen:l});return}let p=e.addBorderNode(o,"_bt"),m=e.addBorderNode(o,"_bb"),w=o.node(f);o.setParent(p,f),w.borderTop=p,o.setParent(m,f),w.borderBottom=m,h.forEach(x=>{n(o,a,l,d,c,u,x);let v=o.node(x),g=v.borderTop?v.borderTop:x,y=v.borderBottom?v.borderBottom:x,N=v.borderTop?d:2*d,M=g!==y?1:c-u[f]+1;o.setEdge(p,g,{weight:N,minlen:M,nestingEdge:!0}),o.setEdge(y,m,{weight:N,minlen:M,nestingEdge:!0})}),o.parent(f)||o.setEdge(a,p,{weight:0,minlen:c+u[f]})}function r(o){var a={};function l(d,c){var u=o.children(d);u&&u.length&&u.forEach(f=>l(f,c+1)),a[d]=c}return o.children().forEach(d=>l(d,1)),a}function i(o){return o.edges().reduce((a,l)=>a+o.edge(l).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(l=>{var d=o.edge(l);d.nestingEdge&&o.removeEdge(l)})}return ar}var cr,Yo;function Q0(){if(Yo)return cr;Yo=1;let e=oe();cr=t;function t(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let l=a.minRank,d=a.maxRank+1;l<d;++l)n(r,"borderLeft","_bl",s,a,l),n(r,"borderRight","_br",s,a,l)}}r.children().forEach(i)}function n(r,i,s,o,a,l){let d={width:0,height:0,rank:l,borderType:i},c=a[i][l-1],u=e.addDummyNode(r,"border",d,s);a[i][l]=u,r.setParent(u,o),c&&r.setEdge(c,u,{weight:1})}return cr}var lr,Go;function Z0(){if(Go)return lr;Go=1,lr={adjust:e,undo:t};function e(l){let d=l.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(l)}function t(l){let d=l.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&i(l),(d==="lr"||d==="rl")&&(o(l),n(l))}function n(l){l.nodes().forEach(d=>r(l.node(d))),l.edges().forEach(d=>r(l.edge(d)))}function r(l){let d=l.width;l.width=l.height,l.height=d}function i(l){l.nodes().forEach(d=>s(l.node(d))),l.edges().forEach(d=>{let c=l.edge(d);c.points.forEach(s),Object.hasOwn(c,"y")&&s(c)})}function s(l){l.y=-l.y}function o(l){l.nodes().forEach(d=>a(l.node(d))),l.edges().forEach(d=>{let c=l.edge(d);c.points.forEach(a),Object.hasOwn(c,"x")&&a(c)})}function a(l){let d=l.x;l.x=l.y,l.y=d}return lr}var ur,Xo;function J0(){if(Xo)return ur;Xo=1;let e=oe();ur=t;function t(n){let r={},i=n.nodes().filter(c=>!n.children(c).length),s=i.map(c=>n.node(c).rank),o=e.applyWithChunking(Math.max,s),a=e.range(o+1).map(()=>[]);function l(c){if(r[c])return;r[c]=!0;let u=n.node(c);a[u.rank].push(c),n.successors(c).forEach(l)}return i.sort((c,u)=>n.node(c).rank-n.node(u).rank).forEach(l),a}return ur}var dr,Wo;function em(){if(Wo)return dr;Wo=1;let e=oe().zipObject;dr=t;function t(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=e(s,s.map((f,h)=>h)),a=i.flatMap(f=>r.outEdges(f).map(h=>({pos:o[h.w],weight:r.edge(h).weight})).sort((h,p)=>h.pos-p.pos)),l=1;for(;l<s.length;)l<<=1;let d=2*l-1;l-=1;let c=new Array(d).fill(0),u=0;return a.forEach(f=>{let h=f.pos+l;c[h]+=f.weight;let p=0;for(;h>0;)h%2&&(p+=c[h+1]),h=h-1>>1,c[h]+=f.weight;u+=f.weight*p}),u}return dr}var fr,Uo;function tm(){if(Uo)return fr;Uo=1,fr=e;function e(t,n=[]){return n.map(r=>{let i=t.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let l=t.edge(a),d=t.node(a.v);return{sum:o.sum+l.weight*d.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return fr}var hr,Ko;function nm(){if(Ko)return hr;Ko=1;let e=oe();hr=t;function t(i,s){let o={};i.forEach((l,d)=>{let c=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:d};l.barycenter!==void 0&&(c.barycenter=l.barycenter,c.weight=l.weight)}),s.edges().forEach(l=>{let d=o[l.v],c=o[l.w];d!==void 0&&c!==void 0&&(c.indegree++,d.out.push(o[l.w]))});let a=Object.values(o).filter(l=>!l.indegree);return n(a)}function n(i){let s=[];function o(l){return d=>{d.merged||(d.barycenter===void 0||l.barycenter===void 0||d.barycenter>=l.barycenter)&&r(l,d)}}function a(l){return d=>{d.in.push(l),--d.indegree===0&&i.push(d)}}for(;i.length;){let l=i.pop();s.push(l),l.in.reverse().forEach(o(l)),l.out.forEach(a(l))}return s.filter(l=>!l.merged).map(l=>e.pick(l,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return hr}var pr,Qo;function rm(){if(Qo)return pr;Qo=1;let e=oe();pr=t;function t(i,s){let o=e.partition(i,p=>Object.hasOwn(p,"barycenter")),a=o.lhs,l=o.rhs.sort((p,m)=>m.i-p.i),d=[],c=0,u=0,f=0;a.sort(r(!!s)),f=n(d,l,f),a.forEach(p=>{f+=p.vs.length,d.push(p.vs),c+=p.barycenter*p.weight,u+=p.weight,f=n(d,l,f)});let h={vs:d.flat(!0)};return u&&(h.barycenter=c/u,h.weight=u),h}function n(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return pr}var gr,Zo;function im(){if(Zo)return gr;Zo=1;let e=tm(),t=nm(),n=rm();gr=r;function r(o,a,l,d){let c=o.children(a),u=o.node(a),f=u?u.borderLeft:void 0,h=u?u.borderRight:void 0,p={};f&&(c=c.filter(v=>v!==f&&v!==h));let m=e(o,c);m.forEach(v=>{if(o.children(v.v).length){let g=r(o,v.v,l,d);p[v.v]=g,Object.hasOwn(g,"barycenter")&&s(v,g)}});let w=t(m,l);i(w,p);let x=n(w,d);if(f&&(x.vs=[f,x.vs,h].flat(!0),o.predecessors(f).length)){let v=o.node(o.predecessors(f)[0]),g=o.node(o.predecessors(h)[0]);Object.hasOwn(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+v.order+g.order)/(x.weight+2),x.weight+=2}return x}function i(o,a){o.forEach(l=>{l.vs=l.vs.flatMap(d=>a[d]?a[d].vs:d)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return gr}var mr,Jo;function om(){if(Jo)return mr;Jo=1;let e=ge().Graph,t=oe();mr=n;function n(i,s,o){let a=r(i),l=new e({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(d=>i.node(d));return i.nodes().forEach(d=>{let c=i.node(d),u=i.parent(d);(c.rank===s||c.minRank<=s&&s<=c.maxRank)&&(l.setNode(d),l.setParent(d,u||a),i[o](d).forEach(f=>{let h=f.v===d?f.w:f.v,p=l.edge(h,d),m=p!==void 0?p.weight:0;l.setEdge(h,d,{weight:i.edge(f).weight+m})}),Object.hasOwn(c,"minRank")&&l.setNode(d,{borderLeft:c.borderLeft[s],borderRight:c.borderRight[s]}))}),l}function r(i){for(var s;i.hasNode(s=t.uniqueId("_root")););return s}return mr}var yr,es;function sm(){if(es)return yr;es=1,yr=e;function e(t,n,r){let i={},s;r.forEach(o=>{let a=t.parent(o),l,d;for(;a;){if(l=t.parent(a),l?(d=i[l],i[l]=a):(d=s,s=a),d&&d!==a){n.setEdge(d,a);return}a=l}})}return yr}var xr,ts;function am(){if(ts)return xr;ts=1;let e=J0(),t=em(),n=im(),r=om(),i=sm(),s=ge().Graph,o=oe();xr=a;function a(u,f){if(f&&typeof f.customOrder=="function"){f.customOrder(u,a);return}let h=o.maxRank(u),p=l(u,o.range(1,h+1),"inEdges"),m=l(u,o.range(h-1,-1,-1),"outEdges"),w=e(u);if(c(u,w),f&&f.disableOptimalOrderHeuristic)return;let x=Number.POSITIVE_INFINITY,v;for(let g=0,y=0;y<4;++g,++y){d(g%2?p:m,g%4>=2),w=o.buildLayerMatrix(u);let N=t(u,w);N<x&&(y=0,v=Object.assign({},w),x=N)}c(u,v)}function l(u,f,h){return f.map(function(p){return r(u,p,h)})}function d(u,f){let h=new s;u.forEach(function(p){let m=p.graph().root,w=n(p,m,h,f);w.vs.forEach((x,v)=>p.node(x).order=v),i(p,h,w.vs)})}function c(u,f){Object.values(f).forEach(h=>h.forEach((p,m)=>u.node(p).order=m))}return xr}var wr,ns;function cm(){if(ns)return wr;ns=1;let e=ge().Graph,t=oe();wr={positionX:h,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:l,alignCoordinates:u,findSmallestWidthAlignment:c,balance:f};function n(w,x){let v={};function g(y,N){let M=0,S=0,_=y.length,E=N[N.length-1];return N.forEach((k,A)=>{let I=i(w,k),D=I?w.node(I).order:_;(I||k===E)&&(N.slice(S,A+1).forEach(b=>{w.predecessors(b).forEach(R=>{let T=w.node(R),O=T.order;(O<M||D<O)&&!(T.dummy&&w.node(b).dummy)&&s(v,R,b)})}),S=A+1,M=D)}),N}return x.length&&x.reduce(g),v}function r(w,x){let v={};function g(N,M,S,_,E){let k;t.range(M,S).forEach(A=>{k=N[A],w.node(k).dummy&&w.predecessors(k).forEach(I=>{let D=w.node(I);D.dummy&&(D.order<_||D.order>E)&&s(v,I,k)})})}function y(N,M){let S=-1,_,E=0;return M.forEach((k,A)=>{if(w.node(k).dummy==="border"){let I=w.predecessors(k);I.length&&(_=w.node(I[0]).order,g(M,E,A,S,_),E=A,S=_)}g(M,E,M.length,_,N.length)}),M}return x.length&&x.reduce(y),v}function i(w,x){if(w.node(x).dummy)return w.predecessors(x).find(v=>w.node(v).dummy)}function s(w,x,v){if(x>v){let y=x;x=v,v=y}let g=w[x];g||(w[x]=g={}),g[v]=!0}function o(w,x,v){if(x>v){let g=x;x=v,v=g}return!!w[x]&&Object.hasOwn(w[x],v)}function a(w,x,v,g){let y={},N={},M={};return x.forEach(S=>{S.forEach((_,E)=>{y[_]=_,N[_]=_,M[_]=E})}),x.forEach(S=>{let _=-1;S.forEach(E=>{let k=g(E);if(k.length){k=k.sort((I,D)=>M[I]-M[D]);let A=(k.length-1)/2;for(let I=Math.floor(A),D=Math.ceil(A);I<=D;++I){let b=k[I];N[E]===E&&_<M[b]&&!o(v,E,b)&&(N[b]=E,N[E]=y[E]=y[b],_=M[b])}}})}),{root:y,align:N}}function l(w,x,v,g,y){let N={},M=d(w,x,v,y),S=y?"borderLeft":"borderRight";function _(A,I){let D=M.nodes(),b=D.pop(),R={};for(;b;)R[b]?A(b):(R[b]=!0,D.push(b),D=D.concat(I(b))),b=D.pop()}function E(A){N[A]=M.inEdges(A).reduce((I,D)=>Math.max(I,N[D.v]+M.edge(D)),0)}function k(A){let I=M.outEdges(A).reduce((b,R)=>Math.min(b,N[R.w]-M.edge(R)),Number.POSITIVE_INFINITY),D=w.node(A);I!==Number.POSITIVE_INFINITY&&D.borderType!==S&&(N[A]=Math.max(N[A],I))}return _(E,M.predecessors.bind(M)),_(k,M.successors.bind(M)),Object.keys(g).forEach(A=>N[A]=N[v[A]]),N}function d(w,x,v,g){let y=new e,N=w.graph(),M=p(N.nodesep,N.edgesep,g);return x.forEach(S=>{let _;S.forEach(E=>{let k=v[E];if(y.setNode(k),_){var A=v[_],I=y.edge(A,k);y.setEdge(A,k,Math.max(M(w,E,_),I||0))}_=E})}),y}function c(w,x){return Object.values(x).reduce((v,g)=>{let y=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;Object.entries(g).forEach(([S,_])=>{let E=m(w,S)/2;y=Math.max(_+E,y),N=Math.min(_-E,N)});const M=y-N;return M<v[0]&&(v=[M,g]),v},[Number.POSITIVE_INFINITY,null])[1]}function u(w,x){let v=Object.values(x),g=t.applyWithChunking(Math.min,v),y=t.applyWithChunking(Math.max,v);["u","d"].forEach(N=>{["l","r"].forEach(M=>{let S=N+M,_=w[S];if(_===x)return;let E=Object.values(_),k=g-t.applyWithChunking(Math.min,E);M!=="l"&&(k=y-t.applyWithChunking(Math.max,E)),k&&(w[S]=t.mapValues(_,A=>A+k))})})}function f(w,x){return t.mapValues(w.ul,(v,g)=>{if(x)return w[x.toLowerCase()][g];{let y=Object.values(w).map(N=>N[g]).sort((N,M)=>N-M);return(y[1]+y[2])/2}})}function h(w){let x=t.buildLayerMatrix(w),v=Object.assign(n(w,x),r(w,x)),g={},y;["u","d"].forEach(M=>{y=M==="u"?x:Object.values(x).reverse(),["l","r"].forEach(S=>{S==="r"&&(y=y.map(A=>Object.values(A).reverse()));let _=(M==="u"?w.predecessors:w.successors).bind(w),E=a(w,y,v,_),k=l(w,y,E.root,E.align,S==="r");S==="r"&&(k=t.mapValues(k,A=>-A)),g[M+S]=k})});let N=c(w,g);return u(g,N),f(g,w.graph().align)}function p(w,x,v){return(g,y,N)=>{let M=g.node(y),S=g.node(N),_=0,E;if(_+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":E=-M.width/2;break;case"r":E=M.width/2;break}if(E&&(_+=v?E:-E),E=0,_+=(M.dummy?x:w)/2,_+=(S.dummy?x:w)/2,_+=S.width/2,Object.hasOwn(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":E=S.width/2;break;case"r":E=-S.width/2;break}return E&&(_+=v?E:-E),E=0,_}}function m(w,x){return w.node(x).width}return wr}var vr,rs;function lm(){if(rs)return vr;rs=1;let e=oe(),t=cm().positionX;vr=n;function n(i){i=e.asNonCompoundGraph(i),r(i),Object.entries(t(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=e.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(l=>{const d=l.reduce((c,u)=>{const f=i.node(u).height;return c>f?c:f},0);l.forEach(c=>i.node(c).y=a+d/2),a+=d+o})}return vr}var br,is;function um(){if(is)return br;is=1;let e=Y0(),t=G0(),n=W0(),r=oe().normalizeRanks,i=U0(),s=oe().removeEmptyRanks,o=K0(),a=Q0(),l=Z0(),d=am(),c=lm(),u=oe(),f=ge().Graph;br=h;function h($,j){let L=j&&j.debugTiming?u.time:u.notime;L("layout",()=>{let V=L("  buildLayoutGraph",()=>_($));L("  runLayout",()=>p(V,L,j)),L("  updateInputGraph",()=>m($,V))})}function p($,j,L){j("    makeSpaceForEdgeLabels",()=>E($)),j("    removeSelfEdges",()=>H($)),j("    acyclic",()=>e.run($)),j("    nestingGraph.run",()=>o.run($)),j("    rank",()=>n(u.asNonCompoundGraph($))),j("    injectEdgeLabelProxies",()=>k($)),j("    removeEmptyRanks",()=>s($)),j("    nestingGraph.cleanup",()=>o.cleanup($)),j("    normalizeRanks",()=>r($)),j("    assignRankMinMax",()=>A($)),j("    removeEdgeLabelProxies",()=>I($)),j("    normalize.run",()=>t.run($)),j("    parentDummyChains",()=>i($)),j("    addBorderSegments",()=>a($)),j("    order",()=>d($,L)),j("    insertSelfEdges",()=>P($)),j("    adjustCoordinateSystem",()=>l.adjust($)),j("    position",()=>c($)),j("    positionSelfEdges",()=>B($)),j("    removeBorderNodes",()=>O($)),j("    normalize.undo",()=>t.undo($)),j("    fixupEdgeLabelCoords",()=>R($)),j("    undoCoordinateSystem",()=>l.undo($)),j("    translateGraph",()=>D($)),j("    assignNodeIntersects",()=>b($)),j("    reversePoints",()=>T($)),j("    acyclic.undo",()=>e.undo($))}function m($,j){$.nodes().forEach(L=>{let V=$.node(L),F=j.node(L);V&&(V.x=F.x,V.y=F.y,V.rank=F.rank,j.children(L).length&&(V.width=F.width,V.height=F.height))}),$.edges().forEach(L=>{let V=$.edge(L),F=j.edge(L);V.points=F.points,Object.hasOwn(F,"x")&&(V.x=F.x,V.y=F.y)}),$.graph().width=j.graph().width,$.graph().height=j.graph().height}let w=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v=["acyclicer","ranker","rankdir","align"],g=["width","height"],y={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function _($){let j=new f({multigraph:!0,compound:!0}),L=Y($.graph());return j.setGraph(Object.assign({},x,q(L,w),u.pick(L,v))),$.nodes().forEach(V=>{let F=Y($.node(V));const G=q(F,g);Object.keys(y).forEach(X=>{G[X]===void 0&&(G[X]=y[X])}),j.setNode(V,G),j.setParent(V,$.parent(V))}),$.edges().forEach(V=>{let F=Y($.edge(V));j.setEdge(V,Object.assign({},M,q(F,N),u.pick(F,S)))}),j}function E($){let j=$.graph();j.ranksep/=2,$.edges().forEach(L=>{let V=$.edge(L);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(j.rankdir==="TB"||j.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function k($){$.edges().forEach(j=>{let L=$.edge(j);if(L.width&&L.height){let V=$.node(j.v),G={rank:($.node(j.w).rank-V.rank)/2+V.rank,e:j};u.addDummyNode($,"edge-proxy",G,"_ep")}})}function A($){let j=0;$.nodes().forEach(L=>{let V=$.node(L);V.borderTop&&(V.minRank=$.node(V.borderTop).rank,V.maxRank=$.node(V.borderBottom).rank,j=Math.max(j,V.maxRank))}),$.graph().maxRank=j}function I($){$.nodes().forEach(j=>{let L=$.node(j);L.dummy==="edge-proxy"&&($.edge(L.e).labelRank=L.rank,$.removeNode(j))})}function D($){let j=Number.POSITIVE_INFINITY,L=0,V=Number.POSITIVE_INFINITY,F=0,G=$.graph(),X=G.marginx||0,Z=G.marginy||0;function K(W){let Q=W.x,J=W.y,re=W.width,ce=W.height;j=Math.min(j,Q-re/2),L=Math.max(L,Q+re/2),V=Math.min(V,J-ce/2),F=Math.max(F,J+ce/2)}$.nodes().forEach(W=>K($.node(W))),$.edges().forEach(W=>{let Q=$.edge(W);Object.hasOwn(Q,"x")&&K(Q)}),j-=X,V-=Z,$.nodes().forEach(W=>{let Q=$.node(W);Q.x-=j,Q.y-=V}),$.edges().forEach(W=>{let Q=$.edge(W);Q.points.forEach(J=>{J.x-=j,J.y-=V}),Object.hasOwn(Q,"x")&&(Q.x-=j),Object.hasOwn(Q,"y")&&(Q.y-=V)}),G.width=L-j+X,G.height=F-V+Z}function b($){$.edges().forEach(j=>{let L=$.edge(j),V=$.node(j.v),F=$.node(j.w),G,X;L.points?(G=L.points[0],X=L.points[L.points.length-1]):(L.points=[],G=F,X=V),L.points.unshift(u.intersectRect(V,G)),L.points.push(u.intersectRect(F,X))})}function R($){$.edges().forEach(j=>{let L=$.edge(j);if(Object.hasOwn(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function T($){$.edges().forEach(j=>{let L=$.edge(j);L.reversed&&L.points.reverse()})}function O($){$.nodes().forEach(j=>{if($.children(j).length){let L=$.node(j),V=$.node(L.borderTop),F=$.node(L.borderBottom),G=$.node(L.borderLeft[L.borderLeft.length-1]),X=$.node(L.borderRight[L.borderRight.length-1]);L.width=Math.abs(X.x-G.x),L.height=Math.abs(F.y-V.y),L.x=G.x+L.width/2,L.y=V.y+L.height/2}}),$.nodes().forEach(j=>{$.node(j).dummy==="border"&&$.removeNode(j)})}function H($){$.edges().forEach(j=>{if(j.v===j.w){var L=$.node(j.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:j,label:$.edge(j)}),$.removeEdge(j)}})}function P($){var j=u.buildLayerMatrix($);j.forEach(L=>{var V=0;L.forEach((F,G)=>{var X=$.node(F);X.order=G+V,(X.selfEdges||[]).forEach(Z=>{u.addDummyNode($,"selfedge",{width:Z.label.width,height:Z.label.height,rank:X.rank,order:G+ ++V,e:Z.e,label:Z.label},"_se")}),delete X.selfEdges})})}function B($){$.nodes().forEach(j=>{var L=$.node(j);if(L.dummy==="selfedge"){var V=$.node(L.e.v),F=V.x+V.width/2,G=V.y,X=L.x-F,Z=V.height/2;$.setEdge(L.e,L.label),$.removeNode(j),L.label.points=[{x:F+2*X/3,y:G-Z},{x:F+5*X/6,y:G-Z},{x:F+X,y:G},{x:F+5*X/6,y:G+Z},{x:F+2*X/3,y:G+Z}],L.label.x=L.x,L.label.y=L.y}})}function q($,j){return u.mapValues(u.pick($,j),Number)}function Y($){var j={};return $&&Object.entries($).forEach(([L,V])=>{typeof L=="string"&&(L=L.toLowerCase()),j[L]=V}),j}return br}var _r,os;function dm(){if(os)return _r;os=1;let e=oe(),t=ge().Graph;_r={debugOrdering:n};function n(r){let i=e.buildLayerMatrix(r),s=new t({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let l="layer"+a;s.setNode(l,{rank:"same"}),o.reduce((d,c)=>(s.setEdge(d,c,{style:"invis"}),c))}),s}return _r}var Er,ss;function fm(){return ss||(ss=1,Er="1.1.4"),Er}var Nr,as;function hm(){return as||(as=1,Nr={graphlib:ge(),layout:um(),debug:dm(),util:{time:oe().time,notime:oe().notime},version:fm()}),Nr}var pm=hm();const cs=yl(pm),gm=(e,t)=>{const n=new Set;return t.forEach(r=>{n.add(r.source),n.add(r.target)}),e.filter(r=>!n.has(r.id))},mm=(e,t=0,n=0,r=50,i=50)=>{if(e.length===0)return[];const s=Math.max(...e.map(c=>{var u;return((u=c.measured)==null?void 0:u.width)??0})),o=Math.max(...e.map(c=>{var u;return((u=c.measured)==null?void 0:u.height)??0})),a=s+r,l=o+i,d=Math.ceil(Math.sqrt(e.length));return e.map((c,u)=>{var w,x;const f=u%d,h=Math.floor(u/d),p=((w=c.measured)==null?void 0:w.width)??0,m=((x=c.measured)==null?void 0:x.height)??0;return{...c,position:{x:t+f*a+(s-p)/2,y:n+h*l+(o-m)/2}}})},ym=(e,t,n)=>{const r=new cs.graphlib.Graph().setDefaultEdgeLabel(()=>({}));r.setGraph({rankdir:n==="horizontal"?"LR":"TB",nodesep:150,ranksep:100,marginx:20,marginy:20,align:"UL"}),t.forEach(u=>r.setEdge(u.source,u.target)),e.forEach(u=>{var f,h;r.setNode(u.id,{...u,width:((f=u.measured)==null?void 0:f.width)??0,height:((h=u.measured)==null?void 0:h.height)??0})}),cs.layout(r);const i=gm(e,t),s=e.filter(u=>!i.includes(u)).map(u=>{const f=r.node(u.id);if(!u.measured||!f)return u;const h=f.x-(u.measured.width??0)/2,p=f.y-(u.measured.height??0)/2;return{...u,position:{x:h,y:p}}}),o=Math.max(...s.map(u=>{var f,h;return(((f=u.position)==null?void 0:f.x)??0)+(((h=u.measured)==null?void 0:h.width)??0)})),a=Math.max(...s.map(u=>{var f,h;return(((f=u.position)==null?void 0:f.y)??0)+(((h=u.measured)==null?void 0:h.height)??0)})),l=n==="horizontal"?o+200:0,d=n==="horizontal"?0:a+200,c=mm(i,l,d);return{nodes:[...s,...c],edges:t}},xm=({alignDirection:e,selectedNodes:t,onAlign:n,onResetAlign:r,onResetView:i,onFocus:s})=>C.jsx(It,{position:"top-left",children:C.jsxs(ae,{sx:{display:"flex",gap:1,alignItems:"center",borderRadius:1,bgcolor:"background.paper",p:1,px:2,outline:1,outlineColor:"divider",userSelect:"none"},children:[C.jsx(ae,{sx:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:1,boxShadow:2,opacity:.35}}),C.jsxs(ae,{sx:{display:"flex",gap:1,alignItems:"center"},children:[C.jsx(ye,{variant:"subtitle1",color:"text.secondary",children:"布局"}),C.jsx(ot,{title:"水平排列",arrow:!0,children:C.jsx(st,{size:"small",value:"horizontal",selected:e==="horizontal",onClick:()=>n("horizontal"),children:C.jsx(N0,{fontSize:"small"})})}),C.jsx(ot,{title:"垂直排列",arrow:!0,children:C.jsx(st,{size:"small",value:"vertical",selected:e==="vertical",onClick:()=>n("vertical"),children:C.jsx(k0,{fontSize:"small"})})}),C.jsx(ot,{title:"重新排版",arrow:!0,children:C.jsx(st,{size:"small",value:"none",onClick:r,children:C.jsx(kl,{fontSize:"small"})})})]}),C.jsx(Sl,{orientation:"vertical",flexItem:!0}),C.jsxs(ae,{sx:{display:"flex",gap:1,alignItems:"center"},children:[C.jsx(ye,{variant:"subtitle1",color:"text.secondary",children:"視圖"}),C.jsx(ot,{title:"重設視圖",arrow:!0,children:C.jsx(st,{size:"small",value:"reset",onClick:i,children:C.jsx(E0,{fontSize:"small"})})}),C.jsx(ot,{title:"聚焦至選取元素",arrow:!0,children:C.jsx("span",{children:C.jsx(st,{size:"small",value:"select",onClick:s,disabled:t.length===0,children:C.jsx(C0,{fontSize:"small"})})})})]})]})}),wm={tableNode:A0};function vm({nodes:e,edges:t,isFetching:n}){const{mode:r}=xl(),{fitView:i}=hn(),[s,o]=z.useState(e),[a,l]=z.useState(t),[d,c]=z.useState([]),[u,f]=z.useState("horizontal"),[h,p]=z.useState(!1);z.useEffect(()=>{if(h)return;let S,_=0;const E=k=>{if(k-_<200){S=requestAnimationFrame(E);return}if(_=k,!s.every(b=>{var R,T;return((R=b.measured)==null?void 0:R.width)&&((T=b.measured)==null?void 0:T.height)})){S=requestAnimationFrame(E);return}const{nodes:I,edges:D}=ym(s,a,u);o(I),l(D),p(!0)};return S=requestAnimationFrame(E),()=>cancelAnimationFrame(S)},[s,a,h,u,i]),z.useEffect(()=>{n||(o(e),l(t),p(!1))},[e,t,n]);const m=z.useCallback(S=>o(_=>ba(S,_)),[o]),w=z.useCallback(S=>l(_=>_a(S,_)),[l]),x=z.useCallback(S=>l(_=>ra(S,_)),[l]),v=z.useCallback(({nodes:S})=>c(S),[c]),g=z.useCallback(S=>{f(S),p(!1)},[]),y=z.useCallback(()=>p(!1),[]),N=z.useCallback(()=>i({padding:.2,duration:375}),[i]),M=z.useCallback(()=>i({padding:.2,duration:375,nodes:d}),[i,d]);return C.jsxs(C.Fragment,{children:[C.jsx(ae,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",bgcolor:"action.hover"},children:C.jsx(wl,{})}),C.jsxs(Zg,{nodes:s,nodeTypes:wm,edges:a,onConnect:x,onNodesChange:m,onEdgesChange:w,onSelectionChange:v,deleteKeyCode:null,colorMode:r,minZoom:.7,maxZoom:1.5,defaultViewport:{x:100,y:100,zoom:.9},defaultEdgeOptions:{type:"smoothstep",animated:!0,selectable:!1,style:{strokeWidth:2,stroke:"#b1b1b7"},markerEnd:{type:vt.Arrow,width:20,height:20}},style:{position:"relative",opacity:!h||n?0:1,transition:!h||n?void 0:"opacity 0.5s ease",background:"var(--mui-palette-background-paper)"},children:[C.jsx(r0,{bgColor:"var(--mui-palette-action-hover)"}),C.jsx(xm,{alignDirection:u,selectedNodes:d,onAlign:g,onResetAlign:y,onResetView:N,onFocus:M})]})]})}const bm=z.memo(vm),Lm=()=>{const{nodes:e,edges:t,isFetching:n}=El(),[r,i]=z.useState(!1),s=z.useMemo(()=>e.map(o=>({id:o.tableName,type:"tableNode",data:o,position:{x:0,y:0}})),[e]);return C.jsxs(Ol,{sx:{position:r?"fixed":"relative",flex:1,inset:r?0:void 0,zIndex:r?"snackbar":void 0},layout:"position",children:[C.jsx(ae,{sx:{position:"absolute",inset:0,bgcolor:"background.paper"},children:C.jsx(Xa,{children:C.jsx(bm,{isFetching:n,nodes:s,edges:t})})}),C.jsx(ae,{sx:{position:"absolute",inset:"0 0 auto auto",color:"text.secondary",display:"flex",gap:1,alignItems:"center",borderRadius:1,bgcolor:"background.paper",p:1,px:2,outline:1,outlineColor:"divider",userSelect:"none",m:"15px"},children:C.jsx(vl,{color:"inherit",sx:{py:.2},endIcon:r?C.jsx(jl,{}):C.jsx(Pl,{}),loading:n,onClick:()=>i(o=>!o),children:r?"退出全螢幕":"全螢幕"})})]})};export{Lm as default};
