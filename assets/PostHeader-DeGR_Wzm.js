import{o as x,j as e,q as l,T as a,y as d,r as p,B as c,aj as j}from"./routes-CadzfG2E.js";import{k as v,E as b,U as f}from"./url-DTt2Bjh-.js";import{T as u}from"./useMutation-Ctl-1Wtr.js";import{C as m}from"./Chip-DcZTGwOD.js";import{S as h}from"./Skeleton-Pg_F8lei.js";const A=x(e.jsx("path",{d:"M16.5 6.75v10.58c0 2.09-1.53 3.95-3.61 4.15-2.39.23-4.39-1.64-4.39-3.98V5.14c0-1.31.94-2.5 2.24-2.63 1.5-.15 2.76 1.02 2.76 2.49v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6.75c0-.41-.34-.75-.75-.75s-.75.34-.75.75v8.61c0 1.31.94 2.5 2.24 2.63 1.5.15 2.76-1.02 2.76-2.49V5.17c0-2.09-1.53-3.95-3.61-4.15C9.01.79 7 2.66 7 5v12.27c0 2.87 2.1 5.44 4.96 5.71 3.29.3 6.04-2.26 6.04-5.48V6.75c0-.41-.34-.75-.75-.75s-.75.34-.75.75"})),S=x(e.jsx("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),g=x(e.jsx("path",{d:"M13.12 2.06 7.58 7.6c-.37.37-.58.88-.58 1.41V19c0 1.1.9 2 2 2h9c.8 0 1.52-.48 1.84-1.21l3.26-7.61C23.94 10.2 22.49 8 20.34 8h-5.65l.95-4.58c.1-.5-.05-1.01-.41-1.37-.59-.58-1.53-.58-2.11.01M3 21c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2s-2 .9-2 2v8c0 1.1.9 2 2 2"})),$=({postId:t,likeCount:s})=>{const{liked:n,likeCount:o,handleLike:r,disabled:i}=v(t);return e.jsx(u,{title:n?"取消喜歡":"喜歡",arrow:!0,placement:"left",children:e.jsx("span",{children:e.jsx(l,{startIcon:e.jsx(g,{}),size:"small",color:n?"primary":"inherit",onClick:r,disabled:i,children:e.jsxs(a,{variant:"caption",component:"span",children:[o??s," 個讚"]})})})})},L=({post:t,displayCount:s=3})=>{const{tags:n,id:o}=t;return e.jsxs(e.Fragment,{children:[n.map((r,i)=>i<s&&e.jsx(m,{label:r,clickable:!0,size:"small",component:"a",href:`${d.forum_posts}?topic=${r}`},r)),n.length>s&&e.jsx(m,{label:`+${n.length-s}`,clickable:!0,size:"small",variant:"outlined",component:"a",href:`${d.forum_post}?postId=${o}`})]})},y=x(e.jsx("path",{d:"M16 16h2c.55 0 1 .45 1 1s-.45 1-1 1h-2c-.55 0-1-.45-1-1s.45-1 1-1m0-8h5c.55 0 1 .45 1 1s-.45 1-1 1h-5c-.55 0-1-.45-1-1s.45-1 1-1m0 4h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1M3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3zM13 5h-2l-.71-.71c-.18-.18-.44-.29-.7-.29H6.41c-.26 0-.52.11-.7.29L5 5H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1"})),M=({post:t})=>{const[s,n]=p.useState(null),o=i=>{n(i.currentTarget)},r=()=>{n(null)};return e.jsxs(c,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(l,{size:"small",startIcon:e.jsx(b,{}),href:`${d.forum_edit}?postId=${t.id}`,children:"編輯貼文"}),e.jsx(l,{size:"small",color:"error",startIcon:e.jsx(y,{}),onClick:o,children:"刪除貼文"}),e.jsx(j,{open:!!s,anchorEl:s,onClose:r,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},elevation:6,children:e.jsxs(c,{sx:{p:2,maxWidth:300},children:[e.jsx(a,{variant:"subtitle1",sx:{mb:1},children:"確認刪除貼文"}),e.jsx(a,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"確認刪除貼文後，將無法復原，請謹慎操作。"}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(l,{variant:"outlined",size:"small",onClick:r,color:"inherit",children:"取消"}),e.jsx(l,{variant:"contained",color:"error",size:"small",onClick:r,disableElevation:!0,children:"確認刪除"})]})]})})]})},V=({post:t,sx:s,...n})=>{const o=Math.abs(t.updatedAt.getTime()-t.createdAt.getTime())>1e3;return e.jsxs(c,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center",...s},...n,children:[e.jsx(f,{name:t.userName}),e.jsxs(a,{variant:"subtitle1",component:"a",href:`${d.forum_users}?user=${t.userName}`,sx:{color:"text.secondary",textDecoration:"none","&:hover":{textDecoration:"underline",color:"text.primary"}},children:["by ",t.userName]}),e.jsx(c,{sx:{flex:1}}),o?e.jsx(u,{title:`上次編輯於 ${t.updatedAt.toLocaleString()}`,arrow:!0,children:e.jsxs(a,{variant:"body2",sx:{color:"text.secondary",opacity:.9,"&:hover":{textDecoration:"underline"}},children:["*",t.createdAt.toLocaleString()]})}):e.jsx(a,{variant:"body2",sx:{color:"text.secondary",opacity:.9},children:t.createdAt.toLocaleString()})]})},w=({sx:t,...s})=>e.jsxs(c,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"center",...t},...s,children:[e.jsx(h,{variant:"circular",sx:{width:"2rem",height:"2rem"},animation:"wave"}),e.jsx(h,{variant:"rounded",animation:"wave",children:e.jsx(a,{variant:"subtitle1",children:"by loading..."})}),e.jsx(c,{sx:{flex:1}}),e.jsx(h,{variant:"rounded",animation:"wave",children:e.jsx(a,{variant:"body2",children:"0000-00-00 00:00"})})]});export{A,w as L,V as P,M as S,g as T,S as V,L as a,$ as b};
