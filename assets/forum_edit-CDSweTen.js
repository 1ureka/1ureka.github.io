import{j as o,l as h,A as f,p as r,n as a,B as d,z as y,y as g,r as b}from"./Toast-6ncYA_Ld.js";import{A as I,S as c}from"./SentimentDissatisfiedRounded-C6PowX1e.js";import{b as A,c as v,d as E,e as S,E as R,H as w}from"./AttachFileRounded-Ggz2kB-p.js";import{a as z,A as B,S as D}from"./ScrollArea-jG24aTiZ.js";import{r as l}from"./routes-Dr3OAPvi.js";import{u as P}from"./url-BKoQkXLc.js";import{C as k,a as F}from"./post-BBXU2v-h.js";import{N as M}from"./NewPost-CdWLq9yN.js";import{D as x}from"./Divider-vP51gHCL.js";import"./ForumRounded-A_Eulgqu.js";import"./ExpandMoreRounded-BeFfyJ0G.js";import"./DarkModeRounded-BFg7OYNl.js";import"./Toolbar-BcNpOrAE.js";import"./PersonRounded-pI94v0dl.js";import"./Avatar-DGNt0orT.js";import"./Skeleton-DjBj6yfl.js";import"./OpenInNewRounded-BlaOd_6C.js";import"./index-mSkvzYyn.js";import"./NotificationsRounded-BBOwe-i5.js";import"./MenuItem-BLYGv0hx.js";import"./tryCatch-CD0ybv0K.js";import"./ErrorOutlineRounded-BWvTI3f4.js";import"./useMutation-2Qc-kFMN.js";import"./MoreHorizRounded-QCoZH2Hn.js";import"./ArrowOutwardRounded-D_ye905W.js";import"./formatters-C9bWSe0O.js";import"./Badge-D6o4y19V.js";import"./ErrorRounded-Co923Na-.js";import"./RefreshRounded-BcOkXO49.js";import"./SQLiteClient-CQZ5EZ1X.js";import"./with-selector-Bqcg4InP.js";import"./Motion-C-kz0xh0.js";import"./proxy-DHR4684q.js";import"./AddRounded-fKGh7lB_.js";import"./PublishRounded-FbqaeDAB.js";import"./TopicPicker-BHg9bF8A.js";import"./fuse-BXhxvJKY.js";import"./ClearRounded-DbUfll1u.js";import"./EmojiMenu-B0Ctz1O-.js";import"./array-l11GhOAf.js";const N=()=>{var p,m;const e=h(s=>s.breakpoints.up("md")),{searchParams:j}=P(),i=j.get("postId");if(!i)throw new Error("網址缺失 postId 參數");const{data:t,isFetching:u}=F({postId:Number(i)});return o.jsxs(f,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[o.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center",p:3},children:[o.jsx(R,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1,opacity:.8}}),o.jsx(a,{variant:"h5",component:"h2",children:"編輯貼文"})]}),o.jsx(x,{}),o.jsxs(r,{sx:{position:"relative",px:3,py:1},children:[o.jsx(r,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),o.jsx(d,{variant:"contained",disableElevation:!0,startIcon:o.jsx(I,{}),size:"small",href:`${l.forum_post}?postId=${i}`,sx:{mr:1},children:e?"返回貼文":"貼文"}),o.jsx(d,{variant:"outlined",startIcon:o.jsx(w,{}),size:"small",href:l.forum_home,children:e?"返回首頁":"首頁"})]}),o.jsx(x,{sx:{mb:2}}),u?o.jsx(r,{sx:{py:8,display:"grid",placeItems:"center"},children:o.jsx(y,{})}):t?t.isSelf?o.jsx(M,{mode:"edit",postId:t.id,initialValues:{title:t.title,content:t.content,tags:t.tags,photos:(p=t.photos)==null?void 0:p.map(({name:s,size:n})=>new File([new Uint8Array(n)],s,{type:"image/jpeg"})),attachments:(m=t.attachments)==null?void 0:m.map(({name:s,size:n})=>new File([new Uint8Array(n)],s,{type:"application/pdf"}))}}):o.jsxs(r,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsx(c,{sx:{fontSize:"6rem",color:"action.disabled"}}),o.jsx(a,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"你沒有權限編輯此貼文"})]}):o.jsxs(r,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsx(c,{sx:{fontSize:"6rem",color:"action.disabled"}}),o.jsx(a,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"貼文不存在或已被刪除"})]})]})};function C(){const{isMd:e}=z();return o.jsxs(B,{children:[o.jsx(A,{}),o.jsxs(D,{children:[e?o.jsx(v,{}):o.jsx(E,{}),o.jsx(k,{maxWidth:"lg",sx:{position:"relative",my:10,px:0},children:o.jsx(N,{})}),o.jsx(S,{})]})]})}g.createRoot(document.getElementById("root")).render(o.jsx(b.StrictMode,{children:o.jsx(C,{})}));
