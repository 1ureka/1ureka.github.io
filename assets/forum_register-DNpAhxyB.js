import{y as c,j as e,B as a,T as h,t as l,q as x,P as b,z as f,r as y}from"./routes-jbxUH8QT.js";import{a as w,A as S,N as B,S as A,b as F}from"./ScrollArea-DiRp_vtc.js";import{A as I}from"./AuthIntro-qycHH_UJ.js";import{z as o,h as z,e as C,g as m,f as u,c as R}from"./CommentRounded-CMvdhNcI.js";import{S as p}from"./DarkModeRounded-HuAMr60S.js";import"./forum-C0vRpnmV.js";import"./ForumRounded-C1zGxzNM.js";import"./useMutation-vC97ERmO.js";const T=o.object({email:o.string().trim().email("請輸入有效的電子郵件地址").max(100,"電子郵件地址過長"),username:o.string().trim().min(4,"使用者名稱至少 4 個字元").max(20,"使用者名稱最多 20 個字元").regex(/^[a-zA-Z0-9 ]+$/,"使用者名稱只能包含英文字母與數字"),password:o.string().trim().min(1,"密碼不能為空")}),E=()=>{const{mutateAsync:s,isPending:d}=z(),n=C({defaultValues:{email:"",username:"",password:""},validators:{onBlur:T},onSubmit:async({value:r})=>{if(d)return;const{email:t,username:j,password:v}=r,i=await s({email:t,username:j.trim(),password:v});if(i.error)return console.error(i.error);i.authenticated&&(window.location.href=c.forum_home)},onSubmitInvalid:()=>{console.error("請檢查表單是否填寫正確")}}),g=async r=>{if(r.preventDefault(),!n.state.canSubmit)return console.error("請檢查表單是否填寫正確");n.handleSubmit()};return e.jsxs(p,{component:"form",sx:{p:6,flex:1,justifyContent:"center"},onSubmit:g,children:[e.jsx(a,{sx:{display:"grid",placeItems:"center",mb:2},children:e.jsx(h,{variant:"h4",component:"h2",gutterBottom:!0,sx:{textAlign:"center"},children:"加入我們"})}),e.jsx(n.Field,{name:"email",children:r=>e.jsx(l,{required:!0,name:r.name,type:"email",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"電子郵件",error:u(r.state.meta.errors),helperText:m(r.state.meta.errors),value:r.state.value,onChange:t=>r.handleChange(t.target.value),onBlur:r.handleBlur})}),e.jsx(n.Field,{name:"username",children:r=>e.jsx(l,{required:!0,name:r.name,type:"text",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"使用者名稱",error:u(r.state.meta.errors),helperText:m(r.state.meta.errors),value:r.state.value,onChange:t=>r.handleChange(t.target.value),onBlur:r.handleBlur})}),e.jsx(n.Field,{name:"password",children:r=>e.jsx(l,{required:!0,name:r.name,type:"password",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"密碼",error:u(r.state.meta.errors),helperText:m(r.state.meta.errors),value:r.state.value,onChange:t=>r.handleChange(t.target.value),onBlur:r.handleBlur})}),e.jsx(x,{type:"submit",variant:"contained",loading:d,sx:{mt:1.5,width:.8,alignSelf:"center",borderRadius:99,"&:hover":{bgcolor:"primary.light",scale:1.02},"&:active":{scale:.98},transition:"all 0.2s ease"},children:"註冊"})]})};function W(){const{isMd:s}=w();return e.jsxs(S,{children:[!s&&e.jsx(B,{}),s&&e.jsx(a,{sx:{position:"fixed",inset:"0 auto 0 0",width:.5,bgcolor:"secondary.main"}}),e.jsx(A,{children:s&&e.jsx(R,{maxWidth:"lg",sx:{position:"relative",display:"grid",placeItems:"center",minHeight:"100vh"},children:e.jsxs(b,{sx:{position:"relative",my:10,borderRadius:3,overflow:"hidden",display:"flex",width:1},elevation:6,children:[e.jsx(a,{sx:{flex:1,position:"relative"},children:e.jsxs(p,{sx:{height:1},children:[e.jsx(a,{sx:{mb:2,p:2},children:e.jsx(x,{sx:{textWrap:"nowrap",width:"fit-content"},href:c.forum_home,startIcon:e.jsx(F,{}),children:"返回首頁"})}),e.jsx(E,{}),e.jsx(a,{sx:{mt:3,p:2},children:e.jsxs(h,{variant:"caption",gutterBottom:!0,children:["已經有帳號？",e.jsx(x,{href:c.forum_login,variant:"outlined",size:"small",sx:{ml:1},children:"登入"})]})})]})}),e.jsx(a,{className:"mode-dark",sx:{position:"relative",flex:1,bgcolor:"secondary.main",color:"text.primary"},children:e.jsx(I,{})})]})})})]})}f.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(W,{})}));
