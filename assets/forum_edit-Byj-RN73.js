import{j as t,v as j,P as u,B as o,T as a,q as h,y,A as g,z as f,r as b}from"./routes-n0rROGIf.js";import{A as I,S as c}from"./SentimentDissatisfiedRounded-BoLvZF04.js";import{b as A,c as v,d as S,e as E,u as w,E as R}from"./url-BztU1qOr.js";import{a as B,A as P,S as z}from"./ScrollArea-CqmYhGK4.js";import{C as D,a as k}from"./post-DL2DeS6-.js";import{N as F}from"./NewPost-Doro7Ui2.js";import{D as l}from"./Divider-DiSxJ-uN.js";import"./ForumRounded-Cdgm9z_Q.js";import"./ExpandMoreRounded-BHtti7oY.js";import"./useMutation-3TE3W5MO.js";import"./forum-CVzoj8Ed.js";import"./DarkModeRounded-BstcUZiJ.js";import"./Skeleton-DVK1y20g.js";import"./OpenInNewRounded-B6wH2E-Q.js";import"./NotificationsRounded-D9n4jbA0.js";import"./Chip-Dr4JwOJ2.js";import"./Collapse-BIXy2GHj.js";import"./with-selector-DaOtV0DI.js";import"./Motion-CpIRI559.js";import"./proxy-CmkFMDIz.js";import"./TopicAutocomplete-C9en9hNS.js";import"./Autocomplete-Cl3OcG04.js";import"./EmojiMenu-Bt7nVSP7.js";import"./formatters-CWrkKLZ2.js";const M=()=>{var p,d;const r=j(s=>s.breakpoints.up("md")),{searchParams:m}=w(),n=m.get("postId");if(!n)throw new Error("網址缺失 postId 參數");const{data:e,isFetching:x}=k({postId:Number(n)});return t.jsxs(u,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[t.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center",p:3},children:[t.jsx(R,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1,opacity:.8}}),t.jsx(a,{variant:"h5",component:"h2",children:"編輯貼文"})]}),t.jsx(l,{}),t.jsxs(o,{sx:{position:"relative",px:3,py:1},children:[t.jsx(o,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),t.jsx(h,{variant:"outlined",startIcon:t.jsx(I,{}),size:"small",href:y.forum_home,children:r?"返回首頁":"首頁"})]}),t.jsx(l,{sx:{mb:2}}),x?t.jsx(o,{sx:{py:8,display:"grid",placeItems:"center"},children:t.jsx(g,{})}):e?e.isSelf?t.jsx(F,{mode:"edit",postId:e.id,initialValues:{title:e.title,content:e.content,tags:e.tags,photos:(p=e.photos)==null?void 0:p.map(({name:s,size:i})=>new File([new Uint8Array(i)],s,{type:"image/jpeg"})),attachments:(d=e.attachments)==null?void 0:d.map(({name:s,size:i})=>new File([new Uint8Array(i)],s,{type:"application/pdf"}))}}):t.jsxs(o,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(c,{sx:{fontSize:"6rem",color:"action.disabled"}}),t.jsx(a,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"你沒有權限編輯此貼文"})]}):t.jsxs(o,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(c,{sx:{fontSize:"6rem",color:"action.disabled"}}),t.jsx(a,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"貼文不存在或已被刪除"})]})]})};function N(){const{isMd:r}=B();return t.jsxs(P,{children:[t.jsx(A,{}),t.jsxs(z,{children:[r?t.jsx(v,{}):t.jsx(S,{}),t.jsx(D,{maxWidth:"lg",sx:{position:"relative",my:10,px:0},children:t.jsx(M,{})}),t.jsx(E,{})]})]})}f.createRoot(document.getElementById("root")).render(t.jsx(b.StrictMode,{children:t.jsx(N,{})}));
