import{o as O,j as b,a as ve,g as Me,r as C,u as st,N as it,ax as lt,c as ct,s as F,b as ne,d as Re,am as at,m as ut,H as N,e as be,L as w,J as de,Q as oe,O as L,X as dt,f as pt,Y as mt,W as Se,aS as A,a7 as xe,a1 as pe,B as V,T as Y,D as ft,A as It,E as gt}from"./routes-n0rROGIf.js";import{D as ht}from"./DatasetRounded-vP4S5ZKA.js";import{m as bt}from"./proxy-CmkFMDIz.js";import{C as Pe}from"./Collapse-BIXy2GHj.js";import{e as Z,i as xt}from"./datahub_home-BR12926K.js";import{u as yt,P as ye}from"./useThemeProps-Du8WbH_9.js";import{S as Ct}from"./SwitchBase-C9J9CAMN.js";import{T as Et}from"./useMutation-3TE3W5MO.js";import"./forum-CVzoj8Ed.js";import"./DataExplorationRounded-BiheqLbW.js";import"./DarkModeRounded-BstcUZiJ.js";import"./NotificationsRounded-D9n4jbA0.js";import"./ExpandMoreRounded-BHtti7oY.js";import"./DownloadRounded-oUOmt0y3.js";import"./dayjs.min-B5fokDD_.js";const wt=O(b.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Tt=O(b.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),vt=O(b.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Mt(e){return Me("MuiCheckbox",e)}const ce=ve("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Rt=e=>{const{classes:t,indeterminate:n,color:o,size:a}=e,d={root:["root",n&&"indeterminate",`color${ne(o)}`,`size${ne(a)}`]},u=Re(d,Mt,t);return{...t,...u}},St=F(Ct,{shouldForwardProp:e=>at(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${ne(n.size)}`],n.color!=="default"&&t[`color${ne(n.color)}`]]}})(ut(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:N(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(be()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:N(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(be()).map(([t])=>({props:{color:t},style:{[`&.${ce.checked}, &.${ce.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${ce.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Pt=b.jsx(Tt,{}),kt=b.jsx(wt,{}),jt=b.jsx(vt,{}),Vt=C.forwardRef(function(t,n){const o=st({props:t,name:"MuiCheckbox"}),{checkedIcon:a=Pt,color:d="primary",icon:u=kt,indeterminate:s=!1,indeterminateIcon:i=jt,inputProps:p,size:r="medium",disableRipple:c=!1,className:m,slots:l={},slotProps:I={},...h}=o,g=s?i:u,f=s?i:a,y={...o,disableRipple:c,color:d,indeterminate:s,size:r},T=Rt(y),R=I.input??p,[M,P]=it("root",{ref:n,elementType:St,className:ct(T.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:l,slotProps:I,...h},ownerState:y,additionalProps:{type:"checkbox",icon:C.cloneElement(g,{fontSize:g.props.fontSize??r}),checkedIcon:C.cloneElement(f,{fontSize:f.props.fontSize??r}),disableRipple:c,slots:l,slotProps:{input:lt(typeof R=="function"?R(y):R,{"data-indeterminate":s})}}});return b.jsx(M,{...P,classes:T})}),Ot=O(b.jsx("path",{d:"M19 7H9c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m0 3c0 .55-.45 1-1 1h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1m-6 5v-2h2v2zm2 2v2h-2v-2zm-4-2H9v-2h2zm6-2h2v2h-2zm-8 4h2v2H9zm8 2v-2h2v2zM6 17H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v1h-2V5H5v10h1z"}));function Dt(e){return yt}function At(e){return Me("MuiSimpleTreeView",e)}ve("MuiSimpleTreeView",["root"]);const Lt=(e,t)=>{const n=C.useRef({}),[o,a]=C.useState(()=>{const u={};return e.forEach(s=>{s.models&&Object.entries(s.models).forEach(([i,p])=>{n.current[i]={isControlled:t[i]!==void 0,getDefaultValue:p.getDefaultValue},u[i]=p.getDefaultValue(t)})}),u});return Object.fromEntries(Object.entries(n.current).map(([u,s])=>{const i=t[u]??o[u];return[u,{value:i,setControlledValue:p=>{s.isControlled||a(r=>w({},r,{[u]:p}))}}]}))};class $t{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let a=this.events[t];a||(a={highPriority:new Map,regular:new Map},this.events[t]=a),o.isFirst?a.highPriority.set(n,!0):a.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const a=Array.from(o.highPriority.keys()),d=Array.from(o.regular.keys());for(let u=a.length-1;u>=0;u-=1){const s=a[u];o.highPriority.has(s)&&s.apply(this,n)}for(let u=0;u<d.length;u+=1){const s=d[u];o.regular.has(s)&&s.apply(this,n)}}once(t,n){const o=this;this.on(t,function a(...d){o.removeListener(t,a),n.apply(o,d)})}}const Ft=e=>e.isPropagationStopped!==void 0,ke=()=>{const[e]=C.useState(()=>new $t),t=C.useCallback((...o)=>{const[a,d,u={}]=o;u.defaultMuiPrevented=!1,!(Ft(u)&&u.isPropagationStopped())&&e.emit(a,d,u)},[e]),n=C.useCallback((o,a)=>(e.on(o,a),()=>{e.removeListener(o,a)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:n}}};ke.params={};const je=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};je.params={};let Ce=0;const zt=()=>(Ce+=1,`mui-tree-view-${Ce}`),re=({id:e,treeId:t="",itemId:n})=>e??`${t}-${n}`,me=({params:e,state:t,setState:n})=>{C.useEffect(()=>{n(a=>a.id.treeId===e.id&&a.id.treeId!==void 0?a:w({},a,{id:w({},a.id,{treeId:e.id??zt()})}))},[n,e.id]);const o=e.id??t.id.treeId;return{getRootProps:()=>({id:o}),contextValue:{treeId:o}}};me.params={id:!0};me.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const Bt=[ke,je,me],Kt=["slots","slotProps","apiRef","experimentalFeatures"],Ut=e=>{let{props:{slots:t,slotProps:n,apiRef:o,experimentalFeatures:a},plugins:d}=e,u=de(e.props,Kt);const s={};d.forEach(m=>{Object.assign(s,m.params)});const i={},p={};Object.keys(u).forEach(m=>{const l=u[m];s[m]?i[m]=l:p[m]=l});const r=a??{},c=d.reduce((m,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:m,experimentalFeatures:r}):m,i);return{apiRef:o,forwardedProps:p,pluginParams:c,slots:t??{},slotProps:n??{},experimentalFeatures:r}},_t=({plugins:e,instance:t,publicAPI:n,rootRef:o})=>({runItemPlugins:s=>{let i=null,p=null;const r=[],c={};e.forEach(I=>{if(!I.itemPlugin)return;const h=I.itemPlugin({props:s,rootRef:i,contentRef:p});h!=null&&h.rootRef&&(i=h.rootRef),h!=null&&h.contentRef&&(p=h.contentRef),h!=null&&h.propsEnhancers&&(r.push(h.propsEnhancers),Object.keys(h.propsEnhancers).forEach(g=>{c[g]=!0}))});const m=I=>h=>{const g={};return r.forEach(f=>{const y=f[I];y!=null&&Object.assign(g,y(h))}),g},l=Object.fromEntries(Object.keys(c).map(I=>[I,m(I)]));return{contentRef:p,rootRef:i,propsEnhancers:l}},wrapItem:({itemId:s,children:i})=>{let p=i;for(let r=e.length-1;r>=0;r-=1){const c=e[r];c.wrapItem&&(p=c.wrapItem({itemId:s,children:p,instance:t}))}return p},wrapRoot:({children:s})=>{let i=s;for(let p=e.length-1;p>=0;p-=1){const r=e[p];r.wrapRoot&&(i=r.wrapRoot({children:i,instance:t}))}return i},instance:t,rootRef:o,publicAPI:n});function Nt(e){const t=C.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const Xt=({plugins:e,rootRef:t,props:n})=>{const o=[...Bt,...e],{pluginParams:a,forwardedProps:d,apiRef:u,experimentalFeatures:s,slots:i,slotProps:p}=Ut({plugins:o,props:n}),r=Lt(o,a),m=C.useRef({}).current,l=Nt(u),I=C.useRef(null),h=oe(I,t),g=_t({plugins:o,instance:m,publicAPI:l,rootRef:I}),[f,y]=C.useState(()=>{const P={};return o.forEach(j=>{j.getInitialState&&Object.assign(P,j.getInitialState(a))}),P}),T=[],R=P=>{const j=P({instance:m,params:a,slots:i,slotProps:p,experimentalFeatures:s,state:f,setState:y,rootRef:I,models:r,plugins:o});j.getRootProps&&T.push(j.getRootProps),j.publicAPI&&Object.assign(l,j.publicAPI),j.instance&&Object.assign(m,j.instance),j.contextValue&&Object.assign(g,j.contextValue)};return o.forEach(R),{getRootProps:(P={})=>{const j=w({role:"tree"},d,P,{ref:h});return T.forEach(Q=>{Object.assign(j,Q(P))}),j},rootRef:h,contextValue:g,instance:m}},Ve=C.createContext(null);function Wt(e){const{value:t,children:n}=e;return b.jsx(Ve.Provider,{value:t,children:t.wrapRoot({children:n,instance:t.instance})})}const K=()=>{const e=C.useContext(Ve);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},Oe=(e,t,n)=>{e.$$publishEvent(t,n)},B="__TREE_VIEW_ROOT_PARENT_ID__",De=e=>{const t={};return e.forEach((n,o)=>{t[n]=o}),t},W=C.createContext(()=>-1),qt=["children"],Ae=({items:e,isItemDisabled:t,getItemLabel:n,getItemId:o})=>{const a={},d={},u={[B]:[]},s=(p,r,c)=>{var h,g;const m=o?o(p):p.id;if(m==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(p)].join(`
`));if(a[m]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${m}"`].join(`
`));const l=n?n(p):p.label;if(l==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(p)].join(`
`));a[m]={id:m,label:l,parentId:c,idAttribute:void 0,expandable:!!((h=p.children)!=null&&h.length),disabled:t?t(p):!1,depth:r},d[m]=p;const I=c??B;u[I]||(u[I]=[]),u[I].push(m),(g=p.children)==null||g.forEach(f=>s(f,r+1,m))};e.forEach(p=>s(p,0,null));const i={};return Object.keys(u).forEach(p=>{i[p]=De(u[p])}),{itemMetaMap:a,itemMap:d,itemOrderedChildrenIds:u,itemChildrenIndexes:i}},J=({instance:e,params:t,state:n,setState:o,experimentalFeatures:a})=>{const d=C.useCallback(f=>n.items.itemMetaMap[f],[n.items.itemMetaMap]),u=C.useCallback(f=>n.items.itemMap[f],[n.items.itemMap]),s=C.useCallback(()=>{const f=y=>{const T=n.items.itemMap[y],R=de(T,qt),M=n.items.itemOrderedChildrenIds[y];return M&&(R.children=M.map(f)),R};return n.items.itemOrderedChildrenIds[B].map(f)},[n.items.itemMap,n.items.itemOrderedChildrenIds]),i=C.useCallback(f=>{if(f==null)return!1;let y=e.getItemMeta(f);if(!y)return!1;if(y.disabled)return!0;for(;y.parentId!=null;)if(y=e.getItemMeta(y.parentId),y.disabled)return!0;return!1},[e]),p=C.useCallback(f=>{const y=e.getItemMeta(f).parentId??B;return n.items.itemChildrenIndexes[y][f]},[e,n.items.itemChildrenIndexes]),r=C.useCallback(f=>n.items.itemOrderedChildrenIds[f??B]??[],[n.items.itemOrderedChildrenIds]),c=f=>{const y=e.getItemMeta(f);return y==null?null:document.getElementById(re({treeId:n.id.treeId,itemId:f,id:y.idAttribute}))},m=f=>t.disabledItemsFocusable?!0:!e.isItemDisabled(f),l=C.useRef(!1),I=C.useCallback(()=>{l.current=!0},[]),h=C.useCallback(()=>l.current,[]);return C.useEffect(()=>{e.areItemUpdatesPrevented()||o(f=>{const y=Ae({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(f.items.itemMetaMap).forEach(T=>{y.itemMetaMap[T.id]||Oe(e,"removeItem",{id:T.id})}),w({},f,{items:y})})},[e,o,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:u,getItemDOMElement:c,getItemTree:s,getItemOrderedChildrenIds:r},instance:{getItemMeta:d,getItem:u,getItemTree:s,getItemsToRender:()=>{const f=y=>{var R;const T=n.items.itemMetaMap[y];return{label:T.label,itemId:T.id,id:T.idAttribute,children:(R=n.items.itemOrderedChildrenIds[y])==null?void 0:R.map(f)}};return n.items.itemOrderedChildrenIds[B].map(f)},getItemIndex:p,getItemDOMElement:c,getItemOrderedChildrenIds:r,isItemDisabled:i,isItemNavigable:m,preventItemUpdates:I,areItemUpdatesPrevented:h},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:a.indentationAtItemLevel??!1}}}};J.getInitialState=e=>({items:Ae({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});J.getDefaultizedParams=({params:e})=>w({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});J.wrapRoot=({children:e,instance:t})=>b.jsx(W.Provider,{value:n=>{var o;return((o=t.getItemMeta(n))==null?void 0:o.depth)??0},children:e});J.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const se=({instance:e,params:t,models:n})=>{const o=C.useMemo(()=>{const c=new Map;return n.expandedItems.value.forEach(m=>{c.set(m,!0)}),c},[n.expandedItems.value]),a=(c,m)=>{var l;(l=t.onExpandedItemsChange)==null||l.call(t,c,m),n.expandedItems.setControlledValue(m)},d=C.useCallback(c=>o.has(c),[o]),u=C.useCallback(c=>{var m;return!!((m=e.getItemMeta(c))!=null&&m.expandable)},[e]),s=L((c,m)=>{const l=e.isItemExpanded(m);e.setItemExpansion(c,m,!l)}),i=L((c,m,l)=>{if(e.isItemExpanded(m)===l)return;let h;l?h=[m].concat(n.expandedItems.value):h=n.expandedItems.value.filter(g=>g!==m),t.onItemExpansionToggle&&t.onItemExpansionToggle(c,m,l),a(c,h)}),p=(c,m)=>{const l=e.getItemMeta(m),h=e.getItemOrderedChildrenIds(l.parentId).filter(f=>e.isItemExpandable(f)&&!e.isItemExpanded(f)),g=n.expandedItems.value.concat(h);h.length>0&&(t.onItemExpansionToggle&&h.forEach(f=>{t.onItemExpansionToggle(c,f,!0)}),a(c,g))},r=C.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:i},instance:{isItemExpanded:d,isItemExpandable:u,setItemExpansion:i,toggleItemExpansion:s,expandAllSiblings:p},contextValue:{expansion:{expansionTrigger:r}}}};se.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const Jt=[];se.getDefaultizedParams=({params:e})=>w({},e,{defaultExpandedItems:e.defaultExpandedItems??Jt});se.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Le=(e,t)=>{let n=t.length-1;for(;n>=0&&!e.isItemNavigable(t[n]);)n-=1;if(n!==-1)return t[n]},$e=(e,t)=>{const n=e.getItemMeta(t),o=e.getItemOrderedChildrenIds(n.parentId),a=e.getItemIndex(t);if(a===0)return n.parentId;let d=a-1;for(;!e.isItemNavigable(o[d])&&d>=0;)d-=1;if(d===-1)return n.parentId==null?null:$e(e,n.parentId);let u=o[d],s=Le(e,e.getItemOrderedChildrenIds(u));for(;e.isItemExpanded(u)&&s!=null;)u=s,s=e.getItemOrderedChildrenIds(u).find(e.isItemNavigable);return u},H=(e,t)=>{if(e.isItemExpanded(t)){const o=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(o!=null)return o}let n=e.getItemMeta(t);for(;n!=null;){const o=e.getItemOrderedChildrenIds(n.parentId),a=e.getItemIndex(n.id);if(a<o.length-1){let d=a+1;for(;!e.isItemNavigable(o[d])&&d<o.length-1;)d+=1;if(e.isItemNavigable(o[d]))return o[d]}n=e.getItemMeta(n.parentId)}return null},Fe=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const n=e.getItemOrderedChildrenIds(t),o=Le(e,n);if(o==null)return t;t=o}return t},q=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),ze=(e,t,n)=>{if(t===n)return[t,n];const o=e.getItemMeta(t),a=e.getItemMeta(n);if(o.parentId===a.id||a.parentId===o.id)return a.parentId===o.id?[o.id,a.id]:[a.id,o.id];const d=[o.id],u=[a.id];let s=o.parentId,i=a.parentId,p=u.indexOf(s)!==-1,r=d.indexOf(i)!==-1,c=!0,m=!0;for(;!r&&!p;)c&&(d.push(s),p=u.indexOf(s)!==-1,c=s!==null,!p&&c&&(s=e.getItemMeta(s).parentId)),m&&!p&&(u.push(i),r=d.indexOf(i)!==-1,m=i!==null,!r&&m&&(i=e.getItemMeta(i).parentId));const l=p?s:i,I=e.getItemOrderedChildrenIds(l),h=d[d.indexOf(l)-1],g=u[u.indexOf(l)-1];return I.indexOf(h)<I.indexOf(g)?[t,n]:[n,t]},Gt=(e,t,n)=>{const o=i=>{if(e.isItemExpandable(i)&&e.isItemExpanded(i))return e.getItemOrderedChildrenIds(i)[0];let p=e.getItemMeta(i);for(;p!=null;){const r=e.getItemOrderedChildrenIds(p.parentId),c=e.getItemIndex(p.id);if(c<r.length-1)return r[c+1];p=e.getItemMeta(p.parentId)}throw new Error("Invalid range")},[a,d]=ze(e,t,n),u=[a];let s=a;for(;s!==d;)s=o(s),e.isItemDisabled(s)||u.push(s);return u},Qt=e=>{let t=q(e);const n=[];for(;t!=null;)n.push(t),t=H(e,t);return n},ue=(e,t)=>t!==e.closest('*[role="treeitem"]'),ee=e=>Array.isArray(e)?e:e!=null?[e]:[],ae=e=>{const t={};return e.forEach(n=>{t[n]=!0}),t},ie=({instance:e,params:t,models:n})=>{const o=C.useRef(null),a=C.useRef({}),d=C.useMemo(()=>{const h=new Map;return Array.isArray(n.selectedItems.value)?n.selectedItems.value.forEach(g=>{h.set(g,!0)}):n.selectedItems.value!=null&&h.set(n.selectedItems.value,!0),h},[n.selectedItems.value]),u=(h,g)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const f=g.filter(T=>!e.isItemSelected(T)),y=n.selectedItems.value.filter(T=>!g.includes(T));f.forEach(T=>{t.onItemSelectionToggle(h,T,!0)}),y.forEach(T=>{t.onItemSelectionToggle(h,T,!1)})}else g!==n.selectedItems.value&&(n.selectedItems.value!=null&&t.onItemSelectionToggle(h,n.selectedItems.value,!1),g!=null&&t.onItemSelectionToggle(h,g,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(h,g),n.selectedItems.setControlledValue(g)},s=h=>d.has(h),i=({event:h,itemId:g,keepExistingSelection:f=!1,shouldBeSelected:y})=>{if(t.disableSelection)return;let T;if(f){const R=ee(n.selectedItems.value),M=e.isItemSelected(g);M&&(y===!1||y==null)?T=R.filter(P=>P!==g):!M&&(y===!0||y==null)?T=[g].concat(R):T=R}else y===!1||y==null&&e.isItemSelected(g)?T=t.multiSelect?[]:null:T=t.multiSelect?[g]:g;u(h,T),o.current=g,a.current={}},p=(h,[g,f])=>{if(t.disableSelection||!t.multiSelect)return;let y=ee(n.selectedItems.value).slice();Object.keys(a.current).length>0&&(y=y.filter(P=>!a.current[P]));const T=ae(y),R=Gt(e,g,f),M=R.filter(P=>!T[P]);y=y.concat(M),u(h,y),a.current=ae(R)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:i},instance:{isItemSelected:s,selectItem:i,selectAllNavigableItems:h=>{if(t.disableSelection||!t.multiSelect)return;const g=Qt(e);u(h,g),a.current=ae(g)},expandSelectionRange:(h,g)=>{if(o.current!=null){const[f,y]=ze(e,g,o.current);p(h,[f,y])}},selectRangeFromStartToItem:(h,g)=>{p(h,[q(e),g])},selectRangeFromItemToEnd:(h,g)=>{p(h,[g,Fe(e)])},selectItemFromArrowNavigation:(h,g,f)=>{if(t.disableSelection||!t.multiSelect)return;let y=ee(n.selectedItems.value).slice();Object.keys(a.current).length===0?(y.push(f),a.current={[g]:!0,[f]:!0}):(a.current[g]||(a.current={}),a.current[f]?(y=y.filter(T=>T!==g),delete a.current[g]):(y.push(f),a.current[f]=!0)),u(h,y)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};ie.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const Yt=[];ie.getDefaultizedParams=({params:e})=>w({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?Yt:null)});ie.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Ee=1e3;class Zt{constructor(t=Ee){this.timeouts=new Map,this.cleanupTimeout=Ee,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const a=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,a)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class Ht{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}class en{}function tn(e){let t=0;return function(o,a,d){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Ht:new Zt);const[u]=C.useState(new en),s=C.useRef(null),i=C.useRef(void 0);i.current=d;const p=C.useRef(null);if(!s.current&&i.current){const r=(c,m)=>{var l;m.defaultMuiPrevented||(l=i.current)==null||l.call(i,c,m)};s.current=o.$$subscribeEvent(a,r),t+=1,p.current={cleanupToken:t},e.registry.register(u,()=>{var c;(c=s.current)==null||c.call(s),s.current=null,p.current=null},p.current)}else!i.current&&s.current&&(s.current(),s.current=null,p.current&&(e.registry.unregister(p.current),p.current=null));C.useEffect(()=>{if(!s.current&&i.current){const r=(c,m)=>{var l;m.defaultMuiPrevented||(l=i.current)==null||l.call(i,c,m)};s.current=o.$$subscribeEvent(a,r)}return p.current&&e.registry&&(e.registry.unregister(p.current),p.current=null),()=>{var r;(r=s.current)==null||r.call(s),s.current=null}},[o,a])}}const nn={registry:null},on=tn(nn),Be=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Be(t.shadowRoot):t:null};function rn(e){return e.replace(/["\\]/g,"\\$&")}const sn=(e,t)=>{let n=ee(t).find(o=>{if(!e.isItemNavigable(o))return!1;const a=e.getItemMeta(o);return a&&(a.parentId==null||e.isItemExpanded(a.parentId))});return n==null&&(n=q(e)),n},fe=({instance:e,params:t,state:n,setState:o,models:a,rootRef:d})=>{const u=sn(e,a.selectedItems.value),s=L(g=>{const f=typeof g=="function"?g(n.focusedItemId):g;n.focusedItemId!==f&&o(y=>w({},y,{focusedItemId:f}))}),i=C.useCallback(()=>!!d.current&&d.current.contains(Be(dt(d.current))),[d]),p=C.useCallback(g=>n.focusedItemId===g&&i(),[n.focusedItemId,i]),r=g=>{const f=e.getItemMeta(g);return f&&(f.parentId==null||e.isItemExpanded(f.parentId))},c=(g,f)=>{const y=e.getItemDOMElement(f);y&&y.focus(),s(f),t.onItemFocus&&t.onItemFocus(g,f)},m=L((g,f)=>{r(f)&&c(g,f)}),l=L(()=>{if(n.focusedItemId==null)return;if(e.getItemMeta(n.focusedItemId)){const f=e.getItemDOMElement(n.focusedItemId);f&&f.blur()}s(null)}),I=g=>g===u;on(e,"removeItem",({id:g})=>{n.focusedItemId===g&&c(null,u)});const h=g=>f=>{var y;(y=g.onFocus)==null||y.call(g,f),!f.defaultMuiPrevented&&f.target===f.currentTarget&&c(f,u)};return{getRootProps:g=>({onFocus:h(g)}),publicAPI:{focusItem:m},instance:{isItemFocused:p,canItemBeTabbed:I,focusItem:m,removeFocusedItem:l}}};fe.getInitialState=()=>({focusedItemId:null});fe.params={onItemFocus:!0};const te=(e,t)=>e.getAvailablePlugins().has(t),ln=({props:e})=>{const{instance:t}=K(),{label:n,itemId:o}=e,[a,d]=C.useState(n),u=t.isItemBeingEdited(o);return C.useEffect(()=>{u||d(n)},[u,n]),{propsEnhancers:{labelInput:({externalEventHandlers:s,interactions:i})=>t.isItemEditable(o)?{value:a??"","data-element":"labelInput",onChange:l=>{var I;(I=s.onChange)==null||I.call(s,l),d(l.target.value)},onKeyDown:l=>{var h;if((h=s.onKeyDown)==null||h.call(s,l),l.defaultMuiPrevented)return;const I=l.target;l.key==="Enter"&&I.value?i.handleSaveItemLabel(l,I.value):l.key==="Escape"&&i.handleCancelItemLabelEditing(l)},onBlur:l=>{var I;(I=s.onBlur)==null||I.call(s,l),!l.defaultMuiPrevented&&l.target.value&&i.handleSaveItemLabel(l,l.target.value)},autoFocus:!0,type:"text"}:{}}}},$=({instance:e,state:t,setState:n,params:o})=>{const a=C.useRef(t.editedItemId),d=c=>a.current===c,u=c=>{n(m=>w({},m,{editedItemId:c})),a.current=c},s=c=>c===t.editedItemId,i=!!o.isItemEditable,p=c=>{if(c==null||!i)return!1;const m=e.getItem(c);return m?typeof o.isItemEditable=="function"?o.isItemEditable(m):!!o.isItemEditable:!1},r=(c,m)=>{if(!m)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",c].join(`
`));n(l=>{const I=l.items.itemMetaMap[c];return I.label!==m?w({},l,{items:w({},l.items,{itemMetaMap:w({},l.items.itemMetaMap,{[c]:w({},I,{label:m})})})}):l}),o.onItemLabelChange&&o.onItemLabelChange(c,m)};return{instance:{setEditedItemId:u,isItemBeingEdited:s,updateItemLabel:r,isItemEditable:p,isTreeViewEditable:i,isItemBeingEditedRef:d},publicAPI:{updateItemLabel:r}}};$.itemPlugin=ln;$.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const n=t==null?void 0:t.labelEditing;return w({},e,{isItemEditable:n?e.isItemEditable??!1:!1})};$.getInitialState=()=>({editedItemId:null});$.params={onItemLabelChange:!0,isItemEditable:!0};function cn(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Ke=({instance:e,params:t,state:n})=>{const o=pt(),a=C.useRef({}),d=L(r=>{a.current=r(a.current)});C.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const r={},c=m=>{r[m.id]=m.label.substring(0,1).toLowerCase()};Object.values(n.items.itemMetaMap).forEach(c),a.current=r},[n.items.itemMetaMap,t.getItemId,e]);const u=(r,c)=>{const m=c.toLowerCase(),l=f=>{const y=H(e,f);return y===null?q(e):y};let I=null,h=l(r);const g={};for(;I==null&&!g[h];)a.current[h]===m?I=h:(g[h]=!0,h=l(h));return I},s=r=>!t.disableSelection&&!e.isItemDisabled(r),i=r=>!e.isItemDisabled(r)&&e.isItemExpandable(r);return{instance:{updateFirstCharMap:d,handleItemKeyDown:(r,c)=>{if(r.defaultMuiPrevented||r.altKey||ue(r.target,r.currentTarget))return;const m=r.ctrlKey||r.metaKey,l=r.key;switch(!0){case(l===" "&&s(c)):{r.preventDefault(),t.multiSelect&&r.shiftKey?e.expandSelectionRange(r,c):e.selectItem({event:r,itemId:c,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case l==="Enter":{te(e,$)&&e.isItemEditable(c)&&!e.isItemBeingEdited(c)?e.setEditedItemId(c):i(c)?(e.toggleItemExpansion(r,c),r.preventDefault()):s(c)&&(t.multiSelect?(r.preventDefault(),e.selectItem({event:r,itemId:c,keepExistingSelection:!0})):e.isItemSelected(c)||(e.selectItem({event:r,itemId:c}),r.preventDefault()));break}case l==="ArrowDown":{const I=H(e,c);I&&(r.preventDefault(),e.focusItem(r,I),t.multiSelect&&r.shiftKey&&s(I)&&e.selectItemFromArrowNavigation(r,c,I));break}case l==="ArrowUp":{const I=$e(e,c);I&&(r.preventDefault(),e.focusItem(r,I),t.multiSelect&&r.shiftKey&&s(I)&&e.selectItemFromArrowNavigation(r,c,I));break}case(l==="ArrowRight"&&!o||l==="ArrowLeft"&&o):{if(m)return;if(e.isItemExpanded(c)){const I=H(e,c);I&&(e.focusItem(r,I),r.preventDefault())}else i(c)&&(e.toggleItemExpansion(r,c),r.preventDefault());break}case(l==="ArrowLeft"&&!o||l==="ArrowRight"&&o):{if(m)return;if(i(c)&&e.isItemExpanded(c))e.toggleItemExpansion(r,c),r.preventDefault();else{const I=e.getItemMeta(c).parentId;I&&(e.focusItem(r,I),r.preventDefault())}break}case l==="Home":{s(c)&&t.multiSelect&&m&&r.shiftKey?e.selectRangeFromStartToItem(r,c):e.focusItem(r,q(e)),r.preventDefault();break}case l==="End":{s(c)&&t.multiSelect&&m&&r.shiftKey?e.selectRangeFromItemToEnd(r,c):e.focusItem(r,Fe(e)),r.preventDefault();break}case l==="*":{e.expandAllSiblings(r,c),r.preventDefault();break}case(String.fromCharCode(r.keyCode)==="A"&&m&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(r),r.preventDefault();break}case(!m&&!r.shiftKey&&cn(l)):{const I=u(c,l);I!=null&&(e.focusItem(r,I),r.preventDefault());break}}}}}};Ke.params={};const Ue=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});Ue.params={};const _e=C.createContext(null);function Ne(e){const{children:t,itemId:n=null}=e,{instance:o,treeId:a,rootRef:d}=K(),u=C.useRef(new Map);C.useEffect(()=>{if(!d.current)return;let i=null;if(n==null)i=d.current.id;else{const I=o.getItemMeta(n);I!==void 0&&(i=re({itemId:n,treeId:a,id:I.idAttribute}))}if(i==null)return;const p=o.getItemOrderedChildrenIds(n??null)??[],r=rn(i),c=d.current.querySelectorAll(`${n==null?"":`*[id="${r}"] `}[role="treeitem"]:not(*[id="${r}"] [role="treeitem"] [role="treeitem"])`),m=Array.from(c).map(I=>u.current.get(I.id));(m.length!==p.length||m.some((I,h)=>I!==p[h]))&&o.setJSXItemsOrderedChildrenIds(n??null,m)});const s=C.useMemo(()=>({registerChild:(i,p)=>u.current.set(i,p),unregisterChild:i=>u.current.delete(i),parentId:n}),[n]);return b.jsx(_e.Provider,{value:s,children:t})}const G=({instance:e,setState:t})=>{e.preventItemUpdates();const n=L(d=>(t(u=>{if(u.items.itemMetaMap[d.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${d.id}"`].join(`
`));return w({},u,{items:w({},u.items,{itemMetaMap:w({},u.items.itemMetaMap,{[d.id]:d}),itemMap:w({},u.items.itemMap,{[d.id]:{id:d.id,label:d.label}})})})}),()=>{t(u=>{const s=w({},u.items.itemMetaMap),i=w({},u.items.itemMap);return delete s[d.id],delete i[d.id],w({},u,{items:w({},u.items,{itemMetaMap:s,itemMap:i})})}),Oe(e,"removeItem",{id:d.id})})),o=(d,u)=>{const s=d??B;t(i=>w({},i,{items:w({},i.items,{itemOrderedChildrenIds:w({},i.items.itemOrderedChildrenIds,{[s]:u}),itemChildrenIndexes:w({},i.items.itemChildrenIndexes,{[s]:De(u)})})}))},a=L((d,u)=>(e.updateFirstCharMap(s=>(s[d]=u,s)),()=>{e.updateFirstCharMap(s=>{const i=w({},s);return delete i[d],i})}));return{instance:{insertJSXItem:n,setJSXItemsOrderedChildrenIds:o,mapFirstCharFromJSX:a}}},Xe=e=>Array.isArray(e)?e.length>0&&e.some(Xe):!!e,an=({props:e,rootRef:t,contentRef:n})=>{const{instance:o,treeId:a}=K(),{children:d,disabled:u=!1,label:s,itemId:i,id:p}=e,r=C.useContext(_e);if(r==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:c,unregisterChild:m,parentId:l}=r,I=Xe(d),h=C.useRef(null),g=oe(h,n);return mt(()=>{const f=re({itemId:i,treeId:a,id:p});return c(f,i),()=>{m(f)}},[c,m,i,p,a]),C.useEffect(()=>o.insertJSXItem({id:i,idAttribute:p,parentId:l,expandable:I,disabled:u}),[o,l,i,I,u,p]),C.useEffect(()=>{var f;if(s)return o.mapFirstCharFromJSX(i,(((f=h.current)==null?void 0:f.textContent)??"").substring(0,1).toLowerCase())},[o,i,s]),{contentRef:g,rootRef:t}};G.itemPlugin=an;G.wrapItem=({children:e,itemId:t})=>{const n=C.useContext(W);return b.jsx(Ne,{itemId:t,children:b.jsx(W.Provider,{value:n+1,children:e})})};G.wrapRoot=({children:e})=>b.jsx(Ne,{children:b.jsx(W.Provider,{value:0,children:e})});G.params={};const un=[J,se,ie,fe,Ke,Ue,G],dn=Dt(),pn=e=>{const{classes:t}=e;return Re({root:["root"]},At,t)},mn=F("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),fn=[],In=C.forwardRef(function(t,n){const o=dn({props:t,name:"MuiSimpleTreeView"}),a=o,{getRootProps:d,contextValue:u}=Xt({plugins:un,rootRef:n,props:w({},o,{items:fn})}),{slots:s,slotProps:i}=o,p=pn(o),r=(s==null?void 0:s.root)??mn,c=Se({elementType:r,externalSlotProps:i==null?void 0:i.root,className:p.root,getSlotProps:d,ownerState:a});return b.jsx(Wt,{value:u,children:b.jsx(r,w({},c))})}),gn=O(b.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L12.7 3.7a.996.996 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0zm0 12.34-2.46-2.46a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.996.996 0 0 0-1.41 0z"})),hn=O(b.jsx("path",{d:"M8.12 19.3c.39.39 1.02.39 1.41 0L12 16.83l2.47 2.47c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-3.17-3.17a.996.996 0 0 0-1.41 0l-3.17 3.17c-.4.38-.4 1.02-.01 1.41m7.76-14.6a.996.996 0 0 0-1.41 0L12 7.17 9.53 4.7a.996.996 0 0 0-1.41 0c-.39.39-.39 1.03 0 1.42l3.17 3.17c.39.39 1.02.39 1.41 0l3.17-3.17c.4-.39.4-1.03.01-1.42"})),We=e=>Array.isArray(e)?e.length>0&&e.some(We):!!e,bn=({itemId:e,children:t})=>{const{instance:n,selection:{multiSelect:o},publicAPI:a}=K(),d={expandable:We(t),expanded:n.isItemExpanded(e),focused:n.isItemFocused(e),selected:n.isItemSelected(e),disabled:n.isItemDisabled(e),editing:n!=null&&n.isItemBeingEdited?n==null?void 0:n.isItemBeingEdited(e):!1,editable:n.isItemEditable?n.isItemEditable(e):!1},u=l=>{if(d.disabled)return;d.focused||n.focusItem(l,e);const I=o&&(l.shiftKey||l.ctrlKey||l.metaKey);d.expandable&&!(I&&n.isItemExpanded(e))&&n.toggleItemExpansion(l,e)},s=l=>{if(d.disabled)return;d.focused||n.focusItem(l,e),o&&(l.shiftKey||l.ctrlKey||l.metaKey)?l.shiftKey?n.expandSelectionRange(l,e):n.selectItem({event:l,itemId:e,keepExistingSelection:!0}):n.selectItem({event:l,itemId:e,shouldBeSelected:!0})},i=l=>{const I=l.nativeEvent.shiftKey;o&&I?n.expandSelectionRange(l,e):n.selectItem({event:l,itemId:e,keepExistingSelection:o,shouldBeSelected:l.target.checked})},p=()=>{te(n,$)&&n.isItemEditable(e)&&(n.isItemBeingEdited(e)?n.setEditedItemId(null):n.setEditedItemId(e))};return{interactions:{handleExpansion:u,handleSelection:s,handleCheckboxSelection:i,toggleItemEditing:p,handleSaveItemLabel:(l,I)=>{te(n,$)&&n.isItemBeingEditedRef(e)&&(n.updateItemLabel(e,I),p(),n.focusItem(l,e))},handleCancelItemLabelEditing:l=>{te(n,$)&&n.isItemBeingEditedRef(e)&&(p(),n.focusItem(l,e))}},status:d,publicAPI:a}},xn=e=>{const{runItemPlugins:t,items:{onItemClick:n,disabledItemsFocusable:o,indentationAtItemLevel:a},selection:{disableSelection:d,checkboxSelection:u},expansion:{expansionTrigger:s},treeId:i,instance:p,publicAPI:r}=K(),c=C.useContext(W),{id:m,itemId:l,label:I,children:h,rootRef:g}=e,{rootRef:f,contentRef:y,propsEnhancers:T}=t(e),{interactions:R,status:M}=bn({itemId:l,children:h}),P=C.useRef(null),j=C.useRef(null),Q=oe(g,f,P),Je=oe(y,j),Ie=C.useRef(null),Ge=re({itemId:l,treeId:i,id:m}),Qe=p.canItemBeTabbed(l)?0:-1,le={rootRefObject:P,contentRefObject:j,interactions:R},Ye=E=>x=>{var S;if((S=E.onFocus)==null||S.call(E,x),x.defaultMuiPrevented)return;const v=!M.disabled||o;!M.focused&&v&&x.currentTarget===x.target&&p.focusItem(x,l)},Ze=E=>x=>{var S,D,X,ge,he;if((S=E.onBlur)==null||S.call(E,x),x.defaultMuiPrevented)return;const v=p.getItemDOMElement(l);M.editing||x.relatedTarget&&ue(x.relatedTarget,v)&&(x.target&&((X=(D=x.target)==null?void 0:D.dataset)==null?void 0:X.element)==="labelInput"&&ue(x.target,v)||((he=(ge=x.relatedTarget)==null?void 0:ge.dataset)==null?void 0:he.element)==="labelInput")||p.removeFocusedItem()},He=E=>x=>{var v,S,D;(v=E.onKeyDown)==null||v.call(E,x),!(x.defaultMuiPrevented||((D=(S=x.target)==null?void 0:S.dataset)==null?void 0:D.element)==="labelInput")&&p.handleItemKeyDown(x,l)},et=E=>x=>{var v;(v=E.onDoubleClick)==null||v.call(E,x),!x.defaultMuiPrevented&&R.toggleItemEditing()},tt=E=>x=>{var v,S;(v=E.onClick)==null||v.call(E,x),n==null||n(x,l),!(x.defaultMuiPrevented||(S=Ie.current)!=null&&S.contains(x.target))&&(s==="content"&&R.handleExpansion(x),u||R.handleSelection(x))},nt=E=>x=>{var v;(v=E.onMouseDown)==null||v.call(E,x),!x.defaultMuiPrevented&&(x.shiftKey||x.ctrlKey||x.metaKey||M.disabled)&&x.preventDefault()},ot=E=>x=>{var v;(v=E.onChange)==null||v.call(E,x),!x.defaultMuiPrevented&&(d||M.disabled||R.handleCheckboxSelection(x))},rt=E=>x=>{var v;(v=E.onClick)==null||v.call(E,x),!x.defaultMuiPrevented&&s==="iconContainer"&&R.handleExpansion(x)};return{getRootProps:(E={})=>{var X;const x=w({},A(e),A(E));let v;M.selected?v=!0:d||M.disabled?v=void 0:v=!1;const S=w({},x,{ref:Q,role:"treeitem",tabIndex:Qe,id:Ge,"aria-expanded":M.expandable?M.expanded:void 0,"aria-selected":v,"aria-disabled":M.disabled||void 0},E,{onFocus:Ye(x),onBlur:Ze(x),onKeyDown:He(x)});a&&(S.style={"--TreeView-itemDepth":typeof c=="function"?c(l):c});const D=((X=T.root)==null?void 0:X.call(T,w({},le,{externalEventHandlers:x})))??{};return w({},S,D)},getContentProps:(E={})=>{var D;const x=A(E),v=w({},x,E,{ref:Je,onClick:tt(x),onMouseDown:nt(x),status:M});a&&(v.indentationAtItemLevel=!0);const S=((D=T.content)==null?void 0:D.call(T,w({},le,{externalEventHandlers:x})))??{};return w({},v,S)},getGroupTransitionProps:(E={})=>{const x=A(E),v=w({},x,{unmountOnExit:!0,component:"ul",role:"group",in:M.expanded,children:h},E);return a&&(v.indentationAtItemLevel=!0),v},getIconContainerProps:(E={})=>{const x=A(E);return w({},x,E,{onClick:rt(x)})},getCheckboxProps:(E={})=>{const x=A(E);return w({},x,{visible:u,ref:Ie,checked:M.selected,disabled:d||M.disabled,tabIndex:-1},E,{onChange:ot(x)})},getLabelProps:(E={})=>{const x=w({},A(E)),v=w({},x,{children:I},E,{onDoubleClick:et(x)});return p.isTreeViewEditable&&(v.editable=M.editable),v},getLabelInputProps:(E={})=>{var S;const x=A(E),v=((S=T.labelInput)==null?void 0:S.call(T,{rootRefObject:P,contentRefObject:j,externalEventHandlers:x,interactions:R}))??{};return w({},E,v)},getDragAndDropOverlayProps:(E={})=>{var S;const x=A(E),v=((S=T.dragAndDropOverlay)==null?void 0:S.call(T,w({},le,{externalEventHandlers:x})))??{};return w({},E,v)},rootRef:Q,status:M,publicAPI:r}},yn=xn,Cn=O(b.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),En=O(b.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));function qe(e){const{children:t,itemId:n}=e,{wrapItem:o,instance:a}=K();return o({children:t,itemId:n,instance:a})}qe.propTypes={children:ye.node,itemId:ye.string.isRequired};function wn(e){const{slots:t,slotProps:n,status:o}=e,a=K(),d=w({},a.icons.slots,{expandIcon:a.icons.slots.expandIcon??Cn,collapseIcon:a.icons.slots.collapseIcon??En}),u=a.icons.slotProps;let s;t!=null&&t.icon?s="icon":o.expandable?o.expanded?s="collapseIcon":s="expandIcon":s="endIcon";const i=(t==null?void 0:t[s])??d[s],p=Se({elementType:i,externalSlotProps:r=>w({},xe(u[s],r),xe(n==null?void 0:n[s],r)),ownerState:{}});return i?b.jsx(i,w({},p)):null}const Tn=["visible"],vn=F("li",{name:"MuiTreeItem2",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Mn=F("div",{name:"MuiTreeItem2",slot:"Content",overridesResolver:(e,t)=>t.content,shouldForwardProp:e=>pe(e)&&e!=="status"&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}},{props:({status:t})=>t.disabled,style:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"}},{props:({status:t})=>t.focused,style:{backgroundColor:(e.vars||e).palette.action.focus}},{props:({status:t})=>t.selected,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:N(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:N(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:N(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},{props:({status:t})=>t.selected&&t.focused,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:N(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}]})),Rn=F("div",{name:"MuiTreeItem2",slot:"Label",overridesResolver:(e,t)=>t.label,shouldForwardProp:e=>pe(e)&&e!=="editable"})(({theme:e})=>w({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative",overflow:"hidden"},e.typography.body1,{variants:[{props:({editable:t})=>t,style:{paddingLeft:"2px"}}]})),Sn=F("div",{name:"MuiTreeItem2",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})({width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}});F(Pe,{name:"MuiTreeItem2",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>pe(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]});F(C.forwardRef((e,t)=>{const{visible:n}=e,o=de(e,Tn);return n?b.jsx(Vt,w({},o,{ref:t})):null}),{name:"MuiTreeItem2",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})({padding:0});const we=O(b.jsx("path",{d:"M14.67 6v12c0 .55-.45 1-1 1h-3.33c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h3.33c.55 0 1 .45 1 1m2 13H20c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1h-3.33c-.55 0-1 .45-1 1v12c0 .55.44 1 1 1m-8.34-1V6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3.33c.56 0 1-.45 1-1"})),Pn=O(b.jsx("path",{d:"M4 21h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M3 9.21v5.59c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.8c-.31-.31-.85-.09-.85.36M12 17h8c.55 0 1-.45 1-1s-.45-1-1-1h-8c-.55 0-1 .45-1 1s.45 1 1 1M3 4c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1m9 5h8c.55 0 1-.45 1-1s-.45-1-1-1h-8c-.55 0-1 .45-1 1s.45 1 1 1m0 4h8c.55 0 1-.45 1-1s-.45-1-1-1h-8c-.55 0-1 .45-1 1s.45 1 1 1"})),Te=O(b.jsx("path",{d:"M12.65 10C11.7 7.31 8.9 5.5 5.77 6.12c-2.29.46-4.15 2.29-4.63 4.58C.32 14.57 3.26 18 7 18c2.61 0 4.83-1.67 5.65-4H17v2c0 1.1.9 2 2 2s2-.9 2-2v-2c1.1 0 2-.9 2-2s-.9-2-2-2zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),kn=O(b.jsx("path",{d:"M11 7h2v2h-2zm1 10c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1m0-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),jn=O(b.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}));function Vn(e){return b.jsx(bt.div,{initial:{opacity:0,x:20},animate:{opacity:e.in?1:0,x:e.in?0:20},transition:{duration:.3},children:b.jsx(Pe,{...e})})}const U=4,z={position:"absolute",color:"text.secondary",display:"grid",placeItems:"center"},On={table:e=>b.jsx(V,{sx:z,children:b.jsx(ht,{sx:{color:"primary.main",filter:`hue-rotate(${(e??0)*20}deg)`}})}),columns:()=>b.jsx(V,{sx:z,children:b.jsx(we,{})}),column:()=>b.jsx(V,{sx:{...z,opacity:.5},children:b.jsx(we,{})}),indexes:()=>b.jsx(V,{sx:z,children:b.jsx(Pn,{})}),index:()=>b.jsx(V,{sx:{...z,opacity:.5},children:b.jsx(kn,{})}),key:()=>b.jsx(V,{sx:{...z,opacity:.5},children:b.jsx(Te,{})}),pk:()=>b.jsx(V,{sx:{...z,color:"info.main"},children:b.jsx(Te,{})})},Dn=C.forwardRef(function(t,n){const{id:o,itemId:a,label:d,disabled:u,children:s,type:i,hueIndex:p,subtitle:r,caption:c,...m}=t,{getRootProps:l,getContentProps:I,getIconContainerProps:h,getLabelProps:g,getGroupTransitionProps:f,status:y}=yn({id:o,itemId:a,children:s,label:d,disabled:u,rootRef:n});return b.jsx(qe,{itemId:a,children:b.jsxs(vn,{...l(m),children:[b.jsxs(Mn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:.5,pl:U/2,pr:1.5,borderRadius:0,boxShadow:"-1px 0 0 var(--mui-palette-divider)"},...I(),children:[b.jsxs(V,{sx:{display:"flex",alignItems:"center"},children:[!["column","index","pk","key"].includes(i)&&b.jsx(V,{sx:{display:"grid",placeItems:"center",p:U/2},children:b.jsx(Sn,{sx:{position:"absolute"},...h(),children:b.jsx(wn,{status:y})})}),b.jsx(V,{sx:{display:"grid",placeItems:"center",p:U/2},children:On[i](p)}),b.jsx(Rn,{...g(),sx:{lineHeight:1,pl:U/3,translate:"0 0.07rem",width:"auto",...Z}}),r&&b.jsx(V,{sx:{p:.5,bgcolor:"divider",borderRadius:1,ml:1,translate:"0 0.07rem"},children:b.jsx(Y,{variant:"caption",sx:{color:"text.secondary",textTransform:"uppercase",lineHeight:1,...Z},children:r})})]}),b.jsxs(V,{sx:{display:"flex",alignItems:"center",position:"relative"},children:[c&&b.jsx(Y,{variant:"body2",sx:{mr:1,color:"text.secondary",lineHeight:1,translate:"0 0.07rem",textTransform:"uppercase",fontFamily:'"jf openhuninn"',...Z},children:c}),["table","columns","indexes"].includes(i)&&b.jsx(Et,{title:b.jsx(Y,{variant:"body2",children:"正被其他網站樣板使用中，無法編輯"}),arrow:!0,placement:"right",children:b.jsx(ft,{sx:{display:"grid",placeItems:"center",p:U/2,borderRadius:1,"&:hover":{bgcolor:"action.hover"},"&:active":{bgcolor:"action.selected"}},onClick:T=>T.stopPropagation(),children:b.jsx(jn,{sx:{color:"text.secondary",position:"absolute"}})})})]})]}),s&&b.jsx(Vn,{...f(),style:{paddingLeft:`calc(var(--mui-spacing) * ${U})`,boxShadow:"-1px 0 0 var(--mui-palette-divider)"}})]})})}),_=C.memo(Dn),k=",_,";function An(){const{data:e,isFetching:t}=xt(),[n,o]=C.useState([]),a=(d,u,s)=>{if(s)if(u.endsWith(k+"table")){const i=[u],p=u.split(k)[0],r=["columns","indexes"].map(c=>`${p}${k}${c}`);o([...i,...r])}else o([...n,u]);else o(n.filter(i=>i!==u))};return C.useEffect(()=>{if(t||!e)return;const d=Object.keys(e)[0],u=`${d}${k}table`,s=`${d}${k}columns`,i=`${d}${k}indexes`;o([u,s,i])},[e,t]),t?b.jsx(V,{sx:{display:"grid",placeItems:"center",height:1},children:b.jsx(It,{})}):b.jsx(In,{slots:{expandIcon:gn,collapseIcon:hn},sx:{ml:-4/2},expandedItems:n,onItemExpansionToggle:a,children:gt(e).map(([d,{columns:u,indexes:s,type:i,hueIndex:p}])=>b.jsxs(_,{type:"table",itemId:`${d}${k}table`,label:d,hueIndex:p,subtitle:i,children:[b.jsx(_,{type:"columns",itemId:`${d}${k}columns`,label:"欄位",children:u.map(({name:r,type:c,pk:m})=>b.jsx(_,{itemId:`${d}${k}column${k}${r}`,type:m===1?"pk":r.toLowerCase().includes("id")?"key":"column",label:r,caption:c},`${d}${k}column${k}${r}`))}),b.jsxs(_,{type:"indexes",itemId:`${d}${k}indexes`,label:"索引",children:[s.length===0&&b.jsx(_,{type:"index",itemId:`${d}${k}no${k}index`,label:"無索引"}),s.map(({name:r,unique:c,columns:m})=>b.jsx(_,{itemId:`${d}${k}index${k}${r}`,type:"index",label:m.toSorted((l,I)=>l.seqno-I.seqno).map(({name:l})=>l).join(" → "),caption:c===1?"UNIQUE":void 0},`${d}${k}index${k}${r}`))]})]},d))})}const so=()=>{const[e,t]=C.useState(350),n=C.useRef(null),o=C.useRef(!1),a=()=>{o.current=!0,document.body.style.cursor="ew-resize",document.body.style.userSelect="none"},d=()=>{o.current=!1,document.body.style.cursor="default",document.body.style.userSelect=""},u=s=>{if(!o.current||!n.current)return;const i=s.clientX-n.current.getBoundingClientRect().left;i>=200&&i<=800&&t(i)};return C.useEffect(()=>(window.addEventListener("mousemove",u),window.addEventListener("mouseup",d),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d)}),[]),b.jsxs(V,{ref:n,sx:{width:e,borderRight:1,minHeight:650,borderColor:"divider",position:"relative"},children:[b.jsxs(V,{sx:{display:"flex",alignItems:"center",p:1},children:[b.jsx(Ot,{className:"mode-light",sx:{fontSize:"3rem",mr:1.5,bgcolor:"primary.main",borderRadius:1,borderTopLeftRadius:"calc(var(--mui-shape-borderRadius) * 2.5)",color:"background.default",p:1,opacity:.8}}),b.jsx(Y,{variant:"h6",sx:Z,children:"資料表 & 檢視表"})]}),b.jsx(V,{sx:{position:"absolute",right:0,top:0,bottom:0,width:"1rem",translate:"90% 0",cursor:"ew-resize",zIndex:10,"&:hover":{bgcolor:"action.hover"},"&:active":{bgcolor:"action.selected"}},onMouseDown:a}),b.jsx(An,{})]})};export{so as default};
