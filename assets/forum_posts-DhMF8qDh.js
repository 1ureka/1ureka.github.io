import{g,j as e,a as i,T as l,r as f,i as b,e as v,f as S}from"./Toast-DTVs7FW6.js";import{T as A,P as I}from"./TopicAutocomplete-nFj5vltv.js";import{A as C}from"./ArrowBackIosRounded-DLISxYP9.js";import{u as P,A as T,S as w,B}from"./ScrollArea-CqSHRPTv.js";import{u as p,a as D,b as R,D as u,c as k}from"./url-Di9IlQWA.js";import{T as E,a as M}from"./Tabs-2ZUseKKc.js";import{T as y,C as H}from"./DarkModeRounded-BRETPBpn.js";import{S as d}from"./ThemeMenu-DE-gApYD.js";import{E as j,S as z,a as F}from"./ExpandedPost-C2a-lSRc.js";import{e as L,S as _,f as O}from"./PostHeader-BS2E7Qua.js";import"./Autocomplete-D384TLMz.js";import"./session-xflZUqIh.js";import"./CommentRounded-Cvb71559.js";const U=g(e.jsx("path",{d:"M4 18h4c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1m1 6h10c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1"}),"SortRounded"),W=g(e.jsx("path",{d:"M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0s.39-1.02 0-1.41l-6.59-6.59a.996.996 0 0 0-1.41 0l-6.6 6.58c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1"}),"ArrowUpwardRounded"),m=["title","createdAt","updatedAt","replyCount","viewCount","likeCount"],N=["標題","建立時間","更新時間","回覆數","瀏覽數","讚數"],V=()=>{const{searchParams:s,updateSearchParams:o}=p(),a=s.get("orderBy")||m[1],c=s.get("orderDesc")==="true";let t=m.findIndex(n=>n===a);t===-1&&(t=1);const x=(n,r)=>{o({orderBy:m[r],orderDesc:c.toString()})},h=n=>()=>{t===n&&o({orderBy:m[n],orderDesc:(!c).toString()})};return e.jsxs(i,{sx:{display:"flex",alignItems:{xs:"normal",md:"center"},gap:{xs:0,md:1.5},flexDirection:{xs:"column",md:"row"}},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,p:{xs:1,md:0},pb:0},children:[e.jsx(U,{sx:{color:"inherit"}}),e.jsx(l,{variant:"subtitle1",component:"h2",sx:{lineHeight:1},children:"排序依據"})]}),e.jsx(E,{value:t,onChange:x,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& button:hover":{bgcolor:"action.hover"}},children:N.map((n,r)=>e.jsx(M,{onClick:h(r),label:e.jsx(y,{title:"再次點擊可以切換升冪或降冪排序",arrow:!0,placement:"top",children:e.jsxs(d,{direction:"row",sx:{alignItems:"center"},children:[e.jsx(l,{variant:"subtitle1",component:"span",children:n}),t===r&&e.jsx(W,{fontSize:"small",sx:{transform:c?"rotate(180deg)":"none",transition:"all 0.2s ease"}})]})})},r))})]})},$=()=>{const{searchParams:s}=p(),[o,a]=f.useState(null),c=x=>a(x.currentTarget),t=()=>a(null);return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"換一個主題",arrow:!0,children:e.jsxs(l,{variant:"h6",component:"h2",sx:{color:"text.secondary","&:hover":{cursor:"pointer",textDecoration:"underline",color:"text.primary"}},onClick:c,children:["#",s.get("topic")??"全部"]})}),e.jsx(A,{type:"query",open:!!o,anchorEl:o,onClose:t,onSelect:t})]})},q=["title","createdAt","updatedAt","replyCount","viewCount","likeCount"],G=s=>q.includes(s),J=()=>{const{searchParams:s}=p(),o=s.get("topic")??void 0,a=s.get("orderBy")??"createdAt",c=s.get("orderDesc")==="true",{data:t,isLoading:x,isFetchingNextPage:h}=O({topic:o,orderBy:G(a)?a:"createdAt",order:c?"desc":"asc"});return x||!t?e.jsx(d,{sx:{alignItems:"stretch",mb:1.5},children:[...Array(3)].map((n,r)=>e.jsx(j,{},r))}):t.pages[0].items.length===0?e.jsxs(i,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(z,{sx:{fontSize:"6rem",color:"action.disabled"}}),e.jsx(l,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"沒有符合條件的貼文"})]}):e.jsxs(d,{sx:{alignItems:"stretch",mb:1.5},children:[t.pages.map(n=>n.items.map(r=>e.jsx(F,{postId:r},r))),h&&e.jsx(d,{sx:{alignItems:"stretch",mt:1.5},children:[...Array(3)].map((n,r)=>e.jsx(j,{},r))})]})},K=()=>{const{searchParams:s}=p(),o=s.get("topic")??void 0,{data:a}=L({topic:o});return a?e.jsxs(l,{variant:"body2",component:"span",sx:{color:"text.secondary"},children:["共 ",a," 篇"]}):e.jsx(_,{variant:"rounded",animation:"wave",children:e.jsx(l,{variant:"body2",component:"span",sx:{color:"text.secondary"},children:"共 0 篇"})})},Q=()=>{const{searchParams:s}=p(),o=s.get("topic")??"全部";return e.jsx("title",{children:`論壇樣板 | 貼文 #${o}`})};function X(){const{isMd:s}=P();return e.jsxs(T,{children:[e.jsx(Q,{}),e.jsx(i,{sx:{bgcolor:"secondary.main",height:"35vh",position:"absolute",inset:"0 0 auto 0"}}),e.jsxs(w,{children:[s?e.jsx(D,{}):e.jsx(R,{}),e.jsx(H,{maxWidth:"lg",sx:{position:"relative",my:10},children:e.jsxs(b,{sx:{py:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[e.jsxs(i,{sx:{display:"flex",gap:1,alignItems:"center",pr:{xs:3,md:5},pl:2},children:[e.jsx(d,{sx:{alignItems:"flex-start",flex:1},children:e.jsx(B,{href:v.forum_home,startIcon:e.jsx(C,{}),variant:"outlined",sx:{textWrap:"nowrap"},children:s?"返回首頁":"首頁"})}),e.jsxs(i,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(I,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1,opacity:.8}}),e.jsx(l,{variant:"h5",component:"h2",children:"貼文列表"}),e.jsx($,{})]}),e.jsx(d,{sx:{alignItems:"flex-end",flex:1},children:e.jsx(K,{})})]}),e.jsx(u,{sx:{mt:2}}),e.jsxs(i,{sx:{position:"relative",px:{xs:1,sm:2,md:5}},children:[e.jsx(i,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35}}),e.jsx(V,{})]}),e.jsx(u,{}),e.jsx(J,{})]})}),e.jsx(k,{})]})]})}S.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(X,{})}));
