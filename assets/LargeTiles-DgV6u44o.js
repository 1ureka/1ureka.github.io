import{a as re,g as oe,r as j,u as ae,$ as xe,aQ as he,M as E,T as u,j as e,c as V,s as T,b as y,d as ne,m as k,G as J,e as ue,l as me,h as be,o as ie,B as r,A as X,D as ge,ar as fe,as as ve,a2 as je,q as ye}from"./routes-6viKbL0G.js";import{n as _,s as b,c as I,e as v,u as U,A as we,t as Ce,m as Se,l as Z,a as ke}from"./datahub_home-BssvtVkl.js";import{u as $e,a as le}from"./read-Bh4r4OqE.js";import{T as M,a as Te,b as q,f as Re}from"./formatters-DhoTl7mc.js";import{S as $,M as H}from"./DarkModeRounded-Lrqg7oSU.js";import{S as G}from"./Skeleton-BDqUCout.js";import{C as Ie}from"./Chip-BAKmdY7W.js";import{S as Me}from"./SwitchBase-BUzFPAiO.js";import"./forum-CQ6vMwqh.js";import"./DataExplorationRounded-ChKNeTP-.js";import"./NotificationsRounded-DWK0bULF.js";import"./ExpandMoreRounded-CdtBiN-4.js";import"./useMutation-BzBtwrSc.js";import"./useQuery-B2a_c7zo.js";import"./dayjs.min-Ds0WJk-z.js";function Ae(t){return oe("MuiFormControlLabel",t)}const R=re("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Pe=t=>{const{classes:s,disabled:o,labelPlacement:n,error:m,required:p}=t,l={root:["root",o&&"disabled",`labelPlacement${y(n)}`,m&&"error",p&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",m&&"error"]};return ne(l,Ae,s)},Be=T("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[{[`& .${R.label}`]:s.label},s.root,s[`labelPlacement${y(o.labelPlacement)}`]]}})(k(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${R.disabled}`]:{cursor:"default"},[`& .${R.label}`]:{[`&.${R.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:s})=>s==="start"||s==="top"||s==="bottom",style:{marginLeft:16}}]}))),Fe=T("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,s)=>s.asterisk})(k(({theme:t})=>({[`&.${R.error}`]:{color:(t.vars||t).palette.error.main}}))),ze=j.forwardRef(function(s,o){const n=ae({props:s,name:"MuiFormControlLabel"}),{checked:m,className:p,componentsProps:l={},control:a,disabled:c,disableTypography:d,inputRef:i,label:x,labelPlacement:h="end",name:f,onChange:w,required:D,slots:L={},slotProps:O={},value:Q,...A}=n,C=xe(),P=c??a.props.disabled??(C==null?void 0:C.disabled),N=D??a.props.required,Y={disabled:P,required:N};["checked","name","onChange","value","inputRef"].forEach(z=>{typeof a.props[z]>"u"&&typeof n[z]<"u"&&(Y[z]=n[z])});const ce=he({props:n,muiFormControl:C,states:["error"]}),B={...n,disabled:P,labelPlacement:h,required:N,error:ce.error},W=Pe(B),de={slots:L,slotProps:{...l,...O}},[pe,F]=E("typography",{elementType:u,externalForwardedProps:de,ownerState:B});let S=x;return S!=null&&S.type!==u&&!d&&(S=e.jsx(pe,{component:"span",...F,className:V(W.label,F==null?void 0:F.className),children:S})),e.jsxs(Be,{className:V(W.root,p),ownerState:B,ref:o,...A,children:[j.cloneElement(a,Y),N?e.jsxs("div",{children:[S,e.jsxs(Fe,{ownerState:B,"aria-hidden":!0,className:W.asterisk,children:[" ","*"]})]}):S]})});function Ee(t){return oe("MuiSwitch",t)}const g=re("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),De=t=>{const{classes:s,edge:o,size:n,color:m,checked:p,disabled:l}=t,a={root:["root",o&&`edge${y(o)}`,`size${y(n)}`],switchBase:["switchBase",`color${y(m)}`,p&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=ne(a,Ee,s);return{...s,...c}},Le=T("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.root,o.edge&&s[`edge${y(o.edge)}`],s[`size${y(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${g.thumb}`]:{width:16,height:16},[`& .${g.switchBase}`]:{padding:4,[`&.${g.checked}`]:{transform:"translateX(16px)"}}}}]}),Oe=T(Me,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.switchBase,{[`& .${g.input}`]:s.input},o.color!=="default"&&s[`color${y(o.color)}`]]}})(k(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${g.checked}`]:{transform:"translateX(20px)"},[`&.${g.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${g.checked} + .${g.track}`]:{opacity:.5},[`&.${g.disabled} + .${g.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${g.input}`]:{left:"-100%",width:"300%"}})),k(({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:J(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(ue(["light"])).map(([s])=>({props:{color:s},style:{[`&.${g.checked}`]:{color:(t.vars||t).palette[s].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:J(t.palette[s].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${s}DisabledColor`]:`${t.palette.mode==="light"?me(t.palette[s].main,.62):be(t.palette[s].main,.55)}`}},[`&.${g.checked} + .${g.track}`]:{backgroundColor:(t.vars||t).palette[s].main}}}))]}))),Ne=T("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,s)=>s.track})(k(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),We=T("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,s)=>s.thumb})(k(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),qe=j.forwardRef(function(s,o){const n=ae({props:s,name:"MuiSwitch"}),{className:m,color:p="primary",edge:l=!1,size:a="medium",sx:c,slots:d={},slotProps:i={},...x}=n,h={...n,color:p,edge:l,size:a},f=De(h),w={slots:d,slotProps:i},[D,L]=E("root",{className:V(f.root,m),elementType:Le,externalForwardedProps:w,ownerState:h,additionalProps:{sx:c}}),[O,Q]=E("thumb",{className:f.thumb,elementType:We,externalForwardedProps:w,ownerState:h}),A=e.jsx(O,{...Q}),[C,P]=E("track",{className:f.track,elementType:Ne,externalForwardedProps:w,ownerState:h});return e.jsxs(D,{...L,children:[e.jsx(Oe,{type:"checkbox",icon:A,checkedIcon:A,ref:o,ownerState:h,...x,classes:{...f,root:f.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...i.switchBase&&{root:typeof i.switchBase=="function"?i.switchBase(h):i.switchBase},...i.input&&{input:typeof i.input=="function"?i.input(h):i.input}}}),e.jsx(C,{...P})]})}),He=ie(e.jsx("path",{d:"M6 7c0 .55.45 1 1 1h7.59l-8.88 8.88c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0L16 9.41V17c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1"}));function ee(t){if(!t)return;const s=t.match(/^([a-z]+)(?:\.(\w+))?$/);if(s){const[,o,n]=s,m=["--mui-palette",o];return n&&m.push(n),`var(${m.join("-")})`}return t}const K=({color1:t="white",color2:s="transparent",angle:o=45,stripeWidth:n=10,backgroundSize:m,zIndex:p=0,className:l="",style:a={}})=>{const c=ee(t),d=ee(s),i=m??n*2,x=`repeating-linear-gradient(
    ${o}deg,
    ${c},
    ${c} ${n}px,
    ${d} ${n}px,
    ${d} ${i}px
  )`;return e.jsx("div",{className:l,style:{position:"absolute",inset:0,zIndex:p,background:x,pointerEvents:"none",...a}})},Ve=({value:t,onClick:s})=>{const[o,n]=j.useState(null),m=a=>n(c=>c?null:a.currentTarget),p=()=>n(null),l=a=>()=>{s(a),p()};return e.jsxs(r,{sx:{display:"flex",gap:b,justifyContent:"space-between",alignItems:"center",p:b},children:[e.jsx(u,{variant:"h5",component:"h3",children:"紀錄數"}),e.jsxs(ge,{sx:{"&:hover":{bgcolor:"action.hover"},p:1,pr:0,borderRadius:1},onClick:m,children:[e.jsxs(u,{sx:{color:"text.secondary"},children:["前 ",t," 筆"]}),e.jsx(we,{sx:{color:"text.secondary"}})]}),e.jsx(fe,{anchorEl:o,anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},open:!!o,onClose:p,children:e.jsxs(ve,{dense:!0,children:[e.jsx(H,{onClick:l(3),selected:t===3,children:"前 3 筆"}),e.jsx(H,{onClick:l(5),selected:t===5,children:"前 5 筆"}),e.jsx(H,{onClick:l(7),selected:t===7,children:"前 7 筆"})]})})]})},Ue=(t,s)=>{if(t===null)return{dataArray:[...Array(s)].map((x,h)=>({label:"載入中"+h,records:0,percentage:0,loading:!0,noData:!1})),averageAmount:0,averagePercentages:0};const o=Object.entries(t).sort(([,x],[,h])=>h-x).slice(0,s),n=o.map(([x])=>x),m=o.map(([,x])=>x),p=1.75,l=Object.values(m).reduce((x,h)=>x+h,0),a=Math.round(l/s),c=Math.round(a/l*100*p),d=m.map(x=>Math.round(x/l*100*p)),i=n.map((x,h)=>({label:x,records:m[h],percentage:d[h],loading:!1,noData:!1}));if(i.length<s){const x=[...Array(s-i.length)].map(()=>({label:"",records:0,percentage:0,loading:!1,noData:!0}));return{dataArray:[...i,...x],averageAmount:a,averagePercentages:c}}return{dataArray:i,averageAmount:a,averagePercentages:c}},Xe=()=>{const[t,s]=j.useState(5),{data:o,isFetching:n}=$e({types:["table","view"]}),{dataArray:m,averageAmount:p,averagePercentages:l}=Ue(n?null:o??null,t);return e.jsxs($,{sx:{aspectRatio:{xs:"2/1",ml:"2/1.2"},borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(Ve,{value:t,onClick:s}),e.jsxs(r,{sx:{position:"relative",flex:1,display:"flex",gap:b,p:b,py:_,justifyContent:"space-around",alignItems:"stretch"},children:[m.map(({label:a,records:c,percentage:d,loading:i,noData:x},h)=>e.jsx(M,{title:i||x?null:e.jsxs(r,{children:[e.jsx(u,{variant:"subtitle2",children:a}),e.jsxs(u,{children:[c," 筆紀錄"]})]}),children:e.jsxs(r,{sx:{position:"relative",flex:1,borderRadius:2,overflow:"clip",transition:"all 0.2s ease-in-out","&:hover":{bgcolor:"action.hover","& .bar-content":{opacity:1}}},children:[e.jsx(K,{color1:"divider",color2:"#fff0",angle:-20,stripeWidth:5}),e.jsx(r,{sx:{position:"absolute",inset:`${i||x?100:Math.max(0,100-d)}% 0 0 0`,borderRadius:2,overflow:"hidden",bgcolor:"background.paper",transition:I},children:e.jsx(r,{className:"bar-content",sx:{position:"absolute",inset:0,bgcolor:"primary.main",opacity:h===0?.9:.65,transition:"all 0.2s ease-in-out"}})})]})},h)),e.jsx(r,{sx:{position:"absolute",inset:`0 0 ${n?0:l}% 0`,borderBottom:"4px dashed",borderColor:"divider",pointerEvents:"none",mx:b,scale:"1.02 1",transition:I,"&:before":{content:`"平均 ${n?0:p} 筆"`,position:"absolute",right:0,bottom:0,fontSize:"1rem",color:"text.secondary",opacity:.75}}}),n&&e.jsx(r,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",pointerEvents:"none"},children:e.jsx(X,{})})]}),e.jsx(r,{sx:{display:"flex",gap:b,p:b,justifyContent:"space-around",alignItems:"center"},children:m.map(({label:a,loading:c,noData:d},i)=>c?e.jsx(G,{variant:"rounded",animation:"wave",children:e.jsx(u,{variant:"body1",component:"p",sx:{flex:1,textAlign:"center"},children:"載入中"})},i):d?e.jsx(u,{variant:"body1",component:"p",sx:{flex:1,color:"text.secondary",...v,textAlign:"center"},children:"---"},i):e.jsx(M,{title:e.jsx(u,{children:a}),children:e.jsx(u,{variant:"body1",component:"p",sx:{flex:1,color:"text.secondary",...U,...v,textAlign:"center"},children:a})},i))})]})},_e=ie([e.jsx("path",{d:"M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H4V7c0-.55-.45-1-1-1"},"0"),e.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-3.54 12.01-.63-1.82H12.2l-.65 1.82c-.1.29-.38.48-.68.48-.51 0-.86-.51-.68-.98l2.73-7.27c.16-.44.6-.74 1.08-.74s.92.3 1.09.75l2.73 7.27c.18.47-.17.98-.68.98-.31 0-.58-.19-.68-.49"},"1"),e.jsx("path",{d:"m13.96 7.17-1.31 3.72h2.69l-1.3-3.72z"},"2")]),te=({children:t,loading:s,...o})=>s?e.jsx(G,{variant:"rounded",animation:"wave",...o,children:t}):t,Ge=()=>{const{data:t,isFetching:s}=le({types:["table","view"]}),o=j.useMemo(()=>{if(!t||s)return null;const l={};let a=0;t.forEach(({columns:x})=>{x.forEach(({type:h})=>{l[h]=(l[h]||0)+1,a+=1})});const c=[],d=new Set;let i=0;for(const[x,h]of Object.entries(l).sort((f,w)=>w[1]-f[1])){const f=h/a;c.length<3||f>=.1?c.push([x,h]):(i+=h,d.add(x))}if(i>0){const x=Array.from(d).slice(0,5),h=x.join(", ")+(x.length>5?", ...":"");c.push([`其他 (${h})`,i])}return c.map(([x,h])=>({type:x,count:h,percentage:h/a}))},[t,s]),n=o===null,m=!n&&o.length<3,p=!n&&!m;return e.jsxs($,{sx:{aspectRatio:{xs:"2/1",ml:"2/1.2"},borderTop:"1px solid",borderColor:"divider",position:"relative"},children:[e.jsxs(r,{sx:{display:"flex",gap:b,justifyContent:"space-between",alignItems:"flex-start",p:b},children:[e.jsxs($,{sx:{gap:1},children:[e.jsx(Te,{children:"最常使用的型別"}),e.jsx(te,{loading:n,children:e.jsx(q,{variant:"h4",sx:{textTransform:"uppercase"},children:n?"載入中":m?"N/A":o[0].type})})]}),e.jsx(_e,{sx:{...Ce,mt:.5}})]}),e.jsxs(r,{sx:{flex:1,position:"relative"},children:[e.jsxs(r,{sx:{position:"absolute",inset:"auto 0 0 0",p:1.5,borderRadius:9,overflow:"clip"},children:[e.jsx(K,{color1:"divider",color2:"#fff0",angle:-35,stripeWidth:4}),p&&e.jsx(r,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"stretch",zIndex:1},children:o.map(({type:l,count:a,percentage:c},d)=>e.jsx(M,{title:e.jsxs(q,{variant:"body1",sx:{textTransform:"uppercase"},children:[l," 型別使用了 ",a," 次"]}),children:e.jsx(r,{sx:{width:c,"&:hover":{bgcolor:"divider"},opacity:.9,transition:"all 0.2s ease-in-out"}})},d))})]}),e.jsx(r,{sx:{position:"absolute",inset:"auto 0 0 0",my:1.5,display:"grid",placeItems:"center"},children:e.jsx(r,{sx:{position:"absolute",width:1,display:"flex",alignItems:"center",scale:p?"1 1":"0 1",opacity:p?1:0,transition:I},children:p&&o.map(({percentage:l},a)=>e.jsx(r,{sx:{width:l,px:.5,pl:a===0?1:.5,pr:a===o.length-1?1:.5},children:e.jsx(r,{sx:{py:.5,borderRadius:9,bgcolor:"primary.main",filter:`hue-rotate(-${a*30+10}deg)`}})},a))})}),e.jsx(r,{sx:{position:"absolute",inset:0,display:"flex",transformOrigin:"left",scale:p?"1 1":"1 0",transition:I},children:p&&o.map(({type:l,percentage:a},c)=>e.jsx(r,{sx:{width:a,height:1,position:"relative"},children:e.jsx(r,{sx:{position:"absolute",inset:0,ml:c===0?1:0,mb:3,borderLeft:4,borderColor:"divider"},children:e.jsxs(r,{sx:{position:"absolute",inset:"0 auto auto 0"},children:[e.jsx(u,{variant:"body2",sx:{textTransform:"uppercase",color:"text.secondary",ml:1,...v},children:l}),e.jsxs(q,{sx:{textTransform:"uppercase",opacity:.8,ml:1},children:[Math.round(a*100),"%"]})]})})},c))}),n&&e.jsx(r,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",pointerEvents:"none"},children:e.jsx(X,{})}),m&&e.jsx(r,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",pointerEvents:"none"},children:e.jsx(Ie,{sx:{p:3,borderRadius:99},label:e.jsx(u,{variant:"h6",component:"p",sx:{color:"text.secondary"},children:"資料不足"})})})]}),e.jsx(r,{sx:{display:"flex",gap:Se,p:b,alignItems:"center",justifyContent:"space-around",width:"fit-content",minWidth:.5},children:p?o.map(({type:l},a)=>e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(r,{sx:{borderRadius:99,width:"1rem",height:"1rem",bgcolor:"primary.main",filter:`hue-rotate(-${a*30+10}deg)`}}),e.jsx(u,{variant:"body1",component:"p",sx:{color:"text.secondary",textTransform:"uppercase",...v},children:l})]},a)):[...Array(3)].map((l,a)=>e.jsxs(r,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(r,{sx:{borderRadius:99,width:"1rem",height:"1rem",bgcolor:"primary.main",filter:`hue-rotate(-${a*30+10}deg)`}}),e.jsx(te,{loading:!0,children:e.jsx(u,{variant:"body1",component:"p",children:"載入中"})})]},a))})]})},se=({children:t,loading:s,...o})=>s?e.jsx(G,{variant:"rounded",animation:"wave",...o,children:t}):t,Ke=t=>{const s=t.toLowerCase();return["id","create","update","delete","timestamp","modif"].some(n=>s.includes(n))},Qe=1.375,Ye=()=>{const[t,s]=j.useState(!1),{data:o,isFetching:n}=le({types:["table","view"]}),m=j.useMemo(()=>{if(!o||n)return[...Array(5)].map(()=>({field:"",count:0,percentage:0,loading:!0,noData:!1}));const p={};o.forEach(({columns:d})=>{d.forEach(({name:i})=>{p[i]=(p[i]||0)+1})});const l=Object.entries(p).filter(([d])=>t||!Ke(d)).toSorted((d,i)=>i[1]-d[1]).slice(0,5),a=l.reduce((d,[i,x])=>d+x,0),c=l.map(([d,i])=>({field:d,count:i,percentage:i/a,loading:!1,noData:!1}));if(c.length<5){const d=[...Array(5-c.length)].map(()=>({field:"",count:0,percentage:0,loading:!1,noData:!0}));return[...c,...d]}return c},[o,n,t]);return e.jsxs($,{sx:{aspectRatio:{xs:"2/1",ml:"2/1.2"},borderTop:"1px solid",borderColor:"divider",position:"relative"},children:[e.jsxs(r,{sx:{display:"flex",gap:b,justifyContent:"space-between",alignItems:"flex-start",p:b},children:[e.jsx(u,{variant:"h5",component:"h3",children:"使用的欄位名稱"}),e.jsxs($,{sx:{alignItems:"flex-end"},children:[e.jsx(ze,{checked:t,onChange:({target:p})=>s(p.checked),control:e.jsx(qe,{}),labelPlacement:"start",label:e.jsx(u,{variant:"body1",sx:{opacity:.9},children:"包含系統欄位"})}),e.jsx(je,{children:"(id, createdAt, updatedAt, ...)"})]})]}),e.jsxs(r,{sx:{position:"relative",maxWidth:1,flex:1,overflowX:"auto",overflowY:"hidden"},children:[e.jsxs(r,{sx:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:b,placeItems:"center","& > :nth-of-type(3n + 1)":{justifySelf:"flex-start"},p:b,pt:_,width:1,height:1},children:[e.jsx(r,{children:e.jsx(u,{variant:"body1",sx:{color:"text.secondary"},children:"最常使用"})}),e.jsx(r,{}),e.jsx(r,{children:e.jsx(u,{variant:"body1",sx:{color:"text.secondary"},children:"出現次數"})}),m.map(({field:p,count:l,percentage:a,loading:c,noData:d},i)=>e.jsxs(j.Fragment,{children:[e.jsx(r,{children:c?e.jsx(se,{loading:!0,children:e.jsx(u,{variant:"body1",sx:{...v,...U,width:"6rem"},children:"載入中"})}):d?e.jsx(u,{variant:"body1",sx:{...v,width:"6rem"},children:"---"}):e.jsx(M,{title:e.jsx(u,{children:p}),children:e.jsx(u,{variant:"body1",sx:{...v,...U,width:"6rem"},children:p})})}),e.jsx(M,{title:c||d?null:e.jsxs(r,{children:[e.jsx(u,{variant:"subtitle2",children:p}),e.jsxs(u,{children:["所有欄位名稱中的 ",`${Math.round(a*100)}%`]})]}),children:e.jsxs(r,{sx:{width:1,height:"1rem",borderRadius:99,position:"relative",overflow:"clip",display:"flex",alignItems:"center","&:hover":{bgcolor:"action.hover","& .bar-content":{opacity:1}},transition:"all 0.2s ease-in-out"},children:[e.jsx(K,{color1:"divider",color2:"#fff0",angle:-35,stripeWidth:5}),e.jsx(r,{sx:{position:"absolute",width:Math.max(0,Math.min(a*Qe,1)),height:1,borderRadius:9,overflow:"clip",bgcolor:"background.paper",transition:I},children:e.jsx(r,{className:"bar-content",sx:{position:"absolute",inset:0,bgcolor:"primary.main",opacity:i===0?.9:.65,transition:"all 0.2s ease-in-out"}})})]})}),e.jsx(r,{children:e.jsx(se,{loading:c,children:e.jsx(u,{variant:"body1",sx:{...v,maxWidth:"10rem"},children:c?"載入中":d?"---":Re(l)})})})]},i))]}),n&&e.jsx(r,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",pointerEvents:"none"},children:e.jsx(X,{})})]})]})},Je=()=>{const{updateHash:t}=ke(),s=()=>{t("schema")};return e.jsxs($,{sx:{aspectRatio:{xs:"2/1",ml:"2/1.2"},borderTop:"1px solid",borderColor:"divider"},children:[e.jsxs(r,{sx:{display:"flex",gap:b,alignItems:"flex-end",p:b},children:[e.jsx(u,{variant:"h5",component:"h3",sx:{textWrap:"noWrap"},children:"資料表關聯圖"}),e.jsx(u,{variant:"body1",sx:{opacity:.8,...v},children:"透過視覺化的節點與連線，探索資料表彼此的結構與關聯。"})]}),e.jsx(r,{sx:{flex:1,width:1,position:"relative"},children:e.jsx(r,{sx:{position:"absolute",inset:0,p:b,pt:_},children:e.jsxs(r,{sx:{position:"relative",width:1,height:1,borderRadius:3,border:3,borderColor:"divider",borderStyle:"dashed"},children:[e.jsx(r,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:e.jsx(u,{variant:"body1",sx:{color:"text.secondary"},children:"資料表關聯圖正在開發中，敬請期待！"})}),e.jsx(r,{sx:{position:"absolute",inset:"auto 0 0 auto",color:"secondary.dark",translate:"1rem 50%"},children:e.jsx(ye,{color:"inherit",size:"large",variant:"outlined",onClick:s,endIcon:e.jsx(He,{}),sx:{"&:hover":{scale:"1.02"},scale:"1.001",transition:"all 0.2s ease-in-out",bgcolor:"background.paper"},children:"查看完整關聯圖"})})]})})})]})},ut=()=>e.jsxs(r,{sx:{position:"relative",mt:Z,display:"grid",gap:Z,gridTemplateColumns:{xs:"1fr",ml:"repeat(2, 1fr)"},width:1},children:[e.jsx(Xe,{}),e.jsx(Ge,{}),e.jsx(Je,{}),e.jsx(Ye,{})]});export{ut as LargeTiles};
