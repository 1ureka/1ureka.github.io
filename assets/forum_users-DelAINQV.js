import{j as e,a,T as t,h as P,g as v,e as g,i as A,f as F,r as L}from"./Toast-DTVs7FW6.js";import{P as U}from"./TopicAutocomplete-nFj5vltv.js";import{A as C}from"./ArrowBackIosRounded-DLISxYP9.js";import{B as h,d as b,t as y,u as D,A as $,S as z}from"./ScrollArea-CqSHRPTv.js";import{A as f,D as d,C as w,a as E,b as k,c as M}from"./url-Di9IlQWA.js";import{a as x,u as N}from"./user-C6ncfYwZ.js";import{S as l,g as B,f as W}from"./PostHeader-BS2E7Qua.js";import{b as S}from"./session-xflZUqIh.js";import{S as _,E as j,a as H}from"./ExpandedPost-C2a-lSRc.js";import{N as T}from"./NewPost-Tk0S6gA8.js";import{S as u}from"./ThemeMenu-DE-gApYD.js";import{C as V}from"./DarkModeRounded-BRETPBpn.js";import"./Autocomplete-D384TLMz.js";import"./CommentRounded-Cvb71559.js";import"./EmojiMenu-DTI4IP3G.js";const Q=()=>{const s=new URLSearchParams(window.location.search),{data:r}=x(s.get("user"));return r?e.jsx("title",{children:`論壇樣板 | ${r.name}`}):s.get("user")&&!r?e.jsx("title",{children:`論壇樣板 | ${s.get("user")}`}):null},q=()=>{const s=new URLSearchParams(window.location.search),{data:r,isFetching:n}=x(s.get("user"));return n||!r?e.jsxs(a,{sx:{m:2},children:[s.get("user")?e.jsx(t,{variant:"h5",component:"h2",children:s.get("user")}):e.jsx(l,{variant:"rounded",animation:"wave",children:e.jsx(t,{variant:"h5",component:"h2",children:"使用者名稱"})}),e.jsx(l,{variant:"text",animation:"wave",children:e.jsx(t,{variant:"body2",children:"佔位符佔位符佔位符佔位符佔位符佔位符佔位符"})})]}):e.jsxs(a,{sx:{m:2},children:[e.jsx(t,{variant:"h5",component:"h2",children:r.name}),e.jsx(t,{variant:"body2",color:"text.secondary",children:r.description||"這個使用者很懶，什麼都沒寫"})]})},G=({showProgress:s})=>e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"circular",sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1},animation:"wave"}),s&&e.jsx(a,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1,display:"grid",placeItems:"center"},children:e.jsx(P,{})})]}),J=({size:s=6,borderSize:r=.8})=>{const n=new URLSearchParams(window.location.search),{data:i,isFetching:o}=x(n.get("user"));return e.jsxs(a,{sx:{display:"flex",justifyContent:"center",position:"relative",width:`${s}rem`,alignSelf:"flex-end",m:2},children:[e.jsx(a,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1},children:e.jsx(a,{sx:{borderRadius:"50%",position:"absolute",inset:`${-r}rem`,bgcolor:"background.paper",backgroundImage:"var(--Paper-overlay)"}})}),!o&&i?e.jsx(f,{sx:{position:"absolute",bottom:0,width:1,height:"auto",aspectRatio:1,bgcolor:"primary.main",boxShadow:3},children:e.jsx(t,{variant:"h3",component:"span",sx:{translate:"0px 5%",color:"white"},children:i.name.charAt(0).toUpperCase()})}):e.jsx(G,{showProgress:o})]})},p=v(e.jsx("path",{d:"M10 20h4c0 1.1-.9 2-2 2s-2-.9-2-2m4-11c0 2.61 1.67 4.83 4 5.66V17h1c.55 0 1 .45 1 1s-.45 1-1 1H5c-.55 0-1-.45-1-1s.45-1 1-1h1v-7c0-2.79 1.91-5.14 4.5-5.8v-.7c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.7c.71.18 1.36.49 1.95.9C14.54 6.14 14 7.51 14 9m9-1h-2V6c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1v-2h2c.55 0 1-.45 1-1s-.45-1-1-1"}),"NotificationAddRounded"),K=v(e.jsx("path",{d:"M14 11c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1s.45-1 1-1h9c.55 0 1 .45 1 1M3 7c0 .55.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1m7 8c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1h5c.55 0 1-.45 1-1m8.01-2.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.16 5.16c-.09.09-.14.21-.14.35v1.41c0 .28.22.5.5.5h1.41c.13 0 .26-.05.35-.15l5.16-5.16z"}),"EditNoteRounded"),O=()=>{const s=new URLSearchParams(window.location.search),{data:r,isFetching:n}=x(s.get("user")),{user:i,loading:o}=S();return!o&&i===null||!n&&r===null?e.jsx(h,{variant:"contained",color:"primary",size:"large",startIcon:e.jsx(p,{}),disabled:!0,sx:{borderRadius:99,transition:"all 0.2s ease",boxShadow:3,scale:"1.001"},children:"追蹤"}):o||n||!r||!i?e.jsx(h,{variant:"contained",color:"primary",size:"large",startIcon:e.jsx(p,{}),loading:!0,sx:{borderRadius:99,transition:"all 0.2s ease",boxShadow:3,scale:"1.001"},children:"追蹤"}):i.name===r.name?e.jsx(h,{variant:"contained",color:"primary",size:"large",startIcon:e.jsx(K,{}),sx:{borderRadius:99,transition:"all 0.2s ease",boxShadow:3,scale:"1.001","&:hover":{bgcolor:"primary.main",scale:"1.05",boxShadow:3},"&:active":{scale:"0.95"}},children:"編輯個人資料"}):e.jsx(h,{variant:"contained",color:"primary",size:"large",startIcon:e.jsx(p,{}),sx:{borderRadius:99,transition:"all 0.2s ease",boxShadow:3,scale:"1.001","&:hover":{bgcolor:"primary.main",scale:"1.05",boxShadow:3},"&:active":{scale:"0.95"}},children:"追蹤"})},I=v(e.jsx("path",{d:"M6 20c1.1 0 2-.9 2-2v-7c0-1.1-.9-2-2-2s-2 .9-2 2v7c0 1.1.9 2 2 2m10-5v3c0 1.1.9 2 2 2s2-.9 2-2v-3c0-1.1-.9-2-2-2s-2 .9-2 2m-4 5c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2s-2 .9-2 2v12c0 1.1.9 2 2 2"}),"BarChartRounded"),R=()=>{const s=b(y.breakpoints.up("md"));return e.jsxs(e.Fragment,{children:[e.jsx(I,{fontSize:"small",color:"inherit"}),e.jsx(l,{variant:"rounded",animation:"wave",children:e.jsx(t,{variant:"body2",children:s?"發布了 0 篇文章":"0 篇文章"})}),e.jsx(t,{variant:"body2",children:"·"}),e.jsx(l,{variant:"rounded",animation:"wave",children:e.jsx(t,{variant:"body2",children:s?"獲得了 0 次讚":"0 次讚"})}),e.jsx(t,{variant:"body2",children:"·"}),e.jsx(l,{variant:"rounded",animation:"wave",children:e.jsx(t,{variant:"body2",children:s?"文章總瀏覽次數 0 次":"0 次瀏覽"})})]})},X=({user:s})=>{const r=b(y.breakpoints.up("md")),{data:n,isFetching:i}=B({author:s.name});if(n===void 0||i)return e.jsx(R,{});const{totalPosts:o,totalLikes:c,totalViews:m}=n;return e.jsxs(e.Fragment,{children:[e.jsx(I,{fontSize:"small",color:"inherit"}),e.jsx(t,{variant:"body2",children:r?`發布了 ${o} 篇文章`:`${o} 篇文章`}),e.jsx(t,{variant:"body2",children:"·"}),e.jsx(t,{variant:"body2",children:r?`獲得了 ${c} 次讚`:`${c} 次讚`}),e.jsx(t,{variant:"body2",children:"·"}),e.jsx(t,{variant:"body2",children:r?`文章總瀏覽次數 ${m} 次`:`${m} 次瀏覽`})]})},Y=()=>{const s=new URLSearchParams(window.location.search),{data:r,isFetching:n}=x(s.get("user"));return n||r===void 0||r===null?e.jsx(R,{}):e.jsx(X,{user:r})},Z=()=>e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"circular",width:"2rem",height:"2rem",animation:"wave"}),e.jsxs(a,{children:[e.jsx(l,{variant:"rounded",animation:"wave",children:e.jsx(t,{variant:"subtitle1",sx:{textWrap:"nowrap",color:"text.primary",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"作者名稱"})}),e.jsx(l,{variant:"text",animation:"wave",children:e.jsx(t,{variant:"body2",component:"p",sx:{color:"text.secondary"},children:"作者描述載入中..."})})]}),e.jsx(w,{variant:"outlined",label:"追蹤",clickable:!0,disabled:!0})]}),ee=({name:s,description:r})=>e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{bgcolor:"primary.main",width:"2rem",height:"2rem"},children:e.jsx(t,{sx:{translate:"0px 5%"},children:s.slice(0,1).toUpperCase()})}),e.jsxs(a,{children:[e.jsx(t,{variant:"subtitle1",sx:{textWrap:"nowrap",color:"text.primary",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline"}},component:"a",href:`${g.forum_users}?user=${s}`,children:s}),e.jsx(t,{variant:"body2",component:"p",sx:{color:"text.secondary"},children:r})]}),e.jsx(w,{variant:"outlined",label:"追蹤",clickable:!0})]}),se=({length:s})=>{const{data:r,isFetching:n}=N(),i=r?r.slice(0,s):null;return e.jsxs(a,{sx:{position:"relative",display:"grid",gridTemplateColumns:{xs:"auto 1fr auto",md:"auto 1fr auto auto 1fr auto"},alignItems:"center",gap:2,p:2},children:[n||!i?[...Array(s)].map((o,c)=>e.jsx(Z,{},c)):i.map(({name:o,description:c})=>e.jsx(ee,{name:o,description:c},o)),e.jsx(a,{sx:{position:"absolute",inset:0,pointerEvents:"none",display:{xs:"none",md:"flex"},justifyContent:"center"},children:e.jsx(d,{orientation:"vertical",flexItem:!0,variant:"middle"})})]})},re=()=>e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(_,{sx:{fontSize:"6rem",color:"action.disabled"}}),e.jsx(t,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"使用者不存在或已被刪除"})]}),e.jsx(d,{}),e.jsxs(a,{sx:{position:"relative"},children:[e.jsx(a,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),e.jsx(t,{variant:"subtitle1",sx:{p:2},children:"我們找不到這位使用者...這裡有其他活躍的使用者供你參考！"})]}),e.jsx(d,{}),e.jsx(se,{length:6})]}),te=({author:s})=>{const{data:r,isLoading:n,isFetchingNextPage:i}=W({author:s,orderBy:"createdAt",order:"desc"});return n||!r?e.jsx(u,{sx:{alignItems:"stretch"},children:[...Array(3)].map((o,c)=>e.jsx(j,{},c))}):r.pages[0].items.length===0?e.jsx(t,{sx:{textAlign:"center",mt:9,mb:6,color:"text.secondary"},children:"他/她還沒有發布過任何文章"}):e.jsxs(u,{sx:{alignItems:"stretch"},children:[r.pages.map(o=>o.items.map(c=>e.jsx(H,{postId:c},c))),i&&e.jsx(u,{sx:{alignItems:"stretch",mt:1.5},children:[...Array(3)].map((o,c)=>e.jsx(j,{},c))})]})},ae=()=>{const s=new URLSearchParams(window.location.search),{data:r,isFetching:n}=x(s.get("user")),{user:i}=S();return!n&&r===null?e.jsx(re,{}):n||!r?e.jsx(u,{sx:{alignItems:"stretch"},children:[...Array(3)].map((o,c)=>e.jsx(j,{},c))}):e.jsxs(e.Fragment,{children:[i&&i.name===r.name&&e.jsxs(e.Fragment,{children:[e.jsx(u,{sx:{p:1}}),e.jsx(T,{}),e.jsx(d,{sx:{mb:2}})]}),e.jsx(te,{author:r.name})]})};function ne(){const{isMd:s}=D();return e.jsxs($,{children:[e.jsx(Q,{}),e.jsx(a,{sx:{bgcolor:"secondary.main",height:"35vh",position:"absolute",inset:"0 0 auto 0"}}),e.jsxs(z,{children:[s?e.jsx(E,{}):e.jsx(k,{}),e.jsx(V,{maxWidth:"lg",sx:{position:"relative",my:10},children:e.jsxs(A,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:3,flexWrap:"wrap"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(J,{}),e.jsx(q,{})]}),e.jsx(a,{sx:{m:2},children:e.jsx(O,{})})]}),e.jsx(d,{}),e.jsxs(a,{sx:{position:"relative",display:"flex",justifyContent:"space-between",gap:3,alignItems:"center",px:3,py:2,flexWrap:"wrap"},children:[e.jsx(a,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),e.jsxs(a,{sx:{display:"flex",gap:1,alignItems:"center",color:"text.secondary"},children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(C,{}),size:"small",sx:{mr:1},href:g.forum_home,children:s?"返回首頁":"首頁"}),e.jsx(Y,{})]}),e.jsxs(a,{sx:{display:"flex",gap:1,alignItems:"center",color:"text.secondary"},children:[e.jsx(U,{fontSize:"small",color:"inherit"}),e.jsx(t,{variant:"body2",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer",color:"text.primary"}},children:"2 位追蹤者"}),e.jsx(t,{variant:"body2",children:"·"}),e.jsx(t,{variant:"body2",sx:{"&:hover":{textDecoration:"underline",cursor:"pointer",color:"text.primary"}},children:"正在追蹤 1 人"})]})]}),e.jsx(d,{}),e.jsx(a,{children:e.jsx(ae,{})})]})}),e.jsx(M,{})]})]})}F.createRoot(document.getElementById("root")).render(e.jsx(L.StrictMode,{children:e.jsx(ne,{})}));
