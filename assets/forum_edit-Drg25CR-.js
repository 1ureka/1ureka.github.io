import{j as t,i as j,P as u,B as e,T as n,n as h,v as g,t as y,r as f}from"./Toast-DD81e0ZS.js";import{A as b,S as d}from"./SentimentDissatisfiedRounded-BpkvqQfC.js";import{b as I,c as A,d as v,e as S,u as E,E as w}from"./url-C_-tYCK8.js";import{a as R,A as B,S as P}from"./ScrollArea-Cw1iuxp9.js";import{r as D}from"./routes-J5yqRWDh.js";import{C as k,a as z}from"./post-DSmH3M5n.js";import{N as F}from"./NewPost-YZCUjXB-.js";import{D as c}from"./Divider-ClZXSiHJ.js";import"./ForumRounded-xcY5LMa8.js";import"./ExpandMoreRounded-kr-67vvG.js";import"./Tooltip-D4y8LWrL.js";import"./DarkModeRounded-BpbMOGed.js";import"./Skeleton-D4-wFtM2.js";import"./OpenInNewRounded-BZ_qpgF0.js";import"./index-mSkvzYyn.js";import"./MenuItem-MyiTB2I2.js";import"./NotificationsRounded-DQX7XNSM.js";import"./SQLiteClient-DE74qkCZ.js";import"./react-error-boundary.esm-DV-Hw4di.js";import"./ListItemText-DLFdd-Xn.js";import"./useMutation-tmXyHxVB.js";import"./Chip-vtOh1vX2.js";import"./Collapse-DlXE4Kbp.js";import"./with-selector-Deie_L8r.js";import"./Motion-D_S2R9S0.js";import"./proxy-DTsTHhir.js";import"./array-DbSFIttQ.js";import"./PublishRounded-DgHAXhMz.js";import"./TopicAutocomplete-3_AOhCTv.js";import"./Autocomplete-sgWClysp.js";import"./EmojiMenu-BPiSk5rL.js";import"./formatters-C9bWSe0O.js";const M=()=>{var p,m;const s=j(r=>r.breakpoints.up("md")),{searchParams:l}=E(),a=l.get("postId");if(!a)throw new Error("網址缺失 postId 參數");const{data:o,isFetching:x}=z({postId:Number(a)});return t.jsxs(u,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[t.jsxs(e,{sx:{display:"flex",gap:1,alignItems:"center",p:3},children:[t.jsx(w,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1,opacity:.8}}),t.jsx(n,{variant:"h5",component:"h2",children:"編輯貼文"})]}),t.jsx(c,{}),t.jsxs(e,{sx:{position:"relative",px:3,py:1},children:[t.jsx(e,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),t.jsx(h,{variant:"outlined",startIcon:t.jsx(b,{}),size:"small",href:D.forum_home,children:s?"返回首頁":"首頁"})]}),t.jsx(c,{sx:{mb:2}}),x?t.jsx(e,{sx:{py:8,display:"grid",placeItems:"center"},children:t.jsx(g,{})}):o?o.isSelf?t.jsx(F,{mode:"edit",postId:o.id,initialValues:{title:o.title,content:o.content,tags:o.tags,photos:(p=o.photos)==null?void 0:p.map(({name:r,size:i})=>new File([new Uint8Array(i)],r,{type:"image/jpeg"})),attachments:(m=o.attachments)==null?void 0:m.map(({name:r,size:i})=>new File([new Uint8Array(i)],r,{type:"application/pdf"}))}}):t.jsxs(e,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(d,{sx:{fontSize:"6rem",color:"action.disabled"}}),t.jsx(n,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"你沒有權限編輯此貼文"})]}):t.jsxs(e,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(d,{sx:{fontSize:"6rem",color:"action.disabled"}}),t.jsx(n,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"貼文不存在或已被刪除"})]})]})};function N(){const{isMd:s}=R();return t.jsxs(B,{children:[t.jsx(I,{}),t.jsxs(P,{children:[s?t.jsx(A,{}):t.jsx(v,{}),t.jsx(k,{maxWidth:"lg",sx:{position:"relative",my:10,px:0},children:t.jsx(M,{})}),t.jsx(S,{})]})]})}y.createRoot(document.getElementById("root")).render(t.jsx(f.StrictMode,{children:t.jsx(N,{})}));
