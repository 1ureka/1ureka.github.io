var ii=Object.defineProperty;var Vr=h=>{throw TypeError(h)};var si=(h,u,f)=>u in h?ii(h,u,{enumerable:!0,configurable:!0,writable:!0,value:f}):h[u]=f;var te=(h,u,f)=>si(h,typeof u!="symbol"?u+"":u,f),zt=(h,u,f)=>u.has(h)||Vr("Cannot "+f);var m=(h,u,f)=>(zt(h,u,"read from private field"),f?f.call(h):u.get(h)),$=(h,u,f)=>u.has(h)?Vr("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(h):u.set(h,f),U=(h,u,f,p)=>(zt(h,u,"write to private field"),p?p.call(h,f):u.set(h,f),f),B=(h,u,f)=>(zt(h,u,"access private method"),f);import{S as oi,p as Xr,r as he,s as Vt,d as yt,e as ai,f as Xt,j as Yr,t as ui,k as li,l as fi,m as Gr,n as an,u as hi}from"./RefreshRounded-BSkjEOfQ.js";import{r as ye,aE as ci,ah as di}from"./routes-D5lITBrd.js";var K,k,nt,X,Le,Be,Re,fe,it,We,ze,Ne,Ce,Se,$e,M,rt,Yt,Gt,Kt,Zt,Jt,er,tr,un,on,mi=(on=class extends oi{constructor(u,f){super();$(this,M);$(this,K);$(this,k);$(this,nt);$(this,X);$(this,Le);$(this,Be);$(this,Re);$(this,fe);$(this,it);$(this,We);$(this,ze);$(this,Ne);$(this,Ce);$(this,Se);$(this,$e,new Set);this.options=f,U(this,K,u),U(this,fe,null),U(this,Re,Xr()),this.options.experimental_prefetchInRender||m(this,Re).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(f)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(m(this,k).addObserver(this),Kr(m(this,k),this.options)?B(this,M,rt).call(this):this.updateResult(),B(this,M,Zt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rr(m(this,k),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rr(m(this,k),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,B(this,M,Jt).call(this),B(this,M,er).call(this),m(this,k).removeObserver(this)}setOptions(u,f){const p=this.options,A=m(this,k);if(this.options=m(this,K).defaultQueryOptions(u),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof he(this.options.enabled,m(this,k))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");B(this,M,tr).call(this),m(this,k).setOptions(this.options),p._defaulted&&!Vt(this.options,p)&&m(this,K).getQueryCache().notify({type:"observerOptionsUpdated",query:m(this,k),observer:this});const R=this.hasListeners();R&&Zr(m(this,k),A,this.options,p)&&B(this,M,rt).call(this),this.updateResult(f),R&&(m(this,k)!==A||he(this.options.enabled,m(this,k))!==he(p.enabled,m(this,k))||yt(this.options.staleTime,m(this,k))!==yt(p.staleTime,m(this,k)))&&B(this,M,Yt).call(this);const _=B(this,M,Gt).call(this);R&&(m(this,k)!==A||he(this.options.enabled,m(this,k))!==he(p.enabled,m(this,k))||_!==m(this,Se))&&B(this,M,Kt).call(this,_)}getOptimisticResult(u){const f=m(this,K).getQueryCache().build(m(this,K),u),p=this.createResult(f,u);return bi(this,p)&&(U(this,X,p),U(this,Be,this.options),U(this,Le,m(this,k).state)),p}getCurrentResult(){return m(this,X)}trackResult(u,f){const p={};return Object.keys(u).forEach(A=>{Object.defineProperty(p,A,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(A),f==null||f(A),u[A])})}),p}trackProp(u){m(this,$e).add(u)}getCurrentQuery(){return m(this,k)}refetch({...u}={}){return this.fetch({...u})}fetchOptimistic(u){const f=m(this,K).defaultQueryOptions(u),p=m(this,K).getQueryCache().build(m(this,K),f);return p.fetch().then(()=>this.createResult(p,f))}fetch(u){return B(this,M,rt).call(this,{...u,cancelRefetch:u.cancelRefetch??!0}).then(()=>(this.updateResult(),m(this,X)))}createResult(u,f){var Ae;const p=m(this,k),A=this.options,R=m(this,X),_=m(this,Le),O=m(this,Be),s=u!==p?u.state:m(this,nt),{state:re}=u;let P={...re},oe=!1,W;if(f._optimisticResults){const z=this.hasListeners(),N=!z&&Kr(u,f),S=z&&Zr(u,p,f,A);(N||S)&&(P={...P,...fi(re.data,u.options)}),f._optimisticResults==="isRestoring"&&(P.fetchStatus="idle")}let{error:ce,errorUpdatedAt:ae,status:I}=P;if(f.select&&P.data!==void 0)if(R&&P.data===(_==null?void 0:_.data)&&f.select===m(this,it))W=m(this,We);else try{U(this,it,f.select),W=f.select(P.data),W=Gr(R==null?void 0:R.data,W,f),U(this,We,W),U(this,fe,null)}catch(z){U(this,fe,z)}else W=P.data;if(f.placeholderData!==void 0&&W===void 0&&I==="pending"){let z;if(R!=null&&R.isPlaceholderData&&f.placeholderData===(O==null?void 0:O.placeholderData))z=R.data;else if(z=typeof f.placeholderData=="function"?f.placeholderData((Ae=m(this,ze))==null?void 0:Ae.state.data,m(this,ze)):f.placeholderData,f.select&&z!==void 0)try{z=f.select(z),U(this,fe,null)}catch(N){U(this,fe,N)}z!==void 0&&(I="success",W=Gr(R==null?void 0:R.data,z,f),oe=!0)}m(this,fe)&&(ce=m(this,fe),W=m(this,We),ae=Date.now(),I="error");const de=P.fetchStatus==="fetching",ve=I==="pending",xe=I==="error",He=ve&&de,me=W!==void 0,H={status:I,fetchStatus:P.fetchStatus,isPending:ve,isSuccess:I==="success",isError:xe,isInitialLoading:He,isLoading:He,data:W,dataUpdatedAt:P.dataUpdatedAt,error:ce,errorUpdatedAt:ae,failureCount:P.fetchFailureCount,failureReason:P.fetchFailureReason,errorUpdateCount:P.errorUpdateCount,isFetched:P.dataUpdateCount>0||P.errorUpdateCount>0,isFetchedAfterMount:P.dataUpdateCount>s.dataUpdateCount||P.errorUpdateCount>s.errorUpdateCount,isFetching:de,isRefetching:de&&!ve,isLoadingError:xe&&!me,isPaused:P.fetchStatus==="paused",isPlaceholderData:oe,isRefetchError:xe&&me,isStale:nr(u,f),refetch:this.refetch,promise:m(this,Re)};if(this.options.experimental_prefetchInRender){const z=ue=>{H.status==="error"?ue.reject(H.error):H.data!==void 0&&ue.resolve(H.data)},N=()=>{const ue=U(this,Re,H.promise=Xr());z(ue)},S=m(this,Re);switch(S.status){case"pending":u.queryHash===p.queryHash&&z(S);break;case"fulfilled":(H.status==="error"||H.data!==S.value)&&N();break;case"rejected":(H.status!=="error"||H.error!==S.reason)&&N();break}}return H}updateResult(u){const f=m(this,X),p=this.createResult(m(this,k),this.options);if(U(this,Le,m(this,k).state),U(this,Be,this.options),m(this,Le).data!==void 0&&U(this,ze,m(this,k)),Vt(p,f))return;U(this,X,p);const A={},R=()=>{if(!f)return!0;const{notifyOnChangeProps:_}=this.options,O=typeof _=="function"?_():_;if(O==="all"||!O&&!m(this,$e).size)return!0;const D=new Set(O??m(this,$e));return this.options.throwOnError&&D.add("error"),Object.keys(m(this,X)).some(s=>{const re=s;return m(this,X)[re]!==f[re]&&D.has(re)})};(u==null?void 0:u.listeners)!==!1&&R()&&(A.listeners=!0),B(this,M,un).call(this,{...A,...u})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&B(this,M,Zt).call(this)}},K=new WeakMap,k=new WeakMap,nt=new WeakMap,X=new WeakMap,Le=new WeakMap,Be=new WeakMap,Re=new WeakMap,fe=new WeakMap,it=new WeakMap,We=new WeakMap,ze=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,Se=new WeakMap,$e=new WeakMap,M=new WeakSet,rt=function(u){B(this,M,tr).call(this);let f=m(this,k).fetch(this.options,u);return u!=null&&u.throwOnError||(f=f.catch(ai)),f},Yt=function(){B(this,M,Jt).call(this);const u=yt(this.options.staleTime,m(this,k));if(Xt||m(this,X).isStale||!Yr(u))return;const p=ui(m(this,X).dataUpdatedAt,u)+1;U(this,Ne,setTimeout(()=>{m(this,X).isStale||this.updateResult()},p))},Gt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(m(this,k)):this.options.refetchInterval)??!1},Kt=function(u){B(this,M,er).call(this),U(this,Se,u),!(Xt||he(this.options.enabled,m(this,k))===!1||!Yr(m(this,Se))||m(this,Se)===0)&&U(this,Ce,setInterval(()=>{(this.options.refetchIntervalInBackground||li.isFocused())&&B(this,M,rt).call(this)},m(this,Se)))},Zt=function(){B(this,M,Yt).call(this),B(this,M,Kt).call(this,B(this,M,Gt).call(this))},Jt=function(){m(this,Ne)&&(clearTimeout(m(this,Ne)),U(this,Ne,void 0))},er=function(){m(this,Ce)&&(clearInterval(m(this,Ce)),U(this,Ce,void 0))},tr=function(){const u=m(this,K).getQueryCache().build(m(this,K),this.options);if(u===m(this,k))return;const f=m(this,k);U(this,k,u),U(this,nt,u.state),this.hasListeners()&&(f==null||f.removeObserver(this),u.addObserver(this))},un=function(u){an.batch(()=>{u.listeners&&this.listeners.forEach(f=>{f(m(this,X))}),m(this,K).getQueryCache().notify({query:m(this,k),type:"observerResultsUpdated"})})},on);function pi(h,u){return he(u.enabled,h)!==!1&&h.state.data===void 0&&!(h.state.status==="error"&&u.retryOnMount===!1)}function Kr(h,u){return pi(h,u)||h.state.data!==void 0&&rr(h,u,u.refetchOnMount)}function rr(h,u,f){if(he(u.enabled,h)!==!1){const p=typeof f=="function"?f(h):f;return p==="always"||p!==!1&&nr(h,u)}return!1}function Zr(h,u,f,p){return(h!==u||he(p.enabled,h)===!1)&&(!f.suspense||h.state.status!=="error")&&nr(h,f)}function nr(h,u){return he(u.enabled,h)!==!1&&h.isStaleByTime(yt(u.staleTime,h))}function bi(h,u){return!Vt(h.getCurrentResult(),u)}var ln=ye.createContext(!1),wi=()=>ye.useContext(ln);ln.Provider;function yi(){let h=!1;return{clearReset:()=>{h=!1},reset:()=>{h=!0},isReset:()=>h}}var vi=ye.createContext(yi()),_i=()=>ye.useContext(vi);function gi(h,u){return typeof h=="function"?h(...u):!!h}function Jr(){}var Ei=(h,u)=>{(h.suspense||h.throwOnError||h.experimental_prefetchInRender)&&(u.isReset()||(h.retryOnMount=!1))},qi=h=>{ye.useEffect(()=>{h.clearReset()},[h])},Ri=({result:h,errorResetBoundary:u,throwOnError:f,query:p,suspense:A})=>h.isError&&!u.isReset()&&!h.isFetching&&p&&(A&&h.data===void 0||gi(f,[h.error,p])),Si=h=>{const u=h.staleTime;h.suspense&&(h.staleTime=typeof u=="function"?(...f)=>Math.max(u(...f),1e3):Math.max(u??1e3,1e3),typeof h.gcTime=="number"&&(h.gcTime=Math.max(h.gcTime,1e3)))},xi=(h,u)=>h.isLoading&&h.isFetching&&!u,Ai=(h,u)=>(h==null?void 0:h.suspense)&&u.isPending,en=(h,u,f)=>u.fetchOptimistic(h).catch(()=>{f.clearReset()});function ki(h,u,f){var P,oe,W,ce,ae;const p=hi(),A=wi(),R=_i(),_=p.defaultQueryOptions(h);(oe=(P=p.getDefaultOptions().queries)==null?void 0:P._experimental_beforeQuery)==null||oe.call(P,_),_._optimisticResults=A?"isRestoring":"optimistic",Si(_),Ei(_,R),qi(R);const O=!p.getQueryCache().get(_.queryHash),[D]=ye.useState(()=>new u(p,_)),s=D.getOptimisticResult(_),re=!A&&h.subscribed!==!1;if(ye.useSyncExternalStore(ye.useCallback(I=>{const de=re?D.subscribe(an.batchCalls(I)):Jr;return D.updateResult(),de},[D,re]),()=>D.getCurrentResult(),()=>D.getCurrentResult()),ye.useEffect(()=>{D.setOptions(_,{listeners:!1})},[_,D]),Ai(_,s))throw en(_,D,R);if(Ri({result:s,errorResetBoundary:R,throwOnError:_.throwOnError,query:p.getQueryCache().get(_.queryHash),suspense:_.suspense}))throw s.error;if((ce=(W=p.getDefaultOptions().queries)==null?void 0:W._experimental_afterQuery)==null||ce.call(W,_,s),_.experimental_prefetchInRender&&!Xt&&xi(s,A)){const I=O?en(_,D,R):(ae=p.getQueryCache().get(_.queryHash))==null?void 0:ae.promise;I==null||I.catch(Jr).finally(()=>{D.updateResult()})}return _.notifyOnChangeProps?s:D.trackResult(s)}function Fi(h,u){return ki(h,mi)}const Qi="/assets/forum-B5RtzFX9.db";var $t={exports:{}};const Oi={},Mi=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),tn=ci(Mi);var rn;function Pi(){return rn||(rn=1,function(h,u){var f=void 0,p=function(A){return f||(f=new Promise(function(R,_){var O=typeof A<"u"?A:{},D=O.onAbort;O.onAbort=function(e){_(new Error(e)),D&&D(e)},O.postRun=O.postRun||[],O.postRun.push(function(){R(O)}),h=void 0;var s;s||(s=typeof O<"u"?O:{});var re=typeof window=="object",P=typeof WorkerGlobalScope<"u",oe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";s.onRuntimeInitialized=function(){function e(o,c){switch(typeof c){case"boolean":ri(o,c?1:0);break;case"number":Jn(o,c);break;case"string":ei(o,c,-1,-1);break;case"object":if(c===null)Wr(o);else if(c.length!=null){var b=pt(c,mt);ti(o,b,c.length,-1),bt(b)}else wt(o,"Wrong API use : tried to return a value of an unknown type ("+c+").",-1);break;default:Wr(o)}}function t(o,c){for(var b=[],v=0;v<o;v+=1){var g=pe(c+4*v,"i32"),T=Xn(g);if(T===1||T===2)g=Zn(g);else if(T===3)g=Gn(g);else if(T===4){T=g,g=Yn(T),T=Kn(T);for(var ie=new Uint8Array(g),ee=0;ee<g;ee+=1)ie[ee]=N[T+ee];g=ie}else g=null;b.push(g)}return b}function r(o,c){this.Qa=o,this.db=c,this.Oa=1,this.lb=[]}function n(o,c){if(this.db=c,c=Ge(o)+1,this.eb=jt(c),this.eb===null)throw Error("Unable to allocate memory for the SQL string");be(o,S,this.eb,c),this.kb=this.eb,this.Za=this.pb=null}function i(o){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),o!=null){var c=this.filename,b="/",v=c;if(b&&(b=typeof b=="string"?b:Ot(b),v=c?xt(b+"/"+c):b),c=br(!0,!0),v=Rn(v,c),o){if(typeof o=="string"){b=Array(o.length);for(var g=0,T=o.length;g<T;++g)b[g]=o.charCodeAt(g);o=b}ft(v,c|146),b=Qe(v,577),Dr(b,o,0,o.length,0),Nt(b),ft(v,c)}}this.handleError(w(this.filename,a)),this.db=pe(a,"i32"),$r(this.db),this.fb={},this.Sa={}}var a=qe(4),l=s.cwrap,w=l("sqlite3_open","number",["string","number"]),x=l("sqlite3_close_v2","number",["number"]),q=l("sqlite3_exec","number",["number","string","number","number","number"]),Q=l("sqlite3_changes","number",["number"]),G=l("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ir=l("sqlite3_sql","string",["number"]),Pn=l("sqlite3_normalized_sql","string",["number"]),Fr=l("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Tn=l("sqlite3_bind_text","number",["number","number","number","number","number"]),Qr=l("sqlite3_bind_blob","number",["number","number","number","number","number"]),Dn=l("sqlite3_bind_double","number",["number","number","number"]),Ln=l("sqlite3_bind_int","number",["number","number","number"]),Nn=l("sqlite3_bind_parameter_index","number",["number","string"]),Cn=l("sqlite3_step","number",["number"]),Un=l("sqlite3_errmsg","string",["number"]),In=l("sqlite3_column_count","number",["number"]),Fn=l("sqlite3_data_count","number",["number"]),Qn=l("sqlite3_column_double","number",["number","number"]),jr=l("sqlite3_column_text","string",["number","number"]),jn=l("sqlite3_column_blob","number",["number","number"]),Bn=l("sqlite3_column_bytes","number",["number","number"]),Wn=l("sqlite3_column_type","number",["number","number"]),zn=l("sqlite3_column_name","string",["number","number"]),$n=l("sqlite3_reset","number",["number"]),Hn=l("sqlite3_clear_bindings","number",["number"]),Vn=l("sqlite3_finalize","number",["number"]),Br=l("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Xn=l("sqlite3_value_type","number",["number"]),Yn=l("sqlite3_value_bytes","number",["number"]),Gn=l("sqlite3_value_text","string",["number"]),Kn=l("sqlite3_value_blob","number",["number"]),Zn=l("sqlite3_value_double","number",["number"]),Jn=l("sqlite3_result_double","",["number","number"]),Wr=l("sqlite3_result_null","",["number"]),ei=l("sqlite3_result_text","",["number","string","number","number"]),ti=l("sqlite3_result_blob","",["number","number","number","number"]),ri=l("sqlite3_result_int","",["number","number"]),wt=l("sqlite3_result_error","",["number","string","number"]),zr=l("sqlite3_aggregate_context","number",["number","number"]),$r=l("RegisterExtensionFunctions","number",["number"]),Hr=l("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(o){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(o)?this.Cb(o):o!=null&&typeof o=="object"?this.Db(o):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var o=Cn(this.Qa);switch(o){case 100:return!0;case 101:return!1;default:throw this.db.handleError(o)}},r.prototype.wb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),Qn(this.Qa,o)},r.prototype.Gb=function(o){if(o==null&&(o=this.Oa,this.Oa+=1),o=jr(this.Qa,o),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(o)},r.prototype.Hb=function(o){return o==null&&(o=this.Oa,this.Oa+=1),jr(this.Qa,o)},r.prototype.getBlob=function(o){o==null&&(o=this.Oa,this.Oa+=1);var c=Bn(this.Qa,o);o=jn(this.Qa,o);for(var b=new Uint8Array(c),v=0;v<c;v+=1)b[v]=N[o+v];return b},r.prototype.get=function(o,c){c=c||{},o!=null&&this.bind(o)&&this.step(),o=[];for(var b=Fn(this.Qa),v=0;v<b;v+=1)switch(Wn(this.Qa,v)){case 1:var g=c.useBigInt?this.Gb(v):this.wb(v);o.push(g);break;case 2:o.push(this.wb(v));break;case 3:o.push(this.Hb(v));break;case 4:o.push(this.getBlob(v));break;default:o.push(null)}return o},r.prototype.getColumnNames=function(){for(var o=[],c=In(this.Qa),b=0;b<c;b+=1)o.push(zn(this.Qa,b));return o},r.prototype.getAsObject=function(o,c){o=this.get(o,c),c=this.getColumnNames();for(var b={},v=0;v<c.length;v+=1)b[c[v]]=o[v];return b},r.prototype.getSQL=function(){return Ir(this.Qa)},r.prototype.getNormalizedSQL=function(){return Pn(this.Qa)},r.prototype.run=function(o){return o!=null&&this.bind(o),this.step(),this.reset()},r.prototype.sb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1),o=dr(o);var b=pt(o,mt);this.lb.push(b),this.db.handleError(Tn(this.Qa,c,b,o.length-1,0))},r.prototype.Bb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1);var b=pt(o,mt);this.lb.push(b),this.db.handleError(Qr(this.Qa,c,b,o.length,0))},r.prototype.rb=function(o,c){c==null&&(c=this.Oa,this.Oa+=1),this.db.handleError((o===(o|0)?Ln:Dn)(this.Qa,c,o))},r.prototype.Eb=function(o){o==null&&(o=this.Oa,this.Oa+=1),Qr(this.Qa,o,0,0,0)},r.prototype.tb=function(o,c){switch(c==null&&(c=this.Oa,this.Oa+=1),typeof o){case"string":this.sb(o,c);return;case"number":this.rb(o,c);return;case"bigint":this.sb(o.toString(),c);return;case"boolean":this.rb(o+0,c);return;case"object":if(o===null){this.Eb(c);return}if(o.length!=null){this.Bb(o,c);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+o+")."},r.prototype.Db=function(o){var c=this;return Object.keys(o).forEach(function(b){var v=Nn(c.Qa,b);v!==0&&c.tb(o[b],v)}),!0},r.prototype.Cb=function(o){for(var c=0;c<o.length;c+=1)this.tb(o[c],c+1);return!0},r.prototype.reset=function(){return this.freemem(),Hn(this.Qa)===0&&$n(this.Qa)===0},r.prototype.freemem=function(){for(var o;(o=this.lb.pop())!==void 0;)bt(o)},r.prototype.free=function(){this.freemem();var o=Vn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,o},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var o=tt(),c=qe(4);Ye(a),Ye(c);try{this.db.handleError(Fr(this.db.db,this.kb,-1,a,c)),this.kb=pe(c,"i32");var b=pe(a,"i32");return b===0?(this.mb(),{done:!0}):(this.Za=new r(b,this.db),this.db.fb[b]=this.Za,{value:this.Za,done:!1})}catch(v){throw this.pb=St(this.kb),this.mb(),v}finally{et(o)}},n.prototype.mb=function(){bt(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:St(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(o,c){if(!this.db)throw"Database closed";if(c){o=this.prepare(o,c);try{o.step()}finally{o.free()}}else this.handleError(q(this.db,o,0,0,a));return this},i.prototype.exec=function(o,c,b){if(!this.db)throw"Database closed";var v=tt(),g=null;try{var T=Ft(o),ie=qe(4);for(o=[];pe(T,"i8")!==0;){Ye(a),Ye(ie),this.handleError(Fr(this.db,T,-1,a,ie));var ee=pe(a,"i32");if(T=pe(ie,"i32"),ee!==0){var Z=null;for(g=new r(ee,this),c!=null&&g.bind(c);g.step();)Z===null&&(Z={columns:g.getColumnNames(),values:[]},o.push(Z)),Z.values.push(g.get(null,b));g.free()}}return o}catch(se){throw g&&g.free(),se}finally{et(v)}},i.prototype.each=function(o,c,b,v,g){typeof c=="function"&&(v=b,b=c,c=void 0),o=this.prepare(o,c);try{for(;o.step();)b(o.getAsObject(null,g))}finally{o.free()}if(typeof v=="function")return v()},i.prototype.prepare=function(o,c){if(Ye(a),this.handleError(G(this.db,o,-1,a,0)),o=pe(a,"i32"),o===0)throw"Nothing to prepare";var b=new r(o,this);return c!=null&&b.bind(c),this.fb[o]=b},i.prototype.iterateStatements=function(o){return new n(o,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(c){c.free()}),Object.values(this.Sa).forEach(Ee),this.Sa={},this.handleError(x(this.db));var o=Sn(this.filename);return this.handleError(w(this.filename,a)),this.db=pe(a,"i32"),$r(this.db),o},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(o){o.free()}),Object.values(this.Sa).forEach(Ee),this.Sa={},this.Ya&&(Ee(this.Ya),this.Ya=void 0),this.handleError(x(this.db)),kr("/"+this.filename),this.db=null)},i.prototype.handleError=function(o){if(o===0)return null;throw o=Un(this.db),Error(o)},i.prototype.getRowsModified=function(){return Q(this.db)},i.prototype.create_function=function(o,c){Object.prototype.hasOwnProperty.call(this.Sa,o)&&(Ee(this.Sa[o]),delete this.Sa[o]);var b=Je(function(v,g,T){g=t(g,T);try{var ie=c.apply(null,g)}catch(ee){wt(v,ee,-1);return}e(v,ie)},"viii");return this.Sa[o]=b,this.handleError(Br(this.db,o,c.length,1,0,b,0,0,0)),this},i.prototype.create_aggregate=function(o,c){var b=c.init||function(){return null},v=c.finalize||function(Z){return Z},g=c.step;if(!g)throw"An aggregate function must have a step function in "+o;var T={};Object.hasOwnProperty.call(this.Sa,o)&&(Ee(this.Sa[o]),delete this.Sa[o]),c=o+"__finalize",Object.hasOwnProperty.call(this.Sa,c)&&(Ee(this.Sa[c]),delete this.Sa[c]);var ie=Je(function(Z,se,Wt){var Te=zr(Z,1);Object.hasOwnProperty.call(T,Te)||(T[Te]=b()),se=t(se,Wt),se=[T[Te]].concat(se);try{T[Te]=g.apply(null,se)}catch(ni){delete T[Te],wt(Z,ni,-1)}},"viii"),ee=Je(function(Z){var se=zr(Z,1);try{var Wt=v(T[se])}catch(Te){delete T[se],wt(Z,Te,-1);return}e(Z,Wt),delete T[se]},"vi");return this.Sa[o]=ie,this.Sa[c]=ee,this.handleError(Br(this.db,o,g.length-1,1,0,0,ie,ee,0)),this},i.prototype.updateHook=function(o){this.Ya&&(Hr(this.db,0,0),Ee(this.Ya),this.Ya=void 0),o&&(this.Ya=Je(function(c,b,v,g,T){switch(b){case 18:c="insert";break;case 23:c="update";break;case 9:c="delete";break;default:throw"unknown operationCode in updateHook callback: "+b}if(v=v?F(S,v):"",g=g?F(S,g):"",T>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";o(c,v,g,Number(T))},"viiiij"),Hr(this.db,this.Ya,0))},s.Database=i};var W={...s},ce="./this.program",ae=(e,t)=>{throw t},I="",de,ve;if(oe){var xe=tn;I=__dirname+"/",ve=e=>(e=st(e)?new URL(e):e,xe.readFileSync(e)),de=async e=>(e=st(e)?new URL(e):e,xe.readFileSync(e,void 0)),!s.thisProgram&&1<process.argv.length&&(ce=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),h.exports=s,ae=(e,t)=>{throw process.exitCode=e,t}}else(re||P)&&(P?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),I=I.startsWith("blob:")?"":I.slice(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1),P&&(ve=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),de=async e=>{if(st(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var He=s.print||console.log.bind(console),me=s.printErr||console.error.bind(console);Object.assign(s,W),W=null,s.thisProgram&&(ce=s.thisProgram);var Ve=s.wasmBinary,H,Ae=!1,z,N,S,ue,L,j,_t,ne,gt,st=e=>e.startsWith("file://");function sr(){var e=H.buffer;s.HEAP8=N=new Int8Array(e),s.HEAP16=ue=new Int16Array(e),s.HEAPU8=S=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=L=new Int32Array(e),s.HEAPU32=j=new Uint32Array(e),s.HEAPF32=_t=new Float32Array(e),s.HEAPF64=gt=new Float64Array(e),s.HEAP64=ne=new BigInt64Array(e),s.HEAPU64=new BigUint64Array(e)}var ke=0,Xe=null;function Ue(e){var t;throw(t=s.onAbort)==null||t.call(s,e),e="Aborted("+e+")",me(e),Ae=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var Et;async function fn(e){if(!Ve)try{var t=await de(e);return new Uint8Array(t)}catch{}if(e==Et&&Ve)e=new Uint8Array(Ve);else if(ve)e=ve(e);else throw"both async and sync fetching of the wasm failed";return e}async function hn(e,t){try{var r=await fn(e);return await WebAssembly.instantiate(r,t)}catch(n){me(`failed to asynchronously prepare wasm: ${n}`),Ue(n)}}async function cn(e){var t=Et;if(!Ve&&typeof WebAssembly.instantiateStreaming=="function"&&!st(t)&&!oe)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){me(`wasm streaming compile failed: ${n}`),me("falling back to ArrayBuffer instantiation")}return hn(t,e)}class qt{constructor(t){te(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var or=e=>{for(;0<e.length;)e.shift()(s)},ar=[],ur=[],dn=()=>{var e=s.preRun.shift();ur.unshift(e)};function pe(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return N[e];case"i8":return N[e];case"i16":return ue[e>>1];case"i32":return L[e>>2];case"i64":return ne[e>>3];case"float":return _t[e>>2];case"double":return gt[e>>3];case"*":return j[e>>2];default:Ue(`invalid type for getValue: ${t}`)}}var Rt=s.noExitRuntime||!0;function Ye(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":N[e]=0;break;case"i8":N[e]=0;break;case"i16":ue[e>>1]=0;break;case"i32":L[e>>2]=0;break;case"i64":ne[e>>3]=BigInt(0);break;case"float":_t[e>>2]=0;break;case"double":gt[e>>3]=0;break;case"*":j[e>>2]=0;break;default:Ue(`invalid type for setValue: ${t}`)}}var lr=typeof TextDecoder<"u"?new TextDecoder:void 0,F=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&lr)return lr.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var a=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var l=e[t++]&63;i=(i&240)==224?(i&15)<<12|a<<6|l:(i&7)<<18|a<<12|l<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},St=(e,t)=>e?F(S,e,t):"",fr=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},xt=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=fr(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},hr=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},ot=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],mn=()=>{if(oe){var e=tn;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},cr=e=>{(cr=mn())(e)},pn=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=fr(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},At=[],Ge=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},be=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<e.length;++a){var l=e.charCodeAt(a);if(55296<=l&&57343>=l){var w=e.charCodeAt(++a);l=65536+((l&1023)<<10)|w&1023}if(127>=l){if(r>=n)break;t[r++]=l}else{if(2047>=l){if(r+1>=n)break;t[r++]=192|l>>6}else{if(65535>=l){if(r+2>=n)break;t[r++]=224|l>>12}else{if(r+3>=n)break;t[r++]=240|l>>18,t[r++]=128|l>>12&63}t[r++]=128|l>>6&63}t[r++]=128|l&63}}return t[r]=0,r-i},dr=(e,t)=>{var r=Array(Ge(e)+1);return e=be(e,r,0,r.length),t&&(r.length=e),r},mr=[];function pr(e,t){mr[e]={input:[],output:[],cb:t},Dt(e,bn)}var bn={open(e){var t=mr[e.node.rdev];if(!t)throw new d(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new d(60);for(var i=0,a=0;a<n;a++){try{var l=e.tty.cb.xb(e.tty)}catch{throw new d(29)}if(l===void 0&&i===0)throw new d(6);if(l==null)break;i++,t[r+a]=l}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new d(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new d(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},wn={xb(){e:{if(!At.length){var e=null;if(oe){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=xe.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}At=dr(e,!0)}e=At.shift()}return e},qb(e,t){t===null||t===10?(He(F(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(He(F(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},yn={qb(e,t){t===null||t===10?(me(F(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(me(F(e.output)),e.output=[])}},E={Wa:null,Xa(){return E.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new d(63);return E.Wa||(E.Wa={dir:{node:{Ta:E.La.Ta,Ua:E.La.Ua,lookup:E.La.lookup,hb:E.La.hb,rename:E.La.rename,unlink:E.La.unlink,rmdir:E.La.rmdir,readdir:E.La.readdir,symlink:E.La.symlink},stream:{Va:E.Ma.Va}},file:{node:{Ta:E.La.Ta,Ua:E.La.Ua},stream:{Va:E.Ma.Va,read:E.Ma.read,write:E.Ma.write,ib:E.Ma.ib,jb:E.Ma.jb}},link:{node:{Ta:E.La.Ta,Ua:E.La.Ua,readlink:E.La.readlink},stream:{}},ub:{node:{Ta:E.La.Ta,Ua:E.La.Ua},stream:qn}}),r=gr(e,t,r,n),Y(r.mode)?(r.La=E.Wa.dir.node,r.Ma=E.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=E.Wa.file.node,r.Ma=E.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=E.Wa.link.node,r.Ma=E.Wa.link.stream):(r.mode&61440)===8192&&(r.La=E.Wa.ub.node,r.Ma=E.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Y(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw E.vb},hb(e,t,r,n){return E.createNode(e,t,r,n)},rename(e,t,r){try{var n=Oe(t,r)}catch{}if(n){if(Y(e.mode))for(var i in n.Na)throw new d(55);Pt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=Oe(e,t),n;for(n in r.Na)throw new d(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=E.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new d(28);return e.link}},Ma:{read(e,t,r,n,i){var a=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&a.subarray)t.set(a.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=a[i+n];return e},write(e,t,r,n,i,a){if(t.buffer===N.buffer&&(a=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}a=i+n;var l=e.Na?e.Na.length:0;if(l>=a||(a=Math.max(a,l*(1048576>l?2:1.125)>>>0),l!=0&&(a=Math.max(a,256)),l=e.Na,e.Na=new Uint8Array(a),0<e.Ra&&e.Na.set(l.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(a=0;a<n;a++)e.Na[i+a]=t[r+a];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new d(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new d(43);if(e=e.node.Na,i&2||!e||e.buffer!==N.buffer){i=!0,n=65536*Math.ceil(t/65536);var a=Cr(65536,n);if(a&&S.fill(0,a,a+n),n=a,!n)throw new d(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),N.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return E.Ma.write(e,t,0,n,r,!1),0}}},br=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},kt=null,wr={},Ie=[],vn=1,_e=null,yr=!1,vr=!0,_r={},d=class{constructor(e){te(this,"name","ErrnoError");this.Pa=e}},_n=class{constructor(){te(this,"gb",{});te(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},gn=class{constructor(e,t,r,n){te(this,"La",{});te(this,"Ma",{});te(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=vn++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function J(e,t={}){if(!e)throw new d(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(w=>!!w);for(var n=kt,i="/",a=0;a<e.length;a++){var l=a===e.length-1;if(l&&t.parent)break;if(e[a]!==".")if(e[a]==="..")i=hr(i),n=n.parent;else{i=xt(i+"/"+e[a]);try{n=Oe(n,e[a])}catch(w){if((w==null?void 0:w.Pa)===44&&l&&t.Jb)return{path:i};throw w}if(!n.ab||l&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!l||t.$a)){if(!n.La.readlink)throw new d(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=hr(i)+"/"+n),e=n+"/"+e.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new d(32)}function Ot(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function Mt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%_e.length}function Pt(e){var t=Mt(e.parent.id,e.name);if(_e[t]===e)_e[t]=e.bb;else for(t=_e[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Oe(e,t){var r=Y(e.mode)?(r=Fe(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new d(r);for(r=_e[Mt(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function gr(e,t,r,n){return e=new gn(e,t,r,n),t=Mt(e.parent.id,e.name),e.bb=_e[t],_e[t]=e}function Y(e){return(e&61440)===16384}function Er(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function Fe(e,t){if(vr)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function qr(e,t){if(!Y(e.mode))return 54;try{return Oe(e,t),20}catch{}return Fe(e,"wx")}function Rr(e,t,r){try{var n=Oe(e,t)}catch(i){return i.Pa}if(e=Fe(e,"wx"))return e;if(r){if(!Y(n.mode))return 54;if(n===n.parent||Ot(n)==="/")return 10}else if(Y(n.mode))return 31;return 0}function at(e){if(!e)throw new d(63);return e}function V(e){if(e=Ie[e],!e)throw new d(8);return e}function Sr(e,t=-1){if(e=Object.assign(new _n,e),t==-1)e:{for(t=0;4096>=t;t++)if(!Ie[t])break e;throw new d(33)}return e.fd=t,Ie[t]=e}function En(e,t=-1){var r,n;return e=Sr(e,t),(n=(r=e.Ma)==null?void 0:r.Rb)==null||n.call(r,e),e}function Tt(e,t,r){var n=e==null?void 0:e.Ma.Ua;e=n?e:t,n??(n=t.La.Ua),at(n),n(e,r)}var qn={open(e){var t,r;e.Ma=wr[e.node.rdev].Ma,(r=(t=e.Ma).open)==null||r.call(t,e)},Va(){throw new d(70)}};function Dt(e,t){wr[e]={Ma:t}}function xr(e,t){var r=t==="/";if(r&&kt)throw new d(10);if(!r&&t){var n=J(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new d(10);if(!Y(n.mode))throw new d(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?kt=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function ut(e,t,r){var n=J(e,{parent:!0}).node;if(e=ot(e),!e)throw new d(28);if(e==="."||e==="..")throw new d(20);var i=qr(n,e);if(i)throw new d(i);if(!n.La.hb)throw new d(63);return n.La.hb(n,e,t,r)}function Rn(e,t=438){return ut(e,t&4095|32768,0)}function le(e,t=511){return ut(e,t&1023|16384,0)}function lt(e,t,r){typeof r>"u"&&(r=t,t=438),ut(e,t|8192,r)}function Lt(e,t){if(!pn(e))throw new d(44);var r=J(t,{parent:!0}).node;if(!r)throw new d(44);t=ot(t);var n=qr(r,t);if(n)throw new d(n);if(!r.La.symlink)throw new d(63);r.La.symlink(r,t,e)}function Ar(e){var t=J(e,{parent:!0}).node;e=ot(e);var r=Oe(t,e),n=Rr(t,e,!0);if(n)throw new d(n);if(!t.La.rmdir)throw new d(63);if(r.ab)throw new d(10);t.La.rmdir(t,e),Pt(r)}function kr(e){var t=J(e,{parent:!0}).node;if(!t)throw new d(44);e=ot(e);var r=Oe(t,e),n=Rr(t,e,!1);if(n)throw new d(n);if(!t.La.unlink)throw new d(63);if(r.ab)throw new d(10);t.La.unlink(t,e),Pt(r)}function Ke(e,t){return e=J(e,{$a:!t}).node,at(e.La.Ta)(e)}function Or(e,t,r,n){Tt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function ft(e,t){e=typeof e=="string"?J(e,{$a:!0}).node:e,Or(null,e,t)}function Mr(e,t,r){if(Y(t.mode))throw new d(31);if((t.mode&61440)!==32768)throw new d(28);var n=Fe(t,"w");if(n)throw new d(n);Tt(e,t,{size:r,timestamp:Date.now()})}function Qe(e,t,r=438){if(e==="")throw new d(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=J(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var a=!1;if(t&64)if(n){if(t&128)throw new d(20)}else{if(i)throw new d(31);n=ut(e,r|511,0),a=!0}if(!n)throw new d(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!Y(n.mode))throw new d(54);if(!a&&(i=n?(n.mode&61440)===40960?32:Y(n.mode)&&(Er(t)!=="r"||t&576)?31:Fe(n,Er(t)):44))throw new d(i);return t&512&&!a&&(i=n,i=typeof i=="string"?J(i,{$a:!0}).node:i,Mr(null,i,0)),t&=-131713,i=Sr({node:n,path:Ot(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),a&&ft(n,r&511),!s.logReadFiles||t&1||e in _r||(_r[e]=1),i}function Nt(e){if(e.fd===null)throw new d(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{Ie[e.fd]=null}e.fd=null}function Pr(e,t,r){if(e.fd===null)throw new d(8);if(!e.seekable||!e.Ma.Va)throw new d(70);if(r!=0&&r!=1&&r!=2)throw new d(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function Tr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if((e.flags&2097155)===1)throw new d(8);if(Y(e.node.mode))throw new d(31);if(!e.Ma.read)throw new d(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.read(e,t,r,n,i),a||(e.position+=t),t}function Dr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if((e.flags&2097155)===0)throw new d(8);if(Y(e.node.mode))throw new d(31);if(!e.Ma.write)throw new d(28);e.seekable&&e.flags&1024&&Pr(e,0,2);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.write(e,t,r,n,i,void 0),a||(e.position+=t),t}function Sn(e){var t,r=Qe(e,r||0);e=Ke(e).size;var n=new Uint8Array(e);return Tr(r,n,0,e,0),t=n,Nt(r),t}function ge(e,t,r){e=xt("/dev/"+e);var n=br(!!t,!!r);ge.yb??(ge.yb=64);var i=ge.yb++<<8|0;Dt(i,{open(a){a.seekable=!1},close(){var a;(a=r==null?void 0:r.buffer)!=null&&a.length&&r(10)},read(a,l,w,x){for(var q=0,Q=0;Q<x;Q++){try{var G=t()}catch{throw new d(29)}if(G===void 0&&q===0)throw new d(6);if(G==null)break;q++,l[w+Q]=G}return q&&(a.node.atime=Date.now()),q},write(a,l,w,x){for(var q=0;q<x;q++)try{r(l[w+q])}catch{throw new d(29)}return x&&(a.node.mtime=a.node.ctime=Date.now()),q}}),lt(e,n,i)}var C={};function Me(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":V(e).path,t.length==0){if(!r)throw new d(44);return e}return e+"/"+t}function ht(e,t){L[e>>2]=t.dev,L[e+4>>2]=t.mode,j[e+8>>2]=t.nlink,L[e+12>>2]=t.uid,L[e+16>>2]=t.gid,L[e+20>>2]=t.rdev,ne[e+24>>3]=BigInt(t.size),L[e+32>>2]=4096,L[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return ne[e+40>>3]=BigInt(Math.floor(r/1e3)),j[e+48>>2]=r%1e3*1e6,ne[e+56>>3]=BigInt(Math.floor(n/1e3)),j[e+64>>2]=n%1e3*1e6,ne[e+72>>3]=BigInt(Math.floor(i/1e3)),j[e+80>>2]=i%1e3*1e6,ne[e+88>>3]=BigInt(t.ino),0}var ct=void 0,dt=()=>{var e=L[+ct>>2];return ct+=4,e},Ct=0,xn=[0,31,60,91,121,152,182,213,244,274,305,335],An=[0,31,59,90,120,151,181,212,243,273,304,334],Ze={},Lr=e=>{var t;z=e,Rt||0<Ct||((t=s.onExit)==null||t.call(s,e),Ae=!0),ae(e,new qt(e))},kn=e=>{if(!Ae)try{if(e(),!(Rt||0<Ct))try{z=e=z,Lr(e)}catch(t){t instanceof qt||t=="unwind"||ae(1,t)}}catch(t){t instanceof qt||t=="unwind"||ae(1,t)}},Ut={},Nr=()=>{if(!It){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ce||"./this.program"},t;for(t in Ut)Ut[t]===void 0?delete e[t]:e[t]=Ut[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);It=r}return It},It,Ft=e=>{var t=Ge(e)+1,r=qe(t);return be(e,S,r,t),r},On=(e,t,r,n)=>{var i={string:q=>{var Q=0;return q!=null&&q!==0&&(Q=Ft(q)),Q},array:q=>{var Q=qe(q.length);return N.set(q,Q),Q}};e=s["_"+e];var a=[],l=0;if(n)for(var w=0;w<n.length;w++){var x=i[r[w]];x?(l===0&&(l=tt()),a[w]=x(n[w])):a[w]=n[w]}return r=e(...a),r=function(q){return l!==0&&et(l),t==="string"?q?F(S,q):"":t==="boolean"?!!q:q}(r)},mt=0,pt=(e,t)=>(t=t==1?qe(e.length):jt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),S.set(e,t),t),Pe,Qt=[],we,Ee=e=>{Pe.delete(we.get(e)),we.set(e,null),Qt.push(e)},Je=(e,t)=>{if(!Pe){Pe=new WeakMap;var r=we.length;if(Pe)for(var n=0;n<0+r;n++){var i=we.get(n);i&&Pe.set(i,n)}}if(r=Pe.get(e)||0)return r;if(Qt.length)r=Qt.pop();else{try{we.grow(1)}catch(x){throw x instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":x}r=we.length-1}try{we.set(r,e)}catch(x){if(!(x instanceof TypeError))throw x;if(typeof WebAssembly.Function=="function"){var a=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var l=1;l<t.length;++l)i.parameters.push(n[t[l]]);t=new a(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),l={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var w=t.length;128>w?n.push(w):n.push(w%128|128,w>>7);for(a of t)n.push(l[a]);i=="v"?n.push(0):n.push(1,l[i]),t=[0,97,115,109,1,0,0,0,1],a=n.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}we.set(r,t)}return Pe.set(e,r),r};_e=Array(4096),xr(E,"/"),le("/tmp"),le("/home"),le("/home/web_user"),function(){le("/dev"),Dt(259,{read:()=>0,write:(n,i,a,l)=>l,Va:()=>0}),lt("/dev/null",259),pr(1280,wn),pr(1536,yn),lt("/dev/tty",1280),lt("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(cr(e),t=e.byteLength),e[--t]);ge("random",r),ge("urandom",r),le("/dev/shm"),le("/dev/shm/tmp")}(),function(){le("/proc");var e=le("/proc/self");le("/proc/self/fd"),xr({Xa(){var t=gr(e,"fd",16895,73);return t.Ma={Va:E.Ma.Va},t.La={lookup(r,n){r=+n;var i=V(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(Ie.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),E.vb=new d(44),E.vb.stack="<generic error, no stack>";var Mn={a:(e,t,r,n)=>Ue(`Assertion failed: ${e?F(S,e):""}, at: `+[t?t?F(S,t):"":"unknown filename",r,n?n?F(S,n):"":"unknown function"]),i:function(e,t){try{return e=e?F(S,e):"",ft(e,t),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?F(S,t):"",t=Me(e,t),r&-8)return-28;var n=J(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&Fe(n,e)?-2:0):-44}catch(i){if(typeof C>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=V(e);return Or(r,r.node,t,!1),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=V(e);return Tt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){ct=r;try{var n=V(e);switch(t){case 0:var i=dt();if(0>i)break;for(;Ie[i];)i++;return En(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=dt(),n.flags|=i,0;case 12:return i=dt(),ue[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},g:function(e,t){try{var r=V(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??(i=n.La.Ta),at(i);var a=i(e);return ht(t,a)}catch(l){if(typeof C>"u"||l.name!=="ErrnoError")throw l;return-l.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=V(e);if(0>t||(r.flags&2097155)===0)throw new d(28);return Mr(r,r.node,t),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=Ge("/")+1;return t<r?-68:(be("/",S,e,t),r)}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?F(S,e):"",ht(t,Ke(e,!0))}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?F(S,t):"",t=Me(e,t),le(t,r),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?F(S,t):"";var i=n&256;return t=Me(e,t,n&4096),ht(r,i?Ke(t,!0):Ke(t))}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},x:function(e,t,r,n){ct=n;try{t=t?F(S,t):"",t=Me(e,t);var i=n?dt():0;return Qe(t,r,i).fd}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},v:function(e,t,r,n){try{if(t=t?F(S,t):"",t=Me(e,t),0>=n)return-28;var i=J(t).node;if(!i)throw new d(44);if(!i.La.readlink)throw new d(28);var a=i.La.readlink(i),l=Math.min(n,Ge(a)),w=N[r+l];return be(a,S,r,n+1),N[r+l]=w,l}catch(x){if(typeof C>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},u:function(e){try{return e=e?F(S,e):"",Ar(e),0}catch(t){if(typeof C>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?F(S,e):"",ht(t,Ke(e))}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?F(S,t):"",t=Me(e,t),r===0?kr(t):r===512?Ar(t):Ue("Invalid flags passed to unlinkat"),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?F(S,t):"",t=Me(e,t,!0);var n=Date.now(),i,a;if(r){var l=j[r>>2]+4294967296*L[r+4>>2],w=L[r+8>>2];w==1073741823?i=n:w==1073741822?i=null:i=1e3*l+w/1e6,r+=16,l=j[r>>2]+4294967296*L[r+4>>2],w=L[r+8>>2],w==1073741823?a=n:w==1073741822?a=null:a=1e3*l+w/1e6}else a=i=n;if((a??i)!==null){e=i;var x=J(t,{$a:!0}).node;at(x.La.Ua)(x,{atime:e,mtime:a})}return 0}catch(q){if(typeof C>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},m:()=>Ue(""),l:()=>{Rt=!1,Ct=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),L[t>>2]=e.getSeconds(),L[t+4>>2]=e.getMinutes(),L[t+8>>2]=e.getHours(),L[t+12>>2]=e.getDate(),L[t+16>>2]=e.getMonth(),L[t+20>>2]=e.getFullYear()-1900,L[t+24>>2]=e.getDay();var r=e.getFullYear();L[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?An:xn)[e.getMonth()]+e.getDate()-1|0,L[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();L[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,a,l){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var w=V(n);if((t&2)!==0&&(r&2)===0&&(w.flags&2097155)!==2)throw new d(2);if((w.flags&2097155)===1)throw new d(2);if(!w.Ma.ib)throw new d(43);if(!e)throw new d(28);var x=w.Ma.ib(w,e,i,t,r),q=x.Kb;return L[a>>2]=x.Ab,j[l>>2]=q,0}catch(Q){if(typeof C>"u"||Q.name!=="ErrnoError")throw Q;return-Q.Pa}},z:function(e,t,r,n,i,a){a=-9007199254740992>a||9007199254740992<a?NaN:Number(a);try{var l=V(i);if(r&2){if(r=a,(l.node.mode&61440)!==32768)throw new d(43);if(!(n&2)){var w=S.slice(e,e+t);l.Ma.jb&&l.Ma.jb(l,w,r,t,n)}}}catch(x){if(typeof C>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},n:(e,t)=>{if(Ze[e]&&(clearTimeout(Ze[e].id),delete Ze[e]),!t)return 0;var r=setTimeout(()=>{delete Ze[e],kn(()=>Ur(e,performance.now()))},t);return Ze[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),a=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),j[e>>2]=60*Math.max(a,i),L[t>>2]=+(a!=i),t=l=>{var w=Math.abs(l);return`UTC${0<=l?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(a),t=t(i),i<a?(be(e,S,r,17),be(t,S,n,17)):(be(e,S,n,17),be(t,S,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=S.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-H.buffer.byteLength+65535)/65536|0;try{H.grow(n),sr();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return Nr().forEach((n,i)=>{var a=t+r;for(i=j[e+4*i>>2]=a,a=0;a<n.length;++a)N[i++]=n.charCodeAt(a);N[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=Nr();j[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),j[t>>2]=n,0},e:function(e){try{var t=V(e);return Nt(t),0}catch(r){if(typeof C>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=V(e);return N[t]=r.tty?2:Y(r.mode)?3:(r.mode&61440)===40960?7:4,ue[t+2>>1]=0,ne[t+8>>3]=BigInt(0),ne[t+16>>3]=BigInt(0),0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=V(e);e=t;for(var a,l=t=0;l<r;l++){var w=j[e>>2],x=j[e+4>>2];e+=8;var q=Tr(i,N,w,x,a);if(0>q){var Q=-1;break e}if(t+=q,q<x)break;typeof a<"u"&&(a+=q)}Q=t}return j[n>>2]=Q,0}catch(G){if(typeof C>"u"||G.name!=="ErrnoError")throw G;return G.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=V(e);return Pr(i,t,r),ne[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(a){if(typeof C>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},I:function(e){var r;try{var t=V(e);return(r=t.Ma)!=null&&r.fsync?t.Ma.fsync(t):0}catch(n){if(typeof C>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},t:function(e,t,r,n){try{e:{var i=V(e);e=t;for(var a,l=t=0;l<r;l++){var w=j[e>>2],x=j[e+4>>2];e+=8;var q=Dr(i,N,w,x,a);if(0>q){var Q=-1;break e}if(t+=q,q<x)break;typeof a<"u"&&(a+=q)}Q=t}return j[n>>2]=Q,0}catch(G){if(typeof C>"u"||G.name!=="ErrnoError")throw G;return G.Pa}},k:Lr},y;(async function(){var r;function e(n){var i;return y=n.exports,H=y.M,sr(),we=y.O,ke--,(i=s.monitorRunDependencies)==null||i.call(s,ke),ke==0&&Xe&&(n=Xe,Xe=null,n()),y}ke++,(r=s.monitorRunDependencies)==null||r.call(s,ke);var t={a:Mn};return s.instantiateWasm?new Promise(n=>{s.instantiateWasm(t,(i,a)=>{e(i),n(i.exports)})}):(Et??(Et=s.locateFile?s.locateFile("sql-wasm.wasm",I):I+"sql-wasm.wasm"),e((await cn(t)).instance))})(),s._sqlite3_free=e=>(s._sqlite3_free=y.P)(e),s._sqlite3_value_text=e=>(s._sqlite3_value_text=y.Q)(e),s._sqlite3_prepare_v2=(e,t,r,n,i)=>(s._sqlite3_prepare_v2=y.R)(e,t,r,n,i),s._sqlite3_step=e=>(s._sqlite3_step=y.S)(e),s._sqlite3_reset=e=>(s._sqlite3_reset=y.T)(e),s._sqlite3_exec=(e,t,r,n,i)=>(s._sqlite3_exec=y.U)(e,t,r,n,i),s._sqlite3_finalize=e=>(s._sqlite3_finalize=y.V)(e),s._sqlite3_column_name=(e,t)=>(s._sqlite3_column_name=y.W)(e,t),s._sqlite3_column_text=(e,t)=>(s._sqlite3_column_text=y.X)(e,t),s._sqlite3_column_type=(e,t)=>(s._sqlite3_column_type=y.Y)(e,t),s._sqlite3_errmsg=e=>(s._sqlite3_errmsg=y.Z)(e),s._sqlite3_clear_bindings=e=>(s._sqlite3_clear_bindings=y._)(e),s._sqlite3_value_blob=e=>(s._sqlite3_value_blob=y.$)(e),s._sqlite3_value_bytes=e=>(s._sqlite3_value_bytes=y.aa)(e),s._sqlite3_value_double=e=>(s._sqlite3_value_double=y.ba)(e),s._sqlite3_value_int=e=>(s._sqlite3_value_int=y.ca)(e),s._sqlite3_value_type=e=>(s._sqlite3_value_type=y.da)(e),s._sqlite3_result_blob=(e,t,r,n)=>(s._sqlite3_result_blob=y.ea)(e,t,r,n),s._sqlite3_result_double=(e,t)=>(s._sqlite3_result_double=y.fa)(e,t),s._sqlite3_result_error=(e,t,r)=>(s._sqlite3_result_error=y.ga)(e,t,r),s._sqlite3_result_int=(e,t)=>(s._sqlite3_result_int=y.ha)(e,t),s._sqlite3_result_int64=(e,t)=>(s._sqlite3_result_int64=y.ia)(e,t),s._sqlite3_result_null=e=>(s._sqlite3_result_null=y.ja)(e),s._sqlite3_result_text=(e,t,r,n)=>(s._sqlite3_result_text=y.ka)(e,t,r,n),s._sqlite3_aggregate_context=(e,t)=>(s._sqlite3_aggregate_context=y.la)(e,t),s._sqlite3_column_count=e=>(s._sqlite3_column_count=y.ma)(e),s._sqlite3_data_count=e=>(s._sqlite3_data_count=y.na)(e),s._sqlite3_column_blob=(e,t)=>(s._sqlite3_column_blob=y.oa)(e,t),s._sqlite3_column_bytes=(e,t)=>(s._sqlite3_column_bytes=y.pa)(e,t),s._sqlite3_column_double=(e,t)=>(s._sqlite3_column_double=y.qa)(e,t),s._sqlite3_bind_blob=(e,t,r,n,i)=>(s._sqlite3_bind_blob=y.ra)(e,t,r,n,i),s._sqlite3_bind_double=(e,t,r)=>(s._sqlite3_bind_double=y.sa)(e,t,r),s._sqlite3_bind_int=(e,t,r)=>(s._sqlite3_bind_int=y.ta)(e,t,r),s._sqlite3_bind_text=(e,t,r,n,i)=>(s._sqlite3_bind_text=y.ua)(e,t,r,n,i),s._sqlite3_bind_parameter_index=(e,t)=>(s._sqlite3_bind_parameter_index=y.va)(e,t),s._sqlite3_sql=e=>(s._sqlite3_sql=y.wa)(e),s._sqlite3_normalized_sql=e=>(s._sqlite3_normalized_sql=y.xa)(e),s._sqlite3_changes=e=>(s._sqlite3_changes=y.ya)(e),s._sqlite3_close_v2=e=>(s._sqlite3_close_v2=y.za)(e),s._sqlite3_create_function_v2=(e,t,r,n,i,a,l,w,x)=>(s._sqlite3_create_function_v2=y.Aa)(e,t,r,n,i,a,l,w,x),s._sqlite3_update_hook=(e,t,r)=>(s._sqlite3_update_hook=y.Ba)(e,t,r),s._sqlite3_open=(e,t)=>(s._sqlite3_open=y.Ca)(e,t);var jt=s._malloc=e=>(jt=s._malloc=y.Da)(e),bt=s._free=e=>(bt=s._free=y.Ea)(e);s._RegisterExtensionFunctions=e=>(s._RegisterExtensionFunctions=y.Fa)(e);var Cr=(e,t)=>(Cr=y.Ga)(e,t),Ur=(e,t)=>(Ur=y.Ha)(e,t),et=e=>(et=y.Ia)(e),qe=e=>(qe=y.Ja)(e),tt=()=>(tt=y.Ka)();s.stackSave=()=>tt(),s.stackRestore=e=>et(e),s.stackAlloc=e=>qe(e),s.cwrap=(e,t,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return t!=="string"&&i&&!n?s["_"+e]:(...a)=>On(e,t,r,a)},s.addFunction=Je,s.removeFunction=Ee,s.UTF8ToString=St,s.ALLOC_NORMAL=mt,s.allocate=pt,s.allocateUTF8OnStack=Ft;function Bt(){function e(){var i;if(s.calledRun=!0,!Ae){if(!s.noFSInit&&!yr){var t,r;yr=!0,n??(n=s.stdin),t??(t=s.stdout),r??(r=s.stderr),n?ge("stdin",n):Lt("/dev/tty","/dev/stdin"),t?ge("stdout",null,t):Lt("/dev/tty","/dev/stdout"),r?ge("stderr",null,r):Lt("/dev/tty1","/dev/stderr"),Qe("/dev/stdin",0),Qe("/dev/stdout",1),Qe("/dev/stderr",1)}if(y.N(),vr=!1,(i=s.onRuntimeInitialized)==null||i.call(s),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var n=s.postRun.shift();ar.unshift(n)}or(ar)}}if(0<ke)Xe=Bt;else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)dn();or(ur),0<ke?Xe=Bt:s.setStatus?(s.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>s.setStatus(""),1),e()},1)):e()}}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return Bt(),O}),f)};h.exports=p,h.exports.default=p}($t)),$t.exports}var Ti=Pi();const Di=di(Ti);function vt(h){return new Promise((u,f)=>{h.oncomplete=h.onsuccess=()=>u(h.result),h.onabort=h.onerror=()=>f(h.error)})}function Li(h,u){const f=indexedDB.open(h);f.onupgradeneeded=()=>f.result.createObjectStore(u);const p=vt(f);return(A,R)=>p.then(_=>R(_.transaction(u,A).objectStore(u)))}let Ht;function ir(){return Ht||(Ht=Li("keyval-store","keyval")),Ht}function nn(h,u=ir()){return u("readonly",f=>vt(f.get(h)))}function sn(h,u,f=ir()){return f("readwrite",p=>(p.put(u,h),vt(p.transaction)))}function Ni(h,u=ir()){return u("readwrite",f=>(f.delete(h),vt(f.transaction)))}async function De(h){try{return{data:await h,error:null}}catch(u){return{data:null,error:u}}}function ji(h){try{return{data:h(),error:null}}catch(u){return{data:null,error:u}}}const je=500;class Bi{constructor(u){te(this,"dbPromise",null);te(this,"dbPath");te(this,"storageKey");te(this,"timestamp",null);this.dbPath=u.dbPath,this.storageKey=u.storageKey}ready(){return this.checkTimestamp(),this.dbPromise=this.dbPromise===null?this.loadDatabase():this.dbPromise,this.dbPromise}async exec(u,f,p=!1){const A=Date.now(),R=await this.ready();R.run("PRAGMA foreign_keys = ON;");const[{values:_}]=R.exec("PRAGMA foreign_keys;");if(_[0][0]!==1)return console.error("Failed to enable foreign keys"),this.parse([]);const O=await De((async()=>{const s=R.exec(u,f);return await this.saveDatabase(R),s})());if(O.error!==null)return console.error("Failed to execute SQL query",O.error),this.parse([]);const D=Date.now()-A;return D<je&&!p&&await new Promise(s=>setTimeout(s,je-D)),this.parse(O.data)}async downloadDatabase(u="database.db"){const f=Date.now(),A=(await this.ready()).export(),R=new Blob([A],{type:"application/x-sqlite3"}),_=URL.createObjectURL(R),O=document.createElement("a");O.href=_,O.download=u,O.style.display="none",document.body.appendChild(O);const D=Date.now()-f;D<je&&await new Promise(s=>setTimeout(s,je-D)),O.click(),setTimeout(()=>{document.body.removeChild(O),URL.revokeObjectURL(_)},100)}async reset(){const u=Date.now(),{error:f}=await De(Ni(this.storageKey)),p=Date.now()-u;p<je&&await new Promise(A=>setTimeout(A,je-p)),f?console.error("刪除本地資料庫失敗"):console.log("刪除本地資料庫成功"),this.dbPromise=this.loadDatabase()}async getDatabaseSize(){await this.ready();const{data:u,error:f}=await De(nn(this.storageKey));return f?(console.error("Failed to get database size",f),0):u?u.byteLength:0}checkTimestamp(){const u=localStorage.getItem("__db_timestamp__")??Date.now().toString(),f=parseInt(u,10);this.timestamp===null?this.timestamp=f:this.timestamp!==f&&(this.timestamp=f,this.dbPromise=null)}setTimestamp(){const u=Date.now();localStorage.setItem("__db_timestamp__",u.toString()),this.timestamp=u}parse(u){if(u.length===0||!u[0])return[];const{columns:f,values:p}=u[0];return p.map(A=>Object.fromEntries(f.map((R,_)=>[R,A[_]])))}async loadDatabase(){const u=await Di({locateFile:D=>`https://sql.js.org/dist/${D}`}),{data:f,error:p}=await De(nn(this.storageKey));if(p&&console.error("Failed to get cached database",p),f)return new u.Database(f);const{data:A,error:R}=await De((async()=>{const s=await(await fetch(this.dbPath)).arrayBuffer();return new u.Database(new Uint8Array(s))})());if(R)return console.error("Failed to fetch database file",R),new u.Database;const _=A.export(),{error:O}=await De(sn(this.storageKey,_));return O&&console.error("Failed to save database to IndexedDB",O),A}async saveDatabase(u){this.setTimestamp();const f=u.export(),{error:p}=await De(sn(this.storageKey,f));p&&console.error("Failed to save database to IndexedDB",p)}}export{mi as Q,Bi as S,ki as a,Qi as f,Jr as n,gi as s,ji as t,Fi as u};
