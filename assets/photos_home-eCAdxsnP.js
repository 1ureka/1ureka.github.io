import{r as a,n as T,j as e,f as _,i as I,o as i,S as k,l as p,B as w,w as G,T as K,C as X,h as J,v as Y,I as j,p as Z,y as O,t as E,L as z,x as ee,E as te}from"./routes-BRvtlvXq.js";import{c as V,L as se,M as oe,C as v,a as A,b as ne,B as re,F as B}from"./CameraRounded-Dc8I44tF.js";import{R as ie,Q as ae,b as le,E as ce}from"./RefreshRounded-Dg1hhxAj.js";import{A as de,a as pe}from"./ArrowDropDownRounded-C7zQ0_DO.js";import{E as ue}from"./ErrorOutlineRounded-zP-oZtXx.js";import{I as xe,S as he,E as me,D as $}from"./ExpandMoreRounded-DEjStDxu.js";import{T as f,D as ge}from"./DarkModeRounded-C3T8P242.js";import{B as g,S as fe}from"./Motion-Cr-vmtn-.js";import{P as D}from"./PublishRounded-mOn8dcva.js";import{a as F}from"./formatters-C9bWSe0O.js";import{u as M,m as je,M as U,i as P,n as be,f as ye,b as ve,c as we}from"./proxy-CF5FgfMX.js";function Ie(t){const s=M(()=>je(t)),{isStatic:o}=a.useContext(U);if(o){const[,n]=a.useState(t);a.useEffect(()=>s.on("change",n),[])}return s}function Re(t,s={}){const{isStatic:o}=a.useContext(U),n=a.useRef(null),r=M(()=>P(t)?t.get():t),l=M(()=>typeof r=="string"?r.replace(/[\d.-]/g,""):void 0),c=Ie(r),d=a.useRef(r),b=a.useRef(be),y=()=>{h(),n.current=we({keyframes:[L(c.get()),L(d.current)],velocity:c.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:b.current})},h=()=>{n.current&&n.current.stop()};return a.useInsertionEffect(()=>c.attach((m,u)=>o?u(m):(d.current=m,b.current=x=>u(W(x,l)),ye.postRender(y),c.get()),h),[JSON.stringify(s)]),ve(()=>{if(P(t))return t.on("change",m=>c.set(W(m,l)))},[c,l]),c}function W(t,s){return s?t+s:t}function L(t){return typeof t=="number"?t:parseFloat(t)}const Se=T(e.jsx("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68m-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5"})),ke=T(e.jsx("path",{d:"M19 9H5c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1M5 15h14c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1 .45-1 1s.45 1 1 1"})),R=_({cssVariables:{colorSchemeSelector:".mode-%s"},typography:{fontFamily:'Comfortaa, "jf openhuninn"'},colorSchemes:{light:{palette:{border:{main:"var(--mui-palette-divider)"},text:{colored:"color-mix(in srgb, var(--mui-palette-primary-main) 50%, var(--mui-palette-text-primary) 50%)"},primary:{main:"#d077a1"},background:{paper:"#f9f9f9",default:"#f3f3f3"}}},dark:{palette:{border:{main:"transparent"},text:{colored:"color-mix(in srgb, var(--mui-palette-primary-main) 50%, var(--mui-palette-text-primary) 50%)"},primary:{main:"#d077a1"},background:{paper:"#272727",default:"#202020"}}}},components:{MuiInputBase:{defaultProps:{sx:{"&.Mui-disabled::before":{borderBottomStyle:"solid"}}}},MuiButton:{styleOverrides:{contained:{"&:hover":{backgroundColor:"var(--mui-palette-primary-light)"}}}}},spacing:"0.5rem"}),H=()=>{const t=I(R.breakpoints.up("lg")),s=I(R.breakpoints.up("md")),o=I(R.breakpoints.up("sm"));return a.useEffect(()=>{t&&(document.documentElement.style.fontSize="16px")},[t,s,o]),{isLg:t,isMd:s,isSm:o}};class Ce extends Error{constructor(s,o){super(o),this.name=s,Object.setPrototypeOf(this,new.target.prototype)}}class N extends Ce{constructor(s){super("ScreenWidthError",`請使用寬度超過 ${s}px 的裝置或將視窗放大，以使用此應用程式。`),Object.setPrototypeOf(this,new.target.prototype)}}const Ee=({error:t,resetErrorBoundary:s})=>{const{isSm:o,isMd:n}=H(),r=t instanceof Error,l=t instanceof N,c=r?t.name:"UnknownError",d=c==="AbortError"||c==="NetworkError"||c==="TypeError"||l;return a.useEffect(()=>{l&&o&&(s==null||s())},[l,o,s]),e.jsxs(i,{sx:{position:"fixed",inset:0,display:"grid",placeItems:"center",p:2,bgcolor:"background.default"},children:[e.jsx(i,{sx:{position:"absolute",inset:0,...n?{}:{left:"50%",right:"-50%"},pointerEvents:"none",display:"grid",placeItems:"center",containerType:"inline-size"},children:e.jsx(V,{color:"primary",sx:{position:"absolute",aspectRatio:"1/1",width:"max(135cqw, 120cqh)",height:"auto"}})}),e.jsx(i,{sx:{position:"relative",display:"grid",placeItems:"center"},children:e.jsxs(k,{sx:{gap:5,alignItems:"center"},children:[e.jsxs(i,{sx:{position:"relative"},children:[e.jsx(p,{variant:"h2",component:"h1",sx:{position:"absolute",inset:0,fontFamily:'"timemachine-wa"',WebkitTextStroke:"15px var(--mui-palette-background-default)"},children:"相簿樣板"}),e.jsx(p,{variant:"h2",component:"h1",sx:{position:"relative",fontFamily:'"timemachine-wa"',color:"primary.main"},children:"相簿樣板"})]}),e.jsxs(k,{sx:{gap:1,alignItems:"center"},children:[e.jsx(p,{variant:"h5",component:"h3",children:"發生錯誤"}),e.jsx(p,{variant:"body1",sx:{color:"text.secondary"},children:(t==null?void 0:t.message)||"未知錯誤"})]}),e.jsxs(i,{sx:{display:"flex",gap:2,mt:2,color:"text.secondary"},children:[!d&&e.jsx(w,{variant:"outlined",color:"inherit",disableElevation:!0,href:G.photos_home,startIcon:e.jsx(de,{}),children:"返回首頁"}),!d&&s&&e.jsx(w,{variant:"text",color:"inherit",onClick:()=>s(),startIcon:e.jsx(ie,{}),children:"重新載入"}),d&&e.jsx(w,{variant:"outlined",color:"inherit",startIcon:e.jsx(ue,{}),sx:{pointerEvents:"none"},children:"該錯誤無法透過重新載入修正"})]})]})})]})},Me=new ae;function ze({children:t}){return e.jsxs(K,{theme:R,children:[e.jsx(X,{}),e.jsx(J,{}),e.jsx(le,{client:Me,children:e.jsx(ce,{fallbackRender:s=>e.jsx(Ee,{...s}),children:t})})]})}const Ae=()=>{const[t,s]=a.useState(""),o=l=>s(l.target.value),n="#"+t,r=({key:l})=>{if(l==="Enter"){if(!t.trim())return console.error("請輸入搜尋內容");console.log("還沒寫完，請稍後再試"),window.location.href="#"}};return e.jsx(Y,{variant:"filled",label:"搜尋",size:"small",sx:{width:"37.5vw",maxWidth:"30rem",minWidth:"15rem",scale:"0.9",transformOrigin:"left"},value:t,onChange:o,onKeyDown:r,slotProps:{input:{sx:{borderRadius:2,overflow:"hidden","&::before":{borderBottom:0},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:0}},endAdornment:e.jsx(f,{title:t.trim()?"搜尋":"請輸入搜尋內容",arrow:!0,children:e.jsx(xe,{position:"end",children:e.jsx(j,{edge:"end",href:n,disabled:!t.trim(),children:e.jsx(he,{})})})})}}})},Be=()=>{const{mode:t,setMode:s,systemMode:o}=Z(),n=t==="light"||o==="light",r=t==="dark"||o==="dark";return e.jsxs(i,{sx:{position:"relative",p:.5,gap:.5,bgcolor:"action.hover",borderRadius:2,display:"flex",alignItems:"center"},children:[e.jsx(g,{layout:!0,sx:{position:"absolute",left:n?0:void 0,ml:n?.5:void 0,right:r?0:void 0,mr:r?.5:void 0,p:1,width:"1.25rem",height:"1.25rem",boxSizing:"content-box",bgcolor:"primary.light",borderRadius:1.5}}),e.jsx(j,{onClick:()=>s("light"),centerRipple:!1,sx:{position:"relative",borderRadius:1.5,overflow:"hidden",color:n?"background.paper":void 0,transition:"0.25s all ease"},children:e.jsx(se,{fontSize:"small"})}),e.jsx(j,{onClick:()=>s("dark"),centerRipple:!1,sx:{position:"relative",borderRadius:1.5,overflow:"hidden",color:r?"background.paper":void 0,transition:"0.25s all ease"},children:e.jsx(ge,{fontSize:"small"})})]})},De=()=>{throw new Error("Menu is not implemented yet.")},Fe=()=>{const[t,s]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(O,{onClick:()=>s(!0),sx:{display:"flex",alignItems:"center",p:.5,pr:0,borderRadius:2,textAlign:"left","&:hover":{bgcolor:"action.hover"}},children:[e.jsx(i,{sx:{width:"2.3rem",aspectRatio:1,borderRadius:1.5,bgcolor:"primary.light",display:"grid",placeItems:"center",mr:1},children:e.jsx(p,{variant:"h6",component:"span",sx:{color:"primary.contrastText"},children:"1"})}),e.jsx(p,{variant:"subtitle1",component:"h6",children:"1ureka"}),e.jsx(i,{sx:{color:"text.secondary"},children:e.jsx(pe,{color:"inherit"})})]}),t&&e.jsx(De,{})]})},Pe={borderRadius:2,"& svg":{transition:"scale 0.15s ease"},"&:active svg":{scale:"0.5 1"}},We=({onClick:t})=>e.jsx(j,{onClick:t,centerRipple:!1,sx:Pe,children:e.jsx(oe,{})}),Q=t=>t.some(s=>s.active?!0:s.children&&s.children.length>0?Q(s.children):!1),S=({expanded:t,active:s,icon:o,title:n,action:r,onClick:l,children:c,nestedLevel:d})=>{const[b,y]=a.useState(!1),[h,m]=a.useState(d===void 0),u=s||Q(c??[]);return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:t?null:e.jsx(p,{variant:"body2",children:n}),arrow:!0,placement:"right",children:e.jsx(g,{layout:!0,sx:{width:1},children:e.jsxs(O,{onClick:l,sx:{pl:d?d*2:0,width:t?1:void 0,borderRadius:2,display:"flex",justifyContent:t?"space-between":"center",alignItems:"center",bgcolor:u?"FilledInput.bg":"transparent","&:hover":{bgcolor:"action.hover"}},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:3,p:1.2},children:[e.jsx(i,{sx:{color:"action.active",display:"contents"},children:o}),t&&e.jsx(p,{variant:"subtitle1",component:"h6",sx:{...E,lineHeight:1},children:n})]}),t&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[r,c&&c.length>0&&e.jsx(f,{title:e.jsx(p,{variant:"body2",children:h?"收起資料夾":"展開資料夾"}),placement:"right",arrow:!0,children:e.jsx(j,{centerRipple:!1,sx:{borderRadius:2},onMouseDown:x=>x.stopPropagation(),onClick:x=>{x.stopPropagation(),m(C=>!C)},component:"span",children:e.jsx(me,{fontSize:"small",sx:{rotate:h?"180deg":"0deg",transition:"rotate 0.2s ease"}})})})]}),u&&e.jsx(g,{layoutId:`selected-bar-${d??-1}`,onLayoutAnimationStart:()=>y(!0),onLayoutAnimationComplete:()=>y(!1),sx:{position:"absolute",inset:"0 auto 0 0",display:"grid",placeItems:"center"},children:e.jsx(i,{sx:{px:.2,height:.5,bgcolor:"primary.main",borderRadius:99,translate:"-50%",scale:b?"1 1.5":"1 1",transition:"scale 0.7s cubic-bezier(0.4, 0, 0.25, 1)",transitionDuration:b?"0.2s":"0.7s"}})})]})})}),c&&c.length>0&&t?e.jsx(fe,{sx:{gap:.5,width:1,clipPath:"polygon(-50% 0, 150% 0, 150% 100%, -50% 100%)",transformOrigin:"top"},transition:{type:"spring",bounce:.3},variants:{initial:{height:0,x:-20,opacity:0},animate:{height:"auto",x:0,opacity:1}},initial:"initial",animate:h?"animate":"initial",children:c.map((x,C)=>e.jsx(S,{...x,expanded:t,nestedLevel:(d??0)+1},C))}):e.jsx(e.Fragment,{})]})},Le=({expanded:t})=>{const o=685362447908864e-7,n=o/104857600*100,r=`已使用 ${F(o)}，總共 ${F(104857600)} (${n.toFixed(2)}%)`;return t?e.jsx(i,{sx:{ml:-1,p:1,borderTop:1,borderColor:"divider",width:1,boxSizing:"content-box"},children:e.jsxs(i,{sx:{p:3,display:"flex",gap:2},children:[e.jsxs(i,{sx:{color:"text.secondary",display:"grid",placeItems:"center",height:"fit-content",position:"relative"},children:[e.jsx(v,{color:"inherit",sx:{opacity:0}}),e.jsx(g,{layoutId:"cloud-icon",layout:"position",sx:{color:"text.secondary",position:"absolute"},children:e.jsx(v,{color:"inherit",sx:{display:"block"}})})]}),e.jsxs(k,{sx:{width:1,gap:1,"& p":E,"& h6":E},children:[e.jsx(p,{variant:"subtitle1",children:"儲存空間"}),e.jsx(z,{variant:"determinate",value:n,sx:{borderRadius:9}}),e.jsx(f,{title:e.jsx(p,{variant:"body2",children:r}),arrow:!0,placement:"right",children:e.jsx(p,{variant:"body2",sx:{color:"text.secondary",...ee},children:r})}),e.jsx(g,{layoutId:"import-button",layout:"position",children:e.jsx(w,{variant:"contained",size:"small",disableElevation:!0,startIcon:e.jsx(D,{}),fullWidth:!0,sx:{borderRadius:1.5,flexWrap:"nowrap"},children:e.jsx(p,{variant:"body2",children:"匯入"})})})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(f,{title:e.jsx(p,{variant:"body2",children:r}),arrow:!0,placement:"right",children:e.jsxs(i,{sx:{color:"text.secondary",display:"grid",placeItems:"center",width:"2.5rem",p:.5,bgcolor:"action.hover",borderRadius:2},children:[e.jsxs(i,{sx:{width:0,display:"grid",placeItems:"center"},children:[e.jsx(i,{sx:{opacity:0},children:e.jsx(v,{color:"inherit",sx:{translate:"-50%"}})}),e.jsx(g,{layoutId:"cloud-icon",layout:"position",sx:{position:"absolute"},children:e.jsx(v,{color:"inherit"})})]}),e.jsx(z,{variant:"determinate",value:n,sx:{borderRadius:9,width:1}})]})}),e.jsx(f,{title:e.jsx(p,{variant:"body2",children:"從本地匯入圖片"}),arrow:!0,placement:"right",children:e.jsx(g,{layoutId:"import-button",layout:"position",children:e.jsx(w,{variant:"contained",size:"small",disableElevation:!0,sx:{borderRadius:2,flexWrap:"nowrap",p:1,minWidth:0,width:"2.5rem",height:"2.5rem",mt:.5},children:e.jsx(D,{})})})})]})},Te=({onMenuClick:t,expanded:s})=>{const[o,n]=a.useState(0);return e.jsxs(k,{sx:{gap:.5,p:1,pr:0,alignItems:"flex-start",minHeight:1},children:[e.jsx(We,{onClick:t}),!s&&e.jsx(g,{layoutId:"add-folder",children:e.jsx(f,{title:e.jsx(p,{variant:"body2",children:"新增資料夾"}),arrow:!0,placement:"right",children:e.jsx(j,{centerRipple:!1,sx:{borderRadius:2,width:"2.5rem",height:"2.5rem"},onMouseDown:r=>r.stopPropagation(),onClick:r=>r.stopPropagation(),children:e.jsx(A,{fontSize:"small"})})})}),e.jsx(S,{expanded:s,active:o===0,icon:e.jsx(ne,{fontSize:"small",color:"inherit"}),title:"圖庫",action:e.jsx(g,{layoutId:"add-folder",children:e.jsx(f,{title:e.jsx(p,{variant:"body2",children:"新增資料夾"}),arrow:!0,placement:"right",children:e.jsx(j,{centerRipple:!1,sx:{borderRadius:2},onMouseDown:r=>r.stopPropagation(),onClick:r=>r.stopPropagation(),component:"span",children:e.jsx(A,{fontSize:"small"})})})}),onClick:()=>n(0)}),e.jsx(S,{expanded:s,active:o===1,icon:e.jsx(re,{fontSize:"small",color:"inherit"}),title:"我的最愛",onClick:()=>n(1)}),e.jsx($,{flexItem:!0}),e.jsx(S,{expanded:s,active:o===2,icon:e.jsx(v,{fontSize:"small",color:"inherit"}),title:"個人相簿",onClick:()=>n(2),children:[...Array(5)].map((r,l)=>({active:o===l+3,icon:e.jsx(B,{fontSize:"small",color:"inherit"}),title:`資料夾${l+1}`,onClick:()=>n(l+3),children:l===3?[...Array(2)].map((c,d)=>({active:o===d+8,icon:e.jsx(B,{fontSize:"small",color:"inherit"}),title:`子資料夾${d+1}`,onClick:()=>n(d+8)})):[]}))}),e.jsx(i,{sx:{flex:1}}),e.jsx(Le,{expanded:s})]})},q=72,Oe=()=>{const t=a.useRef(320),s=a.useRef(64),o=Re(t.current,{bounce:.3}),[n,r]=a.useState(!1),[l,c]=a.useState(!0),d=a.useRef(null),b=()=>{c(u=>(u?o.set(s.current):o.set(t.current),!u))},y=()=>{r(!0),document.body.style.cursor="ew-resize",document.getElementById("root").style.pointerEvents="none"},h=a.useCallback(()=>{r(!1),document.body.style.cursor="default",document.getElementById("root").style.pointerEvents=""},[]),m=a.useCallback(u=>{if(!n||!d.current)return;const x=u.clientX-d.current.getBoundingClientRect().left;x>=200&&x<=800&&(t.current=x,o.set(x))},[n,o]);return a.useEffect(()=>(window.addEventListener("mousemove",m),window.addEventListener("mouseup",h),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",h)}),[m,h]),e.jsxs(i,{sx:{display:"flex",height:`calc(100dvh - ${q}px)`,position:"relative"},children:[e.jsx(g,{ref:d,sx:{height:1,overflowY:"auto",overflowX:"hidden",scrollbarGutter:"stable"},style:{width:o},children:e.jsx(Te,{expanded:l,onMenuClick:b})}),e.jsxs(i,{sx:{position:"relative",height:1,flex:1,overflow:"hidden",bgcolor:"background.paper",borderRadius:u=>`${u.shape.borderRadius*6}px 0 0 0`,border:1,borderColor:"border.main"},children:[e.jsx(i,{sx:{height:1,overflow:"auto",scrollbarGutter:"stable"},children:e.jsx(i,{sx:{height:1500}})}),e.jsx(i,{onMouseDown:y,sx:{position:"absolute",inset:"0 auto 0 0",cursor:"ew-resize","&:hover":{bgcolor:"action.hover"},display:"grid",pointerEvents:n||!l?"none":"auto",opacity:l?1:0,bgcolor:n?"divider":"transparent",scale:n?"0.7 1":"1 1",transformOrigin:"left",transition:"all 0.2s ease",placeItems:"center"},children:e.jsx(ke,{sx:{fontSize:"1.2rem",color:"text.secondary",rotate:"90deg",scale:"1.5 1"}})})]})]})},Ve=()=>{if(I(s=>s.breakpoints.up("sm")))return null;throw new N(600)};function $e(){return H(),e.jsxs(ze,{children:[e.jsx(Ve,{}),e.jsxs(i,{component:"header",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1.5,px:{xs:1.5,sm:3.5},height:q},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(V,{sx:{fontSize:"3em",color:"primary.main"}}),e.jsx(p,{variant:"h4",component:"h1",sx:{fontFamily:'"timemachine-wa"',color:"text.colored"},children:"相簿樣板"})]}),e.jsx(Ae,{})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(j,{sx:{borderRadius:2,overflow:"hidden","&:hover > p":{ml:1,width:"2rem",opacity:1}},centerRipple:!1,children:[e.jsx(Se,{}),e.jsx(p,{variant:"body1",sx:{ml:0,textWrap:"nowrap",width:0,opacity:0,transition:"0.2s all ease"},children:"設定"})]}),e.jsx(Be,{}),e.jsx($,{flexItem:!0,orientation:"vertical"}),e.jsx(Fe,{})]})]}),e.jsx(Oe,{})]})}te.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx($e,{})}));
