import{r as x,u as I,an as W,V as je,J as Te,j as o,s as j,c as C,d as k,w as ce,ak as Se,m as H,y as R,g as M,a as B,b as h,aF as Re,aG as we,h as Ie,G as _,n as de,T as w,B as g,t as ke,I as pe,x as $e,X as Me,ao as Be,S as He}from"./Toast-Cx2S6ON-.js";import{A as ue}from"./ArrowDropDownRounded-CPuTbNt2.js";import{t as Pe,A as Le}from"./array-r7EOB7s-.js";import{f as ze,b as xe,a as me}from"./main-Bwp6aaeS.js";import{t as Fe}from"./SQLiteClient-BdEGQxAz.js";import{z as X}from"./index-mSkvzYyn.js";import{M as K}from"./MenuItem-BWJlJzHY.js";import{D as E}from"./Divider-B7hzBXuk.js";import{I as Ae}from"./ExpandMoreRounded-Dezdu6WF.js";import{F as be}from"./FilterAltRounded-D59n8Pn9.js";import{T as G}from"./Tooltip-uDq6W6yA.js";import{g as Oe,l as P,L as A,a as q}from"./ListItemText-9RpWCaym.js";import{C as Q}from"./Checkbox-D88LWZoE.js";import{S as Ne}from"./SortRounded-lN-X-kTo.js";import{S as Y}from"./Skeleton-BNy5r-MV.js";import{B as O}from"./routes-Cj_lxZkv.js";import"./react-error-boundary.esm-DwWODNLY.js";import"./DataExplorationRounded-Odozb5wT.js";import"./NotificationsRounded-D2Q9WMHU.js";import"./DarkModeRounded-DqjvIZVv.js";import"./useMutation-DYZnN_IX.js";import"./DownloadRounded-Bf_HQ45J.js";import"./dayjs.min-Du9y2Dk8.js";import"./SwitchBase-B8TFLLdf.js";const Ue=(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,s.alignItems==="flex-start"&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]},De=e=>{const{alignItems:t,classes:s,dense:r,disabled:n,disableGutters:a,divider:l,selected:i}=e,u=k({root:["root",r&&"dense",!a&&"gutters",l&&"divider",n&&"disabled",t==="flex-start"&&"alignItemsFlexStart",i&&"selected"]},Oe,s);return{...s,...u}},Ee=j(ce,{shouldForwardProp:e=>Se(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Ue})(H(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:R(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${P.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:R(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${P.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:R(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:R(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${P.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${P.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),Z=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:a=!1,component:l="div",children:i,dense:d=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:p,selected:v=!1,className:m,...b}=r,T=x.useContext(W),f=x.useMemo(()=>({dense:d||T.dense||!1,alignItems:n,disableGutters:u}),[n,T.dense,d,u]),y=x.useRef(null);je(()=>{a&&y.current&&y.current.focus()},[a]);const $={...r,alignItems:n,dense:f.dense,disableGutters:u,divider:c,selected:v},S=De($),F=Te(y,s);return o.jsx(W.Provider,{value:f,children:o.jsx(Ee,{ref:F,href:b.href||b.to,component:(b.href||b.to)&&l==="div"?"button":l,focusVisibleClassName:C(S.focusVisible,p),ownerState:$,className:C(S.root,m),...b,classes:S,children:i})})}),ge=x.createContext();function Ge(e){return M("MuiTable",e)}B("MuiTable",["root","stickyHeader"]);const Ve=e=>{const{classes:t,stickyHeader:s}=e;return k({root:["root",s&&"stickyHeader"]},Ge,t)},Je=j("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.stickyHeader&&t.stickyHeader]}})(H(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),ee="table",We=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTable"}),{className:n,component:a=ee,padding:l="normal",size:i="medium",stickyHeader:d=!1,...u}=r,c={...r,component:a,padding:l,size:i,stickyHeader:d},p=Ve(c),v=x.useMemo(()=>({padding:l,size:i,stickyHeader:d}),[l,i,d]);return o.jsx(ge.Provider,{value:v,children:o.jsx(Je,{as:a,role:a===ee?null:"table",ref:s,className:C(p.root,n),ownerState:c,...u})})}),z=x.createContext();function _e(e){return M("MuiTableBody",e)}B("MuiTableBody",["root"]);const Xe=e=>{const{classes:t}=e;return k({root:["root"]},_e,t)},Ke=j("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),qe={variant:"body"},te="tbody",Qe=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableBody"}),{className:n,component:a=te,...l}=r,i={...r,component:a},d=Xe(i);return o.jsx(z.Provider,{value:qe,children:o.jsx(Ke,{className:C(d.root,n),as:a,ref:s,role:a===te?null:"rowgroup",ownerState:i,...l})})});function Ye(e){return M("MuiTableCell",e)}const Ze=B("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),et=e=>{const{classes:t,variant:s,align:r,padding:n,size:a,stickyHeader:l}=e,i={root:["root",s,l&&"stickyHeader",r!=="inherit"&&`align${h(r)}`,n!=="normal"&&`padding${h(n)}`,`size${h(a)}`]};return k(i,Ye,t)},tt=j("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${h(s.size)}`],s.padding!=="normal"&&t[`padding${h(s.padding)}`],s.align!=="inherit"&&t[`align${h(s.align)}`],s.stickyHeader&&t.stickyHeader]}})(H(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Re(R(e.palette.divider,1),.88):we(R(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Ze.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),D=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableCell"}),{align:n="inherit",className:a,component:l,padding:i,scope:d,size:u,sortDirection:c,variant:p,...v}=r,m=x.useContext(ge),b=x.useContext(z),T=b&&b.variant==="head";let f;l?f=l:f=T?"th":"td";let y=d;f==="td"?y=void 0:!y&&T&&(y="col");const $=p||b&&b.variant,S={...r,align:n,component:f,padding:i||(m&&m.padding?m.padding:"normal"),size:u||(m&&m.size?m.size:"medium"),sortDirection:c,stickyHeader:$==="head"&&m&&m.stickyHeader,variant:$},F=et(S);let J=null;return c&&(J=c==="asc"?"ascending":"descending"),o.jsx(tt,{as:f,ref:s,className:C(F.root,a),"aria-sort":J,scope:y,ownerState:S,...v})});function ot(e){return M("MuiTableContainer",e)}B("MuiTableContainer",["root"]);const st=e=>{const{classes:t}=e;return k({root:["root"]},ot,t)},rt=j("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),at=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableContainer"}),{className:n,component:a="div",...l}=r,i={...r,component:a},d=st(i);return o.jsx(rt,{ref:s,as:a,className:C(d.root,n),ownerState:i,...l})});function nt(e){return M("MuiTableHead",e)}B("MuiTableHead",["root"]);const it=e=>{const{classes:t}=e;return k({root:["root"]},nt,t)},lt=j("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),ct={variant:"head"},oe="thead",dt=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableHead"}),{className:n,component:a=oe,...l}=r,i={...r,component:a},d=it(i);return o.jsx(z.Provider,{value:ct,children:o.jsx(lt,{as:a,className:C(d.root,n),ref:s,role:a===oe?null:"rowgroup",ownerState:i,...l})})});function pt(e){return M("MuiTableRow",e)}const se=B("MuiTableRow",["root","selected","hover","head","footer"]),ut=e=>{const{classes:t,selected:s,hover:r,head:n,footer:a}=e;return k({root:["root",s&&"selected",r&&"hover",n&&"head",a&&"footer"]},pt,t)},xt=j("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.head&&t.head,s.footer&&t.footer]}})(H(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${se.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${se.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:R(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:R(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),re="tr",fe=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableRow"}),{className:n,component:a=re,hover:l=!1,selected:i=!1,...d}=r,u=x.useContext(z),c={...r,component:a,hover:l,selected:i,head:u&&u.variant==="head",footer:u&&u.variant==="footer"},p=ut(c);return o.jsx(xt,{as:a,ref:s,className:C(p.root,n),role:a===re?null:"row",ownerState:c,...d})}),mt=Ie(o.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}));function bt(e){return M("MuiTableSortLabel",e)}const N=B("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc","directionDesc","directionAsc"]),gt=e=>{const{classes:t,direction:s,active:r}=e,n={root:["root",r&&"active",`direction${h(s)}`],icon:["icon",`iconDirection${h(s)}`]};return k(n,bt,t)},ft=j(ce,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.active&&t.active]}})(H(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${N.icon}`]:{opacity:.5}},[`&.${N.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${N.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}}))),yt=j("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.icon,t[`iconDirection${h(s.direction)}`]]}})(H(({theme:e})=>({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none",variants:[{props:{direction:"desc"},style:{transform:"rotate(0deg)"}},{props:{direction:"asc"},style:{transform:"rotate(180deg)"}}]}))),vt=x.forwardRef(function(t,s){const r=I({props:t,name:"MuiTableSortLabel"}),{active:n=!1,children:a,className:l,direction:i="asc",hideSortIcon:d=!1,IconComponent:u=mt,slots:c={},slotProps:p={},...v}=r,m={...r,active:n,direction:i,hideSortIcon:d,IconComponent:u},b=gt(m),T={slots:c,slotProps:p},[f,y]=_("root",{elementType:ft,externalForwardedProps:T,ownerState:m,className:C(b.root,l),ref:s}),[$,S]=_("icon",{elementType:yt,externalForwardedProps:T,ownerState:m,className:b.icon});return o.jsxs(f,{disableRipple:!0,component:"span",...y,...v,children:[a,d&&!n?null:o.jsx($,{as:u,...S})]})}),L={xs:.5,sm:1},U={xs:1,md:1.5},ht={xs:1.5,md:2},Ct=X.array(X.number().int()),V=()=>{const{data:e,isFetching:t}=ze({types:["table","view"]}),{searchParams:s,updateSearchParams:r}=xe(),n=s.get("table")??null,a=x.useCallback(u=>{if(!e)return 0;const c=e.findIndex(({name:p})=>p===u);return c!==-1?c:0},[e]),[l,i]=x.useState(0),d=u=>{e&&r({table:e[a(u.target.value)].name,hiddenColumns:null})};return x.useEffect(()=>{e&&i(a(n??e[0].name))},[n,e,a]),{data:e,selected:e&&e.length>0?e[l]:null,handleChange:d,isFetching:t}},ye=()=>{const{searchParams:e,updateSearchParams:t}=xe(),s=e.get("hiddenColumns")??null,r=x.useMemo(()=>{if(!s)return[];const{data:l,error:i}=Fe(()=>JSON.parse(s));if(i)return[];const d=Ct.safeParse(l);return d.success?Array.from(new Set(d.data)):[]},[s]),n=x.useCallback(l=>()=>{const i=r.length?[]:Array.from({length:l},(d,u)=>u);t({hiddenColumns:JSON.stringify(i)},!0)},[r,t]),a=x.useCallback(l=>()=>{const i=Pe(r,l);t({hiddenColumns:JSON.stringify(i)},!0)},[r,t]);return{hiddenColumns:r,createToggleAllColumns:n,createToggleHandler:a}},ve={borderRadius:1,overflow:"hidden","&::before":{borderBottom:0},"&:hover:not(.Mui-disabled, .Mui-error):before":{borderBottom:0},"& input":{p:L},"& div[role='combobox']":{p:L}},he={sx:{width:"18rem"},size:"small",variant:"filled"},jt=()=>o.jsxs(g,{sx:{position:"relative"},children:[o.jsx(de,{...he,disabled:!0,slotProps:{input:{sx:ve}}}),o.jsx(g,{sx:{position:"absolute",inset:0,display:"grid",placeItems:"center",color:"text.secondary"},children:o.jsx(ke,{color:"inherit",size:16})})]}),Tt=()=>{const{data:e,selected:t,handleChange:s,isFetching:r}=V();return!e||!t||r?o.jsx(jt,{}):o.jsxs(de,{select:!0,value:t.name,onChange:s,...he,slotProps:{select:{IconComponent:ue,MenuProps:{slotProps:{paper:{sx:{maxHeight:350}}},elevation:3}},input:{sx:{...ve,"& #tables-ias":{color:"text.secondary",m:0}},startAdornment:o.jsx(Ae,{position:"start",id:"tables-ias",children:o.jsx(w,{variant:"caption",color:"inherit",sx:{p:.5,borderRadius:1,bgcolor:"divider",textTransform:"uppercase"},children:t.type})})}},children:[o.jsxs(K,{dense:!0,onClickCapture:n=>n.stopPropagation(),children:[o.jsx(Le,{fontSize:"small",sx:{mr:.5}})," 新增資料表"]}),o.jsx(E,{}),e.map(({name:n},a)=>o.jsx(K,{value:n,dense:!0,children:n},a))]})},ae={edge:"start",tabIndex:-1,disableRipple:!0,size:"small",sx:{py:0}},Ce={bgcolor:"FilledInput.disabledBg","&:hover":{bgcolor:"FilledInput.hoverBg"},borderRadius:1,height:1,width:"auto",aspectRatio:1},St=()=>o.jsx(G,{title:"篩選欄位",arrow:!0,children:o.jsxs("span",{style:{position:"relative"},children:[o.jsx(pe,{loading:!0,centerRipple:!1,size:"small",sx:Ce,children:o.jsx(be,{fontSize:"small"})}),o.jsx(g,{sx:{position:"absolute",top:0,bgcolor:"FilledInput.disabledBg",borderRadius:1,height:1,width:"auto",aspectRatio:1}})]})}),Rt=({columns:e})=>{const[t,s]=x.useState(null),r=c=>s(p=>p?null:c.currentTarget),n=()=>s(null),{hiddenColumns:a,createToggleAllColumns:l,createToggleHandler:i}=ye(),d=a.every(c=>c>e.length-1),u=e.every((c,p)=>a.includes(p));return o.jsxs(o.Fragment,{children:[o.jsx(G,{title:"篩選欄位",arrow:!0,children:o.jsx("span",{children:o.jsx(pe,{onClick:r,centerRipple:!1,size:"small",sx:Ce,children:o.jsx(be,{fontSize:"small"})})})}),o.jsx($e,{open:!!t,anchorEl:t,onClose:n,elevation:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{maxHeight:350}}},children:o.jsxs(Me,{dense:!0,children:[o.jsx(A,{children:o.jsx(w,{variant:"body2",sx:{color:"text.secondary"},children:"篩選欄位"})}),o.jsx(A,{disablePadding:!0,children:o.jsxs(Z,{role:void 0,onClick:l(e.length),dense:!0,children:[o.jsx(Q,{...ae,checked:d,indeterminate:!d&&!u}),o.jsx(q,{primary:"顯示所有"})]})}),o.jsx(E,{sx:{my:.5}}),e.toSorted((c,p)=>c.cid-p.cid).map((c,p)=>o.jsx(A,{disablePadding:!0,children:o.jsxs(Z,{role:void 0,onClick:i(p),dense:!0,children:[o.jsx(Q,{...ae,checked:!a.includes(p)}),o.jsx(q,{sx:{display:"flex",width:1,gap:L,justifyContent:"space-between",my:.5},primary:c.name,secondary:c.type.toUpperCase()})]})},p))]})})]})},wt=()=>{var l;const{selected:e,isFetching:t}=V(),{data:s,isFetching:r}=me({types:["table","view"]});if(r||!s||t||!e)return o.jsx(St,{});const a=(l=s.find(({table:i})=>i===e.name))==null?void 0:l.columns;return o.jsx(Rt,{columns:a??[]})},It=()=>o.jsxs(fe,{children:[o.jsx(D,{sx:{border:"none"},children:o.jsx(Y,{variant:"rounded",animation:"wave",children:o.jsx(w,{variant:"body2",children:"載入中. . ."})})}),[...Array(4)].map((e,t)=>o.jsx(D,{sx:{border:"none"},children:o.jsx(g,{sx:{display:"flex",justifyContent:"flex-end"},children:o.jsx(Y,{variant:"rounded",animation:"wave",children:o.jsx(w,{variant:"body2",children:"載入中. . ."})})})},t))]}),ne={p:.5,borderRadius:1,bgcolor:"divider"},ie={textTransform:"uppercase",lineHeight:1,color:"text.secondary"},kt=({isPk:e,type:t})=>o.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:L,color:"text.secondary"},children:[e&&o.jsx(w,{variant:"caption",sx:{...ne,...ie},children:"PK"}),o.jsx(g,{sx:ne,children:o.jsx(w,{variant:"caption",sx:{...ie,...Be},children:t})})]}),$t=()=>o.jsx(g,{component:"tr","aria-hidden":"true",sx:{position:"absolute",inset:0,borderRadius:3,borderBottomRightRadius:"calc(1 * var(--mui-shape-borderRadius))",borderBottomLeftRadius:"calc(1 * var(--mui-shape-borderRadius))",bgcolor:"divider",opacity:.8,pointerEvents:"none"}}),Mt=()=>{const{selected:e,isFetching:t}=V(),{data:s,isFetching:r}=me({types:["table","view"]}),n=r||!s||t||!e,{hiddenColumns:a}=ye(),l=x.useMemo(()=>{if(!s||!e)return null;const i=s.find(({table:c})=>c===e.name);if(!i)return null;const{columns:d}=i;return d.filter(({cid:c})=>!a.includes(c)).toSorted((c,p)=>c.pk!==p.pk?p.pk-c.pk:c.type==="text"&&p.type!=="text"?-1:c.type!=="text"&&p.type==="text"?1:c.cid-p.cid)},[s,e,a]);return o.jsxs(dt,{sx:{position:"relative"},children:[o.jsx($t,{}),n||!l?o.jsx(It,{}):o.jsx(fe,{children:l.map(i=>{const{cid:d,name:u,type:c}=i,p=i.pk===1,v=c!=="text"&&!p?"flex-end":void 0;return o.jsx(D,{sx:{border:"none",minWidth:"10rem"},children:o.jsxs(g,{sx:{display:"flex",alignItems:"center",justifyContent:v},children:[o.jsx(vt,{active:d===0,direction:"desc",IconComponent:Ne,children:o.jsx(w,{variant:"body2",children:u})}),o.jsx(kt,{isPk:p,type:c})]})},d)})})]})},le=e=>({"--temporary-color":e,bgcolor:"color-mix(in srgb, var(--temporary-color) 30%, transparent 70%)","&:hover":{bgcolor:"color-mix(in srgb, var(--temporary-color) 40%, transparent 60%)"},color:"color-mix(in srgb, var(--temporary-color) 40%, var(--mui-palette-text-primary) 60%)",px:1.5}),Bt=e=>({"--temporary-color":e,bgcolor:"color-mix(in srgb, var(--temporary-color) 90%, var(--mui-palette-text-primary) 10%)","&:hover":{bgcolor:"color-mix(in srgb, var(--temporary-color) 80%, var(--mui-palette-text-primary) 20%)"},color:"color-mix(in srgb, var(--temporary-color) 5%, var(--mui-palette-background-paper) 95%)",px:1.5}),oo=()=>o.jsxs(He,{children:[o.jsxs(g,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:U},children:[o.jsxs(g,{sx:{display:"flex",alignItems:"stretch",gap:U},children:[o.jsx(Tt,{}),o.jsx(wt,{})]}),o.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:U},children:[o.jsx(w,{sx:{color:"text.secondary"},children:"已選取 0 個:"}),o.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:L},children:[o.jsx(G,{title:"以指定值覆蓋選取資料的某個欄位",arrow:!0,children:o.jsx(O,{sx:le("var(--mui-palette-primary-main)"),children:"覆蓋欄位"})}),o.jsx(O,{sx:le("var(--mui-palette-error-main)"),children:"刪除紀錄"})]}),o.jsx(E,{flexItem:!0,orientation:"vertical"}),o.jsx(O,{sx:Bt("var(--mui-palette-primary-main)"),endIcon:o.jsx(ue,{}),children:"標準化"})]})]}),o.jsx(at,{sx:{mt:ht},children:o.jsxs(We,{children:[o.jsx(Mt,{}),o.jsx(Qe,{})]})})]});export{oo as default};
