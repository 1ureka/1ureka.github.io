import{y as o,j as e,B as t,T as c,t as h,q as a,P as j,z as w,r as S}from"./routes-6viKbL0G.js";import{a as B,A,S as I,b as g}from"./ScrollArea-CUK4Cd8N.js";import{A as f}from"./AuthIntro-Mo3rfVOe.js";import{z as m,d as z,e as F,g as u,f as p,c as R}from"./CommentRounded-BPXzCwHo.js";import{S as x}from"./DarkModeRounded-Lrqg7oSU.js";import"./forum-Crq1S1o7.js";import"./ForumRounded-Pin0pi4o.js";import"./useQuery-NVyx1-1v.js";import"./Skeleton-BDqUCout.js";import"./useMutation-DpfIkxrB.js";import"./with-selector-tCt2MiXk.js";const C=m.object({username:m.string().trim().min(4,"使用者名稱至少 4 個字元").max(20,"使用者名稱最多 20 個字元").regex(/^[a-zA-Z0-9 ]+$/,"使用者名稱只能包含英文字母與數字"),password:m.string().trim().min(1,"密碼不能為空")}),v=()=>{const{mutateAsync:n,isPending:d}=z(),i=F({defaultValues:{username:"",password:""},validators:{onBlur:C},onSubmit:async({value:r})=>{if(d)return;const{username:s,password:y}=r,l=await n({username:s,password:y});if(l.error)return console.error(l.error);l.authenticated&&(window.location.href=o.forum_home)},onSubmitInvalid:()=>{console.error("請檢查表單是否填寫正確")}}),b=async r=>{if(r.preventDefault(),!i.state.canSubmit)return console.error("請檢查表單是否填寫正確");i.handleSubmit()};return e.jsxs(x,{component:"form",sx:{p:6,flex:1,justifyContent:"center"},onSubmit:b,children:[e.jsx(t,{sx:{display:"grid",placeItems:"center",mb:2},children:e.jsx(c,{variant:"h4",component:"h2",gutterBottom:!0,sx:{textAlign:"center"},children:"歡迎回來"})}),e.jsx(i.Field,{name:"username",children:r=>e.jsx(h,{required:!0,name:r.name,type:"text",fullWidth:!0,size:"small",variant:"filled",sx:{mb:.5},label:"使用者名稱",error:p(r.state.meta.errors),helperText:u(r.state.meta.errors),value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur})}),e.jsx(i.Field,{name:"password",children:r=>e.jsx(h,{required:!0,name:r.name,type:"password",fullWidth:!0,size:"small",variant:"filled",label:"密碼",sx:{mb:.5},error:p(r.state.meta.errors),helperText:u(r.state.meta.errors),value:r.state.value,onChange:s=>r.handleChange(s.target.value),onBlur:r.handleBlur})}),e.jsx(a,{type:"submit",variant:"contained",loading:d,sx:{mt:1.5,width:.8,alignSelf:"center",borderRadius:99,"&:hover":{bgcolor:"primary.light",scale:1.02},"&:active":{scale:.98},transition:"all 0.2s ease"},children:"登入"})]})},E=()=>e.jsx(R,{maxWidth:"lg",sx:{position:"relative",display:"grid",placeItems:"center",minHeight:"100vh"},children:e.jsxs(j,{sx:{position:"relative",my:10,borderRadius:3,overflow:"hidden",display:"flex",width:1},elevation:6,children:[e.jsx(t,{sx:{flex:1,position:"relative"},children:e.jsxs(x,{sx:{height:1},children:[e.jsx(t,{sx:{mb:2,p:2},children:e.jsx(a,{sx:{textWrap:"nowrap",width:"fit-content"},href:o.forum_home,startIcon:e.jsx(g,{}),children:"返回首頁"})}),e.jsx(v,{}),e.jsx(t,{sx:{mt:3,p:2},children:e.jsxs(c,{variant:"caption",gutterBottom:!0,children:["還沒有帳號？",e.jsx(a,{href:o.forum_register,variant:"outlined",size:"small",sx:{ml:1},children:"註冊"})]})})]})}),e.jsx(t,{className:"mode-dark",sx:{position:"relative",flex:1,bgcolor:"secondary.main",color:"text.primary"},children:e.jsx(f,{})})]})}),T=()=>e.jsxs(j,{sx:{position:"relative",borderRadius:0,width:1},elevation:0,children:[e.jsxs(x,{children:[e.jsx(t,{sx:{mb:2,p:2},children:e.jsx(a,{sx:{textWrap:"nowrap",width:"fit-content"},href:o.forum_home,startIcon:e.jsx(g,{}),children:"返回首頁"})}),e.jsx(v,{}),e.jsx(t,{sx:{mt:3,p:2},children:e.jsxs(c,{variant:"caption",gutterBottom:!0,children:["還沒有帳號？",e.jsx(a,{href:o.forum_register,variant:"outlined",size:"small",sx:{ml:1},children:"註冊"})]})})]}),e.jsx(t,{className:"mode-dark",sx:{position:"relative",bgcolor:"secondary.main",color:"text.primary"},children:e.jsx(f,{})})]});function W(){const{isMd:n}=B();return e.jsxs(A,{children:[n&&e.jsx(t,{sx:{position:"fixed",inset:"0 auto 0 0",width:.5,bgcolor:"secondary.main"}}),e.jsx(I,{children:n?e.jsx(E,{}):e.jsx(T,{})})]})}w.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(W,{})}));
