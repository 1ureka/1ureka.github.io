import{j as o,o as j,P as u,B as e,n,i as h,q as g,x as y,w as f,r as b}from"./routes-C-BkZgtt.js";import{A as I,S as d}from"./SentimentDissatisfiedRounded-B4ExISZa.js";import{b as A,c as v,d as S,e as w,E}from"./AttachFileRounded-DgnORxk3.js";import{a as R,A as B,S as P}from"./ScrollArea-flgazx2N.js";import{u as D}from"./url-BrlhcEA7.js";import{C as k,a as z}from"./post-D3SAkd4W.js";import{N as F}from"./NewPost-C6x4Xpx_.js";import{D as c}from"./SearchRounded-DZA1yzSm.js";import"./ForumRounded-C3uSsqgU.js";import"./Tooltip-Bnxvlrw1.js";import"./DarkModeRounded-Ck9mItf0.js";import"./Skeleton-GnPJ5GGB.js";import"./OpenInNewRounded-CfS1TqBP.js";import"./index-mSkvzYyn.js";import"./NotificationsRounded-bpE9RUC-.js";import"./MenuItem-DhQOCWG4.js";import"./SQLiteClient-NtSnAHyF.js";import"./RefreshRounded-84LV6aIo.js";import"./useMutation-DItdicL4.js";import"./MoreHorizRounded-C50EF73P.js";import"./ArrowOutwardRounded-BFqHlfLA.js";import"./formatters-C9bWSe0O.js";import"./Chip-B_B3n0JL.js";import"./ErrorOutlineRounded-C9AR741E.js";import"./with-selector-CAkLlU_z.js";import"./Motion-BcbNubjr.js";import"./proxy-BmatEpP2.js";import"./AddRounded-BaNbS-MV.js";import"./PublishRounded-gfNSBzzS.js";import"./TopicPicker-BBWvEjBD.js";import"./fuse-D0PIhOkW.js";import"./EmojiMenu-Byke3oAM.js";import"./array-l11GhOAf.js";const M=()=>{var p,m;const s=j(r=>r.breakpoints.up("md")),{searchParams:l}=D(),a=l.get("postId");if(!a)throw new Error("網址缺失 postId 參數");const{data:t,isFetching:x}=z({postId:Number(a)});return o.jsxs(u,{sx:{pb:3,borderRadius:3,border:"1px solid",borderColor:"divider"},elevation:1,children:[o.jsxs(e,{sx:{display:"flex",gap:1,alignItems:"center",p:3},children:[o.jsx(E,{className:"mode-light",sx:{fontSize:48,mr:1,bgcolor:"primary.main",borderRadius:1,color:"background.default",p:1,opacity:.8}}),o.jsx(n,{variant:"h5",component:"h2",children:"編輯貼文"})]}),o.jsx(c,{}),o.jsxs(e,{sx:{position:"relative",px:3,py:1},children:[o.jsx(e,{sx:{position:"absolute",inset:0,bgcolor:"divider",opacity:.35,pointerEvents:"none"}}),o.jsx(h,{variant:"outlined",startIcon:o.jsx(I,{}),size:"small",href:g.forum_home,children:s?"返回首頁":"首頁"})]}),o.jsx(c,{sx:{mb:2}}),x?o.jsx(e,{sx:{py:8,display:"grid",placeItems:"center"},children:o.jsx(y,{})}):t?t.isSelf?o.jsx(F,{mode:"edit",postId:t.id,initialValues:{title:t.title,content:t.content,tags:t.tags,photos:(p=t.photos)==null?void 0:p.map(({name:r,size:i})=>new File([new Uint8Array(i)],r,{type:"image/jpeg"})),attachments:(m=t.attachments)==null?void 0:m.map(({name:r,size:i})=>new File([new Uint8Array(i)],r,{type:"application/pdf"}))}}):o.jsxs(e,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsx(d,{sx:{fontSize:"6rem",color:"action.disabled"}}),o.jsx(n,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"你沒有權限編輯此貼文"})]}):o.jsxs(e,{sx:{py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsx(d,{sx:{fontSize:"6rem",color:"action.disabled"}}),o.jsx(n,{variant:"body1",component:"p",sx:{color:"text.secondary",textAlign:"center"},children:"貼文不存在或已被刪除"})]})]})};function N(){const{isMd:s}=R();return o.jsxs(B,{children:[o.jsx(A,{}),o.jsxs(P,{children:[s?o.jsx(v,{}):o.jsx(S,{}),o.jsx(k,{maxWidth:"lg",sx:{position:"relative",my:10,px:0},children:o.jsx(M,{})}),o.jsx(w,{})]})]})}f.createRoot(document.getElementById("root")).render(o.jsx(b.StrictMode,{children:o.jsx(N,{})}));
